(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{949:function(l,d,a){"use strict";a.d(d,{If:function(){return s},SG:function(){return i}});var e,m,n=a(4697),b=a(5031),f=a(7294);function o(){return(o=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var g,p={light:"chakra-ui-light",dark:"chakra-ui-dark"},c="chakra-ui-color-mode",q=(g=c,{ssr:!1,type:"localStorage",get:function(a){var c;if(!b.jU)return a;try{c=localStorage.getItem(g)||a}catch(d){}return c||a},set:function(a){try{localStorage.setItem(g,a)}catch(b){}}});function r(b,c){var a=b.match(RegExp("(^| )"+c+"=([^;]+)"));return null==a?void 0:a[2]}e=c;var h=f.createContext({});function s(){var a=f.useContext(h);if(void 0===a)throw Error("useColorMode must be used within a ColorModeProvider");return a}function t(a,b){return"cookie"===a.type&&a.ssr?a.get(b):b}function i(c){var r=c.value,s=c.children,a=c.options;a=void 0===a?{}:a;var u=a.useSystemColorMode,g=a.initialColorMode,v=a.disableTransitionOnChange,i=c.colorModeManager,j=void 0===i?q:i,w="dark"===g?"dark":"light",k=f.useState(function(){return t(j,w)}),l=k[0],E=k[1],m=f.useState(function(){return t(j)}),x=m[0],F=m[1],d=f.useMemo(function(){var a,c,d,e;return a={preventTransition:v},d=void 0===(c=a.preventTransition)||c,e={setDataset:function(a){var b=d?e.preventTransition():void 0;document.documentElement.dataset.theme=a,document.documentElement.style.colorScheme=a,null==b||b()},setClassName:function(a){document.body.classList.add(a?p.dark:p.light),document.body.classList.remove(a?p.light:p.dark)},query:function(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme:function(b){var a;return(null!=(a=e.query().matches)?a:"dark"===b)?"dark":"light"},addListener:function(d){var a=e.query(),c=function(a){d(a.matches?"dark":"light")};return(0,b.mf)(a.addListener)?a.addListener(c):a.addEventListener("change",c),function(){(0,b.mf)(a.removeListener)?a.removeListener(c):a.removeEventListener("change",c)}},preventTransition:function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(a),function(){window.getComputedStyle(document.body),requestAnimationFrame(function(){requestAnimationFrame(function(){document.head.removeChild(a)})})}}}},[v]),y=d.getSystemTheme,z=d.setClassName,A=d.setDataset,B=d.addListener,o="system"!==g||l?l:x,e=f.useCallback(function(b){var a="system"===b?y():b;E(a),z("dark"===a),A(a),j.set(a)},[j,y,z,A]);(0,n.a)(function(){"system"===g&&F(y())},[]),f.useEffect(function(){var a=j.get();if(a){e(a);return}if("system"===g){e("system");return}e(w)},[j,w,g,e]);var C=f.useCallback(function(){e("dark"===o?"light":"dark")},[o,e]);f.useEffect(function(){if(u)return B(e)},[u,B,e]);var D=f.useMemo(function(){return{colorMode:null!=r?r:o,toggleColorMode:r?b.ZT:C,setColorMode:r?b.ZT:e}},[o,C,e,r]);return f.createElement(h.Provider,{value:D},s)}b.Ts&&(h.displayName="ColorModeContext"),b.Ts&&(i.displayName="ColorModeProvider");var j=function(a){var c=f.useMemo(function(){return{colorMode:"dark",toggleColorMode:b.ZT,setColorMode:b.ZT}},[]);return f.createElement(h.Provider,o({value:c},a))};b.Ts&&(j.displayName="DarkMode");var k=function(a){var c=f.useMemo(function(){return{colorMode:"light",toggleColorMode:b.ZT,setColorMode:b.ZT}},[]);return f.createElement(h.Provider,o({value:c},a))};b.Ts&&(k.displayName="LightMode")},4697:function(e,c,a){"use strict";a.d(c,{a:function(){return f},u:function(){return g}});var d=a(5031),b=a(7294),f=d.jU?b.useLayoutEffect:b.useEffect;function g(c,a){void 0===a&&(a=[]);var d=b.useRef(c);return f(function(){d.current=c}),b.useCallback(function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return null==d.current?void 0:d.current.apply(d,c)},a)}},894:function(g,c,a){"use strict";a.d(c,{JO:function(){return f}});var d=a(1439),e=a(5031),b=a(7294);function h(){return(h=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var i=["as","viewBox","color","focusable","children","className","__css"],j={path:b.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},b.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),b.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),b.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},f=(0,d.Gp)(function(a,o){var c=a.as,f=a.viewBox,g=a.color,k=a.focusable,l=a.children,p=a.className,q=a.__css,m=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,i),r=(0,e.cx)("chakra-icon",p),s=h({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:void 0===g?"currentColor":g},q),n={ref:o,focusable:void 0!==k&&k,className:r,__css:s},t=null!=f?f:j.viewBox;if(c&&"string"!=typeof c)return b.createElement(d.m$.svg,h({as:c},n,m));var u=null!=l?l:j.path;return b.createElement(d.m$.svg,h({verticalAlign:"middle",viewBox:t},n,m),u)});e.Ts&&(f.displayName="Icon")},6450:function(c,b,a){"use strict";a.d(b,{WR:function(){return f},kr:function(){return e}});var d=a(7294);function e(a){void 0===a&&(a={});var b=a,e=b.strict,i=void 0===e||e,f=b.errorMessage,j=void 0===f?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":f,g=b.name,c=d.createContext(void 0);function h(){var b=d.useContext(c);if(!b&&i){var a=Error(j);throw a.name="ContextError",null==Error.captureStackTrace||Error.captureStackTrace(a,h),a}return b}return c.displayName=g,[c.Provider,h,c]}function f(a){return d.Children.toArray(a).filter(function(a){return d.isValidElement(a)})}},4244:function(V,x,l){"use strict";l.d(x,{Ud:function(){return aC},ZR:function(){return az},c0:function(){return au},cC:function(){return ax},fr:function(){return Y},iv:function(){return aB}});var q,r,o=l(5031),y=l(8554),z=l.n(y);function A(){return(A=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var W=function(a){return/!(important)?$/.test(a)},X=function(a){return(0,o.HD)(a)?a.replace(/!(important)?$/,"").trim():a},Y=function(a,b){return function(d){var e=String(b),h=W(e),f=X(e),g=a?a+"."+f:f,c=(0,o.Kn)(d.__cssMap)&&g in d.__cssMap?d.__cssMap[g].varRef:b;return c=X(c),h?c+" !important":c}};function s(a){var b=a.scale,c=a.transform,d=a.compose;return function(h,a){var f,g=Y(b,h)(a),e=null!=(f=null==c?void 0:c(g,a))?f:g;return d&&(e=d(e,a)),e}}function g(a,b){return function(d){var c={property:d,scale:a};return c.transform=s({scale:a,transform:b}),c}}var Z=function(a){var b=a.rtl,c=a.ltr;return function(a){return"rtl"===a.direction?b:c}},$=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"],_={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:"var(--chakra-blur) var(--chakra-brightness) var(--chakra-contrast) var(--chakra-grayscale) var(--chakra-hue-rotate) var(--chakra-invert) var(--chakra-saturate) var(--chakra-sepia) var(--chakra-drop-shadow)"},aa={backdropFilter:"var(--chakra-backdrop-blur) var(--chakra-backdrop-brightness) var(--chakra-backdrop-contrast) var(--chakra-backdrop-grayscale) var(--chakra-backdrop-hue-rotate) var(--chakra-backdrop-invert) var(--chakra-backdrop-opacity) var(--chakra-backdrop-saturate) var(--chakra-backdrop-sepia)","--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"},ab={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},t="& > :not(style) ~ :not(style)",B=((q={})[t]={marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"},q),C=((r={})[t]={marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"},r);function ac(a,b){return(ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function ad(){ad=function(b,c){return new a(b,void 0,c)};var b=RegExp.prototype,c=new WeakMap;function a(b,e,f){var d=RegExp(b,e);return c.set(d,f||c.get(b)),ac(d,a.prototype)}function d(d,a){var b=c.get(a);return Object.keys(b).reduce(function(a,c){return a[c]=d[b[c]],a},Object.create(null))}return function(b,a){if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&ac(b,a)}(a,RegExp),a.prototype.exec=function(c){var a=b.exec.call(this,c);return a&&(a.groups=d(a,this)),a},a.prototype[Symbol.replace]=function(e,a){if("string"==typeof a){var f=c.get(this);return b[Symbol.replace].call(this,e,a.replace(/\$<([^>]+)>/g,function(b,a){return"$"+f[a]}))}if("function"==typeof a){var g=this;return b[Symbol.replace].call(this,e,function(){var b=arguments;return"object"!=typeof b[b.length-1]&&(b=[].slice.call(b)).push(d(b,g)),a.apply(this,b)})}return b[Symbol.replace].call(this,e,a)},ad.apply(this,arguments)}var D={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},ae=new Set(Object.values(D)),af=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),ag=function(a){return a.trim()},ah=function(a){return(0,o.HD)(a)&&a.includes("(")&&a.includes(")")},ai=function(a){var b=parseFloat(a.toString()),c=a.toString().replace(String(b),"");return{unitless:!c,value:b,unit:c}},h=function(a){return function(b){return a+"("+b+")"}},c={filter:function(a){return"auto"!==a?a:_},backdropFilter:function(a){return"auto"!==a?a:aa},ring:function(a){var b;return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":b=c.px(a),boxShadow:"var(--chakra-ring-offset-shadow), var(--chakra-ring-shadow), var(--chakra-shadow, 0 0 #0000)"}},bgClip:function(a){return"text"===a?{color:"transparent",backgroundClip:"text"}:{backgroundClip:a}},transform:function(a){return"auto"===a?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat($).join(" "):"auto-gpu"===a?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat($).join(" "):a},px:function(a){return null==a?a:ai(a).unitless||(0,o.hj)(a)?a+"px":a},fraction:function(a){return!(0,o.hj)(a)||a>1?a:100*a+"%"},float:function(a,b){return"rtl"===b.direction?({left:"right",right:"left"})[a]:a},degree:function(a){if((0,o.FS)(a)||null==a)return a;var b=(0,o.HD)(a)&&!a.endsWith("deg");return(0,o.hj)(a)||b?a+"deg":a},gradient:function(b,a){return function(a,m){if(null==a||af.has(a))return a;var e,f,g=null!=(e=null==(f=ad(/(^[a-z-A-Z]+)\(((.*))\)/g,{type:1,values:2}).exec(a))?void 0:f.groups)?e:{},b=g.type,h=g.values;if(!b||!h)return a;var j=b.includes("-gradient")?b:b+"-gradient",i=h.split(",").map(ag).filter(Boolean),d=i[0],c=i.slice(1);if((null==c?void 0:c.length)===0)return a;var k=d in D?D[d]:d;c.unshift(k);var l=c.map(function(a){if(ae.has(a))return a;var d=a.indexOf(" "),e=-1!==d?[a.substr(0,d),a.substr(d+1)]:[a],f=e[0],b=e[1],c=ah(b)?b:b&&b.split(" "),g="colors."+f,h=g in m.__cssMap?m.__cssMap[g].varRef:f;return c?[h].concat(Array.isArray(c)?c:[c]).join(" "):h});return j+"("+l.join(", ")+")"}(b,null!=a?a:{})},blur:h("blur"),opacity:h("opacity"),brightness:h("brightness"),contrast:h("contrast"),dropShadow:h("drop-shadow"),grayscale:h("grayscale"),hueRotate:h("hue-rotate"),invert:h("invert"),saturate:h("saturate"),sepia:h("sepia"),bgImage:function(a){return null==a?a:ah(a)||af.has(a)?a:"url("+a+")"},outline:function(a){var b="0"===String(a)||"none"===String(a);return null!==a&&b?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:a}},flexDirection:function(b){var c,d=null!=(c=ab[b])?c:{},e=d.space,f=d.divide,a={flexDirection:b};return e&&(a[e]=1),f&&(a[f]=1),a}},a={borderWidths:g("borderWidths"),borderStyles:g("borderStyles"),colors:g("colors"),borders:g("borders"),radii:g("radii",c.px),space:g("space",c.px),spaceT:g("space",c.px),degreeT:function(a){return{property:a,transform:c.degree}},prop:function(b,a,c){return A({property:b,scale:a},a&&{transform:s({scale:a,transform:c})})},propT:function(a,b){return{property:a,transform:b}},sizes:g("sizes",c.px),sizesT:g("sizes",c.fraction),shadows:g("shadows"),logical:function(a){var d=a.property,b=a.scale,c=a.transform;return{scale:b,property:Z(d),transform:b?s({scale:b,compose:c}):c}},blur:g("blur",c.blur)},m={background:a.colors("background"),backgroundColor:a.colors("backgroundColor"),backgroundImage:a.propT("backgroundImage",c.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:c.bgClip},bgSize:a.prop("backgroundSize"),bgPosition:a.prop("backgroundPosition"),bg:a.colors("background"),bgColor:a.colors("backgroundColor"),bgPos:a.prop("backgroundPosition"),bgRepeat:a.prop("backgroundRepeat"),bgAttachment:a.prop("backgroundAttachment"),bgGradient:a.propT("backgroundImage",c.gradient),bgClip:{transform:c.bgClip}};Object.assign(m,{bgImage:m.backgroundImage,bgImg:m.backgroundImage});var b={border:a.borders("border"),borderWidth:a.borderWidths("borderWidth"),borderStyle:a.borderStyles("borderStyle"),borderColor:a.colors("borderColor"),borderRadius:a.radii("borderRadius"),borderTop:a.borders("borderTop"),borderBlockStart:a.borders("borderBlockStart"),borderTopLeftRadius:a.radii("borderTopLeftRadius"),borderStartStartRadius:a.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:a.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:a.radii("borderTopRightRadius"),borderStartEndRadius:a.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:a.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:a.borders("borderRight"),borderInlineEnd:a.borders("borderInlineEnd"),borderBottom:a.borders("borderBottom"),borderBlockEnd:a.borders("borderBlockEnd"),borderBottomLeftRadius:a.radii("borderBottomLeftRadius"),borderBottomRightRadius:a.radii("borderBottomRightRadius"),borderLeft:a.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:a.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:a.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:a.borders(["borderLeft","borderRight"]),borderInline:a.borders("borderInline"),borderY:a.borders(["borderTop","borderBottom"]),borderBlock:a.borders("borderBlock"),borderTopWidth:a.borderWidths("borderTopWidth"),borderBlockStartWidth:a.borderWidths("borderBlockStartWidth"),borderTopColor:a.colors("borderTopColor"),borderBlockStartColor:a.colors("borderBlockStartColor"),borderTopStyle:a.borderStyles("borderTopStyle"),borderBlockStartStyle:a.borderStyles("borderBlockStartStyle"),borderBottomWidth:a.borderWidths("borderBottomWidth"),borderBlockEndWidth:a.borderWidths("borderBlockEndWidth"),borderBottomColor:a.colors("borderBottomColor"),borderBlockEndColor:a.colors("borderBlockEndColor"),borderBottomStyle:a.borderStyles("borderBottomStyle"),borderBlockEndStyle:a.borderStyles("borderBlockEndStyle"),borderLeftWidth:a.borderWidths("borderLeftWidth"),borderInlineStartWidth:a.borderWidths("borderInlineStartWidth"),borderLeftColor:a.colors("borderLeftColor"),borderInlineStartColor:a.colors("borderInlineStartColor"),borderLeftStyle:a.borderStyles("borderLeftStyle"),borderInlineStartStyle:a.borderStyles("borderInlineStartStyle"),borderRightWidth:a.borderWidths("borderRightWidth"),borderInlineEndWidth:a.borderWidths("borderInlineEndWidth"),borderRightColor:a.colors("borderRightColor"),borderInlineEndColor:a.colors("borderInlineEndColor"),borderRightStyle:a.borderStyles("borderRightStyle"),borderInlineEndStyle:a.borderStyles("borderInlineEndStyle"),borderTopRadius:a.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:a.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:a.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:a.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(b,{rounded:b.borderRadius,roundedTop:b.borderTopRadius,roundedTopLeft:b.borderTopLeftRadius,roundedTopRight:b.borderTopRightRadius,roundedTopStart:b.borderStartStartRadius,roundedTopEnd:b.borderStartEndRadius,roundedBottom:b.borderBottomRadius,roundedBottomLeft:b.borderBottomLeftRadius,roundedBottomRight:b.borderBottomRightRadius,roundedBottomStart:b.borderEndStartRadius,roundedBottomEnd:b.borderEndEndRadius,roundedLeft:b.borderLeftRadius,roundedRight:b.borderRightRadius,roundedStart:b.borderInlineStartRadius,roundedEnd:b.borderInlineEndRadius,borderStart:b.borderInlineStart,borderEnd:b.borderInlineEnd,borderTopStartRadius:b.borderStartStartRadius,borderTopEndRadius:b.borderStartEndRadius,borderBottomStartRadius:b.borderEndStartRadius,borderBottomEndRadius:b.borderEndEndRadius,borderStartRadius:b.borderInlineStartRadius,borderEndRadius:b.borderInlineEndRadius,borderStartWidth:b.borderInlineStartWidth,borderEndWidth:b.borderInlineEndWidth,borderStartColor:b.borderInlineStartColor,borderEndColor:b.borderInlineEndColor,borderStartStyle:b.borderInlineStartStyle,borderEndStyle:b.borderInlineEndStyle});var E={color:a.colors("color"),textColor:a.colors("color"),fill:a.colors("fill"),stroke:a.colors("stroke")},p={boxShadow:a.shadows("boxShadow"),mixBlendMode:!0,blendMode:a.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:a.prop("backgroundBlendMode"),opacity:!0};Object.assign(p,{shadow:p.boxShadow});var F={filter:{transform:c.filter},blur:a.blur("--chakra-blur"),brightness:a.propT("--chakra-brightness",c.brightness),contrast:a.propT("--chakra-contrast",c.contrast),hueRotate:a.degreeT("--chakra-hue-rotate"),invert:a.propT("--chakra-invert",c.invert),saturate:a.propT("--chakra-saturate",c.saturate),dropShadow:a.propT("--chakra-drop-shadow",c.dropShadow),backdropFilter:{transform:c.backdropFilter},backdropBlur:a.blur("--chakra-backdrop-blur"),backdropBrightness:a.propT("--chakra-backdrop-brightness",c.brightness),backdropContrast:a.propT("--chakra-backdrop-contrast",c.contrast),backdropHueRotate:a.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:a.propT("--chakra-backdrop-invert",c.invert),backdropSaturate:a.propT("--chakra-backdrop-saturate",c.saturate)},n={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:c.flexDirection},experimental_spaceX:{static:B,transform:s({scale:"space",transform:function(a){return null!==a?{"--chakra-space-x":a}:null}})},experimental_spaceY:{static:C,transform:s({scale:"space",transform:function(a){return null!=a?{"--chakra-space-y":a}:null}})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:a.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:a.space("gap"),rowGap:a.space("rowGap"),columnGap:a.space("columnGap")};Object.assign(n,{flexDir:n.flexDirection});var u={gridGap:a.space("gridGap"),gridColumnGap:a.space("gridColumnGap"),gridRowGap:a.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},G={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:c.outline},outlineOffset:!0,outlineColor:a.colors("outlineColor")},f={width:a.sizesT("width"),inlineSize:a.sizesT("inlineSize"),height:a.sizes("height"),blockSize:a.sizes("blockSize"),boxSize:a.sizes(["width","height"]),minWidth:a.sizes("minWidth"),minInlineSize:a.sizes("minInlineSize"),minHeight:a.sizes("minHeight"),minBlockSize:a.sizes("minBlockSize"),maxWidth:a.sizes("maxWidth"),maxInlineSize:a.sizes("maxInlineSize"),maxHeight:a.sizes("maxHeight"),maxBlockSize:a.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:a.propT("float",c.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(f,{w:f.width,h:f.height,minW:f.minWidth,maxW:f.maxWidth,minH:f.minHeight,maxH:f.maxHeight,overscroll:f.overscrollBehavior,overscrollX:f.overscrollBehaviorX,overscrollY:f.overscrollBehaviorY});var H={listStyleType:!0,listStylePosition:!0,listStylePos:a.prop("listStylePosition"),listStyleImage:!0,listStyleImg:a.prop("listStyleImage")},aj={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},ak={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},al=function(e,f,b){var c={},d=(0,o.Wf)(e,f,{});for(var a in d)a in b&&null!=b[a]||(c[a]=d[a]);return c},k={position:!0,pos:a.prop("position"),zIndex:a.prop("zIndex","zIndices"),inset:a.spaceT("inset"),insetX:a.spaceT(["left","right"]),insetInline:a.spaceT("insetInline"),insetY:a.spaceT(["top","bottom"]),insetBlock:a.spaceT("insetBlock"),top:a.spaceT("top"),insetBlockStart:a.spaceT("insetBlockStart"),bottom:a.spaceT("bottom"),insetBlockEnd:a.spaceT("insetBlockEnd"),left:a.spaceT("left"),insetInlineStart:a.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:a.spaceT("right"),insetInlineEnd:a.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(k,{insetStart:k.insetInlineStart,insetEnd:k.insetInlineEnd});var I={ring:{transform:c.ring},ringColor:a.colors("--chakra-ring-color"),ringOffset:a.prop("--chakra-ring-offset-width"),ringOffsetColor:a.colors("--chakra-ring-offset-color"),ringInset:a.prop("--chakra-ring-inset")},d={margin:a.spaceT("margin"),marginTop:a.spaceT("marginTop"),marginBlockStart:a.spaceT("marginBlockStart"),marginRight:a.spaceT("marginRight"),marginInlineEnd:a.spaceT("marginInlineEnd"),marginBottom:a.spaceT("marginBottom"),marginBlockEnd:a.spaceT("marginBlockEnd"),marginLeft:a.spaceT("marginLeft"),marginInlineStart:a.spaceT("marginInlineStart"),marginX:a.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:a.spaceT("marginInline"),marginY:a.spaceT(["marginTop","marginBottom"]),marginBlock:a.spaceT("marginBlock"),padding:a.space("padding"),paddingTop:a.space("paddingTop"),paddingBlockStart:a.space("paddingBlockStart"),paddingRight:a.space("paddingRight"),paddingBottom:a.space("paddingBottom"),paddingBlockEnd:a.space("paddingBlockEnd"),paddingLeft:a.space("paddingLeft"),paddingInlineStart:a.space("paddingInlineStart"),paddingInlineEnd:a.space("paddingInlineEnd"),paddingX:a.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:a.space("paddingInline"),paddingY:a.space(["paddingTop","paddingBottom"]),paddingBlock:a.space("paddingBlock")};Object.assign(d,{m:d.margin,mt:d.marginTop,mr:d.marginRight,me:d.marginInlineEnd,marginEnd:d.marginInlineEnd,mb:d.marginBottom,ml:d.marginLeft,ms:d.marginInlineStart,marginStart:d.marginInlineStart,mx:d.marginX,my:d.marginY,p:d.padding,pt:d.paddingTop,py:d.paddingY,px:d.paddingX,pb:d.paddingBottom,pl:d.paddingLeft,ps:d.paddingInlineStart,paddingStart:d.paddingInlineStart,pr:d.paddingRight,pe:d.paddingInlineEnd,paddingEnd:d.paddingInlineEnd});var J={textDecorationColor:a.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:a.shadows("textShadow")},K={clipPath:!0,transform:a.propT("transform",c.transform),transformOrigin:!0,translateX:a.spaceT("--chakra-translate-x"),translateY:a.spaceT("--chakra-translate-y"),skewX:a.degreeT("--chakra-skew-x"),skewY:a.degreeT("--chakra-skew-y"),scaleX:a.prop("--chakra-scale-x"),scaleY:a.prop("--chakra-scale-y"),scale:a.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:a.degreeT("--chakra-rotate")},L={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:a.prop("transitionDuration","transition.duration"),transitionProperty:a.prop("transitionProperty","transition.property"),transitionTimingFunction:a.prop("transitionTimingFunction","transition.easing")},M={fontFamily:a.prop("fontFamily","fonts"),fontSize:a.prop("fontSize","fontSizes",c.px),fontWeight:a.prop("fontWeight","fontWeights"),lineHeight:a.prop("lineHeight","lineHeights"),letterSpacing:a.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},N={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:a.spaceT("scrollMargin"),scrollMarginTop:a.spaceT("scrollMarginTop"),scrollMarginBottom:a.spaceT("scrollMarginBottom"),scrollMarginLeft:a.spaceT("scrollMarginLeft"),scrollMarginRight:a.spaceT("scrollMarginRight"),scrollMarginX:a.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:a.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:a.spaceT("scrollPadding"),scrollPaddingTop:a.spaceT("scrollPaddingTop"),scrollPaddingBottom:a.spaceT("scrollPaddingBottom"),scrollPaddingLeft:a.spaceT("scrollPaddingLeft"),scrollPaddingRight:a.spaceT("scrollPaddingRight"),scrollPaddingX:a.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:a.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function am(a){return(0,o.Kn)(a)&&a.reference?a.reference:String(a)}var an=function(d){for(var b=arguments.length,c=Array(b>1?b-1:0),a=1;a<b;a++)c[a-1]=arguments[a];return c.map(am).join(" "+d+" ").replace(/calc/g,"")},O=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+an.apply(void 0,["+"].concat(c))+")"},P=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+an.apply(void 0,["-"].concat(c))+")"},Q=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+an.apply(void 0,["*"].concat(c))+")"},R=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+an.apply(void 0,["/"].concat(c))+")"},S=function(b){var a=am(b);return null==a||Number.isNaN(parseFloat(a))?Q(a,-1):String(a).startsWith("-")?String(a).slice(1):"-"+a},ao=Object.assign(function(a){return{add:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return ao(O.apply(void 0,[a].concat(d)))},subtract:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return ao(P.apply(void 0,[a].concat(d)))},multiply:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return ao(Q.apply(void 0,[a].concat(d)))},divide:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return ao(R.apply(void 0,[a].concat(d)))},negate:function(){return ao(S(a))},toString:function(){return a.toString()}}},{add:O,subtract:P,multiply:Q,divide:R,negate:S});function ap(a){var c,b,d=(c=a.toString(),void 0===b&&(b="-"),c.replace(/\s+/g,b));return d.includes("\\.")?a:Number.isInteger(parseFloat(a.toString()))?a:d.replace(".","\\.")}var e={hover:function(a,b){return a+":hover "+b+", "+a+"[data-hover] "+b},focus:function(a,b){return a+":focus "+b+", "+a+"[data-focus] "+b},focusVisible:function(a,b){return a+":focus-visible "+b},focusWithin:function(a,b){return a+":focus-within "+b},active:function(a,b){return a+":active "+b+", "+a+"[data-active] "+b},disabled:function(a,b){return a+":disabled "+b+", "+a+"[data-disabled] "+b},invalid:function(a,b){return a+":invalid "+b+", "+a+"[data-invalid] "+b},checked:function(a,b){return a+":checked "+b+", "+a+"[data-checked] "+b},indeterminate:function(a,b){return a+":indeterminate "+b+", "+a+"[aria-checked=mixed] "+b+", "+a+"[data-indeterminate] "+b},readOnly:function(a,b){return a+":read-only "+b+", "+a+"[readonly] "+b+", "+a+"[data-read-only] "+b},expanded:function(a,b){return a+":read-only "+b+", "+a+"[aria-expanded=true] "+b+", "+a+"[data-expanded] "+b},placeholderShown:function(a,b){return a+":placeholder-shown "+b}},j=function(a){return aq(function(b){return a(b,"&")},"[role=group]","[data-group]",".group")},i=function(a){return aq(function(b){return a(b,"~ &")},"[data-peer]",".peer")},aq=function(d){for(var b=arguments.length,c=Array(b>1?b-1:0),a=1;a<b;a++)c[a-1]=arguments[a];return c.map(d).join(", ")},v={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:j(e.hover),_peerHover:i(e.hover),_groupFocus:j(e.focus),_peerFocus:i(e.focus),_groupFocusVisible:j(e.focusVisible),_peerFocusVisible:i(e.focusVisible),_groupActive:j(e.active),_peerActive:i(e.active),_groupDisabled:j(e.disabled),_peerDisabled:i(e.disabled),_groupInvalid:j(e.invalid),_peerInvalid:i(e.invalid),_groupChecked:j(e.checked),_peerChecked:i(e.checked),_groupFocusWithin:j(e.focusWithin),_peerFocusWithin:i(e.focusWithin),_peerPlaceholderShown:i(e.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},T=(0,o.Yd)(v);function ar(k,l){var d,e,f,g,a,h,b,i,j,c;return d=String(k).replace(/\./g,"-"),e=void 0,f=l,{variable:i=(g=d,void 0===(a=f)&&(a=""),"--"+(h=g,void 0===(b=a)&&(b=""),[b,ap(h)].filter(Boolean).join("-"))),reference:(j=i,c=e,"var("+ap(j)+(c?", "+c:"")+")")}}var as=["__cssMap","__cssVars","__breakpoints"],at=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function au(m){var b,c,d,n,e,f,g,h,i,j,k,a=((b=m).__cssMap,b.__cssVars,b.__breakpoints,function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(b,as)),p=(d=a,(0,o.ei)(d,at)),q=(n=a).semanticTokens,r=(h=(e={tokens:p,semanticTokens:q}).tokens,i=e.semanticTokens,j=Object.entries(null!=(f=(0,o.xH)(h))?f:{}).map(function(a){var b=a[0],c=a[1];return[b,{isSemantic:!1,value:c}]}),k=Object.entries(null!=(g=(0,o.xH)(i,1))?g:{}).map(function(a){var b=a[0],c=a[1];return[b,{isSemantic:!0,value:c}]}),(0,o.sq)([].concat(j,k))),s=null==(c=a.config)?void 0:c.cssVarPrefix,l=function(b,g){for(var c={},d={},e=function(){var k=f[a],h=k[0],l=k[1],p=l.isSemantic,e=l.value,m=ar(h,null==g?void 0:g.cssVarPrefix),i=m.variable,j=m.reference;if(!p){if(h.startsWith("space")){var n=h.split("."),q=n[0],r=n.slice(1),s=q+".-"+r.join("."),t=ao.negate(e),u=ao.negate(j);d[s]={value:t,var:i,varRef:u}}return c[i]=e,d[h]={value:e,var:i,varRef:j},"continue"}var x=function(a){var c=[String(h).split(".")[0],a].join(".");return b[c]?(0,ar(c,null==g?void 0:g.cssVarPrefix).reference):a},w=(0,o.Kn)(e)?e:{default:e};c=z()(c,Object.entries(w).reduce(function(a,c){var d,e,b=c[0],f=x(c[1]);return"default"===b?(a[i]=f,a):(a[null!=(d=null==v?void 0:v[b])?d:b]=((e={})[i]=f,e),a)},{})),d[h]={value:j,var:i,varRef:j}},a=0,f=Object.entries(b);a<f.length;a++)if("continue"===e())continue;return{cssVars:c,cssMap:d}}(r,{cssVarPrefix:s}),t=l.cssMap,u=l.cssVars;return Object.assign(a,{__cssVars:A({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},u),__cssMap:t,__breakpoints:(0,o.yn)(a.breakpoints)}),a}function av(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=Array(a);b<a;b++)d[b]=c[b];return d}function aw(a,c){var b="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(b)return(b=b.call(a)).next.bind(b);if(Array.isArray(a)||(b=function(a,c){if(a){if("string"==typeof a)return av(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(a);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return av(a,c)}}(a))||c&&a&&"number"==typeof a.length){b&&(a=b);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w=z()({},m,b,E,n,f,F,I,G,u,{srOnly:{transform:function(a){return!0===a?aj:"focusable"===a?ak:{}}},layerStyle:{processResult:!0,transform:function(a,b,c){return al(b,"layerStyles."+a,c)}},textStyle:{processResult:!0,transform:function(a,b,c){return al(b,"textStyles."+a,c)}},apply:{processResult:!0,transform:function(a,b,c){return al(b,a,c)}}},k,p,d,N,M,J,K,H,L),U=Object.assign({},d,f,n,u,k);(0,o.Yd)(U);var ax=[].concat((0,o.Yd)(w),T),ay=A({},w,v),az=function(a){return a in ay},aA=function(i,a){if(null==a)return a;var b,c,f=function(c){var a,b;return null==(a=i.__cssMap)?void 0:null==(b=a[c])?void 0:b.varRef},d=function(a){var b;return null!=(b=f(a))?b:a},e=a.split(",").map(function(a){return a.trim()}),g=e[0],h=e[1];return a=null!=(b=null!=(c=f(g))?c:d(h))?b:d(a)},aB=function(a){return function(e){var b,d,f,c,g,h;return(f=void 0===(d=(b={theme:e,pseudos:v,configs:w}).configs)?{}:d,c=b.pseudos,g=void 0===c?{}:c,h=b.theme,function l(r,j){void 0===j&&(j=!1);var s,m=(0,o.Pu)(r,h),n=(s=m,function(f){if(!f.__breakpoints)return s;var g=f.__breakpoints,i=g.isResponsive,j=g.toArrayValue,h=g.media,b={};for(var d in s){var a=(0,o.Pu)(s[d],f);if(null!=a){if(!Array.isArray(a=(0,o.Kn)(a)&&i(a)?j(a):a)){b[d]=a;continue}for(var k=a.slice(0,h.length).length,c=0;c<k;c+=1){var e=null==h?void 0:h[c];if(!e){b[d]=a[c];continue}b[e]=b[e]||{},null!=a[c]&&(b[e][d]=a[c])}}}return b})(h),a={};for(var b in n){var p,k,t=n[b],d=(0,o.Pu)(t,h);b in g&&(b=g[b]),p=b,k=d,p.startsWith("--")&&(0,o.HD)(k)&&!(0,o.FS)(k)&&(d=aA(h,d));var e=f[b];if(!0===e&&(e={property:b}),(0,o.Kn)(d)){a[b]=null!=(C=a[b])?C:{},a[b]=z()({},a[b],l(d,!0));continue}var c=null!=(w=null==(x=e)?void 0:null==x.transform?void 0:x.transform(d,h,m))?w:d;c=null!=(y=e)&&y.processResult?l(c,!0):c;var i=(0,o.Pu)(null==(A=e)?void 0:A.property,h);if(!j&&null!=(B=e)&&B.static){var u=(0,o.Pu)(e.static,h);a=z()({},a,u)}if(i&&Array.isArray(i)){for(var w,x,y,A,B,C,q,v=aw(i);!(q=v()).done;)a[q.value]=c;continue}if(i){"&"===i&&(0,o.Kn)(c)?a=z()({},a,c):a[i]=c;continue}if((0,o.Kn)(c)){a=z()({},a,c);continue}a[b]=c}return a})(a)}};function aC(a){return function(b){var c,e,f,g=b.variant,h=b.size,i=b.theme,d=(f=(e=i).__breakpoints,function(h,k,i,l){if(f){var a,c,d={},e=(a=i,c=f.toArrayValue,(0,o.kJ)(a)?a:(0,o.Kn)(a)?c(a):null!=a?[a]:void 0);if(!e)return d;for(var g=e.length,m=1===g,n=!!h.parts,j=function(b){var c,g,p=f.details[b],i=f.details[function(b,c){for(var a=c+1;a<b.length;a++)if(null!=b[a])return a;return -1}(e,b)],j=(0,o.Y2)(p.minW,null==i?void 0:i._minW),a=(0,o.Pu)(null==(c=h[k])?void 0:c[e[b]],l);return a?n?(null==(g=h.parts)||g.forEach(function(b){var c,e;z()(d,((e={})[b]=m?a[b]:((c={})[j]=a[b],c),e))}),"continue"):n?void(d[j]=a):(m?z()(d,a):d[j]=a,"continue"):"continue"},b=0;b<g;b++)if("continue"===j(b))continue;return d}});return z()({},(0,o.Pu)(null!=(c=a.baseStyle)?c:{},b),d(a,"sizes",h,b),d(a,"variants",g,b))}}},1439:function(m,c,a){"use strict";a.d(c,{ZL:function(){return J},f6:function(){return F},"m$":function(){return X},eC:function(){return I},Gp:function(){return S},LP:function(){return K},Lr:function(){return L},jC:function(){return W},mq:function(){return V},Fg:function(){return H}});var n=a(949),d=a(4244),o=a(917),p=a(1683),q=a(5031),e=a(8554),r=a.n(e),f=a(6450),s=a(7294),t=a(7462),g=a(5042),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,g.Z)(function(a){return u.test(a)||111===a.charCodeAt(0)&&110===a.charCodeAt(1)&&91>a.charCodeAt(2)}),v=a(444),w=a(8137),x=a(7278),y=h,z=function(a){return"string"==typeof a&&a.charCodeAt(0)>96?y:function(a){return"theme"!==a}},A=function(b,c,e){var a;if(c){var d=c.shouldForwardProp;a=b.__emotion_forwardProp&&d?function(a){return b.__emotion_forwardProp(a)&&d(a)}:d}return"function"!=typeof a&&e&&(a=b.__emotion_forwardProp),a},B=function(a){var b=a.cache,c=a.serialized,d=a.isStringTag;return(0,v.hC)(b,c,d),(0,x.L)(function(){return(0,v.My)(b,c,d)}),null},i=(function i(a,b){var d,e,c=a.__emotion_real===a,f=c&&a.__emotion_base||a;void 0!==b&&(d=b.label,e=b.target);var g=A(a,b,c),h=g||z(f),j=!h("as");return function(){var l=arguments,m=c&& void 0!==a.__emotion_styles?a.__emotion_styles.slice(0):[];if(void 0!==d&&m.push("label:"+d+";"),null==l[0]|| void 0===l[0].raw)m.push.apply(m,l);else{m.push(l[0][0]);for(var o=l.length,n=1;n<o;n++)m.push(l[n],l[0][n])}var k=(0,p.w)(function(a,c,r){var l=j&&a.as||f,b="",n=[],d=a;if(null==a.theme){for(var o in d={},a)d[o]=a[o];d.theme=(0,s.useContext)(p.T)}"string"==typeof a.className?b=(0,v.fp)(c.registered,n,a.className):null!=a.className&&(b=a.className+" ");var q=(0,w.O)(m.concat(n),c.registered,d);b+=c.key+"-"+q.name,void 0!==e&&(b+=" "+e);var t=j&& void 0===g?z(l):h,i={};for(var k in a)(!j||"as"!==k)&&t(k)&&(i[k]=a[k]);return i.className=b,i.ref=r,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(B,{cache:c,serialized:q,isStringTag:"string"==typeof l}),(0,s.createElement)(l,i))});return k.displayName=void 0!==d?d:"Styled("+("string"==typeof f?f:f.displayName||f.name||"Component")+")",k.defaultProps=a.defaultProps,k.__emotion_real=k,k.__emotion_base=f,k.__emotion_styles=m,k.__emotion_forwardProp=g,Object.defineProperty(k,"toString",{value:function(){return"."+e}}),k.withComponent=function(c,a){return i(c,(0,t.Z)({},b,a,{shouldForwardProp:A(k,a,!0)})).apply(void 0,m)},k}}).bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(a){i[a]=i(a)});var C=i,j=a(9590),D=a.n(j);function E(){return(E=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var F=function(a){var b=a.cssVarsRoot,c=a.theme,e=a.children,f=s.useMemo(function(){return(0,d.c0)(c)},[c]);return s.createElement(p.a,{theme:f},s.createElement(G,{root:b}),e)},G=function(b){var a=b.root,c=[void 0===a?":host, :root":a,"[data-theme]"].join(",");return s.createElement(o.xB,{styles:function(b){var a;return(a={})[c]=b.__cssVars,a}})};function H(){var a=s.useContext(p.T);if(!a)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return a}var b=(0,f.kr)({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});b[0],b[1];var I=function(a){return(0,f.kr)({name:a+"StylesContext",errorMessage:'useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<'+a+' />" '})},J=function(){var a=(0,n.If)().colorMode;return s.createElement(o.xB,{styles:function(b){var e=(0,q.Wf)(b,"styles.global"),c=(0,q.Pu)(e,{theme:b,colorMode:a});if(c)return(0,d.iv)(c)(b)}})};function K(c,a,b){var d=Array.isArray(a)?a:[a],e=Array.isArray(b)?b:[b];return function(f){var g=e.filter(Boolean),b=d.map(function(a,b){var d,e;return"breakpoints"===c?function(f,a,b){if(null==a)return a;var c,d,e=function(c){var a,b;return null==(a=f.__breakpoints)?void 0:null==(b=a.asArray)?void 0:b[c]};return null!=(c=null!=(d=e(a))?d:e(b))?c:b}(f,a,null!=(e=g[b])?e:a):function(f,a,b){if(null==a)return a;var c,d,e=function(c){var a,b;return null==(a=f.__cssMap)?void 0:null==(b=a[c])?void 0:b.value};return null!=(c=null!=(d=e(a))?d:e(b))?c:b}(f,c+"."+a,null!=(d=g[b])?d:a)});return Array.isArray(a)?b:b[0]}}function L(a){return(0,q.CE)(a,["styleConfig","size","variant","colorScheme"])}function M(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var N=new Set([].concat(d.cC,["textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),O=new Set(["htmlWidth","htmlHeight","htmlSize"]),P=["theme","css","__css","sx"],Q=["baseStyle"],R=function(a){var b=a.baseStyle;return function(a){a.theme;var c=a.css,f=a.__css,g=a.sx,h=M(a,P),i=(0,q.lw)(h,function(b,a){return(0,d.ZR)(a)}),j=(0,q.Pu)(b,a),k=Object.assign({},f,j,(0,q.YU)(i),g),e=(0,d.iv)(k)(a.theme);return c?[e,c]:e}};function k(d,b){var c=null!=b?b:{},e=c.baseStyle,a=M(c,Q);a.shouldForwardProp||(a.shouldForwardProp=function(a){return O.has(a)||!N.has(a)});var f=R({baseStyle:e});return C(d,a)(f)}function S(a){return s.forwardRef(a)}var T=["styleConfig"];function U(l,b){void 0===b&&(b={});var e,f,g,h=b,m=h.styleConfig,o=M(h,T),i=(f=(0,n.If)(),g=H(),E({},f,{theme:g})),j=i.theme,p=i.colorMode,t=(0,q.Wf)(j,"components."+l),a=m||t,u=r()({theme:j,colorMode:p},null!=(e=null==a?void 0:a.defaultProps)?e:{},(0,q.YU)((0,q.CE)(o,["children"]))),c=(0,s.useRef)({});if(a){var k=(0,d.Ud)(a)(u);D()(c.current,k)||(c.current=k)}return c.current}function V(b,a){return void 0===a&&(a={}),U(b,a)}function W(b,a){return void 0===a&&(a={}),U(b,a)}var l,X=(l=new Map,new Proxy(k,{apply:function(b,c,a){return k.apply(void 0,a)},get:function(b,a){return l.has(a)||l.set(a,k(a)),l.get(a)}}))},5031:function(e,c,a){"use strict";a.d(c,{Ts:function(){return y},yn:function(){return M},cx:function(){return R},YU:function(){return D},xH:function(){return aa},sq:function(){return F},kJ:function(){return r},jU:function(){return Q},FS:function(){return x},Qr:function(){return u},mf:function(){return s},Ft:function(){return v},hj:function(){return q},Kn:function(){return t},HD:function(){return w},XQ:function(){return ac},Wf:function(){return B},ZT:function(){return Z},lw:function(){return C},Yd:function(){return E},CE:function(){return z},ei:function(){return A},zG:function(){return $},Pu:function(){return Y},Y2:function(){return L}}),a(8554);var f=1/60*1e3,g="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},h="undefined"!=typeof window?function(a){return window.requestAnimationFrame(a)}:function(a){return setTimeout(function(){return a(g())},f)},i=!0,j=!1,k=!1,l={delta:0,timestamp:0},d=["read","update","preRender","render","postRender"],m=d.reduce(function(a,b){return a[b]=function(b){var c=[],d=[],e=0,f=!1,g=new WeakSet,a={schedule:function(a,b,h){void 0===b&&(b=!1),void 0===h&&(h=!1);var i=h&&f,j=i?c:d;return b&&g.add(a),-1===j.indexOf(a)&&(j.push(a),i&&f&&(e=c.length)),a},cancel:function(a){var b=d.indexOf(a);-1!==b&&d.splice(b,1),g.delete(a)},process:function(k){var j;if(f=!0,c=(j=[d,c])[0],(d=j[1]).length=0,e=c.length)for(var h=0;h<e;h++){var i=c[h];i(k),g.has(i)&&(a.schedule(i),b())}f=!1}};return a}(function(){return j=!0}),a},{}),n=function(a){return m[a].process(l)},o=function(a){j=!1,l.delta=i?f:Math.max(Math.min(a-l.timestamp,40),1),l.timestamp=a,k=!0,d.forEach(n),k=!1,j&&(i=!1,h(o))};function p(a){var b=null==a?0:a.length;return b?a[b-1]:void 0}function q(a){return"number"==typeof a}function r(a){return Array.isArray(a)}function s(a){return"function"==typeof a}function t(a){var b=typeof a;return null!=a&&("object"===b||"function"===b)&&!r(a)}function u(a){return t(a)&&0===Object.keys(a).length}function v(a){return null==a}function w(a){return"[object String]"===Object.prototype.toString.call(a)}function x(a){return/^var\(--.+\)$/.test(a)}var y=!1;function z(a,c){var b={};return Object.keys(a).forEach(function(d){c.includes(d)||(b[d]=a[d])}),b}function A(c,a){var b={};return a.forEach(function(a){a in c&&(b[a]=c[a])}),b}var B=function(a){var b=new WeakMap;return function(c,d,f,h){if(void 0===c)return a(c,d,f);b.has(c)||b.set(c,new Map);var e=b.get(c);if(e.has(d))return e.get(d);var g=a(c,d,f,h);return e.set(d,g),g}}(function(a,c,e,b){var d="string"==typeof c?c.split("."):[c];for(b=0;b<d.length&&a;b+=1)a=a[d[b]];return void 0===a?e:a});function C(a,c){var b={};return Object.keys(a).forEach(function(d){var e=a[d];c(e,d,a)&&(b[d]=e)}),b}var D=function(a){return C(a,function(a){return null!=a})},E=function(a){return Object.keys(a)},F=function(a){return a.reduce(function(a,b){var c=b[0],d=b[1];return a[c]=d,a},{})};function G(a){var d,b,c;return null==a?a:(b=parseFloat((d=a).toString()),c=d.toString().replace(String(b),""),{unitless:!c,value:b,unit:c}).unitless||q(a)?a+"px":a}var H=function(a,b){return parseInt(a[1],10)>parseInt(b[1],10)?1:-1},I=function(a){return F(Object.entries(a).sort(H))};function J(b){var a=I(b);return Object.assign(Object.values(a),a)}function K(a){if(!a)return a;var b,c=(a=null!=(b=G(a))?b:a).endsWith("px")?-1:-0.0625;return q(a)?""+(a+c):a.replace(/([0-9]+\.?[0-9]*)/,function(a){return""+(parseFloat(a)+c)})}function L(b,c){var a=["@media screen"];return b&&a.push("and","(min-width: "+G(b)+")"),c&&a.push("and","(max-width: "+G(c)+")"),a.join(" ")}function M(a){if(!a)return null;a.base=null!=(g=a.base)?g:"0px";var g,e,b,c=J(a),f=Object.entries(a).sort(H).map(function(c,e,f){var d,g=c[0],b=c[1],h=null!=(d=f[e+1])?d:[],a=h[1];return a=parseFloat(a)>0?K(a):void 0,{_minW:K(b),breakpoint:g,minW:b,maxW:a,maxWQuery:L(null,a),minWQuery:L(b),minMaxQuery:L(b,a)}}),d=(b=Object.keys(I(e=a)),new Set(b)),h=Array.from(d.values());return{keys:d,normalized:c,isResponsive:function(b){var a=Object.keys(b);return a.length>0&&a.every(function(a){return d.has(a)})},asObject:I(a),asArray:J(a),details:f,media:[null].concat(c.map(function(a){return L(a)}).slice(1)),toArrayValue:function(b){if(!t(b))throw Error("toArrayValue: value must be an object");for(var a=h.map(function(c){var a;return null!=(a=b[c])?a:null});null===p(a);)a.pop();return a},toObjectValue:function(a){if(!Array.isArray(a))throw Error("toObjectValue: value must be an array");return a.reduce(function(a,b,d){var c=h[d];return null!=c&&null!=b&&(a[c]=b),a},{})}}}function N(a){return null!=a&&"object"==typeof a&&"nodeType"in a&&a.nodeType===Node.ELEMENT_NODE}function O(a){if(!N(a))return!1;var b,c=null!=(b=a.ownerDocument.defaultView)?b:window;return a instanceof c.HTMLElement}function P(a){var b;return N(a)&&null!=(b=a.ownerDocument)?b:document}var Q=!!("undefined"!=typeof window&&window.document&&window.document.createElement),R=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return c.filter(Boolean).join(" ")},S=function(a){return a.hasAttribute("tabindex")};function T(a){return!!(a.parentElement&&T(a.parentElement))||a.hidden}function U(a){if(!O(a)||T(a)|| !0===Boolean((f=a).getAttribute("disabled"))|| !0===Boolean(f.getAttribute("aria-disabled")))return!1;var f,e,c,b=a.localName;if(["input","select","textarea","button"].indexOf(b)>=0)return!0;var d={a:function(){return a.hasAttribute("href")},audio:function(){return a.hasAttribute("controls")},video:function(){return a.hasAttribute("controls")}};return b in d?d[b]():"false"!==(c=(e=a).getAttribute("contenteditable"))&&null!=c||S(a)}function V(a){var b;return!!a&&O(a)&&U(a)&&(!S(b=a)|| -1!==b.tabIndex)}var W="input:not([disabled]),select:not([disabled]),textarea:not([disabled]),embed,iframe,object,a[href],area[href],button:not([disabled]),[tabindex],audio[controls],video[controls],*[tabindex]:not([aria-disabled]),*[contenteditable]";function X(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=Array(a);b<a;b++)d[b]=c[b];return d}function Y(b){for(var c=arguments.length,d=Array(c>1?c-1:0),a=1;a<c;a++)d[a-1]=arguments[a];return s(b)?b.apply(void 0,d):b}function b(a){var b;return function(){if(a){for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];b=a.apply(this,e),a=null}return b}}var Z=function(){};b(function(a){return function(){var b=a.condition,c=a.message;b&&y&&console.warn(c)}}),b(function(a){return function(){var b=a.condition,c=a.message;b&&y&&console.error(c)}});var $=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return function(a){return c.reduce(function(a,b){return b(a)},a)}},_=null;function aa(a,b){return(void 0===b&&(b=1/0),(t(a)||Array.isArray(a))&&b)?Object.entries(a).reduce(function(c,d){var e=d[0],a=d[1];return t(a)||r(a)?Object.entries(aa(a,b-1)).forEach(function(a){var b=a[0],d=a[1];c[e+"."+b]=d}):c[e]=a,c},{}):a}var ab={pageX:0,pageY:0};function ac(a,b){return r(a)?a.map(function(a){return null===a?null:b(a)}):t(a)?E(a).reduce(function(c,d){return c[d]=b(a[d]),c},{}):null!=a?b(a):null}Object.freeze(["base","sm","md","lg","xl","2xl"])},8417:function(c,a,b){"use strict";b.d(a,{Z:function(){return ac}});var d=function(){function b(a){var b=this;this._insertTag=function(a){var c;c=0===b.tags.length?b.insertionPoint?b.insertionPoint.nextSibling:b.prepend?b.container.firstChild:b.before:b.tags[b.tags.length-1].nextSibling,b.container.insertBefore(a,c),b.tags.push(a)},this.isSpeedy=void 0===a.speedy||a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var a=b.prototype;return a.hydrate=function(a){a.forEach(this._insertTag)},a.insert=function(c){if(this.ctr%(this.isSpeedy?65e3:1)==0){var b,a;this._insertTag((b=this,(a=document.createElement("style")).setAttribute("data-emotion",b.key),void 0!==b.nonce&&a.setAttribute("nonce",b.nonce),a.appendChild(document.createTextNode("")),a.setAttribute("data-s",""),a))}var d=this.tags[this.tags.length-1];if(this.isSpeedy){var e=function(b){if(b.sheet)return b.sheet;for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].ownerNode===b)return document.styleSheets[a]}(d);try{e.insertRule(c,e.cssRules.length)}catch(f){}}else d.appendChild(document.createTextNode(c));this.ctr++},a.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},b}(),e=Math.abs,f=String.fromCharCode,g=Object.assign;function h(a){return a.trim()}function i(a,b,c){return a.replace(b,c)}function j(a,b){return a.indexOf(b)}function k(a,b){return 0|a.charCodeAt(b)}function l(a,b,c){return a.slice(b,c)}function m(a){return a.length}function n(a){return a.length}function o(a,b){return b.push(a),a}var p=1,q=1,r=0,s=0,t=0,u="";function v(a,b,c,d,e,f,g){return{value:a,root:b,parent:c,type:d,props:e,children:f,line:p,column:q,length:g,return:""}}function w(a,b){return g(v("",null,null,"",null,null,0),a,{length:-a.length},b)}function x(){return t=s>0?k(u,--s):0,q--,10===t&&(q=1,p--),t}function y(){return t=s<r?k(u,s++):0,q++,10===t&&(q=1,p++),t}function z(){return k(u,s)}function A(a,b){return l(u,a,b)}function B(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C(a){return p=q=1,r=m(u=a),s=0,[]}function D(a){return h(A(s-1,G(91===a?a+2:40===a?a+1:a)))}function E(a){for(;t=z();)if(t<33)y();else break;return B(a)>2||B(t)>3?"":" "}function F(b,a){for(;--a&&y()&& !(t<48)&&!(t>102)&&(!(t>57)||!(t<65))&&(!(t>70)||!(t<97)););return A(b,s+(a<6&&32==z()&&32==y()))}function G(a){for(;y();)switch(t){case a:return s;case 34:case 39:34!==a&&39!==a&&G(t);break;case 40:41===a&&G(a);break;case 92:y()}return s}function H(a,b){for(;y();)if(a+t===57)break;else if(a+t===84&&47===z())break;return"/*"+A(b,s-1)+"*"+f(47===a?a:y())}function I(a){for(;!B(z());)y();return A(a,s)}var J="-ms-",K="-moz-",L="-webkit-",M="comm",N="rule",O="decl",P="@keyframes";function Q(b,c){for(var d="",e=n(b),a=0;a<e;a++)d+=c(b[a],a,b,c)||"";return d}function R(a,d,b,c){switch(a.type){case"@import":case O:return a.return=a.return||a.value;case M:return"";case P:return a.return=a.value+"{"+Q(a.children,c)+"}";case N:a.value=a.props.join(",")}return m(b=Q(a.children,c))?a.return=a.value+"{"+b+"}":""}function S(J,C,u,p,q,v,K,g,L){for(var w=0,l=0,b=K,G=0,A=0,r=0,e=1,M=1,n=1,c=0,t="",B=q,h=v,d=p,a=t;M;)switch(r=c,c=y()){case 40:if(108!=r&&58==k(a,b-1)){-1!=j(a+=i(D(c),"&","&\f"),"&\f")&&(n=-1);break}case 34:case 39:case 91:a+=D(c);break;case 9:case 10:case 13:case 32:a+=E(r);break;case 92:a+=F(s-1,7);continue;case 47:switch(z()){case 42:case 47:o(U(H(y(),s),C,u),L);break;default:a+="/"}break;case 123*e:g[w++]=m(a)*n;case 125*e:case 59:case 0:switch(c){case 0:case 125:M=0;case 59+l:A>0&&m(a)-b&&o(A>32?V(a+";",p,u,b-1):V(i(a," ","")+";",p,u,b-2),L);break;case 59:a+=";";default:if(o(d=T(a,C,u,w,l,q,g,t,B=[],h=[],b),v),123===c){if(0===l)S(a,C,d,d,B,v,b,g,h);else switch(99===G&&110===k(a,3)?100:G){case 100:case 109:case 115:S(J,d,d,p&&o(T(J,d,d,0,0,q,g,t,q,B=[],b),h),q,h,b,g,p?B:h);break;default:S(a,d,d,d,[""],h,0,g,h)}}}w=l=A=0,e=n=1,t=a="",b=K;break;case 58:b=1+m(a),A=r;default:if(e<1){if(123==c)--e;else if(125==c&&0==e++&&125==x())continue}switch(a+=f(c),c*e){case 38:n=l>0?1:(a+="\f",-1);break;case 44:g[w++]=(m(a)-1)*n,n=1;break;case 64:45===z()&&(a+=D(y())),G=z(),l=b=m(t=a+=I(s)),c++;break;case 45:45===r&&2==m(a)&&(e=0)}}return v}function T(b,p,q,r,c,s,t,u,g,w,x){for(var j=c-1,d=0===c?s:[""],y=n(d),f=0,k=0,z=0;f<r;++f)for(var a=0,m=l(b,j+1,j=e(k=t[f])),o=b;a<y;++a)(o=h(k>0?d[a]+" "+m:i(m,/&\f/g,d[a])))&&(g[z++]=o);return v(b,p,q,0===c?N:u,g,w,x)}function U(a,b,c){return v(a,b,c,M,f(t),l(a,2,-2),0)}function V(a,c,d,b){return v(a,c,d,O,l(a,0,b),l(a,b+1,-1),b)}var W=function(c,d,e){for(var b=0,a=0;b=a,a=z(),38===b&&12===a&&(d[e]=1),!B(a);)y();return A(c,s)},X=function(b,d){var a=-1,c=44;do switch(B(c)){case 0:38===c&&12===z()&&(d[a]=1),b[a]+=W(s-1,d,a);break;case 2:b[a]+=D(c);break;case 4:if(44===c){b[++a]=58===z()?"&\f":"",d[a]=b[a].length;break}default:b[a]+=f(c)}while(c=y())return b},Y=function(b,c){var a;return a=X(C(b),c),u="",a},Z=new WeakMap,$=function(a){if("rule"===a.type&&a.parent&&!(a.length<1)){for(var g=a.value,b=a.parent,j=a.column===b.column&&a.line===b.line;"rule"!==b.type;)if(!(b=b.parent))return;if((1!==a.props.length||58===g.charCodeAt(0)||Z.get(b))&&!j){Z.set(a,!0);for(var h=[],e=Y(g,h),f=b.props,c=0,i=0;c<e.length;c++)for(var d=0;d<f.length;d++,i++)a.props[i]=h[c]?e[c].replace(/&\f/g,f[d]):f[d]+" "+e[c]}}},_=function(a){if("decl"===a.type){var b=a.value;108===b.charCodeAt(0)&&98===b.charCodeAt(2)&&(a.return="",a.value="")}};function aa(a,b){var c,d;switch(c=a,d=b,45^k(c,0)?(((d<<2^k(c,0))<<2^k(c,1))<<2^k(c,2))<<2^k(c,3):0){case 5103:return L+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return L+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return L+a+K+a+J+a+a;case 6828:case 4268:return L+a+J+a+a;case 6165:return L+a+J+"flex-"+a+a;case 5187:return L+a+i(a,/(\w+).+(:[^]+)/,L+"box-$1$2"+J+"flex-$1$2")+a;case 5443:return L+a+J+"flex-item-"+i(a,/flex-|-self/,"")+a;case 4675:return L+a+J+"flex-line-pack"+i(a,/align-content|flex-|-self/,"")+a;case 5548:return L+a+J+i(a,"shrink","negative")+a;case 5292:return L+a+J+i(a,"basis","preferred-size")+a;case 6060:return L+"box-"+i(a,"-grow","")+L+a+J+i(a,"grow","positive")+a;case 4554:return L+i(a,/([^-])(transform)/g,"$1"+L+"$2")+a;case 6187:return i(i(i(a,/(zoom-|grab)/,L+"$1"),/(image-set)/,L+"$1"),a,"")+a;case 5495:case 3959:return i(a,/(image-set\([^]*)/,L+"$1$`$1");case 4968:return i(i(a,/(.+:)(flex-)?(.*)/,L+"box-pack:$3"+J+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+L+a+a;case 4095:case 3583:case 4068:case 2532:return i(a,/(.+)-inline(.+)/,L+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(m(a)-1-b>6)switch(k(a,b+1)){case 109:if(45!==k(a,b+4))break;case 102:return i(a,/(.+:)(.+)-([^]+)/,"$1"+L+"$2-$3$1"+K+(108==k(a,b+3)?"$3":"$2-$3"))+a;case 115:return~j(a,"stretch")?aa(i(a,"stretch","fill-available"),b)+a:a}break;case 4949:if(115!==k(a,b+1))break;case 6444:switch(k(a,m(a)-3-(~j(a,"!important")&&10))){case 107:return i(a,":",":"+L)+a;case 101:return i(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+L+(45===k(a,14)?"inline-":"")+"box$3$1"+L+"$2$3$1"+J+"$2box$3")+a}break;case 5936:switch(k(a,b+11)){case 114:return L+a+J+i(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return L+a+J+i(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return L+a+J+i(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return L+a+J+a+a}return a}var ab=[function(a,c,d,b){if(a.length> -1&&!a.return)switch(a.type){case O:a.return=aa(a.value,a.length);break;case P:return Q([w(a,{value:i(a.value,"@","@"+L)})],b);case N:if(a.length)return function(a,b){return a.map(b).join("")}(a.props,function(c){var d,e;switch(d=c,(d=/(::plac\w+|:read-\w+)/.exec(d))?d[0]:d){case":read-only":case":read-write":return Q([w(a,{props:[i(c,/:(read-\w+)/,":"+K+"$1")]})],b);case"::placeholder":return Q([w(a,{props:[i(c,/:(plac\w+)/,":"+L+"input-$1")]}),w(a,{props:[i(c,/:(plac\w+)/,":"+K+"$1")]}),w(a,{props:[i(c,/:(plac\w+)/,J+"input-$1")]})],b)}return""})}}],ac=function(a){var b=a.key;if("css"===b){var g=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(g,function(a){-1!==a.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(a),a.setAttribute("data-s",""))})}var h=a.stylisPlugins||ab,i={},j=[];k=a.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+b+' "]'),function(b){for(var c=b.getAttribute("data-emotion").split(" "),a=1;a<c.length;a++)i[c[a]]=!0;j.push(b)});var k,c,o,e,l,m=[R,function(a){return function(b){!b.root&&(b=b.return)&&a(b)}}(function(a){o.insert(a)})],p=(e=[$,_].concat(h,m),l=n(e),function(c,d,f,g){for(var b="",a=0;a<l;a++)b+=e[a](c,d,f,g)||"";return b}),q=function(c){var a,b;return Q((b=S("",null,null,null,[""],a=C(a=c),0,[0],a),u="",b),p)};c=function(b,a,c,d){o=c,q(b?b+"{"+a.styles+"}":a.styles),d&&(f.inserted[a.name]=!0)};var f={key:b,sheet:new d({key:b,container:k,nonce:a.nonce,speedy:a.speedy,prepend:a.prepend,insertionPoint:a.insertionPoint}),nonce:a.nonce,inserted:i,registered:{},insert:c};return f.sheet.hydrate(j),f}},5042:function(b,a){"use strict";a.Z=function(a){var b=Object.create(null);return function(c){return void 0===b[c]&&(b[c]=a(c)),b[c]}}},1683:function(g,c,a){"use strict";a.d(c,{T:function(){return j},a:function(){return m},w:function(){return i}});var b=a(7294),d=a(8417),h=a(7462),e=function(a){var b=new WeakMap;return function(c){if(b.has(c))return b.get(c);var d=a(c);return b.set(c,d),d}};a(8137),a(7278),({}).hasOwnProperty;var f=(0,b.createContext)("undefined"!=typeof HTMLElement?(0,d.Z)({key:"css"}):null);f.Provider;var i=function(a){return(0,b.forwardRef)(function(c,d){var e=(0,b.useContext)(f);return a(c,e,d)})},j=(0,b.createContext)({}),k=function(b,a){if("function"==typeof a){var c;return a(b)}return(0,h.Z)({},b,a)},l=e(function(a){return e(function(b){return k(a,b)})}),m=function(c){var a=(0,b.useContext)(j);return c.theme!==a&&(a=l(a)(c.theme)),(0,b.createElement)(j.Provider,{value:a},c.children)},n=function(b){var a=b.split(".");return a[a.length-1]}},917:function(d,b,a){"use strict";a.d(b,{F4:function(){return k},xB:function(){return i}});var e=a(7294);a(8417);var c=a(1683);a(8679);var f=a(444),g=a(8137),h=a(7278),i=(0,c.w)(function(b,a){var d=b.styles,i=(0,g.O)([d],void 0,(0,e.useContext)(c.T)),j=(0,e.useRef)();return(0,h.j)(function(){var b=a.key+"-global",c=new a.sheet.constructor({key:b,nonce:a.sheet.nonce,container:a.sheet.container,speedy:a.sheet.isSpeedy}),e=!1,d=document.querySelector('style[data-emotion="'+b+" "+i.name+'"]');return a.sheet.tags.length&&(c.before=a.sheet.tags[0]),null!==d&&(e=!0,d.setAttribute("data-emotion",b),c.hydrate([d])),j.current=[c,e],function(){c.flush()}},[a]),(0,h.j)(function(){var c=j.current,b=c[0];if(c[1]){c[1]=!1;return}if(void 0!==i.next&&(0,f.My)(a,i.next,!0),b.tags.length){var d=b.tags[b.tags.length-1].nextElementSibling;b.before=d,b.flush()}a.insert("",i,b,!1)},[a,i.name]),null});function j(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return(0,g.O)(c)}var k=function(){var a=j.apply(void 0,arguments),b="animation-"+a.name;return{name:b,styles:"@keyframes "+b+"{"+a.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8137:function(d,b,a){"use strict";a.d(b,{O:function(){return q}});var e,f=function(b){for(var d,a=0,c=0,e=b.length;e>=4;++c,e-=4)d=(65535&(d=255&b.charCodeAt(c)|(255&b.charCodeAt(++c))<<8|(255&b.charCodeAt(++c))<<16|(255&b.charCodeAt(++c))<<24))*1540483477+((d>>>16)*59797<<16),d^=d>>>24,a=(65535&d)*1540483477+((d>>>16)*59797<<16)^(65535&a)*1540483477+((a>>>16)*59797<<16);switch(e){case 3:a^=(255&b.charCodeAt(c+2))<<16;case 2:a^=(255&b.charCodeAt(c+1))<<8;case 1:a^=255&b.charCodeAt(c),a=(65535&a)*1540483477+((a>>>16)*59797<<16)}return a^=a>>>13,(((a=(65535&a)*1540483477+((a>>>16)*59797<<16))^a>>>15)>>>0).toString(36)},g={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c=a(5042),h=/[A-Z]|^ms/g,i=/_EMO_([^_]+?)_([^]*?)_EMO_/g,j=function(a){return 45===a.charCodeAt(1)},k=function(a){return null!=a&&"boolean"!=typeof a},l=(0,c.Z)(function(a){return j(a)?a:a.replace(h,"-$&").toLowerCase()}),m=function(b,a){switch(b){case"animation":case"animationName":if("string"==typeof a)return a.replace(i,function(c,a,b){return e={name:a,styles:b,next:e},a})}return 1===g[b]||j(b)||"number"!=typeof a||0===a?a:a+"px"};function n(c,d,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return e={name:a.name,styles:a.styles,next:e},a.name;if(void 0!==a.styles){var i,b=a.next;if(void 0!==b)for(;void 0!==b;)e={name:b.name,styles:b.styles,next:e},b=b.next;return a.styles+";"}return o(c,d,a);case"function":if(void 0!==c){var g=e,h=a(c);return e=g,n(c,d,h)}}if(null==d)return a;var f=d[a];return void 0!==f?f:a}function o(h,c,e){var d="";if(Array.isArray(e))for(var g=0;g<e.length;g++)d+=n(h,c,e[g])+";";else for(var b in e){var a=e[b];if("object"!=typeof a)null!=c&& void 0!==c[a]?d+=b+"{"+c[a]+"}":k(a)&&(d+=l(b)+":"+m(b,a)+";");else if(Array.isArray(a)&&"string"==typeof a[0]&&(null==c|| void 0===c[a[0]]))for(var f=0;f<a.length;f++)k(a[f])&&(d+=l(b)+":"+m(b,a[f])+";");else{var i=n(h,c,a);switch(b){case"animation":case"animationName":d+=l(b)+":"+i+";";break;default:d+=b+"{"+i+"}"}}}return d}var p=/label:\s*([^\s;\n{]+)\s*(;|$)/g,q=function(a,g,h){if(1===a.length&&"object"==typeof a[0]&&null!==a[0]&& void 0!==a[0].styles)return a[0];var l,i,j=!0,b="";e=void 0;var c=a[0];null==c|| void 0===c.raw?(j=!1,b+=n(h,g,c)):b+=c[0];for(var d=1;d<a.length;d++)b+=n(h,g,a[d]),j&&(b+=c[d]);p.lastIndex=0;for(var k="";null!==(i=p.exec(b));)k+="-"+i[1];return{name:f(b)+k,styles:b,next:e}}},7278:function(f,e,a){"use strict";a.d(e,{L:function(){return g},j:function(){return h}});var b,c=a(7294),d=!!(b||(b=a.t(c,2))).useInsertionEffect&&(b||(b=a.t(c,2))).useInsertionEffect,g=d||function(a){return a()},h=d||c.useLayoutEffect},444:function(c,a,b){"use strict";function d(c,d,a){var b="";return a.split(" ").forEach(function(a){void 0!==c[a]?d.push(c[a]+";"):b+=a+" "}),b}b.d(a,{My:function(){return f},fp:function(){return d},hC:function(){return e}});var e=function(a,b,d){var c=a.key+"-"+b.name;!1===d&& void 0===a.registered[c]&&(a.registered[c]=b.styles)},f=function(a,b,d){e(a,b,d);var f=a.key+"-"+b.name;if(void 0===a.inserted[b.name]){var c=b;do a.insert(b===c?"."+f:"",c,a.sheet,!0),c=c.next;while(void 0!==c)}}},640:function(a,c,b){"use strict";var d=b(1742),e={"text/plain":"Text","text/html":"Url",default:"Text"};a.exports=function(h,b){var p,j,k,f,l,m,g,c,a,i=!1;b||(b={}),f=b.debug||!1;try{if(m=d(),g=document.createRange(),c=document.getSelection(),a=document.createElement("span"),a.textContent=h,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(a){if(a.stopPropagation(),b.format){if(a.preventDefault(),void 0===a.clipboardData){f&&console.warn("unable to use e.clipboardData"),f&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var c=e[b.format]||e.default;window.clipboardData.setData(c,h)}else a.clipboardData.clearData(),a.clipboardData.setData(b.format,h)}b.onCopy&&(a.preventDefault(),b.onCopy(a.clipboardData))}),document.body.appendChild(a),g.selectNodeContents(a),c.addRange(g),!document.execCommand("copy"))throw Error("copy command was unsuccessful");i=!0}catch(n){f&&console.error("unable to copy using execCommand: ",n),f&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(b.format||"text",h),b.onCopy&&b.onCopy(window.clipboardData),i=!0}catch(o){f&&console.error("unable to copy using clipboardData: ",o),f&&console.error("falling back to prompt"),l=(j="message"in b?b.message:"Copy to clipboard: #{key}, Enter",k=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C",j.replace(/#{\s*key\s*}/g,k)),window.prompt(l,h)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(g):c.removeAllRanges()),a&&document.body.removeChild(a),m()}return i}},8679:function(c,g,d){"use strict";var a=d(9864),h={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},e={"$$typeof":!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b={};function j(c){return a.isMemo(c)?e:b[c.$$typeof]||h}b[a.ForwardRef]={"$$typeof":!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b[a.Memo]=e;var k=Object.defineProperty,l=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,n=Object.getOwnPropertyDescriptor,o=Object.getPrototypeOf,p=Object.prototype;function f(c,a,e){if("string"!=typeof a){if(p){var g=o(a);g&&g!==p&&f(c,g,e)}var d=l(a);m&&(d=d.concat(m(a)));for(var q=j(c),r=j(a),h=0;h<d.length;++h){var b=d[h];if(!i[b]&&!(e&&e[b])&&!(r&&r[b])&&!(q&&q[b])){var s=n(a,b);try{k(c,b,s)}catch(t){}}}}return c}c.exports=f},8554:function(b,j,c){b=c.nmd(b);var M="__lodash_hash_undefined__",N=16,w="[object Arguments]",x="[object Function]",y="[object Object]",O=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a[w]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a[x]=a["[object Map]"]=a["[object Number]"]=a[y]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var m,z,A,n="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,B="object"==typeof self&&self&&self.Object===Object&&self,d=n||B||Function("return this")(),o=j&&!j.nodeType&&j,p=o&&b&&!b.nodeType&&b,q=p&&p.exports===o,Q=q&&n.process,r=function(){try{var a=p&&p.require&&p.require("util").types;if(a)return a;return Q&&Q.binding&&Q.binding("util")}catch(b){}}(),s=r&&r.isTypedArray,C=Array.prototype,D=Function.prototype,k=Object.prototype,l=d["__core-js_shared__"],t=D.toString,E=k.hasOwnProperty,R=(m=/[^.]+$/.exec(l&&l.keys&&l.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",S=k.toString,T=t.call(Object),U=RegExp("^"+t.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),i=q?d.Buffer:void 0,u=d.Symbol,V=d.Uint8Array,W=i?i.allocUnsafe:void 0,X=(z=Object.getPrototypeOf,A=Object,function(a){return z(A(a))}),Y=Object.create,Z=k.propertyIsEnumerable,$=C.splice,_=u?u.toStringTag:void 0,F=function(){try{var a=ar(Object,"defineProperty");return a({},"",{}),a}catch(b){}}(),G=i?i.isBuffer:void 0,aa=Math.max,ab=Date.now,ac=ar(d,"Map"),ad=ar(Object,"create"),ae=function(){function a(){}return function(b){if(!aL(b))return{};if(Y)return Y(b);a.prototype=b;var c=new a;return a.prototype=void 0,c}}();function e(a){var b=-1,d=null==a?0:a.length;for(this.clear();++b<d;){var c=a[b];this.set(c[0],c[1])}}function f(a){var b=-1,d=null==a?0:a.length;for(this.clear();++b<d;){var c=a[b];this.set(c[0],c[1])}}function g(a){var b=-1,d=null==a?0:a.length;for(this.clear();++b<d;){var c=a[b];this.set(c[0],c[1])}}function h(a){var b=this.__data__=new f(a);this.size=b.size}function af(b,c,a){(void 0===a||aD(b[c],a))&&(void 0!==a||c in b)||ai(b,c,a)}function ag(a,b,c){var d=a[b];E.call(a,b)&&aD(d,c)&&(void 0!==c||b in a)||ai(a,b,c)}function ah(b,c){for(var a=b.length;a--;)if(aD(b[a][0],c))return a;return -1}function ai(b,a,c){"__proto__"==a&&F?F(b,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):b[a]=c}e.prototype.clear=function(){this.__data__=ad?ad(null):{},this.size=0},e.prototype.delete=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b},e.prototype.get=function(a){var b=this.__data__;if(ad){var c=b[a];return c===M?void 0:c}return E.call(b,a)?b[a]:void 0},e.prototype.has=function(a){var b=this.__data__;return ad?void 0!==b[a]:E.call(b,a)},e.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=ad&& void 0===b?M:b,this},f.prototype.clear=function(){this.__data__=[],this.size=0},f.prototype.delete=function(c){var a=this.__data__,b=ah(a,c);return!(b<0)&&(b==a.length-1?a.pop():$.call(a,b,1),--this.size,!0)},f.prototype.get=function(c){var a=this.__data__,b=ah(a,c);return b<0?void 0:a[b][1]},f.prototype.has=function(a){return ah(this.__data__,a)> -1},f.prototype.set=function(b,c){var a=this.__data__,d=ah(a,b);return d<0?(++this.size,a.push([b,c])):a[d][1]=c,this},g.prototype.clear=function(){this.size=0,this.__data__={hash:new e,map:new(ac||f),string:new e}},g.prototype.delete=function(a){var b=aq(this,a).delete(a);return this.size-=b?1:0,b},g.prototype.get=function(a){return aq(this,a).get(a)},g.prototype.has=function(a){return aq(this,a).has(a)},g.prototype.set=function(b,c){var a=aq(this,b),d=a.size;return a.set(b,c),this.size+=a.size==d?0:1,this},h.prototype.clear=function(){this.__data__=new f,this.size=0},h.prototype.delete=function(b){var a=this.__data__,c=a.delete(b);return this.size=a.size,c},h.prototype.get=function(a){return this.__data__.get(a)},h.prototype.has=function(a){return this.__data__.has(a)},h.prototype.set=function(c,d){var a=this.__data__;if(a instanceof f){var b=a.__data__;if(!ac||b.length<199)return b.push([c,d]),this.size=++a.size,this;a=this.__data__=new g(b)}return a.set(c,d),this.size=a.size,this};var aj=function(a,e,f){for(var g=-1,b=Object(a),c=f(a),h=c.length;h--;){var d=c[++g];if(!1===e(b[d],d,b))break}return a};function ak(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":_&&_ in Object(a)?as(a):ay(a)}function v(a){return aM(a)&&ak(a)==w}function al(b,a,c,d,e){b!==a&&aj(a,function(g,f){if(e||(e=new h),aL(g))am(b,a,f,c,al,d,e);else{var i=d?d(az(b,f),g,f+"",b,a,e):void 0;void 0===i&&(i=g),af(b,f,i)}},aQ)}function am(g,k,d,n,o,h,e){var c=az(g,d),a=az(k,d),l=e.get(a);if(l){af(g,d,l);return}var b=h?h(c,a,d+"",g,k,e):void 0,f=void 0===b;if(f){var i=aF(a),j=!i&&aI(a),m=!i&&!j&&aO(a);b=a,i||j||m?aF(c)?b=c:aH(c)?b=ap(c):j?(f=!1,b=an(a,!0)):m?(f=!1,b=ao(a,!0)):b=[]:aN(a)||aE(a)?(b=c,aE(c)?b=aP(c):(!aL(c)||aJ(c))&&(b=at(a))):f=!1}f&&(e.set(a,b),o(b,a,n,h,e),e.delete(a)),af(g,d,b)}function an(a,d){if(d)return a.slice();var b=a.length,c=W?W(b):new a.constructor(b);return a.copy(c),c}function ao(a,d){var b,c,e=d?(c=new(b=a.buffer).constructor(b.byteLength),new V(c).set(new V(b)),c):a.buffer;return new a.constructor(e,a.byteOffset,a.length)}function ap(c,a){var b=-1,d=c.length;for(a||(a=Array(d));++b<d;)a[b]=c[b];return a}function aq(c,a){var b=c.__data__;return av(a)?b["string"==typeof a?"string":"hash"]:b.map}function ar(e,f){var b,c,a,d=(b=e,c=f,null==b?void 0:b[c]);return(a=d,!(!aL(a)||aw(a))&&(aJ(a)?U:O).test(aC(a)))?d:void 0}function as(a){var b=E.call(a,_),c=a[_];try{a[_]=void 0;var d=!0}catch(f){}var e=S.call(a);return d&&(b?a[_]=c:delete a[_]),e}function at(a){return"function"!=typeof a.constructor||ax(a)?{}:ae(X(a))}function au(a,b){var c=typeof a;return!!(b=null==b?9007199254740991:b)&&("number"==c||"symbol"!=c&&P.test(a))&&a> -1&&a%1==0&&a<b}function av(b){var a=typeof b;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==b:null===b}function aw(a){return!!R&&R in a}function ax(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||k;return a===c}function ay(a){return S.call(a)}function az(b,a){if(("constructor"!==a||"function"!=typeof b[a])&&"__proto__"!=a)return b[a]}var aA,H,I,J,aB=(H=F?function(a,b){return F(a,"toString",{configurable:!0,enumerable:!1,value:aR(b),writable:!0})}:aS,I=0,J=0,function(){var a=ab(),b=N-(a-J);if(J=a,b>0){if(++I>=800)return arguments[0]}else I=0;return H.apply(void 0,arguments)});function aC(a){if(null!=a){try{return t.call(a)}catch(b){}try{return a+""}catch(c){}}return""}function aD(a,b){return a===b||a!=a&&b!=b}var aE=v(function(){return arguments}())?v:function(a){return aM(a)&&E.call(a,"callee")&&!Z.call(a,"callee")},aF=Array.isArray;function aG(a){return null!=a&&aK(a.length)&&!aJ(a)}function aH(a){return aM(a)&&aG(a)}var aI=G||aT;function aJ(b){if(!aL(b))return!1;var a=ak(b);return a==x||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function aK(a){return"number"==typeof a&&a> -1&&a%1==0&&a<=9007199254740991}function aL(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function aM(a){return null!=a&&"object"==typeof a}function aN(b){if(!aM(b)||ak(b)!=y)return!1;var c=X(b);if(null===c)return!0;var a=E.call(c,"constructor")&&c.constructor;return"function"==typeof a&&a instanceof a&&t.call(a)==T}var K,aO=s?(K=s,function(a){return K(a)}):function(b){return aM(b)&&aK(b.length)&&!!a[ak(b)]};function aP(a){return function(d,e,a,f){var h=!a;a||(a={});for(var g=-1,i=e.length;++g<i;){var b=e[g],c=f?f(a[b],d[b],b,a,d):void 0;void 0===c&&(c=d[b]),h?ai(a,b,c):ag(a,b,c)}return a}(a,aQ(a))}function aQ(a){return aG(a)?function(b,i){var c=aF(b),d=!c&&aE(b),e=!c&&!d&&aI(b),g=!c&&!d&&!e&&aO(b),h=c||d||e||g,f=h?function(b,d){for(var a=-1,c=Array(b);++a<b;)c[a]=d(a);return c}(b.length,String):[],j=f.length;for(var a in b)(i||E.call(b,a))&&!(h&&("length"==a||e&&("offset"==a||"parent"==a)||g&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||au(a,j)))&&f.push(a);return f}(a,!0):function(a){if(!aL(a))return function d(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b}(a);var d=ax(a),c=[];for(var b in a)"constructor"==b&&(d||!E.call(a,b))||c.push(b);return c}(a)}var L=function(a){return function(b,e){var c,a,d;return aB((c=b,a=void 0,d=aS,a=aa(void 0===a?c.length-1:a,0),function(){for(var e=arguments,b=-1,g=aa(e.length-a,0),h=Array(g);++b<g;)h[b]=e[a+b];b=-1;for(var f=Array(a+1);++b<a;)f[b]=e[b];return f[a]=d(h),function(b,c,a){switch(a.length){case 0:return b.call(c);case 1:return b.call(c,a[0]);case 2:return b.call(c,a[0],a[1]);case 3:return b.call(c,a[0],a[1],a[2])}return b.apply(c,a)}(c,this,f)}),b+"")}(function(e,c){var f=-1,b=c.length,d=b>1?c[b-1]:void 0,g=b>2?c[2]:void 0;for(d=a.length>3&&"function"==typeof d?(b--,d):void 0,g&&function e(d,b,a){if(!aL(a))return!1;var c=typeof b;return("number"==c?!!(aG(a)&&au(b,a.length)):"string"==c&&(b in a))&&aD(a[b],d)}(c[0],c[1],g)&&(d=b<3?void 0:d,b=1),e=Object(e);++f<b;){var h=c[f];h&&a(e,h,f,d)}return e})}(function(a,b,c,d){al(a,b,c,d)});function aR(a){return function(){return a}}function aS(a){return a}function aT(){return!1}b.exports=L},3454:function(d,e,a){"use strict";var b,c;d.exports=(null==(b=a.g.process)?void 0:b.env)&&"object"==typeof(null==(c=a.g.process)?void 0:c.env)?a.g.process:a(7663)},1118:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return c(3198)}])},3198:function(eC,aQ,e){"use strict";e.r(aQ),e.d(aQ,{default:function(){return Ci}});var eD,bV,an,ao,eE,bW,aR,c,eF=e(1799),eG=e(5893);e(906);var i=e(7294),bX=e(917),eH=function(){return i.createElement(bX.xB,{styles:'\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: \'kern\';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n    '})},k=e(5031),ap=e(6450),eI=e(4697);e(640);var eJ=function(b,a){var c=i.useRef(!1),d=i.useRef(!1);i.useEffect(function(){if(c.current&&d.current)return b();d.current=!0},a),i.useEffect(function(){return c.current=!0,function(){c.current=!1}},[])};function eK(){var c=i.useRef(!1),a=i.useState(0),b=a[0],d=a[1];return function b(c,a){return void 0===a&&(a=[]),i.useEffect(function(){return function(){return c()}},a)}(function(){c.current=!0}),i.useCallback(function(){c.current||d(b+1)},[b])}var eL=e(3935),aS=(0,ap.kr)({strict:!1,name:"PortalManagerContext"}),eM=aS[0],eN=aS[1];function bY(a){var b=a.children,c=a.zIndex;return i.createElement(eM,{value:{zIndex:c}},b)}function eO(){return(eO=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}k.Ts&&(bY.displayName="PortalManager");var eP=["containerRef"],aT=(0,ap.kr)({strict:!1,name:"PortalContext"}),eQ=aT[0],eR=aT[1],bZ="chakra-portal",eS=function(a){return i.createElement("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:a.zIndex,top:0,left:0,right:0}},a.children)},eT=function(c){var j=c.appendToParentPortal,d=c.children,e=i.useState(null),f=e[0],k=e[1],b=i.useRef(null),g=eK();i.useEffect(g,[]);var l=eR(),a=eN();(0,eI.a)(function(){if(f){var a=f.ownerDocument,c=j&&null!=l?l:a.body;if(c){b.current=a.createElement("div"),b.current.className=bZ,c.appendChild(b.current),g();var d=b.current;return function(){c.contains(d)&&c.removeChild(d)}}}},[f]);var h=null!=a&&a.zIndex?i.createElement(eS,{zIndex:null==a?void 0:a.zIndex},d):d;return b.current?(0,eL.createPortal)(i.createElement(eQ,{value:b.current},h),b.current):i.createElement("span",{ref:function(a){a&&k(a)}})},eU=function(b){var e=b.children,f=b.containerRef,g=b.appendToParentPortal,c=f.current,d=null!=c?c:k.jU?document.body:void 0,a=i.useMemo(function(){var a=null==c?void 0:c.ownerDocument.createElement("div");return a&&(a.className=bZ),a},[c]),h=eK();return((0,eI.a)(function(){h()},[]),(0,eI.a)(function(){if(a&&d)return d.appendChild(a),function(){d.removeChild(a)}},[a,d]),d&&a)?(0,eL.createPortal)(i.createElement(eQ,{value:g?a:null},e),a):null};function S(a){var b=a.containerRef,c=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,eP);return b?i.createElement(eU,eO({containerRef:b},c)):i.createElement(eT,c)}S.defaultProps={appendToParentPortal:!0},S.className=bZ,S.selector=".chakra-portal",k.Ts&&(S.displayName="Portal");var t=e(1439),eV=e(949),aU={body:{classList:{add:function(){},remove:function(){}}},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}}},T=function(){},b$=k.jU?{window:window,document:document}:{window:{document:aU,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:T,removeEventListener:T,getComputedStyle:function(){return{getPropertyValue:function(){return""}}},matchMedia:function(){return{matches:!1,addListener:T,removeListener:T}},requestAnimationFrame:function(a){return"undefined"==typeof setTimeout?(a(),null):setTimeout(a,0)},cancelAnimationFrame:function(a){"undefined"!=typeof setTimeout&&clearTimeout(a)},setTimeout:function(){return 0},clearTimeout:T,setInterval:function(){return 0},clearInterval:T},document:aU},b_=(0,i.createContext)(b$);function b0(a){var d=a.children,e=a.environment,b=(0,i.useState)(null),f=b[0],j=b[1],c=(0,i.useState)(!1),g=c[0],k=c[1];(0,i.useEffect)(function(){return k(!0)},[]);var h=(0,i.useMemo)(function(){var a,b=null==f?void 0:f.ownerDocument,c=null==f?void 0:f.ownerDocument.defaultView;return null!=(a=null!=e?e:b?{document:b,window:c}:void 0)?a:b$},[f,e]);return i.createElement(b_.Provider,{value:h},d,g&&i.createElement("span",{ref:function(a){(0,i.startTransition)(function(){a&&j(a)})}}))}k.Ts&&(b_.displayName="EnvironmentContext"),k.Ts&&(b0.displayName="EnvironmentProvider");var eW=function(a){var g=a.children,h=a.colorModeManager,b=a.portalZIndex,c=a.resetCSS,d=a.theme,e=void 0===d?{}:d,j=a.environment,k=a.cssVarsRoot,f=i.createElement(b0,{environment:j},g);return i.createElement(t.f6,{theme:e,cssVarsRoot:k},i.createElement(eV.SG,{colorModeManager:h,options:e.config},(void 0===c||c)&&i.createElement(eH,null),i.createElement(t.ZL,null),b?i.createElement(bY,{zIndex:b},f):f))},aV={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function L(){return(L=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var b1=L({},aV,{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}});function eX(a,b){eZ(a)&&(a="100%");var c=e$(a);return(a=360===b?a:Math.min(b,Math.max(0,parseFloat(a))),c&&(a=parseInt(String(a*b),10)/100),1e-6>Math.abs(a-b))?1:a=360===b?(a<0?a%b+b:a%b)/parseFloat(String(b)):a%b/parseFloat(String(b))}function eY(a){return Math.min(1,Math.max(0,a))}function eZ(a){return"string"==typeof a&& -1!==a.indexOf(".")&&1===parseFloat(a)}function e$(a){return"string"==typeof a&& -1!==a.indexOf("%")}function e_(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function e0(a){return a<=1?"".concat(100*Number(a),"%"):a}function e1(a){return 1===a.length?"0"+a:String(a)}function e2(c,a,b){c=eX(c,255),a=eX(a,255),b=eX(b,255);var d=Math.max(c,a,b),f=Math.min(c,a,b),e=0,h=0,i=(d+f)/2;if(d===f)h=0,e=0;else{var g=d-f;switch(h=i>.5?g/(2-d-f):g/(d+f),d){case c:e=(a-b)/g+(a<b?6:0);break;case a:e=(b-c)/g+2;break;case b:e=(c-a)/g+4}e/=6}return{h:e,s:h,l:i}}function e3(b,c,a){return(a<0&&(a+=1),a>1&&(a-=1),a<1/6)?b+(c-b)*(6*a):a<.5?c:a<2/3?b+(c-b)*(2/3-a)*6:b}function e4(c,a,b){c=eX(c,255),a=eX(a,255),b=eX(b,255);var d=Math.max(c,a,b),g=Math.min(c,a,b),e=0,f=d-g;if(d===g)e=0;else{switch(d){case c:e=(a-b)/f+(a<b?6:0);break;case a:e=(b-c)/f+2;break;case b:e=(c-a)/f+4}e/=6}return{h:e,s:0===d?0:f/d,v:d}}function e5(b,c,d,e){var a=[e1(Math.round(b).toString(16)),e1(Math.round(c).toString(16)),e1(Math.round(d).toString(16)),];return e&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function e6(a){return e7(a)/255}function e7(a){return parseInt(a,16)}var e8={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},u="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),aq="[\\s|\\(]+(".concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")\\s*\\)?"),ar="[\\s|\\(]+(".concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")\\s*\\)?"),e9={CSS_UNIT:RegExp(u),rgb:RegExp("rgb"+aq),rgba:RegExp("rgba"+ar),hsl:RegExp("hsl"+aq),hsla:RegExp("hsla"+ar),hsv:RegExp("hsv"+aq),hsva:RegExp("hsva"+ar),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function fa(a){return Boolean(e9.CSS_UNIT.exec(String(a)))}var fb=function(){function a(d,n){if(void 0===d&&(d=""),void 0===n&&(n={}),d instanceof a)return d;if("number"==typeof d){d={r:(C=d)>>16,g:(65280&C)>>8,b:255&C}}this.originalInput=d;var C,b,w,x,y,i,g,c,r,s,e,o,p,q,z,A,B,f,j,k,t,u,l,m,v,h=(b=d,f={r:0,g:0,b:0},j=1,k=null,t=null,u=null,l=!1,m=!1,"string"==typeof b&&(b=function d(b){if(0===(b=b.trim().toLowerCase()).length)return!1;var c=!1;if(e8[b])b=e8[b],c=!0;else if("transparent"===b)return{r:0,g:0,b:0,a:0,format:"name"};var a=e9.rgb.exec(b);return a?{r:a[1],g:a[2],b:a[3]}:(a=e9.rgba.exec(b))?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=e9.hsl.exec(b))?{h:a[1],s:a[2],l:a[3]}:(a=e9.hsla.exec(b))?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=e9.hsv.exec(b))?{h:a[1],s:a[2],v:a[3]}:(a=e9.hsva.exec(b))?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=e9.hex8.exec(b))?{r:e7(a[1]),g:e7(a[2]),b:e7(a[3]),a:e6(a[4]),format:c?"name":"hex8"}:(a=e9.hex6.exec(b))?{r:e7(a[1]),g:e7(a[2]),b:e7(a[3]),format:c?"name":"hex"}:(a=e9.hex4.exec(b))?{r:e7(a[1]+a[1]),g:e7(a[2]+a[2]),b:e7(a[3]+a[3]),a:e6(a[4]+a[4]),format:c?"name":"hex8"}:!!(a=e9.hex3.exec(b))&&{r:e7(a[1]+a[1]),g:e7(a[2]+a[2]),b:e7(a[3]+a[3]),format:c?"name":"hex"}}(b)),"object"==typeof b&&(fa(b.r)&&fa(b.g)&&fa(b.b)?(f=(w=b.r,x=b.g,y=b.b,{r:255*eX(w,255),g:255*eX(x,255),b:255*eX(y,255)}),l=!0,m="%"===String(b.r).substr(-1)?"prgb":"rgb"):fa(b.h)&&fa(b.s)&&fa(b.v)?(k=e0(b.s),t=e0(b.v),f=(i=b.h,g=k,c=t,i=6*eX(i,360),g=eX(g,100),c=eX(c,100),r=Math.floor(i),s=i-r,e=c*(1-g),o=c*(1-s*g),p=c*(1-(1-s)*g),q=r%6,z=[c,o,e,e,p,c][q],A=[p,c,c,o,e,e][q],B=[e,e,p,c,c,o][q],{r:255*z,g:255*A,b:255*B}),l=!0,m="hsv"):fa(b.h)&&fa(b.s)&&fa(b.l)&&(k=e0(b.s),u=e0(b.l),f=function(c,b,a){if(c=eX(c,360),b=eX(b,100),a=eX(a,100),0===b)g=a,h=a,f=a;else{var f,g,h,d=a<.5?a*(1+b):a+b-a*b,e=2*a-d;f=e3(e,d,c+1/3),g=e3(e,d,c),h=e3(e,d,c-1/3)}return{r:255*f,g:255*g,b:255*h}}(b.h,k,u),l=!0,m="hsl"),Object.prototype.hasOwnProperty.call(b,"a")&&(j=b.a)),j=e_(j),{ok:l,format:b.format||m,r:Math.min(255,Math.max(f.r,0)),g:Math.min(255,Math.max(f.g,0)),b:Math.min(255,Math.max(f.b,0)),a:j});this.originalInput=d,this.r=h.r,this.g=h.g,this.b=h.b,this.a=h.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(v=n.format)&& void 0!==v?v:h.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=h.ok}return a.prototype.isDark=function(){return 128>this.getBrightness()},a.prototype.isLight=function(){return!this.isDark()},a.prototype.getBrightness=function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},a.prototype.getLuminance=function(){var e,f,g,a=this.toRgb(),b=a.r/255,c=a.g/255,d=a.b/255;return e=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4),.2126*e+.7152*(f=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4))+.0722*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))},a.prototype.getAlpha=function(){return this.a},a.prototype.setAlpha=function(a){return this.a=e_(a),this.roundA=Math.round(100*this.a)/100,this},a.prototype.toHsv=function(){var a=e4(this.r,this.g,this.b);return{h:360*a.h,s:a.s,v:a.v,a:this.a}},a.prototype.toHsvString=function(){var a=e4(this.r,this.g,this.b),b=Math.round(360*a.h),c=Math.round(100*a.s),d=Math.round(100*a.v);return 1===this.a?"hsv(".concat(b,", ").concat(c,"%, ").concat(d,"%)"):"hsva(".concat(b,", ").concat(c,"%, ").concat(d,"%, ").concat(this.roundA,")")},a.prototype.toHsl=function(){var a=e2(this.r,this.g,this.b);return{h:360*a.h,s:a.s,l:a.l,a:this.a}},a.prototype.toHslString=function(){var a=e2(this.r,this.g,this.b),b=Math.round(360*a.h),c=Math.round(100*a.s),d=Math.round(100*a.l);return 1===this.a?"hsl(".concat(b,", ").concat(c,"%, ").concat(d,"%)"):"hsla(".concat(b,", ").concat(c,"%, ").concat(d,"%, ").concat(this.roundA,")")},a.prototype.toHex=function(a){return void 0===a&&(a=!1),e5(this.r,this.g,this.b,a)},a.prototype.toHexString=function(a){return void 0===a&&(a=!1),"#"+this.toHex(a)},a.prototype.toHex8=function(b){var c,d,e,f,g,a,h;return void 0===b&&(b=!1),c=this.r,d=this.g,e=this.b,f=this.a,g=b,a=[e1(Math.round(c).toString(16)),e1(Math.round(d).toString(16)),e1(Math.round(e).toString(16)),e1((h=f,Math.round(255*parseFloat(h)).toString(16))),],g&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")},a.prototype.toHex8String=function(a){return void 0===a&&(a=!1),"#"+this.toHex8(a)},a.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},a.prototype.toRgbString=function(){var a=Math.round(this.r),b=Math.round(this.g),c=Math.round(this.b);return 1===this.a?"rgb(".concat(a,", ").concat(b,", ").concat(c,")"):"rgba(".concat(a,", ").concat(b,", ").concat(c,", ").concat(this.roundA,")")},a.prototype.toPercentageRgb=function(){var a=function(a){return"".concat(Math.round(100*eX(a,255)),"%")};return{r:a(this.r),g:a(this.g),b:a(this.b),a:this.a}},a.prototype.toPercentageRgbString=function(){var a=function(a){return Math.round(100*eX(a,255))};return 1===this.a?"rgb(".concat(a(this.r),"%, ").concat(a(this.g),"%, ").concat(a(this.b),"%)"):"rgba(".concat(a(this.r),"%, ").concat(a(this.g),"%, ").concat(a(this.b),"%, ").concat(this.roundA,")")},a.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var d="#"+e5(this.r,this.g,this.b,!1),a=0,b=Object.entries(e8);a<b.length;a++){var c=b[a],e=c[0],f=c[1];if(d===f)return e}return!1},a.prototype.toString=function(a){var c=Boolean(a);a=null!=a?a:this.format;var b=!1,d=this.a<1&&this.a>=0,e=!c&&d&&(a.startsWith("hex")||"name"===a);return e?"name"===a&&0===this.a?this.toName():this.toRgbString():("rgb"===a&&(b=this.toRgbString()),"prgb"===a&&(b=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(b=this.toHexString()),"hex3"===a&&(b=this.toHexString(!0)),"hex4"===a&&(b=this.toHex8String(!0)),"hex8"===a&&(b=this.toHex8String()),"name"===a&&(b=this.toName()),"hsl"===a&&(b=this.toHslString()),"hsv"===a&&(b=this.toHsvString()),b||this.toHexString())},a.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},a.prototype.clone=function(){return new a(this.toString())},a.prototype.lighten=function(c){void 0===c&&(c=10);var b=this.toHsl();return b.l+=c/100,b.l=eY(b.l),new a(b)},a.prototype.brighten=function(c){void 0===c&&(c=10);var b=this.toRgb();return b.r=Math.max(0,Math.min(255,b.r-Math.round(-(255*(c/100))))),b.g=Math.max(0,Math.min(255,b.g-Math.round(-(255*(c/100))))),b.b=Math.max(0,Math.min(255,b.b-Math.round(-(255*(c/100))))),new a(b)},a.prototype.darken=function(c){void 0===c&&(c=10);var b=this.toHsl();return b.l-=c/100,b.l=eY(b.l),new a(b)},a.prototype.tint=function(a){return void 0===a&&(a=10),this.mix("white",a)},a.prototype.shade=function(a){return void 0===a&&(a=10),this.mix("black",a)},a.prototype.desaturate=function(c){void 0===c&&(c=10);var b=this.toHsl();return b.s-=c/100,b.s=eY(b.s),new a(b)},a.prototype.saturate=function(c){void 0===c&&(c=10);var b=this.toHsl();return b.s+=c/100,b.s=eY(b.s),new a(b)},a.prototype.greyscale=function(){return this.desaturate(100)},a.prototype.spin=function(d){var b=this.toHsl(),c=(b.h+d)%360;return b.h=c<0?360+c:c,new a(b)},a.prototype.mix=function(f,e){void 0===e&&(e=50);var b=this.toRgb(),c=new a(f).toRgb(),d=e/100,g={r:(c.r-b.r)*d+b.r,g:(c.g-b.g)*d+b.g,b:(c.b-b.b)*d+b.b,a:(c.a-b.a)*d+b.a};return new a(g)},a.prototype.analogous=function(c,d){void 0===c&&(c=6),void 0===d&&(d=30);var b=this.toHsl(),e=360/d,f=[this];for(b.h=(b.h-(e*c>>1)+720)%360;--c;)b.h=(b.h+e)%360,f.push(new a(b));return f},a.prototype.complement=function(){var b=this.toHsl();return b.h=(b.h+180)%360,new a(b)},a.prototype.monochromatic=function(b){void 0===b&&(b=6);for(var c=this.toHsv(),f=c.h,g=c.s,d=c.v,e=[],h=1/b;b--;)e.push(new a({h:f,s:g,v:d})),d=(d+h)%1;return e},a.prototype.splitcomplement=function(){var b=this.toHsl(),c=b.h;return[this,new a({h:(c+72)%360,s:b.s,l:b.l}),new a({h:(c+216)%360,s:b.s,l:b.l}),]},a.prototype.onBackground=function(d){var b=this.toRgb(),c=new a(d).toRgb();return new a({r:c.r+(b.r-c.r)*b.a,g:c.g+(b.g-c.g)*b.a,b:c.b+(b.b-c.b)*b.a})},a.prototype.triad=function(){return this.polyad(3)},a.prototype.tetrad=function(){return this.polyad(4)},a.prototype.polyad=function(d){for(var b=this.toHsl(),f=b.h,e=[this],g=360/d,c=1;c<d;c++)e.push(new a({h:(f+c*g)%360,s:b.s,l:b.l}));return e},a.prototype.equals=function(b){return this.toRgbString()===new a(b).toRgbString()},a}();function fc(a){if(void 0===a&&(a={}),void 0!==a.count&&null!==a.count){var d=a.count,b=[];for(a.count=void 0;d>b.length;)a.count=null,a.seed&&(a.seed+=1),b.push(fc(a));return a.count=d,b}var c=fd(a.hue,a.seed),e=fe(c,a),g=ff(c,e,a),f={h:c,s:e,v:g};return void 0!==a.alpha&&(f.a=a.alpha),new fb(f)}function fd(b,c){var d=fh(b),a=fj(d,c);return a<0&&(a=360+a),a}function fe(e,a){if("monochrome"===a.hue)return 0;if("random"===a.luminosity)return fj([0,100],a.seed);var d=fi(e).saturationRange,b=d[0],c=d[1];switch(a.luminosity){case"bright":b=55;break;case"dark":b=c-10;break;case"light":c=55}return fj([b,c],a.seed)}function ff(d,e,c){var a=fg(d,e),b=100;switch(c.luminosity){case"dark":b=a+20;break;case"light":a=(b+a)/2;break;case"random":a=0,b=100}return fj([a,b],c.seed)}function fg(h,c){for(var b=fi(h).lowerBounds,a=0;a<b.length-1;a++){var d=b[a][0],e=b[a][1],f=b[a+1][0],i=b[a+1][1];if(c>=d&&c<=f){var g=(i-e)/(f-d),j=e-g*d;return g*c+j}}return 0}function fh(b){var a=parseInt(b,10);if(!Number.isNaN(a)&&a<360&&a>0)return[a,a];if("string"==typeof b){var c=fl.find(function(a){return a.name===b});if(c){var d=fk(c);if(d.hueRange)return d.hueRange}var e=new fb(b);if(e.isValid){var f=e.toHsv().h;return[f,f]}}return[0,360]}function fi(a){a>=334&&a<=360&&(a-=360);for(var c=0,d=fl;c<d.length;c++){var b=fk(d[c]);if(b.hueRange&&a>=b.hueRange[0]&&a<=b.hueRange[1])return b}throw Error("Color not found")}function fj(a,b){if(void 0===b)return Math.floor(a[0]+Math.random()*(a[1]+1-a[0]));var d=a[1]||1,c=a[0]||0;b=(9301*b+49297)%233280;var e=b/233280;return Math.floor(c+e*(d-c))}function fk(a){var b=a.lowerBounds[0][0],c=a.lowerBounds[a.lowerBounds.length-1][0],d=a.lowerBounds[a.lowerBounds.length-1][1],e=a.lowerBounds[0][1];return{name:a.name,hueRange:a.hueRange,lowerBounds:a.lowerBounds,saturationRange:[b,c],brightnessRange:[d,e]}}var fl=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0],]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50],]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70],]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75],]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40],]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35],]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42],]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73],]},],fm=function(c,a,d){var b=(0,k.Wf)(c,"colors."+a,a);return new fb(b).isValid?b:d},fn=function(a,b){return function(c){var d=fm(c,a);return new fb(d).setAlpha(b).toRgbString()}};function fo(b,a){return void 0===b&&(b="1rem"),void 0===a&&(a="rgba(255, 255, 255, 0.15)"),{backgroundImage:"linear-gradient(\n    45deg,\n    "+a+" 25%,\n    transparent 25%,\n    transparent 50%,\n    "+a+" 50%,\n    "+a+" 75%,\n    transparent 75%,\n    transparent\n  )",backgroundSize:b+" "+b}}function fp(a,b){return function(c){return"dark"===c.colorMode?b:a}}function fq(a){var b=a.orientation,c=a.vertical,d=a.horizontal;return b?"vertical"===b?c:d:{}}function fr(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}var fs=function(){var a,b,c;function d(a){var b=this;this.map={},this.called=!1,this.assert=function(){if(!b.called){b.called=!0;return}throw Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")},this.parts=function(){b.assert();for(var d=arguments.length,e=Array(d),a=0;a<d;a++)e[a]=arguments[a];for(var c=0,f=e;c<f.length;c++){var g=f[c];b.map[g]=b.toPart(g)}return b},this.extend=function(){for(var e=arguments.length,f=Array(e),a=0;a<e;a++)f[a]=arguments[a];for(var c=0,g=f;c<g.length;c++){var d=g[c];d in b.map||(b.map[d]=b.toPart(d))}return b},this.toPart=function(a){var c="chakra-"+(["container","root"].includes(null!=a?a:"")?[b.name]:[b.name,a]).filter(Boolean).join("__");return{className:c,selector:"."+c,toString:function(){return a}}},this.__type={}}return a=d,b=[{key:"selectors",get:function(){return(0,k.sq)(Object.entries(this.map).map(function(a){var b=a[0],c=a[1];return[b,c.selector]}))}},{key:"classNames",get:function(){return(0,k.sq)(Object.entries(this.map).map(function(a){var b=a[0],c=a[1];return[b,c.className]}))}},{key:"keys",get:function(){return Object.keys(this.map)}}],fr(a.prototype,b),c&&fr(a,c),Object.defineProperty(a,"prototype",{writable:!1}),d}();function d(a){return new fs(a)}function ft(a){return(0,k.Kn)(a)&&a.reference?a.reference:String(a)}var fu=function(d){for(var b=arguments.length,c=Array(b>1?b-1:0),a=1;a<b;a++)c[a-1]=arguments[a];return c.map(ft).join(" "+d+" ").replace(/calc/g,"")},b2=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+fu.apply(void 0,["+"].concat(c))+")"},b3=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+fu.apply(void 0,["-"].concat(c))+")"},b4=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+fu.apply(void 0,["*"].concat(c))+")"},b5=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return"calc("+fu.apply(void 0,["/"].concat(c))+")"},b6=function(b){var a=ft(b);return null==a||Number.isNaN(parseFloat(a))?b4(a,-1):String(a).startsWith("-")?String(a).slice(1):"-"+a},aW=Object.assign(function(a){return{add:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return aW(b2.apply(void 0,[a].concat(d)))},subtract:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return aW(b3.apply(void 0,[a].concat(d)))},multiply:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return aW(b4.apply(void 0,[a].concat(d)))},divide:function(){for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return aW(b5.apply(void 0,[a].concat(d)))},negate:function(){return aW(b6(a))},toString:function(){return a.toString()}}},{add:b2,subtract:b3,multiply:b4,divide:b5,negate:b6});function fv(a){var e,c,b,d=(c=a.toString(),void 0===b&&(b="-"),c.replace(/\s+/g,b));return d.includes("\\.")?a:Number.isInteger(parseFloat((e=a).toString()))?a:d.replace(".","\\.")}function j(i,a){var e,b,f,c,g,d,h=(e=i,void 0===(b=null==a?void 0:a.prefix)&&(b=""),"--"+(f=e,void 0===(c=b)&&(c=""),[c,fv(f)].filter(Boolean).join("-")));return{variable:h,reference:(g=h,d=fw(null==a?void 0:a.fallback),"var("+fv(g)+(d?", "+d:"")+")")}}function fw(a){return"string"==typeof a?a:null==a?void 0:a.reference}var b7=d("accordion").parts("root","container","button","panel").extend("icon"),b8=d("alert").parts("title","description","container").extend("icon","spinner"),b9=d("avatar").parts("label","badge","container").extend("excessLabel","group"),ca=d("breadcrumb").parts("link","item","container").extend("separator");d("button").parts();var cb=d("checkbox").parts("control","icon","container").extend("label");d("progress").parts("track","filledTrack").extend("label");var cc=d("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),cd=d("editable").parts("preview","input","textarea"),ce=d("form").parts("container","requiredIndicator","helperText"),cf=d("formError").parts("text","icon"),cg=d("input").parts("addon","field","element"),ch=d("list").parts("container","item","icon"),ci=d("menu").parts("button","list","item").extend("groupTitle","command","divider"),cj=d("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),ck=d("numberinput").parts("root","field","stepperGroup","stepper");d("pininput").parts("field");var cl=d("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),cm=d("progress").parts("label","filledTrack","track"),cn=d("radio").parts("container","control","label"),co=d("select").parts("field","icon"),cp=d("slider").parts("container","track","thumb","filledTrack"),cq=d("stat").parts("container","label","helpText","number","icon"),cr=d("switch").parts("container","track","thumb"),cs=d("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),ct=d("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),cu=d("tag").parts("container","label","closeButton"),cv={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2","3":".75rem","4":"1rem","5":"1.25rem","6":"1.5rem","7":"1.75rem","8":"2rem","9":"2.25rem","10":"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},cw=e(8554),cx=e.n(cw),cy={parts:b7.keys,baseStyle:{root:{},container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},panel:{pt:2,px:4,pb:5},icon:{fontSize:"1.25em"}}};function fx(a){var c=a.theme,b=a.colorScheme,d=fm(c,b+".100",b),e=fn(b+".200",.16)(c);return fp(d,e)(a)}var cz={parts:b8.keys,baseStyle:{container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6},spinner:{flexShrink:0,marginEnd:3,w:5,h:5}},variants:{subtle:function(a){var b=a.colorScheme;return{container:{bg:fx(a)},icon:{color:fp(b+".500",b+".200")(a)},spinner:{color:fp(b+".500",b+".200")(a)}}},"left-accent":function(b){var a=b.colorScheme;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:fp(a+".500",a+".200")(b),bg:fx(b)},icon:{color:fp(a+".500",a+".200")(b)},spinner:{color:fp(a+".500",a+".200")(b)}}},"top-accent":function(b){var a=b.colorScheme;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:fp(a+".500",a+".200")(b),bg:fx(b)},icon:{color:fp(a+".500",a+".200")(b)},spinner:{color:fp(a+".500",a+".200")(b)}}},solid:function(a){var b=a.colorScheme;return{container:{bg:fp(b+".500",b+".200")(a),color:fp("white","gray.900")(a)}}}},defaultProps:{variant:"subtle",colorScheme:"blue"}},fy=function(b){var c,a,d,h,e=b.name,i=b.theme,f=e?(a={string:e},d=fc().toHexString(),!a||(0,k.Qr)(a)?d:a.string&&a.colors?function e(c,b){var a=0;if(0===c.length)return b[0];for(var d=0;d<c.length;d+=1)a=c.charCodeAt(d)+((a<<5)-a),a&=a;return a=(a%b.length+b.length)%b.length,b[a]}(a.string,a.colors):a.string&&!a.colors?function f(b){var a=0;if(0===b.length)return a.toString();for(var c=0;c<b.length;c+=1)a=b.charCodeAt(c)+((a<<5)-a),a&=a;for(var e="#",d=0;d<3;d+=1)e+=("00"+(a>>8*d&255).toString(16)).substr(-2);return e}(a.string):a.colors&&!a.string?(c=a.colors,c[Math.floor(Math.random()*c.length)]):d):"gray.400",j=(h=f,function(a){var b;return"dark"===(b=h,function(a){var c=fm(a,b);return new fb(c).isDark()?"dark":"light"})(a)})(i),g="white";j||(g="gray.800");var l=fp("white","gray.800")(b);return{bg:f,color:g,borderColor:l,verticalAlign:"top"}};function v(a){var b="100%"!==a?b1[a]:void 0;return{container:{width:a,height:a,fontSize:"calc("+(null!=b?b:a)+" / 2.5)"},excessLabel:{width:a,height:a},label:{fontSize:"calc("+(null!=b?b:a)+" / 2.5)",lineHeight:"100%"!==a?null!=b?b:a:void 0}}}var cA={"2xs":v(4),xs:v(6),sm:v(8),md:v(12),lg:v(16),xl:v(24),"2xl":v(32),full:v("100%")},cB={parts:b9.keys,baseStyle:function(a){var b,c;return{badge:(b=a,{transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:fp("white","gray.800")(b)}),excessLabel:(c=a,{bg:fp("gray.200","whiteAlpha.400")(c)}),container:fy(a)}},sizes:cA,defaultProps:{size:"md"}},as={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},variants:{solid:function(a){var b=a.colorScheme,c=a.theme,d=fn(b+".500",.6)(c);return{bg:fp(b+".500",d)(a),color:fp("white","whiteAlpha.800")(a)}},subtle:function(a){var b=a.colorScheme,c=a.theme,d=fn(b+".200",.16)(c);return{bg:fp(b+".100",d)(a),color:fp(b+".800",b+".200")(a)}},outline:function(a){var b=a.colorScheme,c=a.theme,e=fn(b+".200",.8)(c),f=fm(c,b+".500"),d=fp(f,e)(a);return{color:d,boxShadow:"inset 0 0 0px 1px "+d}}},defaultProps:{variant:"subtle",colorScheme:"gray"}},cC={parts:ca.keys,baseStyle:{link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}}},cD=function(a){var b=a.colorScheme,c=a.theme;if("gray"===b)return{color:fp("inherit","whiteAlpha.900")(a),_hover:{bg:fp("gray.100","whiteAlpha.200")(a)},_active:{bg:fp("gray.200","whiteAlpha.300")(a)}};var d=fn(b+".200",.12)(c),e=fn(b+".200",.24)(c);return{color:fp(b+".600",b+".200")(a),bg:"transparent",_hover:{bg:fp(b+".50",d)(a)},_active:{bg:fp(b+".100",e)(a)}}},fz={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},fA=function(a){var b=a.colorScheme;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:fp(b+".500",b+".200")(a),borderColor:fp(b+".500",b+".200")(a),color:fp("white","gray.900")(a),_hover:{bg:fp(b+".600",b+".300")(a),borderColor:fp(b+".600",b+".300")(a)},_disabled:{borderColor:fp("gray.200","transparent")(a),bg:fp("gray.200","whiteAlpha.300")(a),color:fp("gray.500","whiteAlpha.500")(a)}},_indeterminate:{bg:fp(b+".500",b+".200")(a),borderColor:fp(b+".500",b+".200")(a),color:fp("white","gray.900")(a)},_disabled:{bg:fp("gray.100","whiteAlpha.100")(a),borderColor:fp("gray.100","transparent")(a)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:fp("red.500","red.300")(a)}}},fB={_disabled:{cursor:"not-allowed"}},fC={userSelect:"none",_disabled:{opacity:.4}},fD={transitionProperty:"transform",transitionDuration:"normal"},cE={parts:cb.keys,baseStyle:function(a){return{icon:fD,container:fB,control:fA(a),label:fC}},sizes:{sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},defaultProps:{size:"md",colorScheme:"blue"}},at=j("close-button-size"),cF={lg:((rH={})[at.variable]="40px",rH.fontSize="16px",rH),md:((rI={})[at.variable]="32px",rI.fontSize="12px",rI),sm:((rJ={})[at.variable]="24px",rJ.fontSize="10px",rJ)},cG=as.variants,cH=as.defaultProps;function H(a){return"full"===a?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:a}}}var fE={bg:"blackAlpha.600",zIndex:"overlay"},fF={display:"flex",zIndex:"modal",justifyContent:"center"},fG={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},fH={position:"absolute",top:2,insetEnd:3},fI={px:6,py:2,flex:1,overflow:"auto"},fJ={px:6,py:4},cI={xs:H("xs"),sm:H("md"),md:H("lg"),lg:H("2xl"),xl:H("4xl"),full:H("full")},cJ={parts:cc.keys,baseStyle:function(b){var a;return{overlay:fE,dialogContainer:fF,dialog:(a=b,L({},a.isFullHeight&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:fp("white","gray.700")(a),color:"inherit",boxShadow:fp("lg","dark-lg")(a)})),header:fG,closeButton:fH,body:fI,footer:fJ}},sizes:cI,defaultProps:{size:"xs"}},cK={parts:cd.keys,baseStyle:{preview:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}}},cL={parts:ce.keys,baseStyle:function(a){var b,c;return{container:{width:"100%",position:"relative"},requiredIndicator:(b=a,{marginStart:1,color:fp("red.500","red.300")(b)}),helperText:(c=a,{mt:2,color:fp("gray.500","whiteAlpha.600")(c),lineHeight:"normal",fontSize:"sm"})}}},cM={parts:cf.keys,baseStyle:function(a){var b,c;return{text:(b=a,{color:fp("red.500","red.300")(b),mt:2,fontSize:"sm",lineHeight:"normal"}),icon:(c=a,{marginEnd:"0.5em",color:fp("red.500","red.300")(c)})}}},w={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},cN={lg:{field:w.lg,addon:w.lg},md:{field:w.md,addon:w.md},sm:{field:w.sm,addon:w.sm},xs:{field:w.xs,addon:w.xs}};function fK(a){var b=a.focusBorderColor,c=a.errorBorderColor;return{focusBorderColor:b||fp("blue.500","blue.300")(a),errorBorderColor:c||fp("red.500","red.300")(a)}}var h={parts:cg.keys,baseStyle:{field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},sizes:cN,variants:{outline:function(a){var b=a.theme,c=fK(a),d=c.focusBorderColor,e=c.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:fp("gray.300","whiteAlpha.400")(a)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:fm(b,e),boxShadow:"0 0 0 1px "+fm(b,e)},_focusVisible:{zIndex:1,borderColor:fm(b,d),boxShadow:"0 0 0 1px "+fm(b,d)}},addon:{border:"1px solid",borderColor:fp("inherit","whiteAlpha.50")(a),bg:fp("gray.100","whiteAlpha.300")(a)}}},filled:function(a){var b=a.theme,c=fK(a),d=c.focusBorderColor,e=c.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:fp("gray.100","whiteAlpha.50")(a),_hover:{bg:fp("gray.200","whiteAlpha.100")(a)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:fm(b,e)},_focusVisible:{bg:"transparent",borderColor:fm(b,d)}},addon:{border:"2px solid",borderColor:"transparent",bg:fp("gray.100","whiteAlpha.50")(a)}}},flushed:function(b){var a=b.theme,c=fK(b),d=c.focusBorderColor,e=c.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:fm(a,e),boxShadow:"0px 1px 0px 0px "+fm(a,e)},_focusVisible:{borderColor:fm(a,d),boxShadow:"0px 1px 0px 0px "+fm(a,d)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},unstyled:{field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}}},defaultProps:{size:"md",variant:"outline"}},cO={parts:ch.keys,baseStyle:{container:{},item:{},icon:{marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"}}},fL={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},fM={opacity:.6},fN={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},fO={transitionProperty:"common",transitionDuration:"normal"},cP={parts:ci.keys,baseStyle:function(c){var b,a;return{button:fO,list:(b=c,{bg:fp("#fff","gray.700")(b),boxShadow:fp("sm","dark-lg")(b),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}),item:(a=c,{py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:fp("gray.100","whiteAlpha.100")(a)},_active:{bg:fp("gray.200","whiteAlpha.200")(a)},_expanded:{bg:fp("gray.100","whiteAlpha.100")(a)},_disabled:{opacity:.4,cursor:"not-allowed"}}),groupTitle:fL,command:fM,divider:fN}}},fP={bg:"blackAlpha.600",zIndex:"modal"},fQ=function(a){var b=a.isCentered,c=a.scrollBehavior;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:b?"center":"flex-start",overflow:"inside"===c?"hidden":"auto"}},fR=function(a){var b=a.scrollBehavior;return{borderRadius:"md",bg:fp("white","gray.700")(a),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:"inside"===b?"calc(100% - 7.5rem)":void 0,boxShadow:fp("lg","dark-lg")(a)}},fS={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},fT={position:"absolute",top:2,insetEnd:3},fU={px:6,py:4};function m(a){return"full"===a?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0,borderRadius:0}}:{dialog:{maxW:a}}}var cQ={xs:m("xs"),sm:m("sm"),md:m("md"),lg:m("lg"),xl:m("xl"),"2xl":m("2xl"),"3xl":m("3xl"),"4xl":m("4xl"),"5xl":m("5xl"),"6xl":m("6xl"),full:m("full")},cR={parts:cj.keys,baseStyle:function(a){var b;return{overlay:fP,dialogContainer:fQ(a),dialog:fR(a),header:fS,closeButton:fT,body:(b=a,{px:6,py:2,flex:1,overflow:"inside"===b.scrollBehavior?"auto":void 0}),footer:fU}},sizes:cQ,defaultProps:{size:"md"}},cS=h.variants,cT=h.defaultProps,au=j("number-input-stepper-width"),cU=j("number-input-input-padding"),cV=aW(au).add("0.5rem").toString(),fV=((rK={})[au.variable]="24px",rK[cU.variable]=cV,rK),fW=null!=(rL=null==(rM=h.baseStyle)?void 0:rM.field)?rL:{},fX={width:[au.reference]};function U(a){var b,c,d=h.sizes[a],e={lg:"md",md:"md",sm:"sm",xs:"sm"},f=null!=(b=null==(c=d.field)?void 0:c.fontSize)?b:"md",g=cv.fontSizes[f];return{field:L({},d.field,{paddingInlineEnd:cU.reference,verticalAlign:"top"}),stepper:{fontSize:aW(g).multiply(.75).toString(),_first:{borderTopEndRadius:e[a]},_last:{borderBottomEndRadius:e[a],mt:"-1px",borderTopWidth:1}}}}var cW={xs:U("xs"),sm:U("sm"),md:U("md"),lg:U("lg")},cX={parts:ck.keys,baseStyle:function(b){var a;return{root:fV,field:fW,stepperGroup:fX,stepper:(a=b,{borderStart:"1px solid",borderStartColor:fp("inherit","whiteAlpha.300")(a),color:fp("inherit","whiteAlpha.800")(a),_active:{bg:fp("gray.200","whiteAlpha.300")(a)},_disabled:{opacity:.4,cursor:"not-allowed"}})}},sizes:cW,variants:cS,defaultProps:cT},cY=L({},h.baseStyle.field,{textAlign:"center"}),cZ={outline:function(b){var a;return null!=(a=h.variants.outline(b).field)?a:{}},flushed:function(b){var a;return null!=(a=h.variants.flushed(b).field)?a:{}},filled:function(b){var a;return null!=(a=h.variants.filled(b).field)?a:{}},unstyled:null!=(rN=h.variants.unstyled.field)?rN:{}},c$=h.defaultProps,fY=j("popper-bg"),fZ=j("popper-arrow-bg"),f$=j("popper-arrow-shadow-color"),f_={zIndex:10},f0=function(b){var a,c=fp("white","gray.700")(b),d=fp("gray.200","whiteAlpha.300")(b);return(a={})[fY.variable]="colors."+c,a.bg=fY.reference,a[fZ.variable]=fY.reference,a[f$.variable]="colors."+d,a.width="xs",a.border="1px solid",a.borderColor="inherit",a.borderRadius="md",a.boxShadow="sm",a.zIndex="inherit",a._focusVisible={outline:0,boxShadow:"outline"},a},f1={px:3,py:2,borderBottomWidth:"1px"},f2={px:3,py:2},f3={px:3,py:2,borderTopWidth:"1px"},f4={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},c_={parts:cl.keys,baseStyle:function(a){return{popper:f_,content:f0(a),header:f1,body:f2,footer:f3,arrow:{},closeButton:f4}}},f5={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},f6=function(i){var a,b,e,c,f,g,d,h;return L({transitionProperty:"common",transitionDuration:"slow"},(b=(a=i).colorScheme,e=a.theme,c=a.isIndeterminate,f=a.hasStripe,g=fp(fo(),fo("1rem","rgba(0,0,0,0.1)"))(a),d=fp(b+".500",b+".200")(a),h="linear-gradient(\n    to right,\n    transparent 0%,\n    "+fm(e,d)+" 50%,\n    transparent 100%\n  )",L({},!c&&f&&g,c?{bgImage:h}:{bgColor:d})))},c0={parts:cm.keys,sizes:{xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},baseStyle:function(a){var b;return{label:f5,filledTrack:f6(a),track:(b=a,{bg:fp("gray.100","whiteAlpha.300")(b)})}},defaultProps:{size:"md",colorScheme:"blue"}},f7=function(c){var a=cE.baseStyle(c).control,b=void 0===a?{}:a;return L({},b,{borderRadius:"full",_checked:L({},b["_checked"],{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},c1={parts:cn.keys,baseStyle:function(a){return{label:cE.baseStyle(a).label,container:cE.baseStyle(a).container,control:f7(a)}},sizes:{md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},defaultProps:{size:"md",colorScheme:"blue"}},f8={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},V={paddingInlineEnd:"2rem"},c2=cx()({},h.sizes,{lg:{field:V},md:{field:V},sm:{field:V},xs:{field:V,icon:{insetEnd:"0.25rem"}}}),c3={parts:co.keys,baseStyle:function(b){var a;return{field:(a=b,L({},h.baseStyle.field,{bg:fp("white","gray.700")(a),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:fp("white","gray.700")(a)}})),icon:f8}},sizes:c2,variants:h.variants,defaultProps:h.defaultProps},f9=function(a){var b;return L({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},fq({orientation:(b=a).orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}))},ga=function(a){var b=a.colorScheme;return{width:"inherit",height:"inherit",bg:fp(b+".500",b+".200")(a)}},c4={parts:cp.keys,sizes:{lg:function(a){return{thumb:{w:"16px",h:"16px"},track:fq({orientation:a.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},md:function(a){return{thumb:{w:"14px",h:"14px"},track:fq({orientation:a.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},sm:function(a){return{thumb:{w:"10px",h:"10px"},track:fq({orientation:a.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}}},baseStyle:function(a){var b,c;return{container:(c=a,L({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},fq({orientation:c.orientation,vertical:{h:"100%"},horizontal:{w:"100%"}}))),track:(b=a,{overflow:"hidden",borderRadius:"sm",bg:fp("gray.200","whiteAlpha.200")(b),_disabled:{bg:fp("gray.300","whiteAlpha.300")(b)}}),thumb:f9(a),filledTrack:ga(a)}},defaultProps:{size:"md",colorScheme:"blue"}},D=j("spinner-size"),c5={width:[D.reference],height:[D.reference]},c6={xs:((rO={})[D.variable]="0.75rem",rO),sm:((rP={})[D.variable]="1rem",rP),md:((rQ={})[D.variable]="1.5rem",rQ),lg:((rR={})[D.variable]="2rem",rR),xl:((rS={})[D.variable]="3rem",rS)},c7={parts:cq.keys,baseStyle:{container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:2},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"}},sizes:{md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},defaultProps:{size:"md"}},W=j("switch-track-width"),I=j("switch-track-height"),gb=j("switch-track-diff"),gc=aW.subtract(W,I),c8=j("switch-thumb-x"),gd=function(a){var b=a.colorScheme;return{borderRadius:"full",p:"2px",width:[W.reference],height:[I.reference],transitionProperty:"common",transitionDuration:"fast",bg:fp("gray.300","whiteAlpha.400")(a),_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:fp(b+".500",b+".200")(a)}}},ge={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[I.reference],height:[I.reference],_checked:{transform:"translateX("+c8.reference+")"}},c9={sm:{container:((rT={})[W.variable]="1.375rem",rT[I.variable]="0.75rem",rT)},md:{container:((rU={})[W.variable]="1.875rem",rU[I.variable]="1rem",rU)},lg:{container:((rV={})[W.variable]="2.875rem",rV[I.variable]="1.5rem",rV)}},da={parts:cr.keys,baseStyle:function(c){var b,a;return{container:((a={})[gb.variable]=gc,a[c8.variable]=gb.reference,a._rtl=((b={})[c8.variable]=aW(gb).negate().toString(),b),a),track:gd(c),thumb:ge}},sizes:c9,defaultProps:{size:"md",colorScheme:"blue"}},gf={"&[data-is-numeric=true]":{textAlign:"end"}},dc={parts:cs.keys,baseStyle:{table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},variants:{simple:function(a){var b=a.colorScheme;return{th:L({color:fp("gray.600","gray.400")(a),borderBottom:"1px",borderColor:fp(b+".100",b+".700")(a)},gf),td:L({borderBottom:"1px",borderColor:fp(b+".100",b+".700")(a)},gf),caption:{color:fp("gray.600","gray.100")(a)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},striped:function(b){var a=b.colorScheme;return{th:L({color:fp("gray.600","gray.400")(b),borderBottom:"1px",borderColor:fp(a+".100",a+".700")(b)},gf),td:L({borderBottom:"1px",borderColor:fp(a+".100",a+".700")(b)},gf),caption:{color:fp("gray.600","gray.100")(b)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:fp(a+".100",a+".700")(b)},td:{background:fp(a+".100",a+".700")(b)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},unstyled:{}},sizes:{sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}},gg=function(a){var c,b=a.align;return{justifyContent:({end:"flex-end",center:"center",start:"flex-start"})[void 0===b?"start":b],flexDirection:"vertical"===a.orientation?"column":"row"}},gh={p:4},dd={parts:ct.keys,baseStyle:function(a){var b,c;return{root:(b=a,{display:"vertical"===b.orientation?"flex":"block"}),tab:(c=a,{flex:c.isFitted?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}),tablist:gg(a),tabpanel:gh}},sizes:{sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},variants:{line:function(b){var c,a,d=b.colorScheme,e=b.orientation,f="vertical"===e?"borderStart":"borderBottom",g="vertical"===e?"marginStart":"marginBottom";return{tablist:((c={})[f]="2px solid",c.borderColor="inherit",c),tab:((a={})[f]="2px solid",a.borderColor="transparent",a[g]="-2px",a._selected={color:fp(d+".600",d+".300")(b),borderColor:"currentColor"},a._active={bg:fp("gray.200","whiteAlpha.300")(b)},a._disabled={_active:{bg:"none"}},a)}},enclosed:function(a){var b=a.colorScheme;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:fp(b+".600",b+".300")(a),borderColor:"inherit",borderBottomColor:fp("white","gray.800")(a)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"enclosed-colored":function(a){var b=a.colorScheme;return{tab:{border:"1px solid",borderColor:"inherit",bg:fp("gray.50","whiteAlpha.50")(a),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:fp("#fff","gray.800")(a),color:fp(b+".600",b+".300")(a),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"soft-rounded":function(a){var b=a.colorScheme,c=a.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:fm(c,b+".700"),bg:fm(c,b+".100")}}}},"solid-rounded":function(a){var b=a.colorScheme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:fp("gray.600","inherit")(a),_selected:{color:fp("#fff","gray.800")(a),bg:fp(b+".600",b+".300")(a)}}}},unstyled:{}},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}},de={parts:cu.keys,variants:{subtle:function(a){return{container:as.variants.subtle(a)}},solid:function(a){return{container:as.variants.solid(a)}},outline:function(a){return{container:as.variants.outline(a)}}},baseStyle:{container:{fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}},sizes:{sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",px:3}}},defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}},df=L({},h.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),dg={outline:function(b){var a;return null!=(a=h.variants.outline(b).field)?a:{}},flushed:function(b){var a;return null!=(a=h.variants.flushed(b).field)?a:{}},filled:function(b){var a;return null!=(a=h.variants.filled(b).field)?a:{}},unstyled:null!=(rW=h.variants.unstyled.field)?rW:{}},dh={xs:null!=(rX=h.sizes.xs.field)?rX:{},sm:null!=(rY=h.sizes.sm.field)?rY:{},md:null!=(rZ=h.sizes.md.field)?rZ:{},lg:null!=(r$=h.sizes.lg.field)?r$:{}},gi=j("tooltip-bg"),gj=j("popper-arrow-bg"),di=L({breakpoints:{base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}}},cv,{sizes:b1,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:aV,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}}),gk=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"],dj=L({semanticTokens:{colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},direction:"ltr"},di,{components:{Accordion:cy,Alert:cz,Avatar:cB,Badge:as,Breadcrumb:cC,Button:{baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:cD,outline:function(a){var b=a.colorScheme,c=fp("gray.200","whiteAlpha.300")(a);return L({border:"1px solid",borderColor:"gray"===b?c:"currentColor",".chakra-button__group[data-attached] > &:not(:last-of-type)":{marginEnd:"-1px"}},cD(a))},solid:function(a){var d,b=a.colorScheme;if("gray"===b){var e=fp("gray.100","whiteAlpha.200")(a);return{bg:e,_hover:{bg:fp("gray.200","whiteAlpha.300")(a),_disabled:{bg:e}},_active:{bg:fp("gray.300","whiteAlpha.400")(a)}}}var c=null!=(d=fz[b])?d:{},f=c.bg,g=c.color,h=c.hoverBg,i=c.activeBg,j=fp(void 0===f?b+".500":f,b+".200")(a);return{bg:j,color:fp(void 0===g?"white":g,"gray.800")(a),_hover:{bg:fp(void 0===h?b+".600":h,b+".300")(a),_disabled:{bg:j}},_active:{bg:fp(void 0===i?b+".700":i,b+".400")(a)}}},link:function(b){var a=b.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:fp(a+".500",a+".200")(b),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:fp(a+".700",a+".500")(b)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0}},sizes:{lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},Checkbox:cE,CloseButton:{baseStyle:function(a){var b=fp("blackAlpha.100","whiteAlpha.100")(a),c=fp("blackAlpha.200","whiteAlpha.200")(a);return{w:[at.reference],h:[at.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:b},_active:{bg:c},_focusVisible:{boxShadow:"outline"}}},sizes:cF,defaultProps:{size:"md"}},Code:{baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:cG,defaultProps:cH},Container:{baseStyle:{w:"100%",mx:"auto",maxW:"60ch",px:"1rem"}},Divider:{baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},Drawer:cJ,Editable:cK,Form:cL,FormError:cM,FormLabel:{baseStyle:{fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Heading:{baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},Input:h,Kbd:{baseStyle:function(a){return{bg:fp("gray.100","whiteAlpha")(a),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}}},Link:{baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},List:cO,Menu:cP,Modal:cR,NumberInput:cX,PinInput:{baseStyle:cY,sizes:{lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants:cZ,defaultProps:c$},Popover:c_,Progress:c0,Radio:c1,Select:c3,Skeleton:{baseStyle:function(a){var b,c,i=fp("gray.100","gray.800")(a),j=fp("gray.400","gray.600")(a),d=a.startColor,e=a.endColor,k=a.speed,f=a.theme,g=fm(f,void 0===d?i:d),h=fm(f,void 0===e?j:e);return{opacity:.7,borderRadius:"2px",borderColor:g,background:h,animation:k+"s linear infinite alternate "+(b=g,c=h,(0,bX.F4)({from:{borderColor:b,background:b},to:{borderColor:c,background:c}}))}}},SkipLink:{baseStyle:function(a){return{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:fp("white","gray.700")(a)}}}},Slider:c4,Spinner:{baseStyle:c5,sizes:c6,defaultProps:{size:"md"}},Stat:c7,Switch:da,Table:dc,Tabs:dd,Tag:de,Textarea:{baseStyle:df,sizes:dh,variants:dg,defaultProps:{size:"md",variant:"outline"}},Tooltip:{baseStyle:function(b){var a,c=fp("gray.700","gray.300")(b);return(a={})[gi.variable]="colors."+c,a.px="8px",a.py="2px",a.bg=[gi.reference],a[gj.variable]=[gi.reference],a.color=fp("whiteAlpha.900","gray.900")(b),a.borderRadius="sm",a.fontWeight="medium",a.fontSize="sm",a.boxShadow="md",a.maxW="320px",a.zIndex="tooltip",a}}},styles:{global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},config:{useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"}}),aX={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},dk=(0,t.m$)("span",{baseStyle:aX});k.Ts&&(dk.displayName="VisuallyHidden");var dl=(0,t.m$)("input",{baseStyle:aX});function gl(){return(gl=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}k.Ts&&(dl.displayName="VisuallyHiddenInput");var gm=["label","thickness","speed","emptyColor","className"],gn=(0,bX.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),aY=(0,t.Gp)(function(b,j){var l=(0,t.mq)("Spinner",b),a=(0,t.Lr)(b),c=a.label,d=void 0===c?"Loading...":c,e=a.thickness,f=a.speed,g=a.emptyColor,h=void 0===g?"transparent":g,m=a.className,n=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,gm),o=(0,k.cx)("chakra-spinner",m),p=gl({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:void 0===e?"2px":e,borderBottomColor:h,borderLeftColor:h,animation:gn+" "+(void 0===f?"0.45s":f)+" linear infinite"},l);return i.createElement(t.m$.div,gl({ref:j,__css:p,className:o},n),d&&i.createElement(dk,null,d))});k.Ts&&(aY.displayName="Spinner");var go=e(894);function gp(){return(gp=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var aZ=function(a){return i.createElement(go.JO,gp({viewBox:"0 0 24 24"},a),i.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"}))},gq=["status"],a$=(0,t.eC)("Alert"),gr=a$[0],gs=a$[1],gt={info:{icon:function(a){return i.createElement(go.JO,gp({viewBox:"0 0 24 24"},a),i.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}))},colorScheme:"blue"},warning:{icon:aZ,colorScheme:"orange"},success:{icon:function(a){return i.createElement(go.JO,gp({viewBox:"0 0 24 24"},a),i.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}))},colorScheme:"green"},error:{icon:aZ,colorScheme:"red"},loading:{icon:aY,colorScheme:"blue"}},a_=(0,ap.kr)({name:"AlertContext",errorMessage:"useAlertContext: `context` is undefined. Seems you forgot to wrap alert components in `<Alert />`"}),gu=a_[0],gv=a_[1],gw=(0,t.Gp)(function(a,g){var b,c=(0,t.Lr)(a),d=c.status,e=void 0===d?"info":d,h=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(c,gq),j=null!=(b=a.colorScheme)?b:gt[e].colorScheme,f=(0,t.jC)("Alert",gp({},a,{colorScheme:j})),l=gp({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},f.container);return i.createElement(gu,{value:{status:e}},i.createElement(gr,{value:f},i.createElement(t.m$.div,gp({role:"alert",ref:g},h,{className:(0,k.cx)("chakra-alert",a.className),__css:l}))))}),gx=(0,t.Gp)(function(a,b){var c=gs();return i.createElement(t.m$.div,gp({ref:b},a,{className:(0,k.cx)("chakra-alert__title",a.className),__css:c.title}))}),gy=(0,t.Gp)(function(a,b){var c=gs(),d=gp({display:"inline"},c.description);return i.createElement(t.m$.div,gp({ref:b},a,{className:(0,k.cx)("chakra-alert__desc",a.className),__css:d}))}),gz=function(a){var b=gv().status,d=gt[b].icon,c=gs(),e="loading"===b?c.spinner:c.icon;return i.createElement(t.m$.span,gp({display:"inherit"},a,{className:(0,k.cx)("chakra-alert__icon",a.className),__css:e}),a.children||i.createElement(d,{h:"100%",w:"100%"}))};function gA(){return(gA=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var gB=["children","isDisabled","__css"],gC=function(a){return i.createElement(go.JO,gA({focusable:"false","aria-hidden":!0},a),i.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},dm=(0,t.Gp)(function(b,c){var d=(0,t.mq)("CloseButton",b),a=(0,t.Lr)(b),e=a.children,f=a.isDisabled,g=a.__css,h=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,gB);return i.createElement(t.m$.button,gA({type:"button","aria-label":"Close",ref:c,disabled:f,__css:gA({},{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},d,g)},h),e||i.createElement(gC,{width:"1em",height:"1em"}))});k.Ts&&(dm.displayName="CloseButton");let gD=(0,i.createContext)(null);function gE(){let a=(0,i.useContext)(gD);if(null===a)return[!0,null];let{isPresent:b,onExitComplete:c,register:e}=a,f=(0,i.useId)();(0,i.useEffect)(()=>e(f),[]);let d=()=>c&&c(f);return!b&&c?[!1,d]:[!0]}let gF=(0,i.createContext)({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"}),gG=(0,i.createContext)({}),dn="undefined"!=typeof document,gH=dn?i.useLayoutEffect:i.useEffect,gI=(0,i.createContext)({strict:!1});function gJ(a){return"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,"current")}function gK(a){return"string"==typeof a||Array.isArray(a)}function gL(a){return"object"==typeof a&&"function"==typeof a.start}let gM=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView",];function gN(a){return gL(a.animate)||gM.some(b=>gK(a[b]))}function gO(a){return Boolean(gN(a)||a.variants)}function gP(a){return Array.isArray(a)?a.join(" "):a}let r=a=>({isEnabled:b=>a.some(a=>!!b[a])}),dp={measureLayout:r(["layout","layoutId","drag"]),animation:r(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView",]),exit:r(["exit"]),drag:r(["drag","dragControls"]),focus:r(["whileFocus"]),hover:r(["whileHover","onHoverStart","onHoverEnd"]),tap:r(["whileTap","onTap","onTapStart","onTapCancel"]),pan:r(["onPan","onPanStart","onPanSessionStart","onPanEnd",]),inView:r(["whileInView","onViewportEnter","onViewportLeave",])};function gQ(b){let a=(0,i.useRef)(null);return null===a.current&&(a.current=b()),a.current}let gR={hasAnimatedSinceResize:!0,hasEverUpdated:!1},gS=1,gT=(0,i.createContext)({});class gU extends i.Component{getSnapshotBeforeUpdate(){let{visualElement:a,props:b}=this.props;return a&&a.setProps(b),null}componentDidUpdate(){}render(){return this.props.children}}let gV=(0,i.createContext)({}),gW=Symbol.for("motionComponentSymbol"),gX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view",];function gY(a){if("string"!=typeof a||a.includes("-"));else if(gX.indexOf(a)> -1||/[A-Z]/.test(a))return!0;return!1}let gZ={},a0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY",],g$=new Set(a0);function g_(a,{layout:b,layoutId:c}){return g$.has(a)||a.startsWith("origin")||(b|| void 0!==c)&&(!!gZ[a]||"opacity"===a)}let g0=a=>!!(null==a?void 0:a.getVelocity),g1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g2=(a,b)=>a0.indexOf(a)-a0.indexOf(b);function g3(a){return a.startsWith("--")}let g4=(a,b)=>b&&"number"==typeof a?b.transform(a):a,a1=(a,b)=>c=>Math.max(Math.min(c,b),a),g5=a=>a%1?Number(a.toFixed(5)):a,g6=/(-)?([\d]*\.?[\d])+/g,g7=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,g8=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function g9(a){return"string"==typeof a}let M=a=>({test:b=>g9(b)&&b.endsWith(a)&&1===b.split(" ").length,parse:parseFloat,transform:b=>`${b}${a}`}),x=M("deg"),a2=M("%"),b=M("px"),dq=M("vh"),dr=M("vw"),a3=Object.assign(Object.assign({},a2),{parse:a=>a2.parse(a)/100,transform:a=>a2.transform(100*a)}),N={test:a=>"number"==typeof a,parse:parseFloat,transform:a=>a},av=Object.assign(Object.assign({},N),{transform:a1(0,1)}),X=Object.assign(Object.assign({},N),{default:1}),a4={...N,transform:Math.round},ds={borderWidth:b,borderTopWidth:b,borderRightWidth:b,borderBottomWidth:b,borderLeftWidth:b,borderRadius:b,radius:b,borderTopLeftRadius:b,borderTopRightRadius:b,borderBottomRightRadius:b,borderBottomLeftRadius:b,width:b,maxWidth:b,height:b,maxHeight:b,size:b,top:b,right:b,bottom:b,left:b,padding:b,paddingTop:b,paddingRight:b,paddingBottom:b,paddingLeft:b,margin:b,marginTop:b,marginRight:b,marginBottom:b,marginLeft:b,rotate:x,rotateX:x,rotateY:x,rotateZ:x,scale:X,scaleX:X,scaleY:X,scaleZ:X,skew:x,skewX:x,skewY:x,distance:b,translateX:b,translateY:b,translateZ:b,x:b,y:b,z:b,perspective:b,transformPerspective:b,opacity:av,originX:a3,originY:a3,originZ:b,zIndex:a4,fillOpacity:av,strokeOpacity:av,numOctaves:a4};function ha(g,c,n,h){let{style:b,vars:o,transform:p,transformKeys:i,transformOrigin:j}=g;i.length=0;let k=!1,l=!1,d=!0;for(let a in c){let e=c[a];if(g3(a)){o[a]=e;continue}let m=ds[a],f=g4(e,m);if(g$.has(a)){if(k=!0,p[a]=f,i.push(a),!d)continue;e!==(m.default||0)&&(d=!1)}else a.startsWith("origin")?(l=!0,j[a]=f):b[a]=f}if(!c.transform&&(k||h?b.transform=function({transform:b,transformKeys:d},{enableHardwareAcceleration:g=!0,allowTransformNone:h=!0},e,f){let a="";for(let c of(d.sort(g2),d))a+=`${g1[c]||c}(${b[c]}) `;return g&&!b.z&&(a+="translateZ(0)"),a=a.trim(),f?a=f(b,e?"":a):h&&e&&(a="none"),a}(g,n,d,h):b.transform&&(b.transform="none")),l){let{originX:q="50%",originY:r="50%",originZ:s=0}=j;b.transformOrigin=`${q} ${r} ${s}`}}let dt=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function hb(c,b,d){for(let a in b)g0(b[a])||g_(a,d)||(c[a]=b[a])}function hc(a,d,e){let c={},b=function(a,c,d){let e=a.style||{},b={};return hb(b,e,a),Object.assign(b,function({transformTemplate:b},a,c){return(0,i.useMemo)(()=>{let d=dt();return ha(d,a,{enableHardwareAcceleration:!c},b),Object.assign({},d.vars,d.style)},[a])}(a,c,d)),a.transformValues?a.transformValues(b):b}(a,d,e);return a.drag&& !1!==a.dragListener&&(c.draggable=!1,b.userSelect=b.WebkitUserSelect=b.WebkitTouchCallout="none",b.touchAction=!0===a.drag?"none":`pan-${"x"===a.drag?"y":"x"}`),c.style=b,c}let hd=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd",]);function he(a){return hd.has(a)}let du=a=>!he(a);try{(md=require("@emotion/is-prop-valid").default)&&(du=a=>a.startsWith("on")?!he(a):md(a))}catch(hf){}function hg(a,c,d){return"string"==typeof a?a:b.transform(c+d*a)}let hh={offset:"stroke-dashoffset",array:"stroke-dasharray"},hi={offset:"strokeDashoffset",array:"strokeDasharray"};function hj(c,{attrX:h,attrY:i,originX:d,originY:e,pathLength:j,pathSpacing:k=1,pathOffset:l=0,...m},n,o){ha(c,m,n,o),c.attrs=c.style,c.style={};let{attrs:a,style:f,dimensions:g}=c;a.transform&&(g&&(f.transform=a.transform),delete a.transform),g&&(void 0!==d|| void 0!==e||f.transform)&&(f.transformOrigin=function(a,b,c){let d=hg(b,a.x,a.width),e=hg(c,a.y,a.height);return`${d} ${e}`}(g,void 0!==d?d:.5,void 0!==e?e:.5)),void 0!==h&&(a.x=h),void 0!==i&&(a.y=i),void 0!==j&&function(a,d,e=1,f=0,g=!0){a.pathLength=1;let c=g?hh:hi;a[c.offset]=b.transform(-f);let h=b.transform(d),i=b.transform(e);a[c.array]=`${h} ${i}`}(a,j,k,l,!1)}let dv=()=>({...dt(),attrs:{}});function hk(a,d){let b=(0,i.useMemo)(()=>{let b=dv();return hj(b,d,{enableHardwareAcceleration:!1},a.transformTemplate),{...b.attrs,style:{...b.style}}},[d]);if(a.style){let c={};hb(c,a.style,a),b.style={...c,...b.style}}return b}let hl=a=>a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function dw(a,{style:e,vars:b},f,c){for(let d in Object.assign(a.style,e,c&&c.getProjectionStyles(f)),b)a.style.setProperty(d,b[d])}let hm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength",]);function dx(c,b,e,d){for(let a in dw(c,b,void 0,d),b.attrs)c.setAttribute(hm.has(a)?a:hl(a),b.attrs[a])}function a5(c){let{style:b}=c,d={};for(let a in b)(g0(b[a])||g_(a,c))&&(d[a]=b[a]);return d}function a6(b){let c=a5(b);for(let a in b)if(g0(b[a])){let d="x"===a||"y"===a?"attr"+a.toUpperCase():a;c[d]=b[a]}return c}function hn(b,a,c,d={},e={}){return"function"==typeof a&&(a=a(void 0!==c?c:b.custom,d,e)),"string"==typeof a&&(a=b.variants&&b.variants[a]),"function"==typeof a&&(a=a(void 0!==c?c:b.custom,d,e)),a}let ho=a=>Array.isArray(a),hp=a=>Boolean(a&&"object"==typeof a&&a.mix&&a.toValue),hq=a=>ho(a)?a[a.length-1]||0:a;function hr(a){let b=g0(a)?a.get():a;return hp(b)?b.toValue():b}let a7=a=>(d,c)=>{let e=(0,i.useContext)(gG),f=(0,i.useContext)(gD),b=()=>(function({scrapeMotionValuesFromProps:b,createRenderState:c,onMount:d},e,f,g){let a={latestValues:hs(e,f,g,b),renderState:c()};return d&&(a.mount=b=>d(e,b,a)),a})(a,d,e,f);return c?b():gQ(b)};function hs(b,d,g,k){let h={},i=k(b);for(let j in i)h[j]=hr(i[j]);let{initial:c,animate:e}=b,l=gN(b),m=gO(b);d&&m&&!l&& !1!==b.inherit&&(void 0===c&&(c=d.initial),void 0===e&&(e=d.animate));let f=!!g&& !1===g.initial;f=f|| !1===c;let a=f?e:c;if(a&&"boolean"!=typeof a&&!gL(a)){let n=Array.isArray(a)?a:[a];n.forEach(j=>{let c=hn(b,j);if(!c)return;let{transitionEnd:d,transition:l,...e}=c;for(let g in e){let a=e[g];if(Array.isArray(a)){let k=f?a.length-1:0;a=a[k]}null!==a&&(h[g]=a)}for(let i in d)h[i]=d[i]})}return h}let ht={useVisualState:a7({scrapeMotionValuesFromProps:a6,createRenderState:dv,onMount(c,a,{renderState:b,latestValues:d}){try{b.dimensions="function"==typeof a.getBBox?a.getBBox():a.getBoundingClientRect()}catch(e){b.dimensions={x:0,y:0,width:0,height:0}}hj(b,d,{enableHardwareAcceleration:!1},c.transformTemplate),dx(a,b)}})},hu={useVisualState:a7({scrapeMotionValuesFromProps:a5,createRenderState:dt})};function hv(a,b,c,d={passive:!0}){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c)}function hw(a,b,c,d){(0,i.useEffect)(()=>{let e=a.current;if(c&&e)return hv(e,b,c,d)},[a,b,c,d])}function hx(a){return"undefined"!=typeof PointerEvent&&a instanceof PointerEvent?!("mouse"!==a.pointerType):a instanceof MouseEvent}function hy(a){let b=!!a.touches;return b}(me=r_||(r_={})).Animate="animate",me.Hover="whileHover",me.Tap="whileTap",me.Drag="whileDrag",me.Focus="whileFocus",me.InView="whileInView",me.Exit="exit";let hz={pageX:0,pageY:0};function hA(a,b="page"){return{point:hy(a)?function(a,b="page"){let d=a.touches[0]||a.changedTouches[0],c=d||hz;return{x:c[b+"X"],y:c[b+"Y"]}}(a,b):function(a,b="page"){return{x:a[b+"X"],y:a[b+"Y"]}}(a,b)}}let hB=(d,b=!1)=>{var c;let a=a=>d(a,hA(a));return b?(c=a,a=>{let b=a instanceof MouseEvent,d=!b||b&&0===a.button;d&&c(a)}):a},hC=()=>dn&&null===window.onpointerdown,hD=()=>dn&&null===window.ontouchstart,hE=()=>dn&&null===window.onmousedown,hF={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},hG={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function hH(a){if(hC());else if(hD())return hG[a];else if(hE())return hF[a];return a}function hI(b,a,c,d){return hv(b,hH(a),hB(c,"pointerdown"===a),d)}function hJ(c,a,b,d){return hw(c,hH(a),b&&hB(b,"pointerdown"===a),d)}function a8(a){let b=null;return()=>null===b&&(b=a,()=>{b=null})}let hK=a8("dragHorizontal"),hL=a8("dragVertical");function hM(d){let a=!1;if("y"===d)a=hL();else if("x"===d)a=hK();else{let b=hK(),c=hL();b&&c?a=()=>{b(),c()}:(b&&b(),c&&c())}return a}function hN(){let a=hM(!0);return!a||(a(),!1)}function hO(a,b,c){return(d,e)=>{!(!hx(d)||hN())&&(a.animationState&&a.animationState.setActive(r_.Hover,b),c&&c(d,e))}}let hP=(b,a)=>!!a&&(b===a||hP(b,a.parentElement));function hQ(a){return(0,i.useEffect)(()=>()=>a(),[])}let hR=(a,b)=>c=>b(a(c)),hS=(...a)=>a.reduce(hR);var a9=e(3454);let hT=(void 0===a9||a9.env,"production"),hU=new Set;function hV(c,a,b){c||hU.has(a)||(console.warn(a),b&&console.warn(b),hU.add(a))}let hW=new WeakMap,hX=new WeakMap,hY=a=>{let b=hW.get(a.target);b&&b(a)},hZ=a=>{a.forEach(hY)},h$={some:0,all:1};function h_(a,e,f,{root:b,margin:c,amount:d="some",once:g}){(0,i.useEffect)(()=>{if(!a)return;let h={root:null==b?void 0:b.current,rootMargin:c,threshold:"number"==typeof d?d:h$[d]},i=b=>{let{isIntersecting:a}=b;if(e.isInView===a||(e.isInView=a,g&&!a&&e.hasEnteredView))return;a&&(e.hasEnteredView=!0),f.animationState&&f.animationState.setActive(r_.InView,a);let c=f.getProps(),d=a?c.onViewportEnter:c.onViewportLeave;d&&d(b)};return function(a,b,c){let d=function({root:d,...e}){let a=d||document;hX.has(a)||hX.set(a,{});let b=hX.get(a),c=JSON.stringify(e);return b[c]||(b[c]=new IntersectionObserver(hZ,{root:d,...e})),b[c]}(b);return hW.set(a,c),d.observe(a),()=>{hW.delete(a),d.unobserve(a)}}(f.getInstance(),h,i)},[a,b,c,d])}function h0(a,b,c,{fallback:d=!0}){(0,i.useEffect)(()=>{a&&d&&("production"!==hT&&hV(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame(()=>{b.hasEnteredView=!0;let{onViewportEnter:a}=c.getProps();a&&a(null),c.animationState&&c.animationState.setActive(r_.InView,!0)}))},[a])}let y=a=>b=>(a(b),null),dy={inView:y(function({visualElement:d,whileInView:e,onViewportEnter:f,onViewportLeave:g,viewport:a={}}){let b=(0,i.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(e||f||g);a.once&&b.current.hasEnteredView&&(c=!1);let h="undefined"==typeof IntersectionObserver?h0:h_;h(c,b.current,d,a)}),tap:y(function({onTap:a,onTapStart:b,onTapCancel:c,whileTap:d,visualElement:e}){let j=(0,i.useRef)(!1),k=(0,i.useRef)(null),f={passive:!(b||a||c||h)};function g(){k.current&&k.current(),k.current=null}function l(){return g(),j.current=!1,e.animationState&&e.animationState.setActive(r_.Tap,!1),!hN()}function m(b,d){l()&&(hP(e.getInstance(),b.target)?a&&a(b,d):c&&c(b,d))}function n(a,b){l()&&c&&c(a,b)}function h(a,c){g(),!j.current&&(j.current=!0,k.current=hS(hI(window,"pointerup",m,f),hI(window,"pointercancel",n,f)),e.animationState&&e.animationState.setActive(r_.Tap,!0),b&&b(a,c))}hJ(e,"pointerdown",a||b||c||d?h:void 0,f),hQ(g)}),focus:y(function({whileFocus:b,visualElement:a}){let{animationState:c}=a;hw(a,"focus",b?()=>{c&&c.setActive(r_.Focus,!0)}:void 0),hw(a,"blur",b?()=>{c&&c.setActive(r_.Focus,!1)}:void 0)}),hover:y(function({onHoverStart:b,onHoverEnd:c,whileHover:d,visualElement:a}){hJ(a,"pointerenter",b||d?hO(a,!0,b):void 0,{passive:!b}),hJ(a,"pointerleave",c||d?hO(a,!1,c):void 0,{passive:!c})})};function h1(c,b){if(!Array.isArray(b))return!1;let d=b.length;if(d!==c.length)return!1;for(let a=0;a<d;a++)if(b[a]!==c[a])return!1;return!0}var h2=function(a,b){return(h2=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)},h3=function(){return(h3=Object.assign||function(d){for(var a,b=1,e=arguments.length;b<e;b++)for(var c in a=arguments[b])Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}).apply(this,arguments)};function h4(b,e){var d={};for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&0>e.indexOf(a)&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(b);c<a.length;c++)0>e.indexOf(a[c])&&Object.prototype.propertyIsEnumerable.call(b,a[c])&&(d[a[c]]=b[a[c]]);return d}function h5(a){return this instanceof h5?(this.v=a,this):new h5(a)}var h6=function(){},h7=function(){};let h8=(a,b,c)=>Math.min(Math.max(c,a),b),h9=.001;function ia(b,a){return b*Math.sqrt(1-a*a)}let ib=["duration","bounce"],ic=["stiffness","damping","mass"];function id(b,a){return a.some(a=>void 0!==b[a])}function ba(a){var{from:b=0,to:e=1,restSpeed:f=2,restDelta:g}=a,c=h4(a,["from","to","restSpeed","restDelta"]);let h={done:!1,value:b},{stiffness:i,damping:j,mass:k,velocity:l,duration:m,isResolvedFromDuration:n}=function(a){let b=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},a);if(!id(a,ic)&&id(a,ib)){let c=function({duration:a=800,bounce:h=.25,velocity:j=0,mass:e=1}){let c,d;h6(a<=1e4,"Spring duration must be 10 seconds or less");let b=1-h;b=h8(.05,1,b),a=h8(.01,10,a/1e3),b<1?(c=c=>{let d=c*b,e=d*a,f=d-j,g=ia(c,b),h=Math.exp(-e);return h9-f/g*h},d=d=>{let f=d*b,e=f*a,g=e*j+j,h=Math.pow(b,2)*Math.pow(d,2)*a,i=Math.exp(-e),k=ia(Math.pow(d,2),b),l=-c(d)+h9>0?-1:1;return l*((g-h)*i)/k}):(c=b=>{let c=Math.exp(-b*a),d=(b-j)*a+1;return-h9+c*d},d=b=>{let c=Math.exp(-b*a),d=(j-b)*(a*a);return c*d});let i=5/a,f=function f(c,d,e){let a=e;for(let b=1;b<12;b++)a-=c(a)/d(a);return a}(c,d,i);if(a*=1e3,isNaN(f))return{stiffness:100,damping:10,duration:a};{let g=Math.pow(f,2)*e;return{stiffness:g,damping:2*b*Math.sqrt(e*g),duration:a}}}(a);(b=Object.assign(Object.assign(Object.assign({},b),c),{velocity:0,mass:1})).isResolvedFromDuration=!0}return b}(c),o=ie,p=ie;function d(){let d=l?-(l/1e3):0,f=e-b,a=j/(2*Math.sqrt(i*k)),c=Math.sqrt(i/k)/1e3;if(void 0===g&&(g=Math.min(Math.abs(e-b)/100,.4)),a<1){let h=ia(c,a);o=b=>{let g=Math.exp(-a*c*b);return e-g*((d+a*c*f)/h*Math.sin(h*b)+f*Math.cos(h*b))},p=b=>{let e=Math.exp(-a*c*b);return a*c*e*(Math.sin(h*b)*(d+a*c*f)/h+f*Math.cos(h*b))-e*(Math.cos(h*b)*(d+a*c*f)-h*f*Math.sin(h*b))}}else if(1===a)o=a=>e-Math.exp(-c*a)*(f+(d+c*f)*a);else{let m=c*Math.sqrt(a*a-1);o=b=>{let h=Math.exp(-a*c*b),g=Math.min(m*b,300);return e-h*((d+a*c*f)*Math.sinh(g)+m*f*Math.cosh(g))/m}}}return d(),{next(a){let b=o(a);if(n)h.done=a>=m;else{let c=1e3*p(a),d=Math.abs(c)<=f,i=Math.abs(e-b)<=g;h.done=d&&i}return h.value=h.done?e:b,h},flipTarget(){l=-l,[b,e]=[e,b],d()}}}ba.needsInterpolation=(a,b)=>"string"==typeof a||"string"==typeof b;let ie=a=>0,ig=(a,c,d)=>{let b=c-a;return 0===b?1:(d-a)/b},ih=(a,c,b)=>-b*a+b*c+a,aw=(a,b)=>c=>Boolean(g9(c)&&g8.test(c)&&c.startsWith(a)||b&&Object.prototype.hasOwnProperty.call(c,b)),bb=(a,b,c)=>d=>{if(!g9(d))return d;let[f,g,h,e]=d.match(g6);return{[a]:parseFloat(f),[b]:parseFloat(g),[c]:parseFloat(h),alpha:void 0!==e?parseFloat(e):1}},ii=a1(0,255),ij=Object.assign(Object.assign({},N),{transform:a=>Math.round(ii(a))}),bc={test:aw("rgb","red"),parse:bb("red","green","blue"),transform:({red:a,green:b,blue:c,alpha:d=1})=>"rgba("+ij.transform(a)+", "+ij.transform(b)+", "+ij.transform(c)+", "+g5(av.transform(d))+")"},dz={test:aw("#"),parse:function(a){let c="",d="",e="",b="";return a.length>5?(c=a.substr(1,2),d=a.substr(3,2),e=a.substr(5,2),b=a.substr(7,2)):(c=a.substr(1,1),d=a.substr(2,1),e=a.substr(3,1),b=a.substr(4,1),c+=c,d+=d,e+=e,b+=b),{red:parseInt(c,16),green:parseInt(d,16),blue:parseInt(e,16),alpha:b?parseInt(b,16)/255:1}},transform:bc.transform},dA={test:aw("hsl","hue"),parse:bb("hue","saturation","lightness"),transform:({hue:a,saturation:b,lightness:c,alpha:d=1})=>"hsla("+Math.round(a)+", "+a2.transform(g5(b))+", "+a2.transform(g5(c))+", "+g5(av.transform(d))+")"};function ik(b,c,a){return(a<0&&(a+=1),a>1&&(a-=1),a<1/6)?b+(c-b)*6*a:a<.5?c:a<2/3?b+(c-b)*(2/3-a)*6:b}function il({hue:b,saturation:c,lightness:a,alpha:i}){b/=360,a/=100;let e=0,f=0,g=0;if(c/=100){let d=a<.5?a*(1+c):a+c-a*c,h=2*a-d;e=ik(h,d,b+1/3),f=ik(h,d,b),g=ik(h,d,b-1/3)}else e=f=g=a;return{red:Math.round(255*e),green:Math.round(255*f),blue:Math.round(255*g),alpha:i}}let im=(a,b,d)=>{let c=a*a;return Math.sqrt(Math.max(0,d*(b*b-c)+c))},io=[dz,bc,dA],ip=a=>io.find(b=>b.test(a)),iq=a=>`'${a}' is not an animatable color. Use the equivalent color code instead.`,ir=(c,d)=>{let a=ip(c),b=ip(d);h7(!!a,iq(c)),h7(!!b,iq(d));let e=a.parse(c),f=b.parse(d);a===dA&&(e=il(e),a=bc),b===dA&&(f=il(f),b=bc);let g=Object.assign({},e);return c=>{for(let b in g)"alpha"!==b&&(g[b]=im(e[b],f[b],c));return g.alpha=ih(e.alpha,f.alpha,c),a.transform(g)}},n={test:a=>bc.test(a)||dz.test(a)||dA.test(a),parse:a=>bc.test(a)?bc.parse(a):dA.test(a)?dA.parse(a):dz.parse(a),transform:a=>g9(a)?a:a.hasOwnProperty("red")?bc.transform(a):dA.transform(a)},is="${c}",it="${n}";function iu(a){"number"==typeof a&&(a=`${a}`);let b=[],d=0,c=a.match(g7);c&&(d=c.length,a=a.replace(g7,is),b.push(...c.map(n.parse)));let e=a.match(g6);return e&&(a=a.replace(g6,it),b.push(...e.map(N.parse))),{values:b,numColors:d,tokenised:a}}function dB(a){return iu(a).values}function dC(a){let{values:b,numColors:c,tokenised:d}=iu(a),e=b.length;return f=>{let b=d;for(let a=0;a<e;a++)b=b.replace(a<c?is:it,a<c?n.transform(f[a]):g5(f[a]));return b}}let iv=a=>"number"==typeof a?0:a,bd={test:function(a){var b,c,d,e;return isNaN(a)&&g9(a)&&(null!==(c=null===(b=a.match(g6))|| void 0===b?void 0:b.length)&& void 0!==c?c:0)+(null!==(e=null===(d=a.match(g7))|| void 0===d?void 0:d.length)&& void 0!==e?e:0)>0},parse:dB,createTransformer:dC,getAnimatableNone:function(a){let b=dB(a),c=dC(a);return c(b.map(iv))}},iw=a=>"number"==typeof a;function ix(a,b){return iw(a)?c=>ih(a,b,c):n.test(a)?ir(a,b):iB(a,b)}let iy=(a,c)=>{let b=[...a],d=b.length,e=a.map((a,b)=>ix(a,c[b]));return c=>{for(let a=0;a<d;a++)b[a]=e[a](c);return b}},iz=(b,c)=>{let d=Object.assign(Object.assign({},b),c),e={};for(let a in d)void 0!==b[a]&& void 0!==c[a]&&(e[a]=ix(b[a],c[a]));return b=>{for(let a in e)d[a]=e[a](b);return d}};function iA(f){let a=bd.parse(f),g=a.length,c=0,d=0,e=0;for(let b=0;b<g;b++)c||"number"==typeof a[b]?c++:void 0!==a[b].hue?e++:d++;return{parsed:a,numNumbers:c,numRGB:d,numHSL:e}}let iB=(d,c)=>{let e=bd.createTransformer(c),a=iA(d),b=iA(c),f=a.numHSL===b.numHSL&&a.numRGB===b.numRGB&&a.numNumbers>=b.numNumbers;return f?hS(iy(a.parsed,b.parsed),e):(h6(!0,`Complex values '${d}' and '${c}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),a=>`${a>0?c:d}`)},iC=(a,b)=>c=>ih(a,b,c);function iD(a,b,{clamp:f=!0,ease:c,mixer:g}={}){let d=a.length;h7(d===b.length,"Both input and output ranges must be the same length"),h7(!c||!Array.isArray(c)||c.length===d-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),a[0]>a[d-1]&&(a=[].concat(a),b=[].concat(b),a.reverse(),b.reverse());let e=function(c,d,g){var a;let f=[],h=g||(a=c[0],"number"==typeof a?iC:"string"==typeof a?n.test(a)?ir:iB:Array.isArray(a)?iy:"object"==typeof a?iz:void 0),i=c.length-1;for(let b=0;b<i;b++){let e=h(c[b],c[b+1]);if(d){let j=Array.isArray(d)?d[b]:d;e=hS(j,e)}f.push(e)}return f}(b,c,g),h=2===d?function([a,b],[c]){return d=>c(ig(a,b,d))}(a,e):function(a,c){let b=a.length,d=b-1;return g=>{let e=0,h=!1;if(g<=a[0]?h=!0:g>=a[d]&&(e=d-1,h=!0),!h){let f=1;for(;f<b&&!(a[f]>g)&&f!==d;f++);e=f-1}let i=ig(a[e],a[e+1],g);return c[e](i)}}(a,e);return f?b=>h(h8(a[0],a[d-1],b)):h}let Y=a=>b=>1-a(1-b),ax=a=>b=>b<=.5?a(2*b)/2:(2-a(2*(1-b)))/2,dD=a=>b=>b*b*((a+1)*b-a),iE=4/11,iF=8/11,be=a=>a,ay=a=>Math.pow(a,2),dE=Y(ay),dF=ax(ay),bf=a=>1-Math.sin(Math.acos(a)),az=Y(bf),dG=ax(az),aA=dD(1.525),dH=Y(aA),dI=ax(aA),dJ=(a=>{let b=dD(1.525);return a=>(a*=2)<1?.5*b(a):.5*(2-Math.pow(2,-10*(a-1)))})(1.525),iG=4356/361,iH=35442/1805,iI=16061/1805,bg=a=>{if(1===a||0===a)return a;let b=a*a;return a<iE?7.5625*b:a<iF?9.075*b-9.9*a+3.4:a<.9?iG*b-iH*a+iI:10.8*a*a-20.52*a+10.72},dK=Y(bg);function dL({from:c=0,to:a=1,ease:i,offset:b,duration:f=300}){var d,g;let j={done:!1,value:c},e=Array.isArray(a)?a:[c,a],k=(d=b&&b.length===e.length?b:function(a){let b=a.length;return a.map((c,a)=>0!==a?a/(b-1):0)}(e),g=f,d.map(a=>a*g));function h(){var a,b;return iD(k,e,{ease:Array.isArray(i)?i:(a=e,b=i,a.map(()=>b||dF).splice(0,a.length-1))})}let l=h();return{next:a=>(j.value=l(a),j.done=a>=f,j),flipTarget(){e.reverse(),l=h()}}}let iJ={keyframes:dL,spring:ba,decay:function({velocity:f=0,from:a=0,power:g=.8,timeConstant:h=350,restDelta:i=.5,modifyTarget:c}){let j={done:!1,value:a},d=g*f,b=a+d,e=void 0===c?b:c(b);return e!==b&&(d=e-a),{next(b){let a=-d*Math.exp(-b/h);return j.done=!(a>i||a< -i),j.value=j.done?e:e+a,j},flipTarget(){}}}},iK=1/60*1e3,iL="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),iM="undefined"!=typeof window?a=>window.requestAnimationFrame(a):a=>setTimeout(()=>a(iL()),iK),iN=!0,iO=!1,iP=!1,iQ={delta:0,timestamp:0},Z=["read","update","preRender","render","postRender",],iR=Z.reduce((a,b)=>(a[b]=function(b){let c=[],d=[],e=0,f=!1,g=!1,h=new WeakSet,a={schedule(a,i=!1,j=!1){let b=j&&f,g=b?c:d;return i&&h.add(a),-1===g.indexOf(a)&&(g.push(a),b&&f&&(e=c.length)),a},cancel(a){let b=d.indexOf(a);-1!==b&&d.splice(b,1),h.delete(a)},process(k){if(f){g=!0;return}if(f=!0,[c,d]=[d,c],d.length=0,e=c.length)for(let i=0;i<e;i++){let j=c[i];j(k),h.has(j)&&(a.schedule(j),b())}f=!1,g&&(g=!1,a.process(k))}};return a}(()=>iO=!0),a),{}),dM=Z.reduce((a,b)=>{let c=iR[b];return a[b]=(a,b=!1,d=!1)=>(iO||iV(),c.schedule(a,b,d)),a},{}),iS=Z.reduce((a,b)=>(a[b]=iR[b].cancel,a),{});Z.reduce((a,b)=>(a[b]=()=>iR[b].process(iQ),a),{});let iT=a=>iR[a].process(iQ),iU=a=>{iO=!1,iQ.delta=iN?iK:Math.max(Math.min(a-iQ.timestamp,40),1),iQ.timestamp=a,iP=!0,Z.forEach(iT),iP=!1,iO&&(iN=!1,iM(iU))},iV=()=>{iO=!0,iN=!0,iP||iM(iU)},iW=()=>iQ;var iX=dM;function iY(a,b,c=0){return a-b-c}let iZ=a=>{let b=({delta:b})=>a(b);return{start:()=>iX.update(b,!0),stop:()=>iS.update(b)}};function i$(e){var f,d,{from:a,autoplay:i=!0,driver:j=iZ,elapsed:m=0,repeat:n=0,repeatType:o="loop",repeatDelay:p=0,onPlay:g,onStop:q,onComplete:r,onRepeat:s,onUpdate:t}=e,b=h4(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:c}=b,k,u=0,v=b.duration,w,x=!1,y=!0,l,h=function(b){if(Array.isArray(b.to))return dL;if(iJ[b.type])return iJ[b.type];let a=new Set(Object.keys(b));if(a.has("ease")||a.has("duration")&&!a.has("dampingRatio"));else if(a.has("dampingRatio")||a.has("stiffness")||a.has("mass")||a.has("damping")||a.has("restSpeed")||a.has("restDelta"))return ba;return dL}(b);(null===(d=(f=h).needsInterpolation)|| void 0===d?void 0:d.call(f,a,c))&&(l=iD([0,100],[a,c],{clamp:!1}),a=0,c=100);let z=h(Object.assign(Object.assign({},b),{from:a,to:c}));return i&&(null==g||g(),(k=j(function g(a){if(y||(a=-a),m+=a,!x){let d=z.next(Math.max(0,m));w=d.value,l&&(w=l(w)),x=y?d.done:m<=0}if(null==t||t(w),x){if(0===u&&(null!=v||(v=m)),u<n){var b,e,c,f;b=m,e=v,c=p,((f=y)?b>=e+c:b<= -c)&&(u++,"reverse"===o?m=function(b,a,c=0,d=!0){return d?iY(a+ -b,a,c):a-(b-a)+c}(m,v,p,y=u%2==0):(m=iY(m,v,p),"mirror"===o&&z.flipTarget()),x=!1,s&&s())}else k.stop(),r&&r()}})).start()),{stop(){null==q||q(),k.stop()}}}function i_(b,a){return a?b*(1e3/a):0}let i0=a=>1e3*a,i1=(a,b)=>1-3*b+3*a,i2=(a,b)=>3*b-6*a,i3=a=>3*a,i4=(a,b,c)=>((i1(b,c)*a+i2(b,c))*a+i3(b))*a,i5=(a,b,c)=>3*i1(b,c)*a*a+2*i2(b,c)*a+i3(b),i6={linear:be,easeIn:ay,easeInOut:dF,easeOut:dE,circIn:bf,circInOut:dG,circOut:az,backIn:aA,backInOut:dI,backOut:dH,anticipate:dJ,bounceIn:dK,bounceInOut:a=>a<.5?.5*(1-bg(1-2*a)):.5*bg(2*a-1)+.5,bounceOut:bg},i7=a=>{if(Array.isArray(a)){h7(4===a.length,"Cubic bezier arrays must contain four numerical values.");let[b,c,d,e]=a;return function(b,d,c,e){if(b===d&&c===e)return be;let f=new Float32Array(11);for(let a=0;a<11;++a)f[a]=i4(.1*a,b,c);return a=>0===a||1===a?a:i4(function(d){let e=0,a=1,i=10;for(;a!==i&&f[a]<=d;++a)e+=.1;--a;let j=(d-f[a])/(f[a+1]-f[a]),g=e+.1*j,h=i5(g,b,c);return h>=.001?function(f,a,b,c){for(let d=0;d<8;++d){let e=i5(a,b,c);if(0===e)break;let g=i4(a,b,c)-f;a-=g/e}return a}(d,g,b,c):0===h?g:function(e,b,c,f,g){let d,a,h=0;do(d=i4(a=b+(c-b)/2,f,g)-e)>0?c=a:b=a;while(Math.abs(d)>1e-7&& ++h<10)return a}(d,e,e+.1,b,c)}(a),d,e)}(b,c,d,e)}return"string"==typeof a?(h7(void 0!==i6[a],`Invalid easing type '${a}'`),i6[a]):a},i8=a=>Array.isArray(a)&&"number"!=typeof a[0],i9=(b,a)=>"zIndex"!==b&&!!("number"==typeof a||Array.isArray(a)||"string"==typeof a&&bd.test(a)&&!a.startsWith("url(")),E=()=>({type:"spring",stiffness:500,damping:25,restSpeed:10}),$=a=>({type:"spring",stiffness:550,damping:0===a?2*Math.sqrt(550):30,restSpeed:10}),aB=()=>({type:"keyframes",ease:"linear",duration:.3}),ja=a=>({type:"keyframes",duration:.8,values:a}),jb={x:E,y:E,z:E,rotate:E,rotateX:E,rotateY:E,rotateZ:E,scaleX:$,scaleY:$,scale:$,opacity:aB,backgroundColor:aB,color:aB,default:$},jc=(b,a)=>{let c;return{to:a,...(ho(a)?ja:jb[b]||jb.default)(a)}},jd=new Set(["brightness","contrast","saturate","opacity"]);function je(a){let[b,c]=a.slice(0,-1).split("(");if("drop-shadow"===b)return a;let[d]=c.match(g6)||[];if(!d)return a;let f=c.replace(d,""),e=jd.has(b)?1:0;return d!==c&&(e*=100),b+"("+e+f+")"}let jf=/([a-z-]*)\(.*?\)/g,bh=Object.assign(Object.assign({},bd),{getAnimatableNone(a){let b=a.match(jf);return b?b.map(je).join(" "):a}}),jg={...ds,color:n,backgroundColor:n,outlineColor:n,fill:n,stroke:n,borderColor:n,borderTopColor:n,borderRightColor:n,borderBottomColor:n,borderLeftColor:n,filter:bh,WebkitFilter:bh},jh=a=>jg[a];function ji(c,d){var b;let a=jh(c);return a!==bh&&(a=bd),null===(b=a.getAnimatableNone)|| void 0===b?void 0:b.call(a,d)}let jj={current:!1},jk=1/60*1e3,jl="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),jm="undefined"!=typeof window?a=>window.requestAnimationFrame(a):a=>setTimeout(()=>a(jl()),jk),jn=!0,jo=!1,jp=!1,jq={delta:0,timestamp:0},_=["read","update","preRender","render","postRender",],jr=_.reduce((a,b)=>(a[b]=function(b){let c=[],d=[],e=0,f=!1,g=!1,h=new WeakSet,a={schedule(a,i=!1,j=!1){let b=j&&f,g=b?c:d;return i&&h.add(a),-1===g.indexOf(a)&&(g.push(a),b&&f&&(e=c.length)),a},cancel(a){let b=d.indexOf(a);-1!==b&&d.splice(b,1),h.delete(a)},process(k){if(f){g=!0;return}if(f=!0,[c,d]=[d,c],d.length=0,e=c.length)for(let i=0;i<e;i++){let j=c[i];j(k),h.has(j)&&(a.schedule(j),b())}f=!1,g&&(g=!1,a.process(k))}};return a}(()=>jo=!0),a),{}),dN=_.reduce((a,b)=>{let c=jr[b];return a[b]=(a,b=!1,d=!1)=>(jo||jw(),c.schedule(a,b,d)),a},{}),js=_.reduce((a,b)=>(a[b]=jr[b].cancel,a),{}),jt=_.reduce((a,b)=>(a[b]=()=>jr[b].process(jq),a),{}),ju=a=>jr[a].process(jq),jv=a=>{jo=!1,jq.delta=jn?jk:Math.max(Math.min(a-jq.timestamp,40),1),jq.timestamp=a,jp=!0,_.forEach(ju),jp=!1,jo&&(jn=!1,jm(jv))},jw=()=>{jo=!0,jn=!0,jp||jm(jv)},jx=()=>jq;var jy=dN;function jz(b,c){let d=performance.now(),a=({timestamp:f})=>{let e=f-d;e>=c&&(js.read(a),b(e-c))};return jy.read(a,!0),()=>js.read(a)}let jA=!1;function jB(a){return 0===a||"string"==typeof a&&0===parseFloat(a)&& -1===a.indexOf(" ")}function jC(a){return"number"==typeof a?0:ji("",a)}function jD(a,b){return a[b]||a.default||a}function jE(c,a,d,b={}){return jj.current&&(b={type:!1}),a.start(g=>{let i,j=function(c,g,a,h,i){let d=jD(h,c)||{},b=void 0!==d.from?d.from:g.get(),e=i9(c,a);"none"===b&&e&&"string"==typeof a?b=ji(c,a):jB(b)&&"string"==typeof a?b=jC(a):!Array.isArray(a)&&jB(a)&&"string"==typeof b&&(a=jC(b));let f=i9(c,b);return h6(f===e,`You are trying to animate ${c} from "${b}" to "${a}". ${b} is not an animatable value - to enable this animation set ${b} to a value animatable to ${a} via the \`style\` property.`),f&&e&& !1!==d.type?function(){var e,h,j,f;let k={from:b,to:a,velocity:g.getVelocity(),onComplete:i,onUpdate:a=>g.set(a)};return"inertia"===d.type||"decay"===d.type?function({from:a=0,velocity:c=0,min:h,max:o,power:e=.8,timeConstant:i=750,bounceStiffness:p=500,bounceDamping:q=10,restDelta:j=1,modifyTarget:d,driver:r,onUpdate:s,onComplete:t,onStop:u}){let v;function f(a){return void 0!==h&&a<h|| void 0!==o&&a>o}function g(a){return void 0===h?o:void 0===o?h:Math.abs(h-a)<Math.abs(o-a)?h:o}function k(a){null==v||v.stop(),v=i$(Object.assign(Object.assign({},a),{driver:r,onUpdate(c){var b;null==s||s(c),null===(b=a.onUpdate)|| void 0===b||b.call(a,c)},onComplete:t,onStop:u}))}function l(a){k(Object.assign({type:"spring",stiffness:p,damping:q,restDelta:j},a))}if(f(a))l({from:a,velocity:c,to:g(a)});else{let b=e*c+a;void 0!==d&&(b=d(b));let m=g(b),w=m===h?-1:1,x,y,n=a=>{x=y,y=a,c=i_(a-x,iW().delta),(1===w&&a>m|| -1===w&&a<m)&&l({from:a,to:m,velocity:c})};k({type:"decay",from:a,velocity:c,timeConstant:i,power:e,restDelta:j,modifyTarget:d,onUpdate:f(b)?n:void 0})}return{stop:()=>null==v?void 0:v.stop()}}({...k,...d}):i$({...(e=d,h=k,j=c,Array.isArray(h.to)&& void 0===e.duration&&(e.duration=.8),Array.isArray((f=h).to)&&null===f.to[0]&&(f.to=[...f.to],f.to[0]=f.from),!function({when:b,delay:c,delayChildren:d,staggerChildren:e,staggerDirection:f,repeat:g,repeatType:h,repeatDelay:i,from:j,...a}){return!!Object.keys(a).length}(e)&&(e={...e,...jc(j,h.to)}),{...h,...function({ease:c,times:g,yoyo:d,flip:e,loop:f,...b}){let a={...b};return g&&(a.offset=g),b.duration&&(a.duration=i0(b.duration)),b.repeatDelay&&(a.repeatDelay=i0(b.repeatDelay)),c&&(a.ease=i8(c)?c.map(i7):i7(c)),"tween"===b.type&&(a.type="keyframes"),(d||f||e)&&(h6(!jA,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),jA=!0,d?a.repeatType="reverse":f?a.repeatType="loop":e&&(a.repeatType="mirror"),a.repeat=f||d||e||b.repeat),"spring"!==b.type&&(a.type="keyframes"),a}(e)}),onUpdate(a){k.onUpdate(a),d.onUpdate&&d.onUpdate(a)},onComplete(){k.onComplete(),d.onComplete&&d.onComplete()}})}:function(){let b=hq(a);return g.set(b),i(),d.onUpdate&&d.onUpdate(b),d.onComplete&&d.onComplete(),{stop(){}}}}(c,a,d,b,g),e=function(c,d){var a,b;let e=jD(c,d)||{};return null!==(b=null!==(a=e.delay)&& void 0!==a?a:c.delay)&& void 0!==b?b:0}(b,c),f=()=>i=j(),h;return e?h=jz(f,i0(e)):f(),()=>{h&&h(),i&&i.stop()}})}let jF=a=>/^\-?\d*\.?\d+$/.test(a),jG=a=>/^0[^.\s]+$/.test(a);function jH(a,b){-1===a.indexOf(b)&&a.push(b)}function jI(a,c){let b=a.indexOf(c);b> -1&&a.splice(b,1)}class jJ{constructor(){this.subscriptions=[]}add(a){return jH(this.subscriptions,a),()=>jI(this.subscriptions,a)}notify(c,d,e){let a=this.subscriptions.length;if(a){if(1===a)this.subscriptions[0](c,d,e);else for(let b=0;b<a;b++){let f=this.subscriptions[b];f&&f(c,d,e)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class jK{constructor(a){var b;this.version="7.6.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new jJ,this.velocityUpdateSubscribers=new jJ,this.renderSubscribers=new jJ,this.canTrackVelocity=!1,this.updateAndNotify=(b,c=!0)=>{this.prev=this.current,this.current=b;let{delta:d,timestamp:a}=jx();this.lastUpdated!==a&&(this.timeDelta=d,this.lastUpdated=a,jy.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.updateSubscribers.notify(this.current),this.velocityUpdateSubscribers.getSize()&&this.velocityUpdateSubscribers.notify(this.getVelocity()),c&&this.renderSubscribers.notify(this.current)},this.scheduleVelocityCheck=()=>jy.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.velocityUpdateSubscribers.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=a,this.canTrackVelocity=!isNaN(parseFloat(this.current))}onChange(a){return this.updateSubscribers.add(a)}clearListeners(){this.updateSubscribers.clear()}onRenderRequest(a){return a(this.get()),this.renderSubscribers.add(a)}attach(a){this.passiveEffect=a}set(a,b=!0){b&&this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a,b)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?i_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(a){return this.stop(),new Promise(b=>{this.hasAnimated=!0,this.stopAnimation=a(b)}).then(()=>this.clearAnimation())}stop(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()}}function jL(a){return new jK(a)}let jM=a=>b=>b.test(a),dO=[N,b,a2,x,dr,dq,{test:a=>"auto"===a,parse:a=>a}],jN=a=>dO.find(jM(a)),jO=[...dO,n,bd],jP=a=>jO.find(jM(a));function jQ(a,d,b){let c=a.getProps();return hn(c,d,void 0!==b?b:c.custom,function(a){let b={};return a.forEachValue((a,c)=>b[c]=a.get()),b}(a),function(a){let b={};return a.forEachValue((a,c)=>b[c]=a.getVelocity()),b}(a))}function jR(a,b,c){a.hasValue(b)?a.getValue(b).set(c):a.addValue(b,jL(c))}function jS(a,e){let c=jQ(a,e),{transitionEnd:f={},transition:h={},...b}=c?a.makeTargetAnimatable(c,!1):{};for(let d in b={...b,...f}){let g=hq(b[d]);jR(a,d,g)}}function jT(b,a){if(!a)return;let c=a[b]||a.default||a;return c.from}function jU(a){return Boolean(g0(a)&&a.add)}function jV(b,i,a={}){var c;let f=jQ(b,i,a.custom),{transition:g=b.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(g=a.transitionOverride);let d=f?()=>jW(b,f,a):()=>Promise.resolve(),e=(null===(c=b.variantChildren)|| void 0===c?void 0:c.size)?(c=0)=>{let{delayChildren:d=0,staggerChildren:e,staggerDirection:f}=g;return jX(b,i,d+c,e,f,a)}:()=>Promise.resolve(),{when:h}=g;if(!h)return Promise.all([d(),e(a.delay)]);{let[j,k]="beforeChildren"===h?[d,e]:[e,d];return j().then(k)}}function jW(a,o,{delay:p=0,transitionOverride:f,type:g}={}){var c;let{transition:h=a.getDefaultTransition(),transitionEnd:q,...i}=a.makeTargetAnimatable(o),j=a.getValue("willChange");f&&(h=f);let k=[],l=g&&(null===(c=a.animationState)|| void 0===c?void 0:c.getState()[g]);for(let b in i){let m=a.getValue(b),n=i[b];if(!m|| void 0===n||l&&jZ(l,b))continue;let d={delay:p,...h};a.shouldReduceMotion&&g$.has(b)&&(d={...d,type:!1,delay:0});let e=jE(b,m,n,d);jU(j)&&(j.add(b),e=e.then(()=>j.remove(b))),k.push(e)}return Promise.all(k).then(()=>{q&&jS(a,q)})}function jX(a,e,f=0,b=0,c=1,g){let d=[],h=(a.variantChildren.size-1)*b,i=1===c?(a=0)=>a*b:(a=0)=>h-a*b;return Array.from(a.variantChildren).sort(jY).forEach((a,b)=>{d.push(jV(a,e,{...g,delay:f+i(b)}).then(()=>a.notifyAnimationComplete(e)))}),Promise.all(d)}function jY(a,b){return a.sortNodePosition(b)}function jZ({protectedKeys:c,needsAnimating:b},a){let d=c.hasOwnProperty(a)&& !0!==b[a];return b[a]=!1,d}let aC=[r_.Animate,r_.InView,r_.Focus,r_.Hover,r_.Tap,r_.Drag,r_.Exit,],j$=[...aC].reverse(),j_=aC.length;function j0(b,a){return"string"==typeof a?a!==b:!!Array.isArray(a)&&!h1(a,b)}function j1(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let dP={animation:y(({visualElement:a,animate:b})=>{a.animationState||(a.animationState=function(a){var b;let d=(b=a,a=>Promise.all(a.map(({animation:a,options:c})=>(function(b,a,d={}){b.notifyAnimationStart(a);let c;if(Array.isArray(a)){let e=a.map(a=>jV(b,a,d));c=Promise.all(e)}else if("string"==typeof a)c=jV(b,a,d);else{let f="function"==typeof a?jQ(b,a,d.custom):a;c=jW(b,f,d)}return c.then(()=>b.notifyAnimationComplete(a))})(b,a,c)))),e={[r_.Animate]:j1(!0),[r_.InView]:j1(),[r_.Hover]:j1(),[r_.Tap]:j1(),[r_.Drag]:j1(),[r_.Focus]:j1(),[r_.Exit]:j1()},f=!0,g=(b,d)=>{let c=jQ(a,d);if(c){let{transition:g,transitionEnd:e,...f}=c;b={...b,...f,...e}}return b};function c(G,w){var q;let r=a.getProps(),x=a.getVariantContext(!0)||{},m=[],n=new Set,o={},y=1/0;for(let j=0;j<j_;j++){let i=j$[j],b=e[i],c=null!==(q=r[i])&& void 0!==q?q:x[i],s=gK(c),t=i===w?b.isActive:null;!1===t&&(y=j);let p=c===x[i]&&c!==r[i]&&s;if(p&&f&&a.manuallyAnimateOnMount&&(p=!1),b.protectedKeys={...o},!b.isActive&&null===t|| !c&&!b.prevProp||gL(c)||"boolean"==typeof c)continue;let z=j0(b.prevProp,c),A=z||i===w&&b.isActive&&!p&&s||j>y&&s,B=Array.isArray(c)?c:[c],k=B.reduce(g,{});!1===t&&(k={});let{prevResolvedValues:C={}}=b,E={...C,...k},u=a=>{A=!0,n.delete(a),b.needsAnimating[a]=!0};for(let h in E){let l=k[h],v=C[h];o.hasOwnProperty(h)||(l!==v?ho(l)&&ho(v)?!h1(l,v)||z?u(h):b.protectedKeys[h]=!0:void 0!==l?u(h):n.add(h):void 0!==l&&n.has(h)?u(h):b.protectedKeys[h]=!0)}b.prevProp=c,b.prevResolvedValues=k,b.isActive&&(o={...o,...k}),f&&a.blockInitialAnimation&&(A=!1),A&&!p&&m.push(...B.map(a=>({animation:a,options:{type:i,...G}})))}if(n.size){let F={};n.forEach(b=>{let c=a.getBaseTarget(b);void 0!==c&&(F[b]=c)}),m.push({animation:F})}let D=Boolean(m.length);return f&& !1===r.initial&&!a.manuallyAnimateOnMount&&(D=!1),f=!1,D?d(m):Promise.resolve()}return{animateChanges:c,setActive:function(b,f,g){var d;if(e[b].isActive===f)return Promise.resolve();null===(d=a.variantChildren)|| void 0===d||d.forEach(c=>{var a;return null===(a=c.animationState)|| void 0===a?void 0:a.setActive(b,f)}),e[b].isActive=f;let h=c(g,b);for(let i in e)e[i].protectedKeys={};return h},setAnimateFunction:function(b){d=b(a)},getState:()=>e}}(a)),gL(b)&&(0,i.useEffect)(()=>b.subscribe(a),[b])}),exit:y(a=>{let{custom:c,visualElement:d}=a,[b,e]=gE(),f=(0,i.useContext)(gD);(0,i.useEffect)(()=>{d.isPresent=b;let a=d.animationState&&d.animationState.setActive(r_.Exit,!b,{custom:f&&f.custom||c});a&&!b&&a.then(e)},[b])})},j2=a=>a.hasOwnProperty("x")&&a.hasOwnProperty("y"),j3=a=>j2(a)&&a.hasOwnProperty("z"),j4=(a,b)=>Math.abs(a-b);function j5(a,b){if(iw(a)&&iw(b))return j4(a,b);if(j2(a)&&j2(b)){let c=j4(a.x,b.x),d=j4(a.y,b.y),e=j3(a)&&j3(b)?j4(a.z,b.z):0;return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2))}}class j6{constructor(a,b,{transformPagePoint:e}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=j9(this.lastMoveEventInfo,this.history),b=null!==this.startEvent,e=j5(a.offset,{x:0,y:0})>=3;if(!b&&!e)return;let{point:f}=a,{timestamp:g}=jx();this.history.push({...f,timestamp:g});let{onStart:c,onMove:d}=this.handlers;b||(c&&c(this.lastMoveEvent,a),this.startEvent=this.lastMoveEvent),d&&d(this.lastMoveEvent,a)},this.handlePointerMove=(a,b)=>{if(this.lastMoveEvent=a,this.lastMoveEventInfo=j7(b,this.transformPagePoint),hx(a)&&0===a.buttons){this.handlePointerUp(a,b);return}jy.update(this.updatePoint,!0)},this.handlePointerUp=(a,e)=>{this.end();let{onEnd:b,onSessionEnd:c}=this.handlers,d=j9(j7(e,this.transformPagePoint),this.history);this.startEvent&&b&&b(a,d),c&&c(a,d)},hy(a)&&a.touches.length>1)return;this.handlers=b,this.transformPagePoint=e;let f=hA(a),c=j7(f,this.transformPagePoint),{point:g}=c,{timestamp:h}=jx();this.history=[{...g,timestamp:h}];let{onSessionStart:d}=b;d&&d(a,j9(c,this.history)),this.removeListeners=hS(hI(window,"pointermove",this.handlePointerMove),hI(window,"pointerup",this.handlePointerUp),hI(window,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),js.update(this.updatePoint)}}function j7(a,b){return b?{point:b(a.point)}:a}function j8(a,b){return{x:a.x-b.x,y:a.y-b.y}}function j9({point:a},b){return{point:a,delta:j8(a,kb(b)),offset:j8(a,ka(b)),velocity:kc(b,.1)}}function ka(a){return a[0]}function kb(a){return a[a.length-1]}function kc(c,g){if(c.length<2)return{x:0,y:0};let e=c.length-1,a=null,d=kb(c);for(;e>=0&&(a=c[e],!(d.timestamp-a.timestamp>i0(g)));)e--;if(!a)return{x:0,y:0};let f=(d.timestamp-a.timestamp)/1e3;if(0===f)return{x:0,y:0};let b={x:(d.x-a.x)/f,y:(d.y-a.y)/f};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function kd(a){return a.max-a.min}function ke(a,b=0,c=.01){return j5(a,b)<c}function kf(a,b,c,d=.5){a.origin=d,a.originPoint=ih(b.min,b.max,a.origin),a.scale=kd(c)/kd(b),(ke(a.scale,1,1e-4)||isNaN(a.scale))&&(a.scale=1),a.translate=ih(c.min,c.max,a.origin)-a.originPoint,(ke(a.translate)||isNaN(a.translate))&&(a.translate=0)}function kg(b,c,d,a){kf(b.x,c.x,d.x,null==a?void 0:a.originX),kf(b.y,c.y,d.y,null==a?void 0:a.originY)}function kh(a,b,c){a.min=c.min+b.min,a.max=a.min+kd(b)}function ki(a,b,c){a.min=b.min-c.min,a.max=a.min+kd(b)}function kj(a,b,c){ki(a.x,b.x,c.x),ki(a.y,b.y,c.y)}function kk(a,b,c){return{min:void 0!==b?a.min+b:void 0,max:void 0!==c?a.max+c-(a.max-a.min):void 0}}function kl(a,b){let c=b.min-a.min,d=b.max-a.max;return b.max-b.min<a.max-a.min&&([c,d]=[d,c]),{min:c,max:d}}function km(a,b,c){return{min:kn(a,b),max:kn(a,c)}}function kn(a,c){var b;return"number"==typeof a?a:null!==(b=a[c])&& void 0!==b?b:0}let ko=()=>({translate:0,scale:1,origin:0,originPoint:0}),kp=()=>({x:ko(),y:ko()}),kq=()=>({min:0,max:0}),kr=()=>({x:kq(),y:kq()});function ks(a){return[a("x"),a("y")]}function kt({top:a,left:b,right:c,bottom:d}){return{x:{min:b,max:c},y:{min:a,max:d}}}function ku(a){return void 0===a||1===a}function kv({scale:a,scaleX:b,scaleY:c}){return!ku(a)||!ku(b)||!ku(c)}function kw(a){return kv(a)||kx(a)||a.z||a.rotate||a.rotateX||a.rotateY}function kx(a){return ky(a.x)||ky(a.y)}function ky(a){return a&&"0%"!==a}function kz(a,j,k,b,c){var d,e,f,g,h,i;return void 0!==c&&(a=(d=a,e=c,(f=b)+e*(d-f))),g=a,h=k,(i=b)+h*(g-i)+j}function kA(a,b=0,c=1,d,e){a.min=kz(a.min,b,c,d,e),a.max=kz(a.max,b,c,d,e)}function kB(c,{x:a,y:b}){kA(c.x,a.translate,a.scale,a.originPoint),kA(c.y,b.translate,b.scale,b.originPoint)}function kC(a,b){a.min=a.min+b,a.max=a.max+b}function kD(b,a,[d,e,c]){let f=void 0!==a[c]?a[c]:.5,g=ih(b.min,b.max,f);kA(b,a[d],a[e],g,a.scale)}let kE=["x","scaleX","originX"],kF=["y","scaleY","originY"];function kG(a,b){kD(a.x,b,kE),kD(a.y,b,kF)}function kH(a,b){return kt(function(a,b){if(!b)return a;let c=b({x:a.left,y:a.top}),d=b({x:a.right,y:a.bottom});return{top:c.y,left:c.x,bottom:d.y,right:d.x}}(a.getBoundingClientRect(),b))}let kI=new WeakMap;class kJ{constructor(a){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kr(),this.visualElement=a}start(a,{snapToCursor:f=!1}={}){if(!1===this.visualElement.isPresent)return;let b=a=>{this.stopAnimation(),f&&this.snapToCursor(hA(a,"page").point)},c=(d,e)=>{var a;let{drag:b,dragPropagation:f,onDragStart:c}=this.getProps();(!b||f||(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hM(b),this.openGlobalLock))&&(this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ks(b=>{var c,d;let a=this.getAxisMotionValue(b).get()||0;if(a2.test(a)){let e=null===(d=null===(c=this.visualElement.projection)|| void 0===c?void 0:c.layout)|| void 0===d?void 0:d.actual[b];if(e){let f=kd(e);a=f*(parseFloat(a)/100)}}this.originPoint[b]=a}),null==c||c(d,e),null===(a=this.visualElement.animationState)|| void 0===a||a.setActive(r_.Drag,!0))},d=(e,a)=>{let{dragPropagation:f,dragDirectionLock:g,onDirectionLock:c,onDrag:d}=this.getProps();if(!f&&!this.openGlobalLock)return;let{offset:b}=a;if(g&&null===this.currentDirection){this.currentDirection=kL(b),null!==this.currentDirection&&(null==c||c(this.currentDirection));return}this.updateAxis("x",a.point,b),this.updateAxis("y",a.point,b),this.visualElement.syncRender(),null==d||d(e,a)},e=(a,b)=>this.stop(a,b);this.panSession=new j6(a,{onSessionStart:b,onStart:c,onMove:d,onSessionEnd:e},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(c,a){let d=this.isDragging;if(this.cancel(),!d)return;let{velocity:e}=a;this.startAnimation(e);let{onDragEnd:b}=this.getProps();null==b||b(c,a)}cancel(){var a,b;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(a=this.panSession)|| void 0===a||a.end(),this.panSession=void 0;let{dragPropagation:c}=this.getProps();!c&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(b=this.visualElement.animationState)|| void 0===b||b.setActive(r_.Drag,!1)}updateAxis(a,f,c){let{drag:d}=this.getProps();if(!c||!kK(a,d,this.currentDirection))return;let e=this.getAxisMotionValue(a),b=this.originPoint[a]+c[a];this.constraints&&this.constraints[a]&&(b=function(a,{min:b,max:c},d){return void 0!==b&&a<b?a=d?ih(b,a,d.min):Math.max(a,b):void 0!==c&&a>c&&(a=d?ih(c,a,d.max):Math.min(a,c)),a}(b,this.constraints[a],this.elastic[a])),e.set(b)}resolveConstraints(){let{dragConstraints:a,dragElastic:c}=this.getProps(),{layout:b}=this.visualElement.projection||{},d=this.constraints;a&&gJ(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&b?this.constraints=function(a,{top:b,left:c,bottom:d,right:e}){return{x:kk(a.x,c,e),y:kk(a.y,b,d)}}(b.actual,a):this.constraints=!1,this.elastic=function(a=.35){return!1===a?a=0:!0===a&&(a=.35),{x:km(a,"left","right"),y:km(a,"top","bottom")}}(c),d!==this.constraints&&b&&this.constraints&&!this.hasMutatedConstraints&&ks(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=function(c,a){let b={};return void 0!==a.min&&(b.min=a.min-c.min),void 0!==a.max&&(b.max=a.max-c.min),b}(b.actual[a],this.constraints[a]))})}resolveRefConstraints(){var b,c;let{dragConstraints:d,onMeasureDragConstraints:g}=this.getProps();if(!d||!gJ(d))return!1;let h=d.current;h7(null!==h,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:a}=this.visualElement;if(!a||!a.layout)return!1;let i=function(c,d,e){let a=kH(c,e),{scroll:b}=d;return b&&(kC(a.x,b.x),kC(a.y,b.y)),a}(h,a.root,this.visualElement.getTransformPagePoint()),e=(b=a.layout.actual,c=i,{x:kl(b.x,c.x),y:kl(b.y,c.y)});if(g){let f=g(function({x:a,y:b}){return{top:b.min,right:a.max,bottom:b.max,left:a.min}}(e));this.hasMutatedConstraints=!!f,f&&(e=kt(f))}return e}startAnimation(c){let{drag:d,dragMomentum:e,dragElastic:f,dragTransition:g,dragSnapToOrigin:h,onDragTransitionEnd:a}=this.getProps(),i=this.constraints||{},b=ks(a=>{var b;if(!kK(a,d,this.currentDirection))return;let j=null!==(b=null==i?void 0:i[a])&& void 0!==b?b:{};h&&(j={min:0,max:0});let k={type:"inertia",velocity:e?c[a]:0,bounceStiffness:f?200:1e6,bounceDamping:f?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...g,...j};return this.startAxisValueAnimation(a,k)});return Promise.all(b).then(a)}startAxisValueAnimation(a,b){let c=this.getAxisMotionValue(a);return jE(a,c,0,b)}stopAnimation(){ks(a=>this.getAxisMotionValue(a).stop())}getAxisMotionValue(a){var b,c;let d="_drag"+a.toUpperCase(),e=this.visualElement.getProps()[d];return e||this.visualElement.getValue(a,null!==(c=null===(b=this.visualElement.getProps().initial)|| void 0===b?void 0:b[a])&& void 0!==c?c:0)}snapToCursor(a){ks(b=>{let{drag:d}=this.getProps();if(!kK(b,d,this.currentDirection))return;let{projection:c}=this.visualElement,e=this.getAxisMotionValue(b);if(c&&c.layout){let{min:f,max:g}=c.layout.actual[b];e.set(a[b]-ih(f,g,.5))}})}scalePositionWithinConstraints(){var a;let{drag:e,dragConstraints:d}=this.getProps(),{projection:b}=this.visualElement;if(!gJ(d)||!b||!this.constraints)return;this.stopAnimation();let f={x:0,y:0};ks(a=>{let b=this.getAxisMotionValue(a);if(b){let c=b.get();f[a]=function(a,b){let c=.5,d=kd(a),e=kd(b);return e>d?c=ig(b.min,b.max-d,a.min):d>e&&(c=ig(a.min,a.max-e,b.min)),h8(0,1,c)}({min:c,max:c},this.constraints[a])}});let{transformTemplate:c}=this.visualElement.getProps();this.visualElement.getInstance().style.transform=c?c({},""):"none",null===(a=b.root)|| void 0===a||a.updateScroll(),b.updateLayout(),this.resolveConstraints(),ks(a=>{if(!kK(a,e,null))return;let b=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];b.set(ih(c,d,f[a]))})}addListeners(){var b;kI.set(this.visualElement,this);let d=this.visualElement.getInstance(),e=hI(d,"pointerdown",a=>{let{drag:b,dragListener:c=!0}=this.getProps();b&&c&&this.start(a)}),c=()=>{let{dragConstraints:a}=this.getProps();gJ(a)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,f=a.addEventListener("measure",c);a&&!a.layout&&(null===(b=a.root)|| void 0===b||b.updateScroll(),a.updateLayout()),c();let g=hv(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:b,hasLayoutChanged:a})=>{this.isDragging&&a&&(ks(a=>{let c=this.getAxisMotionValue(a);c&&(this.originPoint[a]+=b[a].translate,c.set(c.get()+b[a].translate))}),this.visualElement.syncRender())});return()=>{g(),e(),f(),null==h||h()}}getProps(){let a=this.visualElement.getProps(),{drag:b=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:e=!1,dragElastic:f=.35,dragMomentum:g=!0}=a;return{...a,drag:b,dragDirectionLock:c,dragPropagation:d,dragConstraints:e,dragElastic:f,dragMomentum:g}}}function kK(a,b,c){return(!0===b||b===a)&&(null===c||c===a)}function kL(b,c=10){let a=null;return Math.abs(b.y)>c?a="y":Math.abs(b.x)>c&&(a="x"),a}let dQ={pan:y(function({onPan:a,onPanStart:b,onPanEnd:d,onPanSessionStart:c,visualElement:e}){let f=(0,i.useRef)(null),{transformPagePoint:g}=(0,i.useContext)(gF),h={onSessionStart:c,onStart:b,onMove:a,onEnd(a,b){f.current=null,d&&d(a,b)}};(0,i.useEffect)(()=>{null!==f.current&&f.current.updateHandlers(h)}),hJ(e,"pointerdown",(a||b||d||c)&&function(a){f.current=new j6(a,h,{transformPagePoint:g})}),hQ(()=>f.current&&f.current.end())}),drag:y(function(b){let{dragControls:c,visualElement:d}=b,a=gQ(()=>new kJ(d));(0,i.useEffect)(()=>c&&c.subscribe(a),[a,c]),(0,i.useEffect)(()=>a.addListeners(),[a])})},kM={current:null},kN={current:!1},kO=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount",],dR=Object.keys(dp),kP=dR.length,bi=({treeType:a="",build:b,getBaseTarget:c,makeTargetAnimatable:d,measureViewportBox:e,render:f,readValueFromInstance:g,removeValueFromRenderState:h,sortNodePosition:j,scrapeMotionValuesFromProps:k})=>({parent:n,props:l,presenceId:u,blockInitialAnimation:v,visualState:w,reducedMotionConfig:B},C={})=>{let D=!1,{latestValues:m,renderState:E}=w,F,x=function(){let a=kO.map(()=>new jJ),c={},b={clearAllListeners:()=>a.forEach(a=>a.clear()),updatePropListeners(a){kO.forEach(d=>{var e;let f="on"+d,g=a[f];null===(e=c[d])|| void 0===e||e.call(c),g&&(c[d]=b[f](g))})}};return a.forEach((c,a)=>{b["on"+kO[a]]=a=>c.add(a),b["notify"+kO[a]]=(...a)=>c.notify(...a)}),b}(),G=new Map,H=new Map,I={},J={...m},K=l.initial?{...m}:{},L;function y(){F&&D&&(M(),f(F,E,l.style,A.projection))}function M(){b(A,E,m,C,l)}function N(){x.notifyUpdate(m)}function O(b,a){let c=a.onChange(a=>{m[b]=a,l.onUpdate&&jy.update(N,!1,!0)}),d=a.onRenderRequest(A.scheduleRender);H.set(b,()=>{c(),d()})}let{willChange:q,...r}=k(l);for(let o in r){let s=r[o];void 0!==m[o]&&g0(s)&&(s.set(m[o],!1),jU(q)&&q.add(o))}if(l.values)for(let p in l.values){let t=l.values[p];void 0!==m[p]&&g0(t)&&t.set(m[p])}let P=gN(l),z=gO(l),A={treeType:a,current:null,depth:n?n.depth+1:0,parent:n,children:new Set,presenceId:u,shouldReduceMotion:null,variantChildren:z?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==n?void 0:n.isMounted()),blockInitialAnimation:v,isMounted:()=>Boolean(F),mount(a){D=!0,F=A.current=a,A.projection&&A.projection.mount(a),z&&n&&!P&&(L=null==n?void 0:n.addVariantChild(A)),G.forEach((a,b)=>O(b,a)),kN.current||function(){if(kN.current=!0,dn){if(window.matchMedia){let b=window.matchMedia("(prefers-reduced-motion)"),a=()=>kM.current=b.matches;b.addListener(a),a()}else kM.current=!1}}(),A.shouldReduceMotion="never"!==B&&("always"===B||kM.current),null==n||n.children.add(A),A.setProps(l)},unmount(){var a;null===(a=A.projection)|| void 0===a||a.unmount(),js.update(N),js.render(y),H.forEach(a=>a()),null==L||L(),null==n||n.children.delete(A),x.clearAllListeners(),F=void 0,D=!1},loadFeatures(a,j,k,l,d,m){let e=[];"production"!==hT&&k&&j&&h7(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(let b=0;b<kP;b++){let f=dR[b],{isEnabled:o,Component:g}=dp[f];o(a)&&g&&e.push((0,i.createElement)(g,{key:f,...a,visualElement:A}))}if(!A.projection&&d){A.projection=new d(l,A.getLatestValues(),n&&n.projection);let{layoutId:p,layout:c,drag:q,dragConstraints:h,layoutScroll:r}=a;A.projection.setOptions({layoutId:p,layout:c,alwaysMeasureLayout:Boolean(q)||h&&gJ(h),visualElement:A,scheduleRender:()=>A.scheduleRender(),animationType:"string"==typeof c?c:"both",initialPromotionConfig:m,layoutScroll:r})}return e},addVariantChild(c){var a;let b=A.getClosestVariantNode();if(b)return null===(a=b.variantChildren)|| void 0===a||a.add(c),()=>b.variantChildren.delete(c)},sortNodePosition:b=>j&&a===b.treeType?j(A.getInstance(),b.getInstance()):0,getClosestVariantNode:()=>z?A:null==n?void 0:n.getClosestVariantNode(),getLayoutId:()=>l.layoutId,getInstance:()=>F,getStaticValue:a=>m[a],setStaticValue:(a,b)=>m[a]=b,getLatestValues:()=>m,setVisibility(a){A.isVisible!==a&&(A.isVisible=a,A.scheduleRender())},makeTargetAnimatable:(a,b=!0)=>d(A,a,l,b),measureViewportBox:()=>e(F,l),addValue(a,b){A.hasValue(a)&&A.removeValue(a),G.set(a,b),m[a]=b.get(),O(a,b)},removeValue(a){var b;G.delete(a),null===(b=H.get(a))|| void 0===b||b(),H.delete(a),delete m[a],h(a,E)},hasValue:a=>G.has(a),getValue(a,c){if(l.values&&l.values[a])return l.values[a];let b=G.get(a);return void 0===b&& void 0!==c&&(b=jL(c),A.addValue(a,b)),b},forEachValue:a=>G.forEach(a),readValue:a=>void 0!==m[a]?m[a]:g(F,a,C),setBaseTarget(a,b){J[a]=b},getBaseTarget(a){var d;let{initial:b}=l,e="string"==typeof b||"object"==typeof b?null===(d=hn(l,b))|| void 0===d?void 0:d[a]:void 0;if(b&& void 0!==e)return e;if(c){let f=c(l,a);if(void 0!==f&&!g0(f))return f}return void 0!==K[a]&& void 0===e?void 0:J[a]},...x,build:()=>(M(),E),scheduleRender(){jy.render(y,!1,!0)},syncRender:y,setProps(a){(a.transformTemplate||l.transformTemplate)&&A.scheduleRender(),l=a,x.updatePropListeners(a),I=function(b,d,f){let{willChange:e}=d;for(let a in d){let c=d[a],g=f[a];if(g0(c))b.addValue(a,c),jU(e)&&e.add(a);else if(g0(g))b.addValue(a,jL(c)),jU(e)&&e.remove(a);else if(g!==c){if(b.hasValue(a)){let h=b.getValue(a);h.hasAnimated||h.set(c)}else{let i=b.getStaticValue(a);b.addValue(a,jL(void 0!==i?i:c))}}}for(let j in f)void 0===d[j]&&b.removeValue(j);return d}(A,k(l),I)},getProps:()=>l,getVariant(b){var a;return null===(a=l.variants)|| void 0===a?void 0:a[b]},getDefaultTransition:()=>l.transition,getTransformPagePoint:()=>l.transformPagePoint,getVariantContext(f=!1){if(f)return null==n?void 0:n.getVariantContext();if(!P){let c=(null==n?void 0:n.getVariantContext())||{};return void 0!==l.initial&&(c.initial=l.initial),c}let d={};for(let a=0;a<kQ;a++){let e=dS[a],b=l[e];(gK(b)|| !1===b)&&(d[e]=b)}return d}};return A},dS=["initial",...aC],kQ=dS.length;function kR(a){return"string"==typeof a&&a.startsWith("var(--")}let kS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function kT(b,c,d=1){h7(d<=4,`Max CSS variable fallback depth detected in property "${b}". This may indicate a circular fallback dependency.`);let[e,a]=function(b){let a=kS.exec(b);if(!a)return[,];let[,c,d]=a;return[c,d]}(b);if(!e)return;let f=window.getComputedStyle(c).getPropertyValue(e);return f?f.trim():kR(a)?kT(a,c,d+1):a}let kU=new Set(["width","height","top","left","right","bottom","x","y",]),kV=a=>kU.has(a),kW=a=>Object.keys(a).some(kV),kX=(a,b)=>{a.set(b,!1),a.set(b)},kY=a=>a===N||a===b;(mg=r0||(r0={})).width="width",mg.height="height",mg.left="left",mg.right="right",mg.top="top",mg.bottom="bottom";let kZ=(a,b)=>parseFloat(a.split(", ")[b]),bj=(a,b)=>(f,{transform:c})=>{if("none"===c||!c)return 0;let d=c.match(/^matrix3d\((.+)\)$/);if(d)return kZ(d[1],b);{let e=c.match(/^matrix\((.+)\)$/);return e?kZ(e[1],a):0}},k$=new Set(["x","y","z"]),k_=a0.filter(a=>!k$.has(a)),k0={width:({x:a},{paddingLeft:b="0",paddingRight:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),height:({y:a},{paddingTop:b="0",paddingBottom:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),top:(b,{top:a})=>parseFloat(a),left:(b,{left:a})=>parseFloat(a),bottom:({y:a},{top:b})=>parseFloat(b)+(a.max-a.min),right:({x:a},{left:b})=>parseFloat(b)+(a.max-a.min),x:bj(4,13),y:bj(5,14)},k1=(b,a,c)=>{let g=a.measureViewportBox(),d=a.getInstance(),e=getComputedStyle(d),{display:f}=e,h={};"none"===f&&a.setStaticValue("display",b.display||"block"),c.forEach(a=>{h[a]=k0[a](g,e)}),a.syncRender();let i=a.measureViewportBox();return c.forEach(c=>{let d=a.getValue(c);kX(d,h[c]),b[c]=k0[c](i,e)}),b},k2=(e,a,j={},c={})=>{a={...a},c={...c};let h=Object.keys(a).filter(kV),f=[],k=!1,d=[];if(h.forEach(h=>{let n=e.getValue(h);if(!e.hasValue(h))return;let m=j[h],l=jN(m),g=a[h],i;if(ho(g)){let r=g.length,p=null===g[0]?1:0;l=jN(m=g[p]);for(let o=p;o<r;o++)i?h7(jN(g[o])===i,"All keyframes must be of the same type"):(i=jN(g[o]),h7(i===l||kY(l)&&kY(i),"Keyframes must be of the same dimension as the current value"))}else i=jN(g);if(l!==i){if(kY(l)&&kY(i)){let q=n.get();"string"==typeof q&&n.set(parseFloat(q)),"string"==typeof g?a[h]=parseFloat(g):Array.isArray(g)&&i===b&&(a[h]=g.map(parseFloat))}else(null==l?void 0:l.transform)&&(null==i?void 0:i.transform)&&(0===m||0===g)?0===m?n.set(i.transform(m)):a[h]=l.transform(g):(k||(f=function(b){let a=[];return k_.forEach(c=>{let d=b.getValue(c);void 0!==d&&(a.push([c,d.get()]),d.set(c.startsWith("scale")?1:0))}),a.length&&b.syncRender(),a}(e),k=!0),d.push(h),c[h]=void 0!==c[h]?c[h]:a[h],kX(n,g))}}),!d.length)return{target:a,transitionEnd:c};{let g=d.indexOf("height")>=0?window.pageYOffset:null,i=k1(a,e,d);return f.length&&f.forEach(([a,b])=>{e.getValue(a).set(b)}),e.syncRender(),dn&&null!==g&&window.scrollTo({top:g}),{target:i,transitionEnd:c}}},k3=(e,b,i,c)=>{var f,a,g,d;let h=function(e,{...b},a){let f=e.getInstance();if(!(f instanceof Element))return{target:b,transitionEnd:a};for(let c in a&&(a={...a}),e.forEachValue(a=>{let b=a.get();if(!kR(b))return;let c=kT(b,f);c&&a.set(c)}),b){let d=b[c];if(!kR(d))continue;let g=kT(d,f);g&&(b[c]=g,a&& void 0===a[c]&&(a[c]=d))}return{target:b,transitionEnd:a}}(e,b,c);return b=h.target,c=h.transitionEnd,f=e,a=b,g=i,d=c,kW(a)?k2(f,a,g,d):{target:a,transitionEnd:d}},bk={treeType:"dom",readValueFromInstance(f,a){if(g$.has(a)){let c=jh(a);return c&&c.default||0}{var d;let e=(d=f,window.getComputedStyle(d)),b=(g3(a)?e.getPropertyValue(a):e[a])||0;return"string"==typeof b?b.trim():b}},sortNodePosition:(a,b)=>2&a.compareDocumentPosition(b)?1:-1,getBaseTarget(b,c){var a;return null===(a=b.style)|| void 0===a?void 0:a[c]},measureViewportBox:(a,{transformPagePoint:b})=>kH(a,b),resetTransform(b,c,d){let{transformTemplate:a}=d;c.style.transform=a?a({},""):"none",b.scheduleRender()},restoreTransform(a,b){a.style.transform=b.style.transform},removeValueFromRenderState(a,{vars:b,style:c}){delete b[a],delete c[a]},makeTargetAnimatable(e,{transition:f,transitionEnd:b,...a},{transformValues:d},h=!0){let c=function(e,f,g){var a;let c={};for(let b in e){let d=jT(b,f);c[b]=void 0!==d?d:null===(a=g.getValue(b))|| void 0===a?void 0:a.get()}return c}(a,f||{},e);if(d&&(b&&(b=d(b)),a&&(a=d(a)),c&&(c=d(c))),h){!function(d,e,f){var g,h;let j=Object.keys(e).filter(a=>!d.hasValue(a)),k=j.length;if(k)for(let i=0;i<k;i++){let b=j[i],c=e[b],a=null;Array.isArray(c)&&(a=c[0]),null===a&&(a=null!==(h=null!==(g=f[b])&& void 0!==g?g:d.readValue(b))&& void 0!==h?h:e[b]),null!=a&&("string"==typeof a&&(jF(a)||jG(a))?a=parseFloat(a):!jP(a)&&bd.test(c)&&(a=ji(b,c)),d.addValue(b,jL(a)),void 0===f[b]&&(f[b]=a),d.setBaseTarget(b,a))}}(e,a,c);let g=k3(e,a,c,b);b=g.transitionEnd,a=g.target}return{transition:f,transitionEnd:b,...a}},scrapeMotionValuesFromProps:a5,build(a,b,c,d,e){void 0!==a.isVisible&&(b.style.visibility=a.isVisible?"visible":"hidden"),ha(b,c,d,e.transformTemplate)},render:dw},k4=bi(bk),k5=bi({...bk,getBaseTarget:(a,b)=>a[b],readValueFromInstance(c,a){var b;return g$.has(a)?(null===(b=jh(a))|| void 0===b?void 0:b.default)||0:(a=hm.has(a)?a:hl(a),c.getAttribute(a))},scrapeMotionValuesFromProps:a6,build(e,a,b,c,d){hj(a,b,c,d.transformTemplate)},render:dx}),k6=(b,a)=>gY(b)?k5(a,{enableHardwareAcceleration:!1}):k4(a,{enableHardwareAcceleration:!0});function k7(b,a){return a.max===a.min?0:b/(a.max-a.min)*100}let O={correct(a,c){if(!c.target)return a;if("string"==typeof a){if(!b.test(a))return a;a=parseFloat(a)}let d=k7(a,c.target.x),e=k7(a,c.target.y);return`${d}% ${e}%`}},k8="_$css",dT={correct(b,{treeScale:e,projectionDelta:f}){let k=b,g=b.includes("var("),m=[];g&&(b=b.replace(kS,a=>(m.push(a),k8)));let a=bd.parse(b);if(a.length>5)return k;let l=bd.createTransformer(b),c="number"!=typeof a[0]?1:0,h=f.x.scale*e.x,i=f.y.scale*e.y;a[0+c]/=h,a[1+c]/=i;let j=ih(h,i,.5);"number"==typeof a[2+c]&&(a[2+c]/=j),"number"==typeof a[3+c]&&(a[3+c]/=j);let d=l(a);if(g){let n=0;d=d.replace(k8,()=>{let a=m[n];return n++,a})}return d}};class k9 extends i.Component{componentDidMount(){var d;let{visualElement:e,layoutGroup:c,switchLayoutGroup:b,layoutId:f}=this.props,{projection:a}=e;Object.assign(gZ,d=la),a&&(c.group&&c.group.add(a),b&&b.register&&f&&b.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),gR.hasEverUpdated=!0}getSnapshotBeforeUpdate(c){let{layoutDependency:d,visualElement:e,drag:f,isPresent:b}=this.props,a=e.projection;return a&&(a.isPresent=b,f||c.layoutDependency!==d|| void 0===d?a.willUpdate():this.safeToRemove(),c.isPresent===b||(b?a.promote():a.relegate()||jy.postRender(()=>{var b;(null===(b=a.getStack())|| void 0===b?void 0:b.members.length)||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),!a.currentAnimation&&a.isLead()&&this.safeToRemove())}componentWillUnmount(){let{visualElement:d,layoutGroup:b,switchLayoutGroup:c}=this.props,{projection:a}=d;a&&(a.scheduleCheckAfterUnmount(),(null==b?void 0:b.group)&&b.group.remove(a),(null==c?void 0:c.deregister)&&c.deregister(a))}safeToRemove(){let{safeToRemove:a}=this.props;null==a||a()}render(){return null}}let la={borderRadius:{...O,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius",]},borderTopLeftRadius:O,borderTopRightRadius:O,borderBottomLeftRadius:O,borderBottomRightRadius:O,boxShadow:dT},dU=["TopLeft","TopRight","BottomLeft","BottomRight"],lb=dU.length,lc=a=>"string"==typeof a?parseFloat(a):a,ld=a=>"number"==typeof a||b.test(a);function le(b,c){var a;return null!==(a=b[c])&& void 0!==a?a:b.borderRadius}let lf=lh(0,.5,az),lg=lh(.5,.95,be);function lh(a,b,c){return d=>d<a?0:d>b?1:c(ig(a,b,d))}function li(a,b){a.min=b.min,a.max=b.max}function lj(a,b){li(a.x,b.x),li(a.y,b.y)}function lk(a,j,k,b,c){var d,e,f,g,h,i;return a-=j,a=(d=a,e=1/k,(f=b)+e*(d-f)),void 0!==c&&(a=(g=a,h=1/c,(i=b)+h*(g-i))),a}function ll(b,a,[c,d,e],f,g){!function(b,a=0,f=1,h=.5,g,c=b,d=b){if(a2.test(a)){a=parseFloat(a);let i=ih(d.min,d.max,a/100);a=i-d.min}if("number"!=typeof a)return;let e=ih(c.min,c.max,h);b===c&&(e-=a),b.min=lk(b.min,a,f,e,g),b.max=lk(b.max,a,f,e,g)}(b,a[c],a[d],a[e],a.scale,f,g)}let lm=["x","scaleX","originX"],ln=["y","scaleY","originY"];function lo(c,d,a,b){ll(c.x,d,lm,null==a?void 0:a.x,null==b?void 0:b.x),ll(c.y,d,ln,null==a?void 0:a.y,null==b?void 0:b.y)}function lp(a){return 0===a.translate&&1===a.scale}function lq(a){return lp(a.x)&&lp(a.y)}function lr(a,b){return a.x.min===b.x.min&&a.x.max===b.x.max&&a.y.min===b.y.min&&a.y.max===b.y.max}function ls(a){return kd(a.x)/kd(a.y)}class lt{constructor(){this.members=[]}add(a){jH(this.members,a),a.scheduleRender()}remove(a){if(jI(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){let b=this.members[this.members.length-1];b&&this.promote(b)}}relegate(e){let c=this.members.findIndex(a=>e===a);if(0===c)return!1;let a;for(let b=c;b>=0;b--){let d=this.members[b];if(!1!==d.isPresent){a=d;break}}return!!a&&(this.promote(a),!0)}promote(a,d){var c;let b=this.lead;if(a!==b&&(this.prevLead=b,this.lead=a,a.show(),b)){b.instance&&b.scheduleRender(),a.scheduleRender(),a.resumeFrom=b,d&&(a.resumeFrom.preserveOpacity=!0),b.snapshot&&(a.snapshot=b.snapshot,a.snapshot.latestValues=b.animationValues||b.latestValues,a.snapshot.isShared=!0),(null===(c=a.root)|| void 0===c?void 0:c.isUpdating)&&(a.isLayoutDirty=!0);let{crossfade:e}=a.options;!1===e&&b.hide()}}exitAnimationComplete(){this.members.forEach(d=>{var e,a,b,f,c;null===(a=(e=d.options).onExitComplete)|| void 0===a||a.call(e),null===(c=null===(b=d.resumingFrom)|| void 0===b?void 0:(f=b.options).onExitComplete)|| void 0===c||c.call(f)})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lu(c,a,d){let h=c.x.translate/a.x,i=c.y.translate/a.y,b=`translate3d(${h}px, ${i}px, 0) `;if(b+=`scale(${1/a.x}, ${1/a.y}) `,d){let{rotate:e,rotateX:f,rotateY:g}=d;e&&(b+=`rotate(${e}deg) `),f&&(b+=`rotateX(${f}deg) `),g&&(b+=`rotateY(${g}deg) `)}let j=c.x.scale*a.x,k=c.y.scale*a.y;return"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"==(b+=`scale(${j}, ${k})`)?"none":b}let lv=(a,b)=>a.depth-b.depth;class lw{constructor(){this.children=[],this.isDirty=!1}add(a){jH(this.children,a),this.isDirty=!0}remove(a){jI(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(lv),this.isDirty=!1,this.children.forEach(a)}}let lx=["","X","Y","Z"];function bl({attachResizeListener:a,defaultParent:b,measureScroll:c,checkIsScrollRoot:d,resetTransform:e}){return class{constructor(c,e={},a=null==b?void 0:b()){this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.nodes.forEach(lE),this.nodes.forEach(lF)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=c,this.latestValues=e,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0,c&&this.root.registerPotentialNode(c,this);for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new lw)}addEventListener(a,b){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new jJ),this.eventHandlers.get(a).add(b)}notifyListeners(b,...c){let a=this.eventHandlers.get(b);null==a||a.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}registerPotentialNode(a,b){this.potentialNodes.set(a,b)}mount(b,g=!1){var e;if(this.instance)return;this.isSVG=b instanceof SVGElement&&"svg"!==b.tagName,this.instance=b;let{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.getInstance()&&d.mount(b),this.root.nodes.add(this),null===(e=this.parent)|| void 0===e||e.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),g&&(f||c)&&(this.isLayoutDirty=!0),a){let h,i=()=>this.root.updateBlockedByResize=!1;a(b,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=jz(i,250),gR.hasAnimatedSinceResize&&(gR.hasAnimatedSinceResize=!1,this.nodes.forEach(lD))})}c&&this.root.registerSharedNode(c,this),!1!==this.options.animate&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:l,hasLayoutChanged:a,hasRelativeTargetChanged:h,layout:i})=>{var b,c,e,j,f;if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let m=null!==(c=null!==(b=this.options.transition)&& void 0!==b?b:d.getDefaultTransition())&& void 0!==c?c:lM,{onLayoutAnimationStart:n,onLayoutAnimationComplete:o}=d.getProps(),p=!this.targetLayout||!lr(this.targetLayout,i)||h,k=!a&&h;if((null===(e=this.resumeFrom)|| void 0===e?void 0:e.instance)||k||a&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(l,k);let g={...jD(m,"layout"),onPlay:n,onComplete:o};d.shouldReduceMotion&&(g.delay=0,g.type=!1),this.startAnimation(g)}else a||0!==this.animationProgress||lD(this),this.isLead()&&(null===(f=(j=this.options).onExitComplete)|| void 0===f||f.call(j));this.targetLayout=i})}unmount(){var a,b;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(a=this.getStack())|| void 0===a||a.remove(this),null===(b=this.parent)|| void 0===b||b.children.delete(this),this.instance=void 0,js.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){var a;return this.isAnimationBlocked||(null===(a=this.parent)|| void 0===a?void 0:a.isTreeAnimationBlocked())||!1}startUpdate(){var a;this.isUpdateBlocked()||(this.isUpdating=!0,null===(a=this.nodes)|| void 0===a||a.forEach(lG))}willUpdate(g=!0){var d,a,b;if(this.root.isUpdateBlocked()){null===(a=(d=this.options).onExitComplete)|| void 0===a||a.call(d);return}if(this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){let e=this.path[c];e.shouldResetTransform=!0,e.updateScroll()}let{layoutId:h,layout:i}=this.options;if(void 0===h&&!i)return;let f=null===(b=this.options.visualElement)|| void 0===b?void 0:b.getProps().transformTemplate;this.prevTransformTemplateValue=null==f?void 0:f(this.latestValues,""),this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}didUpdate(){let a=this.isUpdateBlocked();if(a){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lB);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(lN),this.potentialNodes.clear()),this.nodes.forEach(lC),this.nodes.forEach(ly),this.nodes.forEach(lz),this.clearAllSnapshots(),jt.update(),jt.preRender(),jt.render())}clearAllSnapshots(){this.nodes.forEach(lA),this.sharedNodes.forEach(lH)}scheduleUpdateProjection(){jy.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){jy.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){if(this.snapshot||!this.instance)return;let a=this.measure(),b=this.removeTransform(this.removeElementScroll(a));lP(b),this.snapshot={measured:a,layout:b,latestValues:{}}}updateLayout(){var a;if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++){let e=this.path[b];e.updateScroll()}let c=this.measure();lP(c);let d=this.layout;this.layout={measured:c,actual:this.removeElementScroll(c)},this.layoutCorrected=kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(a=this.options.visualElement)|| void 0===a||a.notifyLayoutMeasure(this.layout.actual,null==d?void 0:d.actual)}updateScroll(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=d(this.instance),this.scroll=c(this.instance))}resetTransform(){var a;if(!e)return;let d=this.isLayoutDirty||this.shouldResetTransform,f=this.projectionDelta&&!lq(this.projectionDelta),b=null===(a=this.options.visualElement)|| void 0===a?void 0:a.getProps().transformTemplate,c=null==b?void 0:b(this.latestValues,""),g=c!==this.prevTransformTemplateValue;d&&(f||kw(this.latestValues)||g)&&(e(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let{visualElement:c}=this.options;if(!c)return kr();let a=c.measureViewportBox(),{scroll:b}=this.root;return b&&(kC(a.x,b.x),kC(a.y,b.y)),a}removeElementScroll(e){let a=kr();lj(a,e);for(let b=0;b<this.path.length;b++){let f=this.path[b],{scroll:c,options:g,isScrollRoot:h}=f;if(f!==this.root&&c&&g.layoutScroll){if(h){lj(a,e);let{scroll:d}=this.root;d&&(kC(a.x,-d.x),kC(a.y,-d.y))}kC(a.x,c.x),kC(a.y,c.y)}}return a}applyTransform(d,e=!1){let b=kr();lj(b,d);for(let c=0;c<this.path.length;c++){let a=this.path[c];!e&&a.options.layoutScroll&&a.scroll&&a!==a.root&&kG(b,{x:-a.scroll.x,y:-a.scroll.y}),kw(a.latestValues)&&kG(b,a.latestValues)}return kw(this.latestValues)&&kG(b,this.latestValues),b}removeTransform(f){var c;let b=kr();lj(b,f);for(let d=0;d<this.path.length;d++){let a=this.path[d];if(!a.instance||!kw(a.latestValues))continue;kv(a.latestValues)&&a.updateSnapshot();let e=kr(),g=a.measure();lj(e,g),lo(b,a.latestValues,null===(c=a.snapshot)|| void 0===c?void 0:c.layout,e)}return kw(this.latestValues)&&lo(b,this.latestValues),b}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection()}setOptions(a){this.options={...this.options,...a,crossfade:void 0===a.crossfade||a.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var a,b,c,d;let{layout:e,layoutId:f}=this.options;this.layout&&(e||f)&&(!this.targetDelta&&!this.relativeTarget&&(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=kr(),this.relativeTargetOrigin=kr(),kj(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),lj(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&((this.target||(this.target=kr(),this.targetWithTransforms=kr()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(a=this.relativeParent)|| void 0===a?void 0:a.target))?(b=this.target,c=this.relativeTarget,d=this.relativeParent.target,kh(b.x,c.x,d.x),kh(b.y,c.y,d.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):lj(this.target,this.layout.actual),kB(this.target,this.targetDelta)):lj(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=kr(),this.relativeTargetOrigin=kr(),kj(this.relativeTargetOrigin,this.target,this.relativeParent.target),lj(this.relativeTarget,this.relativeTargetOrigin)))))}getClosestProjectingParent(){if(!(!this.parent||kv(this.parent.latestValues)||kx(this.parent.latestValues)))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}calcProjection(){var a;let{layout:d,layoutId:e}=this.options;if(this.isTreeAnimating=Boolean((null===(a=this.parent)|| void 0===a?void 0:a.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||e))return;let c=this.getLead();lj(this.layoutCorrected,this.layout.actual),function(d,c,h,i=!1){var e,f;let j=h.length;if(!j)return;c.x=c.y=1;let a,b;for(let g=0;g<j;g++)b=(a=h[g]).projectionDelta,(null===(f=null===(e=a.instance)|| void 0===e?void 0:e.style)|| void 0===f?void 0:f.display)!=="contents"&&(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&kG(d,{x:-a.scroll.x,y:-a.scroll.y}),b&&(c.x*=b.x.scale,c.y*=b.y.scale,kB(d,b)),i&&kw(a.latestValues)&&kG(d,a.latestValues))}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==c);let{target:b}=c;if(!b)return;this.projectionDelta||(this.projectionDelta=kp(),this.projectionDeltaWithTransform=kp());let f=this.treeScale.x,g=this.treeScale.y,h=this.projectionTransform;kg(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=lu(this.projectionDelta,this.treeScale),(this.projectionTransform!==h||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var c,a,b;null===(a=(c=this.options).scheduleRender)|| void 0===a||a.call(c),d&&(null===(b=this.getStack())|| void 0===b||b.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,c=!1){var b;let a=this.snapshot,g=(null==a?void 0:a.latestValues)||{},h={...this.latestValues},i=kp();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!c;let j=kr(),d=null==a?void 0:a.isShared,e=1>=((null===(b=this.getStack())|| void 0===b?void 0:b.members.length)||0),k=Boolean(d&&!e&& !0===this.options.crossfade&&!this.path.some(lL));this.animationProgress=0,this.mixTargetDelta=c=>{var b;let a=c/1e3;lI(i.x,f.x,a),lI(i.y,f.y,a),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&(null===(b=this.relativeParent)|| void 0===b?void 0:b.layout)&&(kj(j,this.layout.actual,this.relativeParent.layout.actual),lK(this.relativeTarget,this.relativeTargetOrigin,j,a)),d&&(this.animationValues=h,function(b,d,e,f,m,n){var h,i,j,k;m?(b.opacity=ih(0,null!==(h=e.opacity)&& void 0!==h?h:1,lf(f)),b.opacityExit=ih(null!==(i=d.opacity)&& void 0!==i?i:1,0,lg(f))):n&&(b.opacity=ih(null!==(j=d.opacity)&& void 0!==j?j:1,null!==(k=e.opacity)&& void 0!==k?k:1,f));for(let l=0;l<lb;l++){let g=`border${dU[l]}Radius`,c=le(d,g),a=le(e,g);if(void 0===c&& void 0===a)continue;c||(c=0),a||(a=0);let o=0===c||0===a||ld(c)===ld(a);o?(b[g]=Math.max(ih(lc(c),lc(a),f),0),(a2.test(a)||a2.test(c))&&(b[g]+="%")):b[g]=a}(d.rotate||e.rotate)&&(b.rotate=ih(d.rotate||0,e.rotate||0,f))}(h,g,this.latestValues,a,k,e)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=a},this.mixTargetDelta(0)}startAnimation(c){var a,b;this.notifyListeners("animationStart"),null===(a=this.currentAnimation)|| void 0===a||a.stop(),this.resumingFrom&&(null===(b=this.resumingFrom.currentAnimation)|| void 0===b||b.stop()),this.pendingAnimation&&(js.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jy.update(()=>{gR.hasAnimatedSinceResize=!0,this.currentAnimation=function(a,d,b={}){let c=g0(a)?a:jL(a);return jE("",c,1e3,b),{stop:()=>c.stop(),isAnimating:()=>c.isAnimating()}}(0,1e3,{...c,onUpdate:b=>{var a;this.mixTargetDelta(b),null===(a=c.onUpdate)|| void 0===a||a.call(c,b)},onComplete:()=>{var a;null===(a=c.onComplete)|| void 0===a||a.call(c),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){var a;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(a=this.getStack())|| void 0===a||a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){var a;this.currentAnimation&&(null===(a=this.mixTargetDelta)|| void 0===a||a.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let b=this.getLead(),{targetWithTransforms:c,target:a,layout:d,latestValues:e}=b;if(c&&a&&d){if(this!==b&&this.layout&&d&&lQ(this.options.animationType,this.layout.actual,d.actual)){a=this.target||kr();let f=kd(this.layout.actual.x);a.x.min=b.target.x.min,a.x.max=a.x.min+f;let g=kd(this.layout.actual.y);a.y.min=b.target.y.min,a.y.max=a.y.min+g}lj(c,a),kG(c,e),kg(this.projectionDeltaWithTransform,this.layoutCorrected,c,e)}}registerSharedNode(c,a){var d,b,e;this.sharedNodes.has(c)||this.sharedNodes.set(c,new lt);let f=this.sharedNodes.get(c);f.add(a),a.promote({transition:null===(d=a.options.initialPromotionConfig)|| void 0===d?void 0:d.transition,preserveFollowOpacity:null===(e=null===(b=a.options.initialPromotionConfig)|| void 0===b?void 0:b.shouldPreserveFollowOpacity)|| void 0===e?void 0:e.call(b,a)})}isLead(){let a=this.getStack();return!a||a.lead===this}getLead(){var a;let{layoutId:b}=this.options;return b&&(null===(a=this.getStack())|| void 0===a?void 0:a.lead)||this}getPrevLead(){var a;let{layoutId:b}=this.options;return b?null===(a=this.getStack())|| void 0===a?void 0:a.prevLead:void 0}getStack(){let{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:c,transition:a,preserveFollowOpacity:d}={}){let b=this.getStack();b&&b.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){let a=this.getStack();return!!a&&a.relegate(this)}resetRotation(){let{visualElement:a}=this.options;if(!a)return;let e=!1,c={};for(let d=0;d<lx.length;d++){let g=lx[d],b="rotate"+g;a.getStaticValue(b)&&(e=!0,c[b]=a.getStaticValue(b),a.setStaticValue(b,0))}if(e){for(let f in null==a||a.syncRender(),c)a.setStaticValue(f,c[f]);a.scheduleRender()}}getProjectionStyles(g={}){var h,i,j;let a={};if(!this.instance||this.isSVG)return a;if(!this.isVisible)return{visibility:"hidden"};a.visibility="";let d=null===(h=this.options.visualElement)|| void 0===h?void 0:h.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=hr(g.pointerEvents)||"",a.transform=d?d(this.latestValues,""):"none",a;let c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){let e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=hr(g.pointerEvents)||""),this.hasProjected&&!kw(this.latestValues)&&(e.transform=d?d({},""):"none",this.hasProjected=!1),e}let b=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=lu(this.projectionDeltaWithTransform,this.treeScale,b),d&&(a.transform=d(b,a.transform));let{x:n,y:o}=this.projectionDelta;for(let f in a.transformOrigin=`${100*n.origin}% ${100*o.origin}% 0`,c.animationValues?a.opacity=c===this?null!==(j=null!==(i=b.opacity)&& void 0!==i?i:this.latestValues.opacity)&& void 0!==j?j:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:a.opacity=c===this?void 0!==b.opacity?b.opacity:"":void 0!==b.opacityExit?b.opacityExit:0,gZ){if(void 0===b[f])continue;let{correct:p,applyTo:k}=gZ[f],m=p(b[f],c);if(k){let q=k.length;for(let l=0;l<q;l++)a[k[l]]=m}else a[f]=m}return this.options.layoutId&&(a.pointerEvents=c===this?hr(g.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var a;return null===(a=b.currentAnimation)|| void 0===a?void 0:a.stop()}),this.root.nodes.forEach(lB),this.root.sharedNodes.clear()}}}function ly(a){a.updateLayout()}function lz(a){var d,h,e;let b=(null===(d=a.resumeFrom)|| void 0===d?void 0:d.snapshot)||a.snapshot;if(a.isLead()&&a.layout&&b&&a.hasListeners("didUpdate")){let{actual:c,measured:o}=a.layout,{animationType:i}=a.options;"size"===i?ks(d=>{let a=b.isShared?b.measured[d]:b.layout[d],e=kd(a);a.min=c[d].min,a.max=a.min+e}):lQ(i,b.layout,c)&&ks(a=>{let d=b.isShared?b.measured[a]:b.layout[a],e=kd(c[a]);d.max=d.min+e});let f=kp();kg(f,c,b.layout);let g=kp();b.isShared?kg(g,a.applyTransform(o,!0),b.measured):kg(g,c,b.layout);let p=!lq(f),j=!1;if(!a.resumeFrom&&(a.relativeParent=a.getClosestProjectingParent(),a.relativeParent&&!a.relativeParent.resumeFrom)){let{snapshot:k,layout:l}=a.relativeParent;if(k&&l){let m=kr();kj(m,b.layout,k.layout);let n=kr();kj(n,c,l.actual),lr(m,n)||(j=!0)}}a.notifyListeners("didUpdate",{layout:c,snapshot:b,delta:g,layoutDelta:f,hasLayoutChanged:p,hasRelativeTargetChanged:j})}else a.isLead()&&(null===(e=(h=a.options).onExitComplete)|| void 0===e||e.call(h));a.options.transition=void 0}function lA(a){a.clearSnapshot()}function lB(a){a.clearMeasurements()}function lC(b){let{visualElement:a}=b.options;(null==a?void 0:a.getProps().onBeforeLayoutMeasure)&&a.notifyBeforeLayoutMeasure(),b.resetTransform()}function lD(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0}function lE(a){a.resolveTargetDelta()}function lF(a){a.calcProjection()}function lG(a){a.resetRotation()}function lH(a){a.removeLeadSnapshot()}function lI(a,b,c){a.translate=ih(b.translate,0,c),a.scale=ih(b.scale,1,c),a.origin=b.origin,a.originPoint=b.originPoint}function lJ(a,b,c,d){a.min=ih(b.min,c.min,d),a.max=ih(b.max,c.max,d)}function lK(a,b,c,d){lJ(a.x,b.x,c.x,d),lJ(a.y,b.y,c.y,d)}function lL(a){return a.animationValues&& void 0!==a.animationValues.opacityExit}let lM={duration:.45,ease:[.4,0,.1,1]};function lN(a,e){let b=a.root;for(let c=a.path.length-1;c>=0;c--)if(Boolean(a.path[c].instance)){b=a.path[c];break}let f=b&&b!==a.root?b.instance:document,d=f.querySelector(`[data-projection-id="${e}"]`);d&&a.mount(d,!0)}function lO(a){a.min=Math.round(a.min),a.max=Math.round(a.max)}function lP(a){lO(a.x),lO(a.y)}function lQ(a,b,c){return"position"===a||"preserve-aspect"===a&&!function(a,b,c=.1){return j5(a,b)<=c}(ls(b),ls(c),.2)}let lR=bl({attachResizeListener:(a,b)=>hv(a,"resize",b),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lS={current:void 0},lT=bl({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent(){if(!lS.current){let a=new lR(0,{});a.mount(window),a.setOptions({layoutScroll:!0}),lS.current=a}return lS.current},resetTransform(b,a){b.style.transform=void 0!==a?a:"none"},checkIsScrollRoot:a=>Boolean("fixed"===window.getComputedStyle(a).position)}),lU={...dP,...dy,...dQ,measureLayout:function(a){let[b,c]=gE(),d=(0,i.useContext)(gT);return i.createElement(k9,{...a,layoutGroup:d,switchLayoutGroup:(0,i.useContext)(gV),isPresent:b,safeToRemove:c})}},lV=function(b){function a(a,c={}){return function({preloadedFeatures:a,createVisualElement:d,projectionNodeConstructor:e,useRender:f,useVisualState:g,Component:c}){a&&function(b){for(let a in b)"projectionNodeConstructor"===a?dp.projectionNodeConstructor=b[a]:dp[a].Component=b[a]}(a);let b=(0,i.forwardRef)(function(h,p){var q,m,r;let j={...(0,i.useContext)(gF),...h,layoutId:function c({layoutId:a}){let b=(0,i.useContext)(gT).id;return b&& void 0!==a?b+"-"+a:a}(h)},{isStatic:k}=j,n=null,b=function(a){let{initial:b,animate:c}=function(a,d){if(gN(a)){let{initial:b,animate:c}=a;return{initial:!1===b||gK(b)?b:void 0,animate:gK(c)?c:void 0}}return!1!==a.inherit?d:{}}(a,(0,i.useContext)(gG));return(0,i.useMemo)(()=>({initial:b,animate:c}),[gP(b),gP(c)])}(h),o=k?void 0:gQ(()=>{if(gR.hasEverUpdated)return gS++}),l=g(h,k);if(!k&&dn){b.visualElement=function(d,e,f,a){let g=(0,i.useContext)(gG).visualElement,h=(0,i.useContext)(gI),b=(0,i.useContext)(gD),j=(0,i.useContext)(gF).reducedMotion,c=(0,i.useRef)(void 0);a=a||h.renderer,!c.current&&a&&(c.current=a(d,{visualState:e,parent:g,props:f,presenceId:b?b.id:void 0,blockInitialAnimation:!!b&& !1===b.initial,reducedMotionConfig:j}));let k=c.current;return gH(()=>{k&&k.syncRender()}),(0,i.useEffect)(()=>{k&&k.animationState&&k.animationState.animateChanges()}),gH(()=>()=>k&&k.notifyUnmount(),[]),k}(c,l,j,d);let s=(0,i.useContext)(gI).strict,t=(0,i.useContext)(gV);b.visualElement&&(n=b.visualElement.loadFeatures(j,s,a,o,e||dp.projectionNodeConstructor,t))}return i.createElement(gU,{visualElement:b.visualElement,props:j},n,i.createElement(gG.Provider,{value:b},f(c,h,o,(q=l,m=b.visualElement,r=p,(0,i.useCallback)(a=>{a&&q.mount&&q.mount(a),m&&(a?m.mount(a):m.unmount()),r&&("function"==typeof r?r(a):gJ(r)&&(r.current=a))},[m])),l,k,b.visualElement)))});return b[gW]=c,b}(b(a,c))}if("undefined"==typeof Proxy)return a;let c=new Map;return new Proxy(a,{get:(d,b)=>(c.has(b)||c.set(b,a(b)),c.get(b))})}((a,b)=>(function(a,{forwardMotionProps:b=!1},c,d,e){let f=gY(a)?ht:hu;return{...f,preloadedFeatures:c,useRender:function(a=!1){return(b,c,d,f,{latestValues:g},h)=>{let j=gY(b)?hk:hc,k=j(c,g,h),l=function(b,d,e){let c={};for(let a in b)(du(a)|| !0===e&&he(a)|| !d&&!he(a)||b.draggable&&a.startsWith("onDrag"))&&(c[a]=b[a]);return c}(c,"string"==typeof b,a),e={...l,...k,ref:f};return d&&(e["data-projection-id"]=d),(0,i.createElement)(b,e)}}(b),createVisualElement:d,projectionNodeConstructor:e,Component:a}})(a,b,lU,k6,lT));function lW(){let a=(0,i.useRef)(!1);return gH(()=>(a.current=!0,()=>{a.current=!1}),[]),a}class lX extends i.Component{getSnapshotBeforeUpdate(c){let a=this.props.childRef.current;if(a&&c.isPresent&&!this.props.isPresent){let b=this.props.sizeRef.current;b.height=a.offsetHeight||0,b.width=a.offsetWidth||0,b.top=a.offsetTop,b.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function lY({children:c,isPresent:a}){let e=(0,i.useId)(),b=(0,i.useRef)(null),d=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)(()=>{let{width:f,height:g,top:h,left:i}=d.current;if(a||!b.current||!f||!g)return;b.current.dataset.motionPopId=e;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            top: ${h}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[a]),i.createElement(lX,{isPresent:a,childRef:b,sizeRef:d},i.cloneElement(c,{ref:b}))}let lZ=({children:b,initial:f,isPresent:a,onExitComplete:g,custom:h,presenceAffectsLayout:c,mode:d})=>{let j=gQ(l$),k=(0,i.useId)(),e=(0,i.useMemo)(()=>({id:k,initial:f,isPresent:a,custom:h,onExitComplete(a){for(let b of(j.set(a,!0),j.values()))if(!b)return;g&&g()},register:a=>(j.set(a,!1),()=>j.delete(a))}),c?void 0:[a]);return(0,i.useMemo)(()=>{j.forEach((b,a)=>j.set(a,!1))},[a]),i.useEffect(()=>{a||j.size||!g||g()},[a]),"popLayout"===d&&(b=i.createElement(lY,{isPresent:a},b)),i.createElement(gD.Provider,{value:e},b)};function l$(){return new Map}let l_=a=>a.key||"",l0=({children:j,custom:q,initial:r=!0,onExitComplete:s,exitBeforeEnter:k,presenceAffectsLayout:t=!0,mode:c="sync"})=>{k&&(c="wait",hV(!1,"Replace exitBeforeEnter with mode='wait'"));let[l]=function(){let d=lW(),[a,e]=(0,i.useState)(0),b=(0,i.useCallback)(()=>{d.current&&e(a+1)},[a]),c=(0,i.useCallback)(()=>jy.postRender(b),[b]);return[c,a]}(),e=(0,i.useContext)(gT).forceRender;e&&(l=e);let u=lW(),f=function(a){let b=[];return i.Children.forEach(a,a=>{(0,i.isValidElement)(a)&&b.push(a)}),b}(j),a=f,b=new Set,m=(0,i.useRef)(a),v=(0,i.useRef)(new Map).current,n=(0,i.useRef)(!0);if(gH(()=>{n.current=!1,function(a,b){a.forEach(a=>{let c=l_(a);b.set(c,a)})}(f,v),m.current=a}),hQ(()=>{n.current=!0,v.clear(),b.clear()}),n.current)return i.createElement(i.Fragment,null,a.map(a=>i.createElement(lZ,{key:l_(a),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:t,mode:c},a)));a=[...a];let g=m.current.map(l_),o=f.map(l_),p=g.length;for(let d=0;d<p;d++){let h=g[d];-1===o.indexOf(h)&&b.add(h)}return"wait"===c&&b.size&&(a=[]),b.forEach(d=>{if(-1!==o.indexOf(d))return;let e=v.get(d);if(!e)return;let h=g.indexOf(d),j=()=>{v.delete(d),b.delete(d);let a=m.current.findIndex(a=>a.key===d);if(m.current.splice(a,1),!b.size){if(m.current=f,!1===u.current)return;l(),s&&s()}};a.splice(h,0,i.createElement(lZ,{key:l_(e),isPresent:!1,onExitComplete:j,custom:q,presenceAffectsLayout:t,mode:c},e))}),a=a.map(a=>{let d=a.key;return b.has(d)?a:i.createElement(lZ,{key:l_(a),isPresent:!0,presenceAffectsLayout:t,mode:c},a)}),"production"!==hT&&"wait"===c&&a.length>1&&console.warn('You\'re attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.'),i.createElement(i.Fragment,null,b.size?a:a.map(a=>(0,i.cloneElement)(a)))};function l1(){return(l1=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function l2(b,c){var a=l3(b,c),d=a?b[a].findIndex(function(a){return a.id===c}):-1;return{position:a,index:d}}var bm,dV,dW,dX,l3=function(b,c){var a;return null==(a=Object.values(b).flat().find(function(a){return a.id===c}))?void 0:a.position},l4=(bm={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},dV=bm,dW=new Set,dX=function(a){dV=a(dV),dW.forEach(function(a){return a()})},{getState:function(){return dV},subscribe:function(a){return dW.add(a),function(){dX(function(){return bm}),dW.delete(a)}},removeToast:function(a,b){dX(function(c){var d;return l1({},c,((d={})[b]=c[b].filter(function(b){return b.id!=a}),d))})},notify:function(b,c){var a=l6(b,c),e=a.position,d=a.id;return dX(function(b){var c,d,f,g=e.includes("top")?[a].concat(null!=(c=b[e])?c:[]):[].concat(null!=(d=b[e])?d:[],[a]);return l1({},b,((f={})[e]=g,f))}),d},update:function(a,b){a&&dX(function(g){var c=l1({},g),f=l2(c,a),d=f.position,e=f.index;return d&& -1!==e&&(c[d][e]=l1({},c[d][e],b,{message:l8(b)})),c})},closeAll:function(a){var b=(void 0===a?{}:a).positions;dX(function(a){return(null!=b?b:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(function(b,c){return b[c]=a[c].map(function(a){return l1({},a,{requestClose:!0})}),b},l1({},a))})},close:function(a){dX(function(b){var d,c=l3(b,a);return c?l1({},b,((d={})[c]=b[c].map(function(b){return b.id==a?l1({},b,{requestClose:!0}):b}),d)):b})},isActive:function(a){return Boolean(l2(l4.getState(),a).position)}}),l5=0;function l6(d,a){void 0===a&&(a={}),l5+=1;var b,c,e=null!=(b=a.id)?b:l5,f=null!=(c=a.position)?c:"bottom";return{id:e,message:d,position:f,duration:a.duration,onCloseComplete:a.onCloseComplete,onRequestRemove:function(){return l4.removeToast(String(e),f)},status:a.status,requestClose:!1,containerStyle:a.containerStyle}}var l7=function(a){var g=a.status,c=a.variant,b=a.id,d=a.title,h=a.isClosable,j=a.onClose,e=a.description,k=a.icon,f=void 0!==b?"toast-"+b+"-title":void 0;return i.createElement(gw,{status:g,variant:void 0===c?"solid":c,id:String(b),alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto","aria-labelledby":f},i.createElement(gz,null,k),i.createElement(t.m$.div,{flex:"1",maxWidth:"100%"},d&&i.createElement(gx,{id:f},d),e&&i.createElement(gy,{display:"block"},e)),h&&i.createElement(dm,{size:"sm",onClick:j,position:"absolute",insetEnd:1,top:1}))};function l8(a){void 0===a&&(a={});var b=a,d=b.render,c=b.toastComponent,e=void 0===c?l7:c;return function(b){return(0,k.mf)(d)?d(b):i.createElement(e,l1({},b,a))}}var l9={initial:function(d){var b,a=d.position,e=["top","bottom"].includes(a)?"y":"x",c=["top-right","bottom-right"].includes(a)?1:-1;return"bottom"===a&&(c=1),(b={opacity:0})[e]=24*c,b},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},dY=i.memo(function(a){var b,r=a.id,s=a.message,B=a.onCloseComplete,u=a.onRequestRemove,c=a.requestClose,v=void 0!==c&&c,d=a.position,e=void 0===d?"bottom":d,f=a.duration,g=void 0===f?5e3:f,w=a.containerStyle,h=a.motionVariants,j=a.toastSpacing,x=void 0===j?"0.5rem":j,l=i.useState(g),y=l[0],C=l[1],m=(b=(0,i.useContext)(gD),null===b||b.isPresent);eJ(function(){m||null==B||B()},[m]),eJ(function(){C(g)},[g]);var n,o,p,q=function(){m&&u()};i.useEffect(function(){m&&v&&u()},[m,v,u]),n=q,o=y,p=(0,eI.u)(n),i.useEffect(function(){if(null!=o){var a=null;return a=window.setTimeout(function(){p()},o),function(){a&&window.clearTimeout(a)}}},[o,p]);var z=i.useMemo(function(){return l1({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:x},w)},[w,x]),A=i.useMemo(function(){var b,c,d,a;return c=(b=e).includes("right"),d=b.includes("left"),a="center",c&&(a="flex-end"),d&&(a="flex-start"),{display:"flex",flexDirection:"column",alignItems:a}},[e]);return i.createElement(lV.li,{layout:!0,className:"chakra-toast",variants:void 0===h?l9:h,initial:"initial",animate:"animate",exit:"exit",onHoverStart:function(){return C(null)},onHoverEnd:function(){return C(g)},custom:{position:e},style:A},i.createElement(t.m$.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:z},(0,k.Pu)(s,{id:r,onClose:q})))});k.Ts&&(dY.displayName="ToastComponent");var ma=function(a){var c=i.useSyncExternalStore(l4.subscribe,l4.getState,l4.getState),d=a.children,g=a.motionVariants,b=a.component,h=void 0===b?dY:b,e=a.portalProps,f=(0,k.Yd)(c).map(function(b){var a,d,e,f,j,k=c[b];return i.createElement("ul",{role:"region","aria-live":"polite",key:b,id:"chakra-toast-manager-"+b,style:(d=(a=b).includes("top")?"env(safe-area-inset-top, 0px)":void 0,e=a.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,f=a.includes("left")?void 0:"env(safe-area-inset-right, 0px)",j=a.includes("right")?void 0:"env(safe-area-inset-left, 0px)",{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===a||"bottom"===a?"0 auto":void 0,top:d,bottom:e,right:f,left:j})},i.createElement(l0,{initial:!1},k.map(function(a){return i.createElement(h,l1({key:a.id,motionVariants:g},a))})))});return i.createElement(i.Fragment,null,d,i.createElement(S,e,f))},mb=(k.ZT,k.ZT,["children","toastOptions"]),dZ=function(a){var b=a.children,c=a.toastOptions,d=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,mb);return i.createElement(eW,d,b,i.createElement(ma,c))};dZ.defaultProps={theme:dj};function mc(a,b,c,d){if(((0,k.mf)(a)||(0,k.mf)(b))&&Object.prototype.hasOwnProperty.call(d,c))return function(){var c=(0,k.mf)(a)?a.apply(void 0,arguments):a,d=(0,k.mf)(b)?b.apply(void 0,arguments):b;return cx()({},c,d,mc)}}var md,me,mf,mg,mh=function(){for(var e=arguments.length,b=Array(e),c=0;c<e;c++)b[c]=arguments[c];var f,a=[].concat(b),d=b[b.length-1];return(f=d,(0,k.Kn)(f)&&gk.every(function(a){return Object.prototype.hasOwnProperty.call(f,a)})&&a.length>1)?a=a.slice(0,a.length-1):d=dj,k.zG.apply(void 0,a.map(function(a){return function(b){return(0,k.mf)(a)?a(b):function d(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return cx().apply(void 0,[{}].concat(c,[mc]))}(b,a)}}))(d)}({colors:{brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}},config:{initialColorMode:"light",useSystemColorMode:!0}}),mi=e(3454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.
 */ let mj={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},mk=function(a){return Error("Firebase Database ("+mj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)},ml=function(e){let b=[],c=0;for(let d=0;d<e.length;d++){let a=e.charCodeAt(d);a<128?b[c++]=a:a<2048?(b[c++]=a>>6|192,b[c++]=63&a|128):(64512&a)==55296&&d+1<e.length&&(64512&e.charCodeAt(d+1))==56320?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++d)),b[c++]=a>>18|240,b[c++]=a>>12&63|128,b[c++]=a>>6&63|128,b[c++]=63&a|128):(b[c++]=a>>12|224,b[c++]=a>>6&63|128,b[c++]=63&a|128)}return b},mm=function(b){let d=[],c=0,e=0;for(;c<b.length;){let a=b[c++];if(a<128)d[e++]=String.fromCharCode(a);else if(a>191&&a<224){let g=b[c++];d[e++]=String.fromCharCode((31&a)<<6|63&g)}else if(a>239&&a<365){let h=b[c++],i=b[c++],j=b[c++],f=((7&a)<<18|(63&h)<<12|(63&i)<<6|63&j)-65536;d[e++]=String.fromCharCode(55296+(f>>10)),d[e++]=String.fromCharCode(56320+(1023&f))}else{let k=b[c++],l=b[c++];d[e++]=String.fromCharCode((15&a)<<12|(63&k)<<6|63&l)}}return d.join("")},mn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(a,l){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();let c=l?this.byteToCharMapWebSafe_:this.byteToCharMap_,d=[];for(let b=0;b<a.length;b+=3){let e=a[b],f=b+1<a.length,g=f?a[b+1]:0,h=b+2<a.length,i=h?a[b+2]:0,m=e>>2,n=(3&e)<<4|g>>4,j=(15&g)<<2|i>>6,k=63&i;h||(k=64,f||(j=64)),d.push(c[m],c[n],c[j],c[k])}return d.join("")},encodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(a):this.encodeByteArray(ml(a),b)},decodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(a):mm(this.decodeStringToByteArray(a,b))},decodeStringToByteArray(b,i){this.init_();let c=i?this.charToByteMapWebSafe_:this.charToByteMap_,d=[];for(let a=0;a<b.length;){let h=c[b.charAt(a++)],j=a<b.length,f=j?c[b.charAt(a)]:0;++a;let k=a<b.length,e=k?c[b.charAt(a)]:64;++a;let l=a<b.length,g=l?c[b.charAt(a)]:64;if(++a,null==h||null==f||null==e||null==g)throw Error();let m=h<<2|f>>4;if(d.push(m),64!==e){let n=f<<4&240|e>>2;if(d.push(n),64!==g){let o=e<<6&192|g;d.push(o)}}}return d},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}},mo=function(a){let b=ml(a);return mn.encodeByteArray(b,!0)},mp=function(a){return mo(a).replace(/\./g,"")},mq=function(a){try{return mn.decodeString(a,!0)}catch(b){console.error("base64Decode failed: ",b)}return null};function mr(b,a){if(!(a instanceof Object))return a;switch(a.constructor){case Date:let d=a;return new Date(d.getTime());case Object:void 0===b&&(b={});break;case Array:b=[];break;default:return a}for(let c in a)a.hasOwnProperty(c)&&ms(c)&&(b[c]=mr(b[c],a[c]));return b}function ms(a){return"__proto__"!==a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Returns navigator.userAgent string or '' if it's not defined.
 * @return user agent string
 */ function mt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mu(){let a="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof a&& void 0!==a.id}function mv(){return"object"==typeof indexedDB}function mw(){return new Promise((e,b)=>{try{let f=!0,c="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(c);a.onsuccess=()=>{a.result.close(),f||self.indexedDB.deleteDatabase(c),e(!0)},a.onupgradeneeded=()=>{f=!1},a.onerror=()=>{var c;b((null===(c=a.error)|| void 0===c?void 0:c.message)||"")}}catch(d){b(d)}})}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let mx=()=>(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,my=()=>{if(void 0===mi|| void 0===mi.env)return;let a=mi.env.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},mz=()=>{if("undefined"==typeof document)return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(c){return}let b=a&&mq(a[1]);return b&&JSON.parse(b)},mA=()=>{try{return mx()||my()||mz()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},mB=c=>{var a,b;return null===(b=null===(a=mA())|| void 0===a?void 0:a.emulatorHosts)|| void 0===b?void 0:b[c]},mC=d=>{let a=mB(d);if(!a)return;let b=a.lastIndexOf(":");if(b<=0||b+1===a.length)throw Error(`Invalid host ${a} with no separate hostname and port!`);let c=parseInt(a.substring(b+1),10);return"["===a[0]?[a.substring(1,b-1),c]:[a.substring(0,b),c]},mD=()=>{var a;return null===(a=mA())|| void 0===a?void 0:a.config},d$=b=>{var a;return null===(a=mA())|| void 0===a?void 0:a[`_${b}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class mE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((a,b)=>{this.resolve=a,this.reject=b})}wrapCallback(a){return(b,c)=>{b?this.reject(b):this.resolve(c),"function"==typeof a&&(this.promise.catch(()=>{}),1===a.length?a(b):a(b,c))}}}class bn extends Error{constructor(a,b,c){super(b),this.code=a,this.customData=c,this.name="FirebaseError",Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(a,b,c){this.service=a,this.serviceName=b,this.errors=c}create(a,...e){let b=e[0]||{},c=`${this.service}/${a}`,d=this.errors[a],f=d?mF(d,b):"Error",g=`${this.serviceName}: ${f} (${c}).`,h=new bn(c,g,b);return h}}function mF(a,b){return a.replace(mG,(d,a)=>{let c=b[a];return null!=c?String(c):`<${a}?>`})}let mG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Evaluates a JSON string into a javascript object.
 *
 * @param {string} str A string containing JSON.
 * @return {*} The javascript object representing the specified JSON.
 */ function mH(a){return JSON.parse(a)}function mI(a,b){if(a===b)return!0;let f=Object.keys(a),g=Object.keys(b);for(let c of f){if(!g.includes(c))return!1;let d=a[c],e=b[c];if(mJ(d)&&mJ(e)){if(!mI(d,e))return!1}else if(d!==e)return!1}for(let h of g)if(!f.includes(h))return!1;return!0}function mJ(a){return null!==a&&"object"==typeof a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a
 * params object (e.g. {arg: 'val', arg2: 'val2'})
 * Note: You must prepend it with ? when adding it to a URL.
 */ function mK(c){let a=[];for(let[d,b]of Object.entries(c))Array.isArray(b)?b.forEach(b=>{a.push(encodeURIComponent(d)+"="+encodeURIComponent(b))}):a.push(encodeURIComponent(d)+"="+encodeURIComponent(b));return a.length?"&"+a.join("&"):""}function mL(a){let b={},c=a.replace(/^\?/,"").split("&");return c.forEach(a=>{if(a){let[c,d]=a.split("=");b[decodeURIComponent(c)]=decodeURIComponent(d)}}),b}function mM(a){let b=a.indexOf("?");if(!b)return"";let c=a.indexOf("#",b);return a.substring(b,c>0?c:void 0)}class mN{constructor(b,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{b(this)}).catch(a=>{this.error(a)})}next(a){this.forEachObserver(b=>{b.next(a)})}error(a){this.forEachObserver(b=>{b.error(a)}),this.close(a)}complete(){this.forEachObserver(a=>{a.complete()}),this.close()}subscribe(b,c,d){let a;if(void 0===b&& void 0===c&& void 0===d)throw Error("Missing Observer.");void 0===(a=mO(b,["next","error","complete"])?b:{next:b,error:c,complete:d}).next&&(a.next=mP),void 0===a.error&&(a.error=mP),void 0===a.complete&&(a.complete=mP);let e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch(b){}}),this.observers.push(a),e}unsubscribeOne(a){void 0!==this.observers&& void 0!==this.observers[a]&&(delete this.observers[a],this.observerCount-=1,0===this.observerCount&& void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(b){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,b)}sendOne(a,b){this.task.then(()=>{if(void 0!==this.observers&& void 0!==this.observers[a])try{b(this.observers[a])}catch(c){"undefined"!=typeof console&&console.error&&console.error(c)}})}close(a){!this.finalized&&(this.finalized=!0,void 0!==a&&(this.finalError=a),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mO(a,c){if("object"!=typeof a||null===a)return!1;for(let b of c)if(b in a&&"function"==typeof a[b])return!0;return!1}function mP(){}function mQ(b,c=1e3,d=2){let a=c*Math.pow(d,b);return Math.min(144e5,a+Math.round(.5*a*(Math.random()-.5)*2))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function mR(a){return a&&a._delegate?a._delegate:a}class z{constructor(a,b,c){this.name=a,this.instanceFactory=b,this.type=c,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let mS="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for instance for service name T, e.g. 'auth', 'auth-internal'
 * NameServiceMapping[T] is an alias for the type of the instance
 */ class mT{constructor(a,b){this.name=a,this.container=b,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(d){let a=this.normalizeInstanceIdentifier(d);if(!this.instancesDeferred.has(a)){let b=new mE;if(this.instancesDeferred.set(a,b),this.isInitialized(a)||this.shouldAutoInitialize())try{let c=this.getOrInitializeService({instanceIdentifier:a});c&&b.resolve(c)}catch(e){}}return this.instancesDeferred.get(a).promise}getImmediate(a){var b;let c=this.normalizeInstanceIdentifier(null==a?void 0:a.identifier),d=null!==(b=null==a?void 0:a.optional)&& void 0!==b&&b;if(this.isInitialized(c)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:c})}catch(e){if(d)return null;throw e}else{if(d)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(a){if(a.name!==this.name)throw Error(`Mismatching Component ${a.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=a,this.shouldAutoInitialize()){if(mV(a))try{this.getOrInitializeService({instanceIdentifier:mS})}catch(f){}for(let[b,c]of this.instancesDeferred.entries()){let d=this.normalizeInstanceIdentifier(b);try{let e=this.getOrInitializeService({instanceIdentifier:d});c.resolve(e)}catch(g){}}}}clearInstance(a=mS){this.instancesDeferred.delete(a),this.instancesOptions.delete(a),this.instances.delete(a)}async delete(){let a=Array.from(this.instances.values());await Promise.all([...a.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...a.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return null!=this.component}isInitialized(a=mS){return this.instances.has(a)}getOptions(a=mS){return this.instancesOptions.get(a)||{}}initialize(b={}){let{options:d={}}=b,a=this.normalizeInstanceIdentifier(b.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let c=this.getOrInitializeService({instanceIdentifier:a,options:d});for(let[e,f]of this.instancesDeferred.entries()){let g=this.normalizeInstanceIdentifier(e);a===g&&f.resolve(c)}return c}onInit(c,f){var b;let a=this.normalizeInstanceIdentifier(f),d=null!==(b=this.onInitCallbacks.get(a))&& void 0!==b?b:new Set;d.add(c),this.onInitCallbacks.set(a,d);let e=this.instances.get(a);return e&&c(e,a),()=>{d.delete(c)}}invokeOnInitCallbacks(c,a){let b=this.onInitCallbacks.get(a);if(b)for(let d of b)try{d(c,a)}catch(e){}}getOrInitializeService({instanceIdentifier:a,options:c={}}){let b=this.instances.get(a);if(!b&&this.component&&(b=this.component.instanceFactory(this.container,{instanceIdentifier:mU(a),options:c}),this.instances.set(a,b),this.instancesOptions.set(a,c),this.invokeOnInitCallbacks(b,a),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,a,b)}catch(d){}return b||null}normalizeInstanceIdentifier(a=mS){return this.component?this.component.multipleInstances?a:mS:a}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function mU(a){return a===mS?void 0:a}function mV(a){return"EAGER"===a.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`
 */ class mW{constructor(a){this.name=a,this.providers=new Map}addComponent(a){let b=this.getProvider(a.name);if(b.isComponentSet())throw Error(`Component ${a.name} has already been registered with ${this.name}`);b.setComponent(a)}addOrOverwriteComponent(a){let b=this.getProvider(a.name);b.isComponentSet()&&this.providers.delete(a.name),this.addComponent(a)}getProvider(a){if(this.providers.has(a))return this.providers.get(a);let b=new mT(a,this);return this.providers.set(a,b),b}getProviders(){return Array.from(this.providers.values())}}(rE=r1||(r1={}))[rE.DEBUG=0]="DEBUG",rE[rE.VERBOSE=1]="VERBOSE",rE[rE.INFO=2]="INFO",rE[rE.WARN=3]="WARN",rE[rE.ERROR=4]="ERROR",rE[rE.SILENT=5]="SILENT";let mX={debug:r1.DEBUG,verbose:r1.VERBOSE,info:r1.INFO,warn:r1.WARN,error:r1.ERROR,silent:r1.SILENT},mY=r1.INFO,mZ={[r1.DEBUG]:"log",[r1.VERBOSE]:"log",[r1.INFO]:"info",[r1.WARN]:"warn",[r1.ERROR]:"error"};class ab{constructor(a){this.name=a,this._logLevel=mY,this._logHandler=(b,a,...d)=>{if(a<b.logLevel)return;let e=new Date().toISOString(),c=mZ[a];if(c)console[c](`[${e}]  ${b.name}:`,...d);else throw Error(`Attempted to log a message with an invalid logType (value: ${a})`)},this._userLogHandler=null,[].push(this)}get logLevel(){return this._logLevel}set logLevel(a){if(!(a in r1))throw TypeError(`Invalid value "${a}" assigned to \`logLevel\``);this._logLevel=a}setLogLevel(a){this._logLevel="string"==typeof a?mX[a]:a}get logHandler(){return this._logHandler}set logHandler(a){if("function"!=typeof a)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=a}get userLogHandler(){return this._userLogHandler}set userLogHandler(a){this._userLogHandler=a}debug(...a){this._userLogHandler&&this._userLogHandler(this,r1.DEBUG,...a),this._logHandler(this,r1.DEBUG,...a)}log(...a){this._userLogHandler&&this._userLogHandler(this,r1.VERBOSE,...a),this._logHandler(this,r1.VERBOSE,...a)}info(...a){this._userLogHandler&&this._userLogHandler(this,r1.INFO,...a),this._logHandler(this,r1.INFO,...a)}warn(...a){this._userLogHandler&&this._userLogHandler(this,r1.WARN,...a),this._logHandler(this,r1.WARN,...a)}error(...a){this._userLogHandler&&this._userLogHandler(this,r1.ERROR,...a),this._logHandler(this,r1.ERROR,...a)}}let m$=(b,a)=>a.some(a=>b instanceof a),m_,m0,m1=new WeakMap,m2=new WeakMap,m3=new WeakMap,m4=new WeakMap,m5=new WeakMap,m6={get(a,b,c){if(a instanceof IDBTransaction){if("done"===b)return m2.get(a);if("objectStoreNames"===b)return a.objectStoreNames||m3.get(a);if("store"===b)return c.objectStoreNames[1]?void 0:c.objectStore(c.objectStoreNames[0])}return m7(a[b])},set:(a,b,c)=>(a[b]=c,!0),has:(b,a)=>b instanceof IDBTransaction&&("done"===a||"store"===a)||a in b};function m7(a){if(a instanceof IDBRequest)return function(b){let a=new Promise((d,e)=>{let f=()=>{b.removeEventListener("success",a),b.removeEventListener("error",c)},a=()=>{d(m7(b.result)),f()},c=()=>{e(b.error),f()};b.addEventListener("success",a),b.addEventListener("error",c)});return a.then(a=>{a instanceof IDBCursor&&m1.set(a,b)}).catch(()=>{}),m5.set(a,b),a}(a);if(m4.has(a))return m4.get(a);let b=function(a){if("function"==typeof a){var b;return(b=a)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(m0||(m0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey,])).includes(b)?function(...a){return b.apply(m8(this),a),m7(m1.get(this))}:function(...a){return m7(b.apply(m8(this),a))}:function(a,...d){let c=b.call(m8(this),a,...d);return m3.set(c,a.sort?a.sort():[a]),m7(c)}}return(a instanceof IDBTransaction&&function(a){if(m2.has(a))return;let b=new Promise((d,e)=>{let f=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",b),a.removeEventListener("abort",b)},c=()=>{d(),f()},b=()=>{e(a.error||new DOMException("AbortError","AbortError")),f()};a.addEventListener("complete",c),a.addEventListener("error",b),a.addEventListener("abort",b)});m2.set(a,b)}(a),m$(a,m_||(m_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction,])))?new Proxy(a,m6):a}(a);return b!==a&&(m4.set(a,b),m5.set(b,a)),b}let m8=a=>m5.get(a);function m9(c,d,{blocked:e,upgrade:f,blocking:g,terminated:h}={}){let a=indexedDB.open(c,d),b=m7(a);return f&&a.addEventListener("upgradeneeded",b=>{f(m7(a.result),b.oldVersion,b.newVersion,m7(a.transaction))}),e&&a.addEventListener("blocked",()=>e()),b.then(a=>{h&&a.addEventListener("close",()=>h()),g&&a.addEventListener("versionchange",()=>g())}).catch(()=>{}),b}let na=["get","getKey","getAll","getAllKeys","count"],nb=["put","add","delete","clear"],nc=new Map;function nd(c,a){if(!(c instanceof IDBDatabase&&!(a in c)&&"string"==typeof a))return;if(nc.get(a))return nc.get(a);let b=a.replace(/FromIndex$/,""),e=a!==b,f=nb.includes(b);if(!(b in(e?IDBIndex:IDBObjectStore).prototype)||!(f||na.includes(b)))return;let d=async function(g,...c){let d=this.transaction(g,f?"readwrite":"readonly"),a=d.store;return e&&(a=a.index(c.shift())),(await Promise.all([a[b](...c),f&&d.done,]))[0]};return nc.set(a,d),d}!function(a){m6=a(m6)}(a=>({...a,get:(b,c,d)=>nd(b,c)||a.get(b,c,d),has:(b,c)=>!!nd(b,c)||a.has(b,c)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class ne{constructor(a){this.container=a}getPlatformInfoString(){let a=this.container.getProviders();return a.map(a=>{if(!nf(a))return null;{let b=a.getImmediate();return`${b.library}/${b.version}`}}).filter(a=>a).join(" ")}}function nf(b){let a=b.getComponent();return(null==a?void 0:a.type)==="VERSION"}let aD="@firebase/app",bo="0.8.3",ng=new ab("@firebase/app"),nh="[DEFAULT]",ni={[aD]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nj=new Map,nk=new Map;function nl(a,b){try{a.container.addComponent(b)}catch(c){ng.debug(`Component ${b.name} failed to register with FirebaseApp ${a.name}`,c)}}function A(a){let b=a.name;if(nk.has(b))return ng.debug(`There were multiple attempts to register component ${b}.`),!1;for(let c of(nk.set(b,a),nj.values()))nl(c,a);return!0}function nm(a,c){let b=a.container.getProvider("heartbeat").getImmediate({optional:!0});return b&&b.triggerHeartbeat(),a.container.getProvider(c)}let nn=new aa("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class no{constructor(b,a,c){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=c,this.container.addComponent(new z("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(a){this.checkDestroyed(),this._automaticDataCollectionEnabled=a}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(a){this._isDeleted=a}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The current SDK version.
 *
 * @public
 */ let np="9.13.0";function nq(h,c={}){let b=h;if("object"!=typeof c){let i=c;c={name:i}}let e=Object.assign({name:nh,automaticDataCollectionEnabled:!1},c),a=e.name;if("string"!=typeof a||!a)throw nn.create("bad-app-name",{appName:String(a)});if(b||(b=mD()),!b)throw nn.create("no-options");let d=nj.get(a);if(d){if(mI(b,d.options)&&mI(e,d.config))return d;throw nn.create("duplicate-app",{appName:a})}let f=new mW(a);for(let j of nk.values())f.addComponent(j);let g=new no(b,e,f);return nj.set(a,g),g}function nr(a=nh){let b=nj.get(a);if(!b&&a===nh)return nq();if(!b)throw nn.create("no-app",{appName:a});return b}function p(g,c,h){var d;let a=null!==(d=ni[g])&& void 0!==d?d:g;h&&(a+=`-${h}`);let e=a.match(/\s|\//),f=c.match(/\s|\//);if(e||f){let b=[`Unable to register library "${a}" with version "${c}":`];e&&b.push(`library name "${a}" contains illegal characters (whitespace or "/")`),e&&f&&b.push("and"),f&&b.push(`version name "${c}" contains illegal characters (whitespace or "/")`),ng.warn(b.join(" "));return}A(new z(`${a}-version`,()=>({library:a,version:c}),"VERSION"))}let ns="firebase-heartbeat-store",nt=null;function nu(){return nt||(nt=m9("firebase-heartbeat-database",1,{upgrade(a,b){0===b&&a.createObjectStore(ns)}}).catch(a=>{throw nn.create("idb-open",{originalErrorMessage:a.message})})),nt}async function nv(c){var a;try{let d=await nu();return d.transaction(ns).objectStore(ns).get(nx(c))}catch(b){if(b instanceof bn)ng.warn(b.message);else{let e=nn.create("idb-get",{originalErrorMessage:null===(a=b)|| void 0===a?void 0:a.message});ng.warn(e.message)}}}async function nw(d,e){var a;try{let f=await nu(),c=f.transaction(ns,"readwrite"),g=c.objectStore(ns);return await g.put(e,nx(d)),c.done}catch(b){if(b instanceof bn)ng.warn(b.message);else{let h=nn.create("idb-set",{originalErrorMessage:null===(a=b)|| void 0===a?void 0:a.message});ng.warn(h.message)}}}function nx(a){return`${a.name}!${a.options.appId}`}class ny{constructor(a){this.container=a,this._heartbeatsCache=null;let b=this.container.getProvider("app").getImmediate();this._storage=new nB(b),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){let b=this.container.getProvider("platform-logger").getImmediate(),c=b.getPlatformInfoString(),a=nz();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(b=>b.date===a))?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let b=new Date(a.date).valueOf(),c=Date.now();return c-b<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let b=nz(),{heartbeatsToSend:c,unsentEntries:a}=nA(this._heartbeatsCache.heartbeats),d=mp(JSON.stringify({version:2,heartbeats:c}));return this._heartbeatsCache.lastSentHeartbeatDate=b,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}}function nz(){let a=new Date;return a.toISOString().substring(0,10)}function nA(e,f=1024){let a=[],b=e.slice();for(let c of e){let d=a.find(a=>a.agent===c.agent);if(d){if(d.dates.push(c.date),nC(a)>f){d.dates.pop();break}}else if(a.push({agent:c.agent,dates:[c.date]}),nC(a)>f){a.pop();break}b=b.slice(1)}return{heartbeatsToSend:a,unsentEntries:b}}class nB{constructor(a){this.app=a,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!mv()&&mw().then(()=>!0).catch(()=>!1)}async read(){let a=await this._canUseIndexedDBPromise;if(!a)return{heartbeats:[]};{let b=await nv(this.app);return b||{heartbeats:[]}}}async overwrite(b){var a;let c=await this._canUseIndexedDBPromise;if(c){let d=await this.read();return nw(this.app,{lastSentHeartbeatDate:null!==(a=b.lastSentHeartbeatDate)&& void 0!==a?a:d.lastSentHeartbeatDate,heartbeats:b.heartbeats})}}async add(b){var a;let d=await this._canUseIndexedDBPromise;if(d){let c=await this.read();return nw(this.app,{lastSentHeartbeatDate:null!==(a=b.lastSentHeartbeatDate)&& void 0!==a?a:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...b.heartbeats]})}}}function nC(a){return mp(JSON.stringify({version:2,heartbeats:a})).length}A(new z("platform-logger",a=>new ne(a),"PRIVATE")),A(new z("heartbeat",a=>new ny(a),"PRIVATE")),p(aD,bo,""),p(aD,bo,"esm2017"),p("fire-js",""),/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ p("firebase","9.13.0","app");let bp="@firebase/installations",aE="0.5.16",nD=`w:${aE}`,nE="FIS_v2",nF=new aa("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nG(a){return a instanceof bn&&a.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function nH({projectId:a}){return`https://firebaseinstallations.googleapis.com/v1/projects/${a}/installations`}function nI(a){return{token:a.token,requestStatus:2,expiresIn:nN(a.expiresIn),creationTime:Date.now()}}async function nJ(b,c){let d=await c.json(),a=d.error;return nF.create("request-failed",{requestName:b,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function nK({apiKey:a}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a})}function nL(b,{refreshToken:c}){let a=nK(b);return a.append("Authorization",nO(c)),a}async function nM(b){let a=await b();return a.status>=500&&a.status<600?b():a}function nN(a){return Number(a.replace("s","000"))}function nO(a){return`${nE} ${a}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function nP({appConfig:a,heartbeatServiceProvider:h},{fid:d}){let k=nH(a),e=nK(a),f=h.getImmediate({optional:!0});if(f){let g=await f.getHeartbeatsHeader();g&&e.append("x-firebase-client",g)}let i={fid:d,authVersion:nE,appId:a.appId,sdkVersion:nD},l={method:"POST",headers:e,body:JSON.stringify(i)},b=await nM(()=>fetch(k,l));if(b.ok){let c=await b.json(),j={fid:c.fid||d,registrationStatus:2,refreshToken:c.refreshToken,authToken:nI(c.authToken)};return j}throw await nJ("Create Installation",b)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Returns a promise that resolves after given time passes. */ function nQ(a){return new Promise(b=>{setTimeout(b,a)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let nR=/^[cdef][\w-]{21}$/;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Returns a string key that can be used to identify the app. */ function nS(a){return`${a.appName}!${a.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let nT=new Map;function nU(c,a){let b=nS(c);nV(b,a),nW(b,a)}function nV(b,c){let a=nT.get(b);if(a)for(let d of a)d(c)}function nW(b,c){let a=nY();a&&a.postMessage({key:b,fid:c}),nZ()}let nX=null;function nY(){return!nX&&"BroadcastChannel"in self&&((nX=new BroadcastChannel("[Firebase] FID Change")).onmessage=a=>{nV(a.data.key,a.data.fid)}),nX}function nZ(){0===nT.size&&nX&&(nX.close(),nX=null)}let n$="firebase-installations-store",n_=null;function n0(){return n_||(n_=m9("firebase-installations-database",1,{upgrade(a,b){0===b&&a.createObjectStore(n$)}})),n_}async function n1(b,a){let c=nS(b),g=await n0(),d=g.transaction(n$,"readwrite"),e=d.objectStore(n$),f=await e.get(c);return await e.put(a,c),await d.done,f&&f.fid===a.fid||nU(b,a.fid),a}async function n2(b){let c=nS(b),d=await n0(),a=d.transaction(n$,"readwrite");await a.objectStore(n$).delete(c),await a.done}async function n3(e,g){let b=nS(e),h=await n0(),f=h.transaction(n$,"readwrite"),c=f.objectStore(n$),d=await c.get(b),a=g(d);return void 0===a?await c.delete(b):await c.put(a,b),await f.done,a&&(!d||d.fid!==a.fid)&&nU(e,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Updates and returns the InstallationEntry from the database.
 * Also triggers a registration request if it is necessary and possible.
 */ async function n4(c){let a,b=await n3(c.appConfig,d=>{let e=n5(d),b=n6(c,e);return a=b.registrationPromise,b.installationEntry});return""===b.fid?{installationEntry:await a}:{installationEntry:b,registrationPromise:a}}function n5(a){let b=a||{fid:function(){try{let a=new Uint8Array(17),c=self.crypto||self.msCrypto;c.getRandomValues(a),a[0]=112+a[0]%16;let b=function c(a){let b=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function(a){let b=btoa(String.fromCharCode(...a));return b.replace(/\+/g,"-").replace(/\//g,"_")}(a);return b.substr(0,22)}(a);return nR.test(b)?b:""}catch(d){return""}}(),registrationStatus:0};return oa(b)}function n6(b,a){if(0===a.registrationStatus){if(!navigator.onLine){let d=Promise.reject(nF.create("app-offline"));return{installationEntry:a,registrationPromise:d}}let c={fid:a.fid,registrationStatus:1,registrationTime:Date.now()},e=n7(b,c);return{installationEntry:c,registrationPromise:e}}return 1===a.registrationStatus?{installationEntry:a,registrationPromise:n8(b)}:{installationEntry:a}}async function n7(a,c){try{let d=await nP(a,c);return n1(a.appConfig,d)}catch(b){throw nG(b)&&409===b.customData.serverCode?await n2(a.appConfig):await n1(a.appConfig,{fid:c.fid,registrationStatus:0}),b}}async function n8(b){let a=await n9(b.appConfig);for(;1===a.registrationStatus;)await nQ(100),a=await n9(b.appConfig);if(0===a.registrationStatus){let{installationEntry:c,registrationPromise:d}=await n4(b);return d||c}return a}function n9(a){return n3(a,a=>{if(!a)throw nF.create("installation-not-found");return oa(a)})}function oa(a){return ob(a)?{fid:a.fid,registrationStatus:0}:a}function ob(a){return 1===a.registrationStatus&&a.registrationTime+1e4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function oc({appConfig:a,heartbeatServiceProvider:g},c){let k=od(a,c),d=nL(a,c),e=g.getImmediate({optional:!0});if(e){let f=await e.getHeartbeatsHeader();f&&d.append("x-firebase-client",f)}let h={installation:{sdkVersion:nD,appId:a.appId}},l={method:"POST",headers:d,body:JSON.stringify(h)},b=await nM(()=>fetch(k,l));if(b.ok){let i=await b.json(),j=nI(i);return j}throw await nJ("Generate Auth Token",b)}function od(a,{fid:b}){return`${nH(a)}/${b}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Returns a valid authentication token for the installation. Generates a new
 * token if one doesn't exist, is expired or about to expire.
 *
 * Should only be called if the Firebase Installation is registered.
 */ async function oe(b,e=!1){let a,c=await n3(b.appConfig,c=>{if(!oi(c))throw nF.create("not-registered");let d=c.authToken;if(!e&&oj(d))return c;if(1===d.requestStatus)return a=of(b,e),c;{if(!navigator.onLine)throw nF.create("app-offline");let f=ol(c);return a=oh(b,f),f}}),d=a?await a:c.authToken;return d}async function of(a,d){let b=await og(a.appConfig);for(;1===b.authToken.requestStatus;)await nQ(100),b=await og(a.appConfig);let c=b.authToken;return 0===c.requestStatus?oe(a,d):c}function og(a){return n3(a,a=>{if(!oi(a))throw nF.create("not-registered");let b=a.authToken;return om(b)?Object.assign(Object.assign({},a),{authToken:{requestStatus:0}}):a})}async function oh(a,c){try{let d=await oc(a,c),e=Object.assign(Object.assign({},c),{authToken:d});return await n1(a.appConfig,e),d}catch(b){if(nG(b)&&(401===b.customData.serverCode||404===b.customData.serverCode))await n2(a.appConfig);else{let f=Object.assign(Object.assign({},c),{authToken:{requestStatus:0}});await n1(a.appConfig,f)}throw b}}function oi(a){return void 0!==a&&2===a.registrationStatus}function oj(a){return 2===a.requestStatus&&!ok(a)}function ok(a){let b=Date.now();return b<a.creationTime||a.creationTime+a.expiresIn<b+36e5}function ol(a){let b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},a),{authToken:b})}function om(a){return 1===a.requestStatus&&a.requestTime+1e4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Creates a Firebase Installation if there isn't one for the app and
 * returns the Installation ID.
 * @param installations - The `Installations` instance.
 *
 * @public
 */ async function on(c){let a=c,{installationEntry:d,registrationPromise:b}=await n4(a);return b?b.catch(console.error):oe(a).catch(console.error),d.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Returns a Firebase Installations auth token, identifying the current
 * Firebase Installation.
 * @param installations - The `Installations` instance.
 * @param forceRefresh - Force refresh regardless of token expiration.
 *
 * @public
 */ async function oo(b,c=!1){let a=b;await op(a);let d=await oe(a,c);return d.token}async function op(b){let{registrationPromise:a}=await n4(b);a&&await a}function oq(a,{fid:b}){return`${nH(a)}/${b}`}function or(a){return nF.create("missing-app-config-values",{valueName:a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let d_="installations";A(new z(d_,b=>{let a=b.getProvider("app").getImmediate(),c=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function(a){if(!a||!a.options)throw or("App Configuration");if(!a.name)throw or("App Name");for(let b of["projectId","apiKey","appId"])if(!a.options[b])throw or(b);return{appName:a.name,projectId:a.options.projectId,apiKey:a.options.apiKey,appId:a.options.appId}}(a),d=nm(a,"heartbeat");return{app:a,appConfig:c,heartbeatServiceProvider:d,_delete:()=>Promise.resolve()}},"PUBLIC")),A(new z("installations-internal",a=>{let b=a.getProvider("app").getImmediate(),c=nm(b,d_).getImmediate();return{getId:()=>on(c),getToken:a=>oo(c,a)}},"PRIVATE")),p(bp,aE),p(bp,aE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Type constant for Firebase Analytics.
 */ let d0="analytics",os="https://www.googletagmanager.com/gtag/js",ot=new ab("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Makeshift polyfill for Promise.allSettled(). Resolves when all promises
 * have either resolved or rejected.
 *
 * @param promises Array of promises to wait for.
 */ function ou(a){return Promise.all(a.map(a=>a.catch(a=>a)))}async function ov(e,a,f,g,b,h){let c=g[b];try{if(c)await a[c];else{let i=await ou(f),d=i.find(a=>a.measurementId===b);d&&await a[d.appId]}}catch(j){ot.error(j)}e("config",b,h)}async function ow(g,d,h,i,b){try{let a=[];if(b&&b.send_to){let c=b.send_to;Array.isArray(c)||(c=[c]);let j=await ou(h);for(let l of c){let e=j.find(a=>a.measurementId===l),f=e&&d[e.appId];if(f)a.push(f);else{a=[];break}}}0===a.length&&(a=Object.values(d)),await Promise.all(a),g("event",i,b||{})}catch(k){ot.error(k)}}let ox=new aa("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),oy=new class{constructor(a={},b=1e3){this.throttleMetadata=a,this.intervalMillis=b}getThrottleMetadata(a){return this.throttleMetadata[a]}setThrottleMetadata(a,b){this.throttleMetadata[a]=b}deleteThrottleMetadata(a){delete this.throttleMetadata[a]}};async function oz(f){var b,c;let{appId:g,apiKey:h}=f,i={method:"GET",headers:(c=h,new Headers({Accept:"application/json","x-goog-api-key":c}))},j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",g),a=await fetch(j,i);if(200!==a.status&&304!==a.status){let d="";try{let e=await a.json();(null===(b=e.error)|| void 0===b?void 0:b.message)&&(d=e.error.message)}catch(k){}throw ox.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function oA(f,c=oy,d){let{appId:a,apiKey:e,measurementId:b}=f.options;if(!a)throw ox.create("no-app-id");if(!e){if(b)return{measurementId:b,appId:a};throw ox.create("no-api-key")}let g=c.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new oE;return setTimeout(async()=>{h.abort()},void 0!==d?d:6e4),oB({appId:a,apiKey:e,measurementId:b},g,h,c)}async function oB(e,{throttleEndTimeMillis:n,backoffCount:f},i,a=oy){var g,h;let{appId:c,measurementId:b}=e;try{await oC(i,n)}catch(j){if(b)return ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${b} provided in the "measurementId" field in the local Firebase config. [${null===(g=j)|| void 0===g?void 0:g.message}]`),{appId:c,measurementId:b};throw j}try{let o=await oz(e);return a.deleteThrottleMetadata(c),o}catch(k){let d=k;if(!oD(d)){if(a.deleteThrottleMetadata(c),b)return ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${b} provided in the "measurementId" field in the local Firebase config. [${null==d?void 0:d.message}]`),{appId:c,measurementId:b};throw k}let l=503===Number(null===(h=null==d?void 0:d.customData)|| void 0===h?void 0:h.httpStatus)?mQ(f,a.intervalMillis,30):mQ(f,a.intervalMillis),m={throttleEndTimeMillis:Date.now()+l,backoffCount:f+1};return a.setThrottleMetadata(c,m),ot.debug(`Calling attemptFetch again in ${l} millis`),oB(e,m,i,a)}}function oC(a,b){return new Promise((c,e)=>{let d=Math.max(b-Date.now(),0),f=setTimeout(c,d);a.addEventListener(()=>{clearTimeout(f),e(ox.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function oD(b){if(!(b instanceof bn)||!b.customData)return!1;let a=Number(b.customData.httpStatus);return 429===a||500===a||503===a||504===a}class oE{constructor(){this.listeners=[]}addEventListener(a){this.listeners.push(a)}abort(){this.listeners.forEach(a=>a())}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Event parameters to set on 'gtag' during initialization.
 */ let oF;async function oG(a,e,b,c,d){if(d&&d.global){a("event",b,c);return}{let f=await e,g=Object.assign(Object.assign({},c),{send_to:f});a("event",b,g)}}let oH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function oI(){var a;if(!mv())return ot.warn(ox.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await mw()}catch(b){return ot.warn(ox.create("indexeddb-unavailable",{errorInfo:null===(a=b)|| void 0===a?void 0:a.toString()}).message),!1}return!0}async function oJ(i,j,n,o,a,f,g){var c,k,l;let d=oA(i);d.then(a=>{n[a.measurementId]=a.appId,i.options.measurementId&&a.measurementId!==i.options.measurementId&&ot.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${a.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(a=>ot.error(a)),j.push(d);let m=oI().then(a=>a?o.getId():void 0),[e,h]=await Promise.all([d,m]);!function(b){let c=window.document.getElementsByTagName("script");for(let a of Object.values(c))if(a.src&&a.src.includes(os)&&a.src.includes(b))return a;return null}(f)&&function(b,c){let a=document.createElement("script");a.src=`${os}?l=${b}&id=${c}`,a.async=!0,document.head.appendChild(a)}(f,e.measurementId),oH&&(a("consent","default",oH),oH=k=void 0),a("js",new Date);let b=null!==(c=null==g?void 0:g.config)&& void 0!==c?c:{};return b.origin="firebase",b.update=!0,null!=h&&(b.firebase_id=h),a("config",e.measurementId,b),oF&&(a("set",oF),oF=l=void 0),e.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Analytics Service class.
 */ class oK{constructor(a){this.app=a}_delete(){return delete oL[this.app.options.appId],Promise.resolve()}}let oL={},oM=[],oN={},oO="dataLayer",oP,oQ,oR=!1,bq="@firebase/analytics",br="0.8.4";A(new z(d0,(a,{options:b})=>{let c=a.getProvider("app").getImmediate(),d=a.getProvider("installations-internal").getImmediate();return function(a,j,k){!function(){let a=[];if(mu()&&a.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||a.push("Cookies are not available."),a.length>0){let b=a.map((a,b)=>`(${b+1}) ${a}`).join(" "),c=ox.create("invalid-analytics-context",{errorInfo:b});ot.warn(c.message)}}();let c=a.options.appId;if(!c)throw ox.create("no-app-id");if(!a.options.apiKey){if(a.options.measurementId)ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${a.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ox.create("no-api-key")}if(null!=oL[c])throw ox.create("already-exists",{id:c});if(!oR){var d,g,h,i,l,b;let f;d=oO,f=[],Array.isArray(window[d])?f=window[d]:window[d]=f;let e,{wrappedGtag:m,gtagCore:n}=(g=oL,h=oM,i=oN,l=oO,b="gtag",e=function(...a){window[l].push(arguments)},window[b]&&"function"==typeof window[b]&&(e=window[b]),window[b]=function(b,c,d,e){async function a(a,f,g){try{"event"===a?await ow(b,c,d,f,g):"config"===a?await ov(b,c,d,e,f,g):"consent"===a?b("consent","update",g):b("set",f)}catch(h){ot.error(h)}}return a}(e,g,h,i),{gtagCore:e,wrappedGtag:window[b]});oQ=m,oP=n,oR=!0}oL[c]=oJ(a,oM,oN,j,oP,oO,k);let o=new oK(a);return o}(c,d,b)},"PUBLIC")),A(new z("analytics-internal",function(a){try{let c=a.getProvider(d0).getImmediate();return{logEvent(f,g,h){var a,b,d,e;return a=c,b=f,d=g,e=h,void(a=mR(a),oG(oQ,oL[a.app.options.appId],b,d,e).catch(a=>ot.error(a)))}}}catch(b){throw ox.create("interop-component-reg-failed",{reason:b})}},"PRIVATE")),p(bq,br),p(bq,br,"esm2017");let oS={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};function bs(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let oT=bs,oU=new aa("auth","Firebase",bs()),oV=new ab("@firebase/auth");function oW(a,...b){oV.logLevel<=r1.ERROR&&oV.error(`Auth (${np}): ${a}`,...b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function oX(a,...b){throw o_(a,...b)}function oY(a,...b){return o_(a,...b)}function oZ(b,a,c){let d=Object.assign(Object.assign({},oT()),{[a]:c}),e=new aa("auth","Firebase",d);return e.create(a,{appName:b.name})}function o$(b,a,d){let c=d;if(!(a instanceof c))throw c.name!==a.constructor.name&&oX(b,"argument-error"),oZ(b,"argument-error",`Type of ${a.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function o_(a,...b){if("string"!=typeof a){let d=b[0],c=[...b.slice(1)];return c[0]&&(c[0].appName=a.name),a._errorFactory.create(d,...c)}return oU.create(a,...b)}function o0(a,b,...c){if(!a)throw o_(b,...c)}function o1(b){let a="INTERNAL ASSERTION FAILED: "+b;throw oW(a),Error(a)}function o2(a,b){a||o1(b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let o3=new Map;function o4(b){o2(b instanceof Function,"Expected a class definition");let a=o3.get(b);return a?(o2(a instanceof b,"Instance stored in cache mismatched with class"),a):(a=new b,o3.set(b,a),a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function o5(){var a;return"undefined"!=typeof self&&(null===(a=self.location)|| void 0===a?void 0:a.href)||""}function o6(){return"http:"===o7()||"https:"===o7()}function o7(){var a;return"undefined"!=typeof self&&(null===(a=self.location)|| void 0===a?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A structure to help pick between a range of long and short delay durations
 * depending on the current environment. In general, the long delay is used for
 * mobile environments whereas short delays are used for desktop environments.
 */ class P{constructor(a,b){this.shortDelay=a,this.longDelay=b,o2(b>a,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(o6()||mu()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function o8(b,a){o2(b.emulator,"Emulator should always be set here");let{url:c}=b.emulator;return a?`${c}${a.startsWith("/")?a.slice(1):a}`:c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class o9{static initialize(c,a,b){this.fetchImpl=c,a&&(this.headersImpl=a),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void o1("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void o1("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void o1("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Map from errors returned by the server to errors to developer visible errors
 */ let pa={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pb=new P(3e4,6e4);function pc(b,a){return b.tenantId&&!a.tenantId?Object.assign(Object.assign({},a),{tenantId:b.tenantId}):a}async function pd(a,c,d,e,b={}){return pe(a,b,async()=>{let f={},g={};e&&("GET"===c?g=e:f={body:JSON.stringify(e)});let h=mK(Object.assign({key:a.config.apiKey},g)).slice(1),b=await a._getAdditionalHeaders();return b["Content-Type"]="application/json",a.languageCode&&(b["X-Firebase-Locale"]=a.languageCode),o9.fetch()(pg(a,a.config.apiHost,d,h),Object.assign({method:c,headers:b,referrerPolicy:"no-referrer"},f))})}async function pe(a,i,j){a._canInitEmulator=!1;let k=Object.assign(Object.assign({},pa),i);try{let e=new ph(a),d=await Promise.race([j(),e.promise]);e.clearNetworkTimeout();let b=await d.json();if("needConfirmation"in b)throw pi(a,"account-exists-with-different-credential",b);if(d.ok&&!("errorMessage"in b))return b;{let l=d.ok?b.errorMessage:b.error.message,[c,f]=l.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw pi(a,"credential-already-in-use",b);if("EMAIL_EXISTS"===c)throw pi(a,"email-already-in-use",b);if("USER_DISABLED"===c)throw pi(a,"user-disabled",b);let g=k[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw oZ(a,g,f);oX(a,g)}}catch(h){if(h instanceof bn)throw h;oX(a,"network-request-failed")}}async function pf(b,c,d,e,f={}){let a=await pd(b,c,d,e,f);return"mfaPendingCredential"in a&&oX(b,"multi-factor-auth-required",{_serverResponse:a}),a}function pg(a,c,d,e){let b=`${c}${d}?${e}`;return a.config.emulator?o8(a.config,b):`${a.config.apiScheme}://${b}`}class ph{constructor(a){this.auth=a,this.timer=null,this.promise=new Promise((a,b)=>{this.timer=setTimeout(()=>b(oY(this.auth,"network-request-failed")),pb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pi(c,e,a){let b={appName:c.name};a.email&&(b.email=a.email),a.phoneNumber&&(b.phoneNumber=a.phoneNumber);let d=oY(c,e,b);return d.customData._tokenResponse=a,d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pj(a,b){return pd(a,"POST","/v1/accounts:delete",b)}async function pk(a,b){return pd(a,"POST","/v1/accounts:lookup",b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function pl(a){if(a)try{let b=new Date(Number(a));if(!isNaN(b.getTime()))return b.toUTCString()}catch(c){}}async function pm(e,f=!1){let c=mR(e),d=await c.getIdToken(f),a=po(d);o0(a&&a.exp&&a.auth_time&&a.iat,c.auth,"internal-error");let b="object"==typeof a.firebase?a.firebase:void 0,g=null==b?void 0:b.sign_in_provider;return{claims:a,token:d,authTime:pl(pn(a.auth_time)),issuedAtTime:pl(pn(a.iat)),expirationTime:pl(pn(a.exp)),signInProvider:g||null,signInSecondFactor:(null==b?void 0:b.sign_in_second_factor)||null}}function pn(a){return 1e3*Number(a)}function po(d){var a;let[e,b,f]=d.split(".");if(void 0===e|| void 0===b|| void 0===f)return oW("JWT malformed, contained fewer than 3 sections"),null;try{let c=mq(b);if(!c)return oW("Failed to decode base64 JWT payload"),null;return JSON.parse(c)}catch(g){return oW("Caught error parsing JWT payload as JSON",null===(a=g)|| void 0===a?void 0:a.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pp(a,c,d=!1){if(d)return c;try{return await c}catch(b){throw b instanceof bn&&pq(b)&&a.auth.currentUser===a&&await a.auth.signOut(),b}}function pq({code:a}){return"auth/user-disabled"===a||"auth/user-token-expired"===a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class pr{constructor(a,b){this.createdAt=a,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=pl(this.lastLoginAt),this.creationTime=pl(this.createdAt)}_copy(a){this.createdAt=a.createdAt,this.lastLoginAt=a.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function ps(b){var c;let f=b.auth,g=await b.getIdToken(),d=await pp(b,pk(f,{idToken:g}));o0(null==d?void 0:d.users.length,f,"internal-error");let a=d.users[0];b._notifyReloadListener(a);let h=(null===(c=a.providerUserInfo)|| void 0===c?void 0:c.length)?pv(a.providerUserInfo):[],e=pu(b.providerData,h),i=b.isAnonymous,j=!(b.email&&a.passwordHash)&&!(null==e?void 0:e.length),k={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:e,metadata:new pr(a.createdAt,a.lastLoginAt),isAnonymous:!!i&&j};Object.assign(b,k)}async function pt(b){let a=mR(b);await ps(a),await a.auth._persistUserIfCurrent(a),a.auth._notifyListenersIfCurrent(a)}function pu(a,b){let c=a.filter(a=>!b.some(b=>b.providerId===a.providerId));return[...c,...b]}function pv(a){return a.map(b=>{var{providerId:c}=b,a=h4(b,["providerId"]);return{providerId:c,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pw(b,c){let a=await pe(b,{},async()=>{let d=mK({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:e,apiKey:f}=b.config,g=pg(b,e,"/v1/token",`key=${f}`),a=await b._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",o9.fetch()(g,{method:"POST",headers:a,body:d})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * We need to mark this class as internal explicitly to exclude it in the public typings, because
 * it references AuthInternal which has a circular dependency with UserInternal.
 *
 * @internal
 */ class px{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(a){o0(a.idToken,"internal-error"),o0(void 0!==a.idToken,"internal-error"),o0(void 0!==a.refreshToken,"internal-error");let b="expiresIn"in a&& void 0!==a.expiresIn?Number(a.expiresIn):function(b){let a=po(b);return o0(a,"internal-error"),o0(void 0!==a.exp,"internal-error"),o0(void 0!==a.iat,"internal-error"),Number(a.exp)-Number(a.iat)}(a.idToken);this.updateTokensAndExpiration(a.idToken,a.refreshToken,b)}async getToken(a,b=!1){return(o0(!this.accessToken||this.refreshToken,a,"user-token-expired"),b||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(a,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(a,b){let{accessToken:c,refreshToken:d,expiresIn:e}=await pw(a,b);this.updateTokensAndExpiration(c,d,Number(e))}updateTokensAndExpiration(a,b,c){this.refreshToken=b||null,this.accessToken=a||null,this.expirationTime=Date.now()+1e3*c}static fromJSON(b,f){let{refreshToken:c,accessToken:d,expirationTime:e}=f,a=new px;return c&&(o0("string"==typeof c,"internal-error",{appName:b}),a.refreshToken=c),d&&(o0("string"==typeof d,"internal-error",{appName:b}),a.accessToken=d),e&&(o0("number"==typeof e,"internal-error",{appName:b}),a.expirationTime=e),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(a){this.accessToken=a.accessToken,this.refreshToken=a.refreshToken,this.expirationTime=a.expirationTime}_clone(){return Object.assign(new px,this.toJSON())}_performRefresh(){return o1("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function py(a,b){o0("string"==typeof a|| void 0===a,"internal-error",{appName:b})}class pz{constructor(b){var{uid:d,auth:e,stsTokenManager:c}=b,a=h4(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{constructor(a){this.user=a,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){!this.isRunning&&(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var a;if(b){let c=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),c}{this.errorBackoff=3e4;let d=null!==(a=this.user.stsTokenManager.expirationTime)&& void 0!==a?a:0,e=d-Date.now()-3e5;return Math.max(0,e)}}schedule(a=!1){if(!this.isRunning)return;let b=this.getInterval(a);this.timerId=setTimeout(async()=>{await this.iteration()},b)}async iteration(){var a;try{await this.user.getIdToken(!0)}catch(b){(null===(a=b)|| void 0===a?void 0:a.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=e,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pr(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(b){let a=await pp(this,this.stsTokenManager.getToken(this.auth,b));return o0(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(a){return pm(this,a)}reload(){return pt(this)}_assign(a){this!==a&&(o0(this.uid===a.uid,this.auth,"internal-error"),this.displayName=a.displayName,this.photoURL=a.photoURL,this.email=a.email,this.emailVerified=a.emailVerified,this.phoneNumber=a.phoneNumber,this.isAnonymous=a.isAnonymous,this.tenantId=a.tenantId,this.providerData=a.providerData.map(a=>Object.assign({},a)),this.metadata._copy(a.metadata),this.stsTokenManager._assign(a.stsTokenManager))}_clone(a){return new pz(Object.assign(Object.assign({},this),{auth:a,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(a){o0(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=a,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(a){this.reloadListener?this.reloadListener(a):this.reloadUserInfo=a}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(a,c=!1){let b=!1;a.idToken&&a.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(a),b=!0),c&&await ps(this),await this.auth._persistUserIfCurrent(this),b&&this.auth._notifyListenersIfCurrent(this)}async delete(){let a=await this.getIdToken();return await pp(this,pj(this.auth,{idToken:a})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(a=>Object.assign({},a)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(a,b){var c,d,e,f,g,h,i,j;let o=null!==(c=b.displayName)&& void 0!==c?c:void 0,p=null!==(d=b.email)&& void 0!==d?d:void 0,q=null!==(e=b.phoneNumber)&& void 0!==e?e:void 0,r=null!==(f=b.photoURL)&& void 0!==f?f:void 0,s=null!==(g=b.tenantId)&& void 0!==g?g:void 0,k=null!==(h=b._redirectEventId)&& void 0!==h?h:void 0,t=null!==(i=b.createdAt)&& void 0!==i?i:void 0,u=null!==(j=b.lastLoginAt)&& void 0!==j?j:void 0,{uid:l,emailVerified:v,isAnonymous:w,providerData:m,stsTokenManager:x}=b;o0(l&&x,a,"internal-error");let y=px.fromJSON(this.name,x);o0("string"==typeof l,a,"internal-error"),py(o,a.name),py(p,a.name),o0("boolean"==typeof v,a,"internal-error"),o0("boolean"==typeof w,a,"internal-error"),py(q,a.name),py(r,a.name),py(s,a.name),py(k,a.name),py(t,a.name),py(u,a.name);let n=new pz({uid:l,auth:a,email:p,emailVerified:v,displayName:o,isAnonymous:w,photoURL:r,phoneNumber:q,tenantId:s,stsTokenManager:y,createdAt:t,lastLoginAt:u});return m&&Array.isArray(m)&&(n.providerData=m.map(a=>Object.assign({},a))),k&&(n._redirectEventId=k),n}static async _fromIdTokenResponse(d,a,e=!1){let b=new px;b.updateFromServerResponse(a);let c=new pz({uid:a.localId,auth:d,stsTokenManager:b,isAnonymous:e});return await ps(c),c}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class bt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(a,b){this.storage[a]=b}async _get(b){let a=this.storage[b];return void 0===a?null:a}async _remove(a){delete this.storage[a]}_addListener(a,b){}_removeListener(a,b){}}bt.type="NONE";let pA=bt;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function pB(a,b,c){return`firebase:${a}:${b}:${c}`}class pC{constructor(d,a,e){this.persistence=d,this.auth=a,this.userKey=e;let{config:b,name:c}=this.auth;this.fullUserKey=pB(this.userKey,b.apiKey,c),this.fullPersistenceKey=pB("persistence",b.apiKey,c),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(a){return this.persistence._set(this.fullUserKey,a.toJSON())}async getCurrentUser(){let a=await this.persistence._get(this.fullUserKey);return a?pz._fromJSON(this.auth,a):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(a){if(this.persistence===a)return;let b=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=a,b)return this.setCurrentUser(b)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(b,c,d="authUser"){if(!c.length)return new pC(o4(pA),b,d);let g=(await Promise.all(c.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a),a=g[0]||o4(pA),h=pB(d,b.config.apiKey,b.name),e=null;for(let f of c)try{let i=await f._get(h);if(i){let k=pz._fromJSON(b,i);f!==a&&(e=k),a=f;break}}catch(l){}let j=g.filter(a=>a._shouldAllowMigration);return a._shouldAllowMigration&&j.length&&(a=j[0],e&&await a._set(h,e.toJSON()),await Promise.all(c.map(async b=>{if(b!==a)try{await b._remove(h)}catch(c){}}))),new pC(a,b,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Determine the browser for the purposes of reporting usage to the API
 */ function pD(c){let a=c.toLowerCase();if(a.includes("opera/")||a.includes("opr/")||a.includes("opios/"))return"Opera";if(pH(a))return"IEMobile";if(a.includes("msie")||a.includes("trident/"))return"IE";{if(a.includes("edge/"))return"Edge";if(pE(a))return"Firefox";if(a.includes("silk/"))return"Silk";if(pJ(a))return"Blackberry";if(pK(a))return"Webos";if(pF(a))return"Safari";if((a.includes("chrome/")||pG(a))&&!a.includes("edge/"))return"Chrome";if(pI(a))return"Android";let d=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,b=c.match(d);if((null==b?void 0:b.length)===2)return b[1]}return"Other"}function pE(a=mt()){return/firefox\//i.test(a)}function pF(b=mt()){let a=b.toLowerCase();return a.includes("safari/")&&!a.includes("chrome/")&&!a.includes("crios/")&&!a.includes("android")}function pG(a=mt()){return/crios\//i.test(a)}function pH(a=mt()){return/iemobile/i.test(a)}function pI(a=mt()){return/android/i.test(a)}function pJ(a=mt()){return/blackberry/i.test(a)}function pK(a=mt()){return/webos/i.test(a)}function pL(a=mt()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function pM(a=mt()){return pL(a)||pI(a)||pK(a)||pJ(a)||/windows phone/i.test(a)||pH(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /*
 * Determine the SDK version string
 */ function pN(b,c=[]){let a;switch(b){case"Browser":a=pD(mt());break;case"Worker":a=`${pD(mt())}-${b}`;break;default:a=b}let d=c.length?c.join(","):"FirebaseCore-web";return`${a}/JsCore/${np}/${d}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class pO{constructor(a,c,b){this.app=a,this.heartbeatServiceProvider=c,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pQ(this),this.idTokenSubscription=new pQ(this),this.beforeStateQueue=new /**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{constructor(a){this.auth=a,this.queue=[]}pushCallback(c,b){let a=a=>new Promise((b,d)=>{try{let e=c(a);b(e)}catch(f){d(f)}});a.onAbort=b,this.queue.push(a);let d=this.queue.length-1;return()=>{this.queue[d]=()=>Promise.resolve()}}async runMiddleware(d){var a;if(this.auth.currentUser===d)return;let b=[];try{for(let c of this.queue)await c(d),c.onAbort&&b.push(c.onAbort)}catch(e){for(let f of(b.reverse(),b))try{f()}catch(g){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(a=e)|| void 0===a?void 0:a.message})}}}(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oU,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=a.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(b,a){return a&&(this._popupRedirectResolver=o4(a)),this._initializationPromise=this.queue(async()=>{var c,d;if(!this._deleted&&(this.persistenceManager=await pC.create(this,b),!this._deleted)){if(null===(c=this._popupRedirectResolver)|| void 0===c?void 0:c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(a),this.lastNotifiedUid=(null===(d=this.currentUser)|| void 0===d?void 0:d.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let a=await this.assertedPersistence.getCurrentUser();if(this.currentUser||a){if(this.currentUser&&a&&this.currentUser.uid===a.uid){this._currentUser._assign(a),await this.currentUser.getIdToken();return}await this._updateCurrentUser(a,!0)}}async initializeCurrentUser(d){var b;let e=await this.assertedPersistence.getCurrentUser(),a=e,f=!1;if(d&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let g=null===(b=this.redirectUser)|| void 0===b?void 0:b._redirectEventId,h=null==a?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(d);(!g||g===h)&&(null==c?void 0:c.user)&&(a=c.user,f=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return(o0(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId)?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(b){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,b,!0)}catch(c){await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(b){var a;try{await ps(b)}catch(c){if((null===(a=c)|| void 0===a?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(b)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let a=navigator;return a.languages&&a.languages[0]||a.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(b){let a=b?mR(b):null;return a&&o0(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(a,b=!1){if(!this._deleted)return a&&o0(this.tenantId===a.tenantId,this,"tenant-id-mismatch"),b||await this.beforeStateQueue.runMiddleware(a),this.queue(async()=>{await this.directlySetCurrentUser(a),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(a){return this.queue(async()=>{await this.assertedPersistence.setPersistence(o4(a))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(a){this._errorFactory=new aa("auth","Firebase",a())}onAuthStateChanged(a,b,c){return this.registerStateListener(this.authStateSubscription,a,b,c)}beforeAuthStateChanged(a,b){return this.beforeStateQueue.pushCallback(a,b)}onIdTokenChanged(a,b,c){return this.registerStateListener(this.idTokenSubscription,a,b,c)}toJSON(){var a;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(a=this._currentUser)|| void 0===a?void 0:a.toJSON()}}async _setRedirectUser(a,c){let b=await this.getOrInitRedirectPersistenceManager(c);return null===a?b.removeCurrentUser():b.setCurrentUser(a)}async getOrInitRedirectPersistenceManager(a){if(!this.redirectPersistenceManager){let b=a&&o4(a)||this._popupRedirectResolver;o0(b,this,"argument-error"),this.redirectPersistenceManager=await pC.create(this,[o4(b._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(c){var a,b;return(this._isInitialized&&await this.queue(async()=>{}),(null===(a=this._currentUser)|| void 0===a?void 0:a._redirectEventId)===c)?this._currentUser:(null===(b=this.redirectUser)|| void 0===b?void 0:b._redirectEventId)===c?this.redirectUser:null}async _persistUserIfCurrent(a){if(a===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(a))}_notifyListenersIfCurrent(a){a===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var a,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let c=null!==(b=null===(a=this.currentUser)|| void 0===a?void 0:a.uid)&& void 0!==b?b:null;this.lastNotifiedUid!==c&&(this.lastNotifiedUid=c,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,a,d,e){if(this._deleted)return()=>{};let f="function"==typeof a?a:a.next.bind(a),c=this._isInitialized?Promise.resolve():this._initializationPromise;return(o0(c,this,"internal-error"),c.then(()=>f(this.currentUser)),"function"==typeof a)?b.addObserver(a,d,e):b.addObserver(a)}async directlySetCurrentUser(a){this.currentUser&&this.currentUser!==a&&this._currentUser._stopProactiveRefresh(),a&&this.isProactiveRefreshEnabled&&a._startProactiveRefresh(),this.currentUser=a,a?await this.assertedPersistence.setCurrentUser(a):await this.assertedPersistence.removeCurrentUser()}queue(a){return this.operations=this.operations.then(a,a),this.operations}get assertedPersistence(){return o0(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(a){!(!a||this.frameworks.includes(a))&&(this.frameworks.push(a),this.frameworks.sort(),this.clientVersion=pN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;let b={"X-Client-Version":this.clientVersion};this.app.options.appId&&(b["X-Firebase-gmpid"]=this.app.options.appId);let c=await (null===(a=this.heartbeatServiceProvider.getImmediate({optional:!0}))|| void 0===a?void 0:a.getHeartbeatsHeader());return c&&(b["X-Firebase-Client"]=c),b}}function pP(a){return mR(a)}class pQ{constructor(a){this.auth=a,this.observer=null,this.addObserver=function(b,c){let a=new mN(b,void 0);return a.subscribe.bind(a)}(a=>this.observer=a)}get next(){return o0(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pR(a){let b=a.indexOf(":");return b<0?"":a.substr(0,b+1)}function pS(a){if(!a)return null;let b=Number(a);return isNaN(b)?null:b}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Interface that represents the credentials returned by an {@link AuthProvider}.
 *
 * @remarks
 * Implementations specify the details about each auth provider's credential requirements.
 *
 * @public
 */ class ac{constructor(a,b){this.providerId=a,this.signInMethod=b}toJSON(){return o1("not implemented")}_getIdTokenResponse(a){return o1("not implemented")}_linkToIdToken(a,b){return o1("not implemented")}_getReauthenticationResolver(a){return o1("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pT(a,b){return pd(a,"POST","/v1/accounts:resetPassword",pc(a,b))}async function pU(a,b){return pd(a,"POST","/v1/accounts:update",b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pV(a,b){return pf(a,"POST","/v1/accounts:signInWithPassword",pc(a,b))}async function pW(a,b){return pd(a,"POST","/v1/accounts:sendOobCode",pc(a,b))}async function pX(a,b){return pW(a,b)}async function pY(a,b){return pW(a,b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function pZ(a,b){return pf(a,"POST","/v1/accounts:signInWithEmailLink",pc(a,b))}async function p$(a,b){return pf(a,"POST","/v1/accounts:signInWithEmailLink",pc(a,b))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Interface that represents the credentials returned by {@link EmailAuthProvider} for
 * {@link ProviderId}.PASSWORD
 *
 * @remarks
 * Covers both {@link SignInMethod}.EMAIL_PASSWORD and
 * {@link SignInMethod}.EMAIL_LINK.
 *
 * @public
 */ class p_ extends ac{constructor(a,b,c,d=null){super("password",c),this._email=a,this._password=b,this._tenantId=d}static _fromEmailAndPassword(a,b){return new p_(a,b,"password")}static _fromEmailAndCode(a,b,c=null){return new p_(a,b,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){let a="string"==typeof b?JSON.parse(b):b;if((null==a?void 0:a.email)&&(null==a?void 0:a.password)){if("password"===a.signInMethod)return this._fromEmailAndPassword(a.email,a.password);if("emailLink"===a.signInMethod)return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(a){switch(this.signInMethod){case"password":return pV(a,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return pZ(a,{email:this._email,oobCode:this._password});default:oX(a,"internal-error")}}async _linkToIdToken(a,b){switch(this.signInMethod){case"password":return pU(a,{idToken:b,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return p$(a,{idToken:b,email:this._email,oobCode:this._password});default:oX(a,"internal-error")}}_getReauthenticationResolver(a){return this._getIdTokenResponse(a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function p0(a,b){return pf(a,"POST","/v1/accounts:signInWithIdp",pc(a,b))}class p1 extends ac{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(a){let b=new p1(a.providerId,a.signInMethod);return a.idToken||a.accessToken?(a.idToken&&(b.idToken=a.idToken),a.accessToken&&(b.accessToken=a.accessToken),a.nonce&&!a.pendingToken&&(b.nonce=a.nonce),a.pendingToken&&(b.pendingToken=a.pendingToken)):a.oauthToken&&a.oauthTokenSecret?(b.accessToken=a.oauthToken,b.secret=a.oauthTokenSecret):oX("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){let d="string"==typeof c?JSON.parse(c):c,{providerId:e,signInMethod:f}=d,b=h4(d,["providerId","signInMethod"]);if(!e||!f)return null;let a=new p1(e,f);return a.idToken=b.idToken||void 0,a.accessToken=b.accessToken||void 0,a.secret=b.secret,a.nonce=b.nonce,a.pendingToken=b.pendingToken||null,a}_getIdTokenResponse(a){let b=this.buildRequest();return p0(a,b)}_linkToIdToken(b,c){let a=this.buildRequest();return a.idToken=c,p0(b,a)}_getReauthenticationResolver(b){let a=this.buildRequest();return a.autoCreate=!1,p0(b,a)}buildRequest(){let b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{let a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),b.postBody=mK(a)}return b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function p2(a,b){return pd(a,"POST","/v1/accounts:sendVerificationCode",pc(a,b))}async function p3(a,b){return pf(a,"POST","/v1/accounts:signInWithPhoneNumber",pc(a,b))}async function p4(a,c){let b=await pf(a,"POST","/v1/accounts:signInWithPhoneNumber",pc(a,c));if(b.temporaryProof)throw pi(a,"account-exists-with-different-credential",b);return b}let p5={USER_NOT_FOUND:"user-not-found"};async function p6(a,b){let c=Object.assign(Object.assign({},b),{operation:"REAUTH"});return pf(a,"POST","/v1/accounts:signInWithPhoneNumber",pc(a,c),p5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents the credentials returned by {@link PhoneAuthProvider}.
 *
 * @public
 */ class p7 extends ac{constructor(a){super("phone","phone"),this.params=a}static _fromVerification(a,b){return new p7({verificationId:a,verificationCode:b})}static _fromTokenResponse(a,b){return new p7({phoneNumber:a,temporaryProof:b})}_getIdTokenResponse(a){return p3(a,this._makeVerificationRequest())}_linkToIdToken(a,b){return p4(a,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(a){return p6(a,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:a,phoneNumber:b,verificationId:c,verificationCode:d}=this.params;return a&&b?{temporaryProof:a,phoneNumber:b}:{sessionInfo:c,code:d}}toJSON(){let a={providerId:this.providerId};return this.params.phoneNumber&&(a.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(a.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(a.verificationCode=this.params.verificationCode),this.params.verificationId&&(a.verificationId=this.params.verificationId),a}static fromJSON(a){"string"==typeof a&&(a=JSON.parse(a));let{verificationId:b,verificationCode:c,phoneNumber:d,temporaryProof:e}=a;return c||b||d||e?new p7({verificationId:b,verificationCode:c,phoneNumber:d,temporaryProof:e}):null}}class p8{constructor(k){var b,c,d,e,f,g;let a=mL(mM(k)),h=null!==(b=a.apiKey)&& void 0!==b?b:null,i=null!==(c=a.oobCode)&& void 0!==c?c:null,j=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Maps the mode string in action code URL to Action Code Info operation.
 *
 * @param mode
 */ function(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(d=a.mode)&& void 0!==d?d:null);o0(h&&i&&j,"argument-error"),this.apiKey=h,this.operation=j,this.code=i,this.continueUrl=null!==(e=a.continueUrl)&& void 0!==e?e:null,this.languageCode=null!==(f=a.languageCode)&& void 0!==f?f:null,this.tenantId=null!==(g=a.tenantId)&& void 0!==g?g:null}static parseLink(a){let b=function(a){let b=mL(mM(a)).link,d=b?mL(mM(b)).deep_link_id:null,c=mL(mM(a)).deep_link_id,e=c?mL(mM(c)).link:null;return e||c||d||b||a}(a);try{return new p8(b)}catch(c){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating {@link EmailAuthCredential}.
 *
 * @public
 */ class aF{constructor(){this.providerId=aF.PROVIDER_ID}static credential(a,b){return p_._fromEmailAndPassword(a,b)}static credentialWithLink(b,c){let a=p8.parseLink(c);return o0(a,"argument-error"),p_._fromEmailAndCode(b,a.code,a.tenantId)}}aF.PROVIDER_ID="password",aF.EMAIL_PASSWORD_SIGN_IN_METHOD="password",aF.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The base class for all Federated providers (OAuth (including OIDC), SAML).
 *
 * This class is not meant to be instantiated directly.
 *
 * @public
 */ class d1{constructor(a){this.providerId=a,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(a){this.defaultLanguageCode=a}setCustomParameters(a){return this.customParameters=a,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Common code to all OAuth providers. This is separate from the
 * {@link OAuthProvider} so that child providers (like
 * {@link GoogleAuthProvider}) don't inherit the `credential` instance method.
 * Instead, they rely on a static `credential` method.
 */ class ad extends d1{constructor(){super(...arguments),this.scopes=[]}addScope(a){return this.scopes.includes(a)||this.scopes.push(a),this}getScopes(){return[...this.scopes]}}class p9 extends null{static credentialFromJSON(a){let b="string"==typeof a?JSON.parse(a):a;return o0("providerId"in b&&"signInMethod"in b,"argument-error"),p1._fromParams(b)}credential(a){return this._credential(Object.assign(Object.assign({},a),{nonce:a.rawNonce}))}_credential(a){return o0(a.idToken||a.accessToken,"argument-error"),p1._fromParams(Object.assign(Object.assign({},a),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(a){return p9.oauthCredentialFromTaggedObject(a)}static credentialFromError(a){return p9.oauthCredentialFromTaggedObject(a.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{oauthIdToken:b,oauthAccessToken:c,oauthTokenSecret:f,pendingToken:d,nonce:g,providerId:e}=a;if(!c&&!f&&!b&&!d||!e)return null;try{return new p9(e)._credential({idToken:b,accessToken:c,nonce:g,pendingToken:d})}catch(h){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.FACEBOOK.
 *
 * @example
 * ```javascript
 * // Sign in using a redirect.
 * const provider = new FacebookAuthProvider();
 * // Start a sign in process for an unauthenticated user.
 * provider.addScope('user_birthday');
 * await signInWithRedirect(auth, provider);
 * // This will trigger a full page redirect away from your app
 *
 * // After returning from the redirect when your app initializes you can obtain the result
 * const result = await getRedirectResult(auth);
 * if (result) {
 *   // This is the signed-in user
 *   const user = result.user;
 *   // This gives you a Facebook Access Token.
 *   const credential = FacebookAuthProvider.credentialFromResult(result);
 *   const token = credential.accessToken;
 * }
 * ```
 *
 * @example
 * ```javascript
 * // Sign in using a popup.
 * const provider = new FacebookAuthProvider();
 * provider.addScope('user_birthday');
 * const result = await signInWithPopup(auth, provider);
 *
 * // The signed-in user info.
 * const user = result.user;
 * // This gives you a Facebook Access Token.
 * const credential = FacebookAuthProvider.credentialFromResult(result);
 * const token = credential.accessToken;
 * ```
 *
 * @public
 */ class bu extends ad{constructor(){super("facebook.com")}static credential(a){return p1._fromParams({providerId:bu.PROVIDER_ID,signInMethod:bu.FACEBOOK_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return bu.credentialFromTaggedObject(a)}static credentialFromError(a){return bu.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return bu.credential(a.oauthAccessToken)}catch(b){return null}}}bu.FACEBOOK_SIGN_IN_METHOD="facebook.com",bu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating an an {@link OAuthCredential} for {@link ProviderId}.GOOGLE.
 *
 * @example
 * ```javascript
 * // Sign in using a redirect.
 * const provider = new GoogleAuthProvider();
 * // Start a sign in process for an unauthenticated user.
 * provider.addScope('profile');
 * provider.addScope('email');
 * await signInWithRedirect(auth, provider);
 * // This will trigger a full page redirect away from your app
 *
 * // After returning from the redirect when your app initializes you can obtain the result
 * const result = await getRedirectResult(auth);
 * if (result) {
 *   // This is the signed-in user
 *   const user = result.user;
 *   // This gives you a Google Access Token.
 *   const credential = GoogleAuthProvider.credentialFromResult(result);
 *   const token = credential.accessToken;
 * }
 * ```
 *
 * @example
 * ```javascript
 * // Sign in using a popup.
 * const provider = new GoogleAuthProvider();
 * provider.addScope('profile');
 * provider.addScope('email');
 * const result = await signInWithPopup(auth, provider);
 *
 * // The signed-in user info.
 * const user = result.user;
 * // This gives you a Google Access Token.
 * const credential = GoogleAuthProvider.credentialFromResult(result);
 * const token = credential.accessToken;
 * ```
 *
 * @public
 */ class bv extends ad{constructor(){super("google.com"),this.addScope("profile")}static credential(a,b){return p1._fromParams({providerId:bv.PROVIDER_ID,signInMethod:bv.GOOGLE_SIGN_IN_METHOD,idToken:a,accessToken:b})}static credentialFromResult(a){return bv.credentialFromTaggedObject(a)}static credentialFromError(a){return bv.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{oauthIdToken:b,oauthAccessToken:c}=a;if(!b&&!c)return null;try{return bv.credential(b,c)}catch(d){return null}}}bv.GOOGLE_SIGN_IN_METHOD="google.com",bv.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.GITHUB.
 *
 * @remarks
 * GitHub requires an OAuth 2.0 redirect, so you can either handle the redirect directly, or use
 * the {@link signInWithPopup} handler:
 *
 * @example
 * ```javascript
 * // Sign in using a redirect.
 * const provider = new GithubAuthProvider();
 * // Start a sign in process for an unauthenticated user.
 * provider.addScope('repo');
 * await signInWithRedirect(auth, provider);
 * // This will trigger a full page redirect away from your app
 *
 * // After returning from the redirect when your app initializes you can obtain the result
 * const result = await getRedirectResult(auth);
 * if (result) {
 *   // This is the signed-in user
 *   const user = result.user;
 *   // This gives you a Github Access Token.
 *   const credential = GithubAuthProvider.credentialFromResult(result);
 *   const token = credential.accessToken;
 * }
 * ```
 *
 * @example
 * ```javascript
 * // Sign in using a popup.
 * const provider = new GithubAuthProvider();
 * provider.addScope('repo');
 * const result = await signInWithPopup(auth, provider);
 *
 * // The signed-in user info.
 * const user = result.user;
 * // This gives you a Github Access Token.
 * const credential = GithubAuthProvider.credentialFromResult(result);
 * const token = credential.accessToken;
 * ```
 * @public
 */ class bw extends ad{constructor(){super("github.com")}static credential(a){return p1._fromParams({providerId:bw.PROVIDER_ID,signInMethod:bw.GITHUB_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return bw.credentialFromTaggedObject(a)}static credentialFromError(a){return bw.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return bw.credential(a.oauthAccessToken)}catch(b){return null}}}bw.GITHUB_SIGN_IN_METHOD="github.com",bw.PROVIDER_ID="github.com";class qa extends null{constructor(a,b){super(a,a),this.pendingToken=b}_getIdTokenResponse(a){let b=this.buildRequest();return p0(a,b)}_linkToIdToken(b,c){let a=this.buildRequest();return a.idToken=c,p0(b,a)}_getReauthenticationResolver(b){let a=this.buildRequest();return a.autoCreate=!1,p0(b,a)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(a){let e="string"==typeof a?JSON.parse(a):a,{providerId:b,signInMethod:c,pendingToken:d}=e;return b&&c&&d&&b===c?new qa(b,d):null}static _create(a,b){return new qa(a,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qb extends null{constructor(a){o0(a.startsWith("saml."),"argument-error"),super(a)}static credentialFromResult(a){return qb.samlCredentialFromTaggedObject(a)}static credentialFromError(a){return qb.samlCredentialFromTaggedObject(a.customData||{})}static credentialFromJSON(b){let a=qa.fromJSON(b);return o0(a,"argument-error"),a}static samlCredentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{pendingToken:b,providerId:c}=a;if(!b||!c)return null;try{return qa._create(c,b)}catch(d){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.TWITTER.
 *
 * @example
 * ```javascript
 * // Sign in using a redirect.
 * const provider = new TwitterAuthProvider();
 * // Start a sign in process for an unauthenticated user.
 * await signInWithRedirect(auth, provider);
 * // This will trigger a full page redirect away from your app
 *
 * // After returning from the redirect when your app initializes you can obtain the result
 * const result = await getRedirectResult(auth);
 * if (result) {
 *   // This is the signed-in user
 *   const user = result.user;
 *   // This gives you a Twitter Access Token and Secret.
 *   const credential = TwitterAuthProvider.credentialFromResult(result);
 *   const token = credential.accessToken;
 *   const secret = credential.secret;
 * }
 * ```
 *
 * @example
 * ```javascript
 * // Sign in using a popup.
 * const provider = new TwitterAuthProvider();
 * const result = await signInWithPopup(auth, provider);
 *
 * // The signed-in user info.
 * const user = result.user;
 * // This gives you a Twitter Access Token and Secret.
 * const credential = TwitterAuthProvider.credentialFromResult(result);
 * const token = credential.accessToken;
 * const secret = credential.secret;
 * ```
 *
 * @public
 */ class bx extends ad{constructor(){super("twitter.com")}static credential(a,b){return p1._fromParams({providerId:bx.PROVIDER_ID,signInMethod:bx.TWITTER_SIGN_IN_METHOD,oauthToken:a,oauthTokenSecret:b})}static credentialFromResult(a){return bx.credentialFromTaggedObject(a)}static credentialFromError(a){return bx.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{oauthAccessToken:b,oauthTokenSecret:c}=a;if(!b||!c)return null;try{return bx.credential(b,c)}catch(d){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function qc(a,b){return pf(a,"POST","/v1/accounts:signUp",pc(a,b))}bx.TWITTER_SIGN_IN_METHOD="twitter.com",bx.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class qd{constructor(a){this.user=a.user,this.providerId=a.providerId,this._tokenResponse=a._tokenResponse,this.operationType=a.operationType}static async _fromIdTokenResponse(b,c,a,d=!1){let e=await pz._fromIdTokenResponse(b,a,d),f=qe(a),g=new qd({user:e,providerId:f,_tokenResponse:a,operationType:c});return g}static async _forOperation(b,c,a){await b._updateTokensIfNecessary(a,!0);let d=qe(a);return new qd({user:b,providerId:d,_tokenResponse:a,operationType:c})}}function qe(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class qf extends bn{constructor(c,a,d,e){var b;super(a.code,a.message),this.operationType=d,this.user=e,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:c.name,tenantId:null!==(b=c.tenantId)&& void 0!==b?b:void 0,_serverResponse:a.customData._serverResponse,operationType:d}}static _fromErrorAndOperation(a,b,c,d){return new qf(a,b,c,d)}}function qg(a,c,b,e){let d="reauthenticate"===c?b._getReauthenticationResolver(a):b._getIdTokenResponse(a);return d.catch(b=>{if("auth/multi-factor-auth-required"===b.code)throw qf._fromErrorAndOperation(a,b,c,e);throw b})}async function qh(a,b,c=!1){let d=await pp(a,b._linkToIdToken(a.auth,await a.getIdToken()),c);return qd._forOperation(a,"link",d)}async function qi(b,a,d){var c;await ps(a);let e=(c=a.providerData,new Set(c.map(({providerId:a})=>a).filter(a=>!!a)));o0(e.has(d)===b,a.auth,!1===b?"provider-already-linked":"no-such-provider")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function qj(a,h,i=!1){var c;let{auth:b}=a,e="reauthenticate";try{let d=await pp(a,qg(b,e,h,a),i);o0(d.idToken,b,"internal-error");let f=po(d.idToken);o0(f,b,"internal-error");let{sub:j}=f;return o0(a.uid===j,b,"user-mismatch"),qd._forOperation(a,e,d)}catch(g){throw(null===(c=g)|| void 0===c?void 0:c.code)==="auth/user-not-found"&&oX(b,"user-mismatch"),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function qk(a,d,e=!1){let b="signIn",f=await qg(a,b,d),c=await qd._fromIdTokenResponse(a,b,f);return e||await a._updateCurrentUser(c.user),c}async function ql(a,b){return qk(pP(a),b)}async function qm(c,a){let b=mR(c);return await qi(!1,b,a.providerId),qh(b,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class d2{constructor(b,a){this.factorId=b,this.uid=a.mfaEnrollmentId,this.enrollmentTime=new Date(a.enrolledAt).toUTCString(),this.displayName=a.displayName}static _fromServerResponse(a,b){return"phoneInfo"in b?qn._fromServerResponse(a,b):oX(a,"internal-error")}}class qn extends d2{constructor(a){super("phone",a),this.phoneNumber=a.phoneInfo}static _fromServerResponse(b,a){return new qn(a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function qo(c,b,a){var d;o0((null===(d=a.url)|| void 0===d?void 0:d.length)>0,c,"invalid-continue-uri"),o0(void 0===a.dynamicLinkDomain||a.dynamicLinkDomain.length>0,c,"invalid-dynamic-link-domain"),b.continueUrl=a.url,b.dynamicLinkDomain=a.dynamicLinkDomain,b.canHandleCodeInApp=a.handleCodeInApp,a.iOS&&(o0(a.iOS.bundleId.length>0,c,"missing-ios-bundle-id"),b.iOSBundleId=a.iOS.bundleId),a.android&&(o0(a.android.packageName.length>0,c,"missing-android-pkg-name"),b.androidInstallApp=a.android.installApp,b.androidMinimumVersionCode=a.android.minimumVersion,b.androidPackageName=a.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Sends a password reset email to the given email address.
 *
 * @remarks
 * To complete the password reset, call {@link confirmPasswordReset} with the code supplied in
 * the email sent to the user, along with the new password specified by the user.
 *
 * @example
 * ```javascript
 * const actionCodeSettings = {
 *   url: 'https://www.example.com/?email=user@example.com',
 *   iOS: {
 *      bundleId: 'com.example.ios'
 *   },
 *   android: {
 *     packageName: 'com.example.android',
 *     installApp: true,
 *     minimumVersion: '12'
 *   },
 *   handleCodeInApp: true
 * };
 * await sendPasswordResetEmail(auth, 'user@example.com', actionCodeSettings);
 * // Obtain code from user.
 * await confirmPasswordReset('user@example.com', code);
 * ```
 *
 * @param auth - The {@link Auth} instance.
 * @param email - The user's email address.
 * @param actionCodeSettings - The {@link ActionCodeSettings}.
 *
 * @public
 */ async function qp(d,e,a){let b=mR(d),c={requestType:"PASSWORD_RESET",email:e};a&&qo(b,c,a),await pY(b,c)}async function qq(e,f){let b=mR(e),a=await pT(b,{oobCode:f}),c=a.requestType;switch(o0(c,b,"internal-error"),c){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":o0(a.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":o0(a.mfaInfo,b,"internal-error");default:o0(a.email,b,"internal-error")}let d=null;return a.mfaInfo&&(d=d2._fromServerResponse(pP(b),a.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.newEmail:a.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.email:a.newEmail)||null,multiFactorInfo:d},operation:c}}async function qr(a,b){let{data:c}=await qq(mR(a),b);return c.email}async function qs(c,d,e){let a=pP(c),f=await qc(a,{returnSecureToken:!0,email:d,password:e}),b=await qd._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(b.user),b}function qt(a,b,c){return ql(mR(a),aF.credential(b,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function qu(a,b){return pd(a,"POST","/v1/accounts:createAuthUri",pc(a,b))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Gets the list of possible sign in methods for the given email address.
 *
 * @remarks
 * This is useful to differentiate methods of sign-in for the same provider, eg.
 * {@link EmailAuthProvider} which has 2 methods of sign-in,
 * {@link SignInMethod}.EMAIL_PASSWORD and
 * {@link SignInMethod}.EMAIL_LINK.
 *
 * @param auth - The {@link Auth} instance.
 * @param email - The user's email address.
 *
 * @public
 */ async function qv(a,b){let c=o6()?o5():"http://localhost",{signinMethods:d}=await qu(mR(a),{identifier:b,continueUri:c});return d||[]}async function qw(a,b){let c=mR(a),e=await a.getIdToken(),d={requestType:"VERIFY_EMAIL",idToken:e};b&&qo(c.auth,d,b);let{email:f}=await pX(c.auth,d);f!==a.email&&await a.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function qx(a,b){return pd(a,"POST","/v1/accounts:update",b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Updates a user's profile data.
 *
 * @param user - The user.
 * @param profile - The profile's `displayName` and `photoURL` to update.
 *
 * @public
 */ async function qy(f,{displayName:d,photoURL:e}){if(void 0===d&& void 0===e)return;let a=mR(f),g=await a.getIdToken(),b=await pp(a,qx(a.auth,{idToken:g,displayName:d,photoUrl:e,returnSecureToken:!0}));a.displayName=b.displayName||null,a.photoURL=b.photoUrl||null;let c=a.providerData.find(({providerId:a})=>"password"===a);c&&(c.displayName=a.displayName,c.photoURL=a.photoURL),await a._updateTokensIfNecessary(b)}async function qz(a,c,d){let{auth:e}=a,f=await a.getIdToken(),b={idToken:f,returnSecureToken:!0};c&&(b.email=c),d&&(b.password=d);let g=await pp(a,pU(e,b));await a._updateTokensIfNecessary(g,!0)}async function qA(a){return mR(a).delete()}class qB{constructor(a,b,c){this.type=a,this.credential=b,this.auth=c}static _fromIdtoken(a,b){return new qB("enroll",a,b)}static _fromMfaPendingCredential(a){return new qB("signin",a)}toJSON(){let a="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[a]:this.credential}}}static fromJSON(a){var b,c;if(null==a?void 0:a.multiFactorSession){if(null===(b=a.multiFactorSession)|| void 0===b?void 0:b.pendingCredential)return qB._fromMfaPendingCredential(a.multiFactorSession.pendingCredential);if(null===(c=a.multiFactorSession)|| void 0===c?void 0:c.idToken)return qB._fromIdtoken(a.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class qC{constructor(a,b,c){this.session=a,this.hints=b,this.signInResolver=c}static _fromError(b,c){let d=pP(b),a=c.customData._serverResponse,e=(a.mfaInfo||[]).map(a=>d2._fromServerResponse(d,a));o0(a.mfaPendingCredential,d,"internal-error");let f=qB._fromMfaPendingCredential(a.mfaPendingCredential);return new qC(f,e,async h=>{let b=await h._process(d,f);delete a.mfaInfo,delete a.mfaPendingCredential;let e=Object.assign(Object.assign({},a),{idToken:b.idToken,refreshToken:b.refreshToken});switch(c.operationType){case"signIn":let g=await qd._fromIdTokenResponse(d,c.operationType,e);return await d._updateCurrentUser(g.user),g;case"reauthenticate":return o0(c.user,d,"internal-error"),qd._forOperation(c.user,c.operationType,e);default:oX(d,"internal-error")}})}async resolveSignIn(a){return this.signInResolver(a)}}class qD{constructor(a){this.user=a,this.enrolledFactors=[],a._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(b=>d2._fromServerResponse(a.auth,b)))})}static _fromUser(a){return new qD(a)}async getSession(){return qB._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(a,b){let c=await this.getSession(),d=await pp(this.user,a._process(this.user.auth,c,b));return await this.user._updateTokensIfNecessary(d),this.user.reload()}async unenroll(a){var b,c,e;let f="string"==typeof a?a:a.uid,g=await this.user.getIdToken(),h=await pp(this.user,(c=this.user.auth,pd(c,"POST","/v2/accounts/mfaEnrollment:withdraw",pc(c,e={idToken:g,mfaEnrollmentId:f}))));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==f),await this.user._updateTokensIfNecessary(h);try{await this.user.reload()}catch(d){if((null===(b=d)|| void 0===b?void 0:b.code)!=="auth/user-token-expired")throw d}}}new WeakMap;let qE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // There are two different browser persistence types: local and session.
// Both have the same implementation but use a different underlying storage
// object.
class by{constructor(a,b){this.storageRetriever=a,this.type=b}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(qE,"1"),this.storage.removeItem(qE),Promise.resolve(!0)}catch(a){return Promise.resolve(!1)}}_set(a,b){return this.storage.setItem(a,JSON.stringify(b)),Promise.resolve()}_get(b){let a=this.storage.getItem(b);return Promise.resolve(a?JSON.parse(a):null)}_remove(a){return this.storage.removeItem(a),Promise.resolve()}get storage(){return this.storageRetriever()}}class bz extends by{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(a,b)=>this.onStorageEvent(a,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function(){let a=mt();return pF(a)||pL(a)}()&&function(){try{return!!(window&&window!==window.top)}catch(a){return!1}}(),this.fallbackToPolling=pM(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(let a of Object.keys(this.listeners)){let b=this.storage.getItem(a),c=this.localCache[a];b!==c&&d(a,c,b)}}onStorageEvent(a,c=!1){if(!a.key){this.forAllChangedKeys((a,c,b)=>{this.notifyListeners(a,b)});return}let b=a.key;if(c?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let e=this.storage.getItem(b);if(a.newValue!==e)null!==a.newValue?this.storage.setItem(b,a.newValue):this.storage.removeItem(b);else if(this.localCache[b]===a.newValue&&!c)return}let d=()=>{let a=this.storage.getItem(b);(c||this.localCache[b]!==a)&&this.notifyListeners(b,a)},f=this.storage.getItem(b);(function(){let a=mt();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0})()&&10===document.documentMode&&f!==a.newValue&&a.newValue!==a.oldValue?setTimeout(d,10):d()}notifyListeners(b,a){this.localCache[b]=a;let c=this.listeners[b];if(c)for(let d of Array.from(c))d(a?JSON.parse(a):a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((a,b,c)=>{this.onStorageEvent(new StorageEvent("storage",{key:a,oldValue:b,newValue:c}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(a,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[a]||(this.listeners[a]=new Set,this.localCache[a]=this.storage.getItem(a)),this.listeners[a].add(b)}_removeListener(a,b){this.listeners[a]&&(this.listeners[a].delete(b),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(a,b){await super._set(a,b),this.localCache[a]=JSON.stringify(b)}async _get(a){let b=await super._get(a);return this.localCache[a]=JSON.stringify(b),b}async _remove(a){await super._remove(a),delete this.localCache[a]}}bz.type="LOCAL";let qF=bz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class bA extends by{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(a,b){}_removeListener(a,b){}}bA.type="SESSION";let qG=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Interface class for receiving messages.
 *
 */ class d3{constructor(a){this.eventTarget=a,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(c){let a=this.receivers.find(a=>a.isListeningto(c));if(a)return a;let b=new d3(c);return this.receivers.push(b),b}isListeningto(a){return this.eventTarget===a}async handleEvent(e){var f;let a=e,{eventId:d,eventType:b,data:i}=a.data,c=this.handlersMap[b];if(!(null==c?void 0:c.size))return;a.ports[0].postMessage({status:"ack",eventId:d,eventType:b});let g=Array.from(c).map(async b=>b(a.origin,i)),h=await Promise.all((f=g).map(async a=>{try{let b=await a;return{fulfilled:!0,value:b}}catch(c){return{fulfilled:!1,reason:c}}}));a.ports[0].postMessage({status:"done",eventId:d,eventType:b,response:h})}_subscribe(a,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[a]||(this.handlersMap[a]=new Set),this.handlersMap[a].add(b)}_unsubscribe(a,b){this.handlersMap[a]&&b&&this.handlersMap[a].delete(b),b&&0!==this.handlersMap[a].size||delete this.handlersMap[a],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function qH(c="",d=10){let a="";for(let b=0;b<d;b++)a+=Math.floor(10*Math.random());return c+a}d3.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Interface for sending messages and waiting for a completion response.
 *
 */ class qI{constructor(a){this.target=a,this.handlers=new Set}removeMessageHandler(a){a.messageChannel&&(a.messageChannel.port1.removeEventListener("message",a.onMessage),a.messageChannel.port1.close()),this.handlers.delete(a)}async _send(b,c,d=50){let a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw Error("connection_unavailable");let e,f;return new Promise((h,i)=>{let g=qH("",20);a.port1.start();let j=setTimeout(()=>{i(Error("unsupported_event"))},d);f={messageChannel:a,onMessage(b){let a=b;if(a.data.eventId===g)switch(a.data.status){case"ack":clearTimeout(j),e=setTimeout(()=>{i(Error("timeout"))},3e3);break;case"done":clearTimeout(e),h(a.data.response);break;default:clearTimeout(j),clearTimeout(e),i(Error("invalid_response"))}}},this.handlers.add(f),a.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:b,eventId:g,data:c},[a.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function qJ(){return void 0!==window.WorkerGlobalScope&&"function"==typeof window.importScripts}async function qK(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let a=await navigator.serviceWorker.ready;return a.active}catch(b){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let qL="firebaseLocalStorageDb",qM="firebaseLocalStorage",qN="fbase_key";class qO{constructor(a){this.request=a}toPromise(){return new Promise((a,b)=>{this.request.addEventListener("success",()=>{a(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function qP(a,b){return a.transaction([qM],b?"readwrite":"readonly").objectStore(qM)}function qQ(){let a=indexedDB.open(qL,1);return new Promise((b,c)=>{a.addEventListener("error",()=>{c(a.error)}),a.addEventListener("upgradeneeded",()=>{let b=a.result;try{b.createObjectStore(qM,{keyPath:qN})}catch(d){c(d)}}),a.addEventListener("success",async()=>{let c=a.result;c.objectStoreNames.contains(qM)?b(c):(c.close(),await function(){let a=indexedDB.deleteDatabase(qL);return new qO(a).toPromise()}(),b(await qQ()))})})}async function qR(a,b,c){let d=qP(a,!0).put({[qN]:b,value:c});return new qO(d).toPromise()}async function qS(b,c){let d=qP(b,!1).get(c),a=await new qO(d).toPromise();return void 0===a?null:a.value}function qT(a,b){let c=qP(a,!0).delete(b);return new qO(c).toPromise()}class bB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qQ()),this.db}async _withRetries(a){let b=0;for(;;)try{let c=await this._openDb();return await a(c)}catch(d){if(b++ >3)throw d;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=d3._getInstance(qJ()?self:null),this.receiver._subscribe("keyChanged",async(c,a)=>{let b=await this._poll();return{keyProcessed:b.includes(a.key)}}),this.receiver._subscribe("ping",async(a,b)=>["keyChanged"])}async initializeSender(){var a,b;if(this.activeServiceWorker=await qK(),!this.activeServiceWorker)return;this.sender=new qI(this.activeServiceWorker);let c=await this.sender._send("ping",{},800);c&&(null===(a=c[0])|| void 0===a?void 0:a.fulfilled)&&(null===(b=c[0])|| void 0===b?void 0:b.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(b){var a;if(this.sender&&this.activeServiceWorker&&((null===(a=null==navigator?void 0:navigator.serviceWorker)|| void 0===a?void 0:a.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:b},this.serviceWorkerReceiverAvailable?800:50)}catch(c){}}async _isAvailable(){try{if(!indexedDB)return!1;let a=await qQ();return await qR(a,qE,"1"),await qT(a,qE),!0}catch(b){}return!1}async _withPendingWrite(a){this.pendingWrites++;try{await a()}finally{this.pendingWrites--}}async _set(a,b){return this._withPendingWrite(async()=>(await this._withRetries(c=>qR(c,a,b)),this.localCache[a]=b,this.notifyServiceWorker(a)))}async _get(b){let a=await this._withRetries(a=>qS(a,b));return this.localCache[b]=a,a}async _remove(a){return this._withPendingWrite(async()=>(await this._withRetries(b=>qT(b,a)),delete this.localCache[a],this.notifyServiceWorker(a)))}async _poll(){let d=await this._withRetries(a=>{let b=qP(a,!1).getAll();return new qO(b).toPromise()});if(!d||0!==this.pendingWrites)return[];let c=[],e=new Set;for(let{fbase_key:a,value:f}of d)e.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(f)&&(this.notifyListeners(a,f),c.push(a));for(let b of Object.keys(this.localCache))this.localCache[b]&&!e.has(b)&&(this.notifyListeners(b,null),c.push(b));return c}notifyListeners(a,b){this.localCache[a]=b;let c=this.listeners[a];if(c)for(let d of Array.from(c))d(b)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(a,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[a]||(this.listeners[a]=new Set,this._get(a)),this.listeners[a].add(b)}_removeListener(a,b){this.listeners[a]&&(this.listeners[a].delete(b),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bB.type="LOCAL";let qU=bB;function d4(a){return`__${a}${Math.floor(1e6*Math.random())}`}class qV{constructor(a,c,d){this.params=d,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let b="string"==typeof a?document.getElementById(a):a;o0(b,"argument-error",{appName:c}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=qW(50);let{callback:a,"expired-callback":b}=this.params;if(a)try{a(this.responseToken)}catch(c){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch(a){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}function qW(d){let a=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let c=0;c<d;c++)a.push(b.charAt(Math.floor(Math.random()*b.length)));return a.join("")}d4("rcb"),new P(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class qX{constructor(a,b){this.verificationId=a,this.onConfirmation=b}confirm(a){let b=p7._fromVerification(this.verificationId,a);return this.onConfirmation(b)}}async function qY(a,b,c){let d=pP(a),e=await qZ(d,b,mR(c));return new qX(e,a=>ql(d,a))}async function qZ(a,e,f){var g,h,j,i,k;let c=await f.verify();try{o0("string"==typeof c,a,"argument-error"),o0("recaptcha"===f.type,a,"argument-error");let b;if(b="string"==typeof e?{phoneNumber:e}:e,"session"in b){let d=b.session;if("phoneNumber"in b){o0("enroll"===d.type,a,"internal-error");let m=await (h=a,j={idToken:d.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:c}},pd(h,"POST","/v2/accounts/mfaEnrollment:start",pc(h,j)));return m.phoneSessionInfo.sessionInfo}{o0("signin"===d.type,a,"internal-error");let l=(null===(g=b.multiFactorHint)|| void 0===g?void 0:g.uid)||b.multiFactorUid;o0(l,a,"missing-multi-factor-info");let n=await (i=a,k={mfaPendingCredential:d.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:c}},pd(i,"POST","/v2/accounts/mfaSignIn:start",pc(i,k)));return n.phoneResponseInfo.sessionInfo}}{let{sessionInfo:o}=await p2(a,{phoneNumber:b.phoneNumber,recaptchaToken:c});return o}}finally{f._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provider for generating an {@link PhoneAuthCredential}.
 *
 * @example
 * ```javascript
 * // 'recaptcha-container' is the ID of an element in the DOM.
 * const applicationVerifier = new RecaptchaVerifier('recaptcha-container');
 * const provider = new PhoneAuthProvider(auth);
 * const verificationId = await provider.verifyPhoneNumber('+16505550101', applicationVerifier);
 * // Obtain the verificationCode from the user.
 * const phoneCredential = PhoneAuthProvider.credential(verificationId, verificationCode);
 * const userCredential = await signInWithCredential(auth, phoneCredential);
 * ```
 *
 * @public
 */ class bC{constructor(a){this.providerId=bC.PROVIDER_ID,this.auth=pP(a)}verifyPhoneNumber(a,b){return qZ(this.auth,a,mR(b))}static credential(a,b){return p7._fromVerification(a,b)}static credentialFromResult(a){return bC.credentialFromTaggedObject(a)}static credentialFromError(a){return bC.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{phoneNumber:b,temporaryProof:c}=a;return b&&c?p7._fromTokenResponse(b,c):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Chooses a popup/redirect resolver to use. This prefers the override (which
 * is directly passed in), and falls back to the property set on the auth
 * object. If neither are available, this function errors w/ an argument error.
 */ function q$(a,b){return b?o4(b):(o0(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}bC.PROVIDER_ID="phone",bC.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class q_ extends ac{constructor(a){super("custom","custom"),this.params=a}_getIdTokenResponse(a){return p0(a,this._buildIdpRequest())}_linkToIdToken(a,b){return p0(a,this._buildIdpRequest(b))}_getReauthenticationResolver(a){return p0(a,this._buildIdpRequest())}_buildIdpRequest(a){let b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return a&&(b.idToken=a),b}}function q0(a){return qk(a.auth,new q_(a),a.bypassAuthState)}function q1(a){let{auth:c,user:b}=a;return o0(b,c,"internal-error"),qj(b,new q_(a),a.bypassAuthState)}async function q2(a){let{auth:c,user:b}=a;return o0(b,c,"internal-error"),qh(b,new q_(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Popup event manager. Handles the popup's entire lifecycle; listens to auth
 * events
 */ class bD{constructor(b,a,c,d,e=!1){this.auth=b,this.resolver=c,this.user=d,this.bypassAuthState=e,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(a,b)=>{this.pendingPromise={resolve:a,reject:b};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(c){this.reject(c)}})}async onAuthEvent(b){let{urlResponse:c,sessionId:d,postBody:e,tenantId:f,error:a,type:g}=b;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:c,sessionId:d,tenantId:f||void 0,postBody:e||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(h))}catch(i){this.reject(i)}}onError(a){this.reject(a)}getIdpTask(a){switch(a){case"signInViaPopup":case"signInViaRedirect":return q0;case"linkViaPopup":case"linkViaRedirect":return q2;case"reauthViaPopup":case"reauthViaRedirect":return q1;default:oX(this.auth,"internal-error")}}resolve(a){o2(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(a),this.unregisterAndCleanUp()}reject(a){o2(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(a),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let q3=new P(2e3,1e4);async function q4(a,b,d){let c=pP(a);o$(a,b,d1);let e=q$(c,d),f=new d5(c,"signInViaPopup",b,e);return f.executeNotNull()}class d5 extends bD{constructor(a,b,c,d,e){super(a,b,d,e),this.provider=c,this.authWindow=null,this.pollId=null,d5.currentPopupAction&&d5.currentPopupAction.cancel(),d5.currentPopupAction=this}async executeNotNull(){let a=await this.execute();return o0(a,this.auth,"internal-error"),a}async onExecution(){o2(1===this.filter.length,"Popup operations only handle one event");let a=qH();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],a),this.authWindow.associatedEvent=a,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(oY(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var a;return(null===(a=this.authWindow)|| void 0===a?void 0:a.associatedEvent)||null}cancel(){this.reject(oY(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,d5.currentPopupAction=null}pollUserCancellation(){let a=()=>{var b,c;if(null===(c=null===(b=this.authWindow)|| void 0===b?void 0:b.window)|| void 0===c?void 0:c.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oY(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(a,q3.get())};a()}}d5.currentPopupAction=null;let q5=new Map;class q6 extends bD{constructor(a,b,c=!1){super(a,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,c),this.eventId=null}async execute(){let a=q5.get(this.auth._key());if(!a){try{let b=await q7(this.resolver,this.auth),c=b?await super.execute():null;a=()=>Promise.resolve(c)}catch(d){a=()=>Promise.reject(d)}q5.set(this.auth._key(),a)}return this.bypassAuthState||q5.set(this.auth._key(),()=>Promise.resolve(null)),a()}async onAuthEvent(a){if("signInViaRedirect"===a.type)return super.onAuthEvent(a);if("unknown"===a.type){this.resolve(null);return}if(a.eventId){let b=await this.auth._redirectUserForId(a.eventId);if(b)return this.user=b,super.onAuthEvent(a);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q7(c,d){let b=ra(d),a=q9(c);if(!await a._isAvailable())return!1;let e=await a._get(b)==="true";return await a._remove(b),e}async function q8(a,b){return q9(a)._set(ra(b),"true")}function q9(a){return o4(a._redirectPersistence)}function ra(a){return pB("pendingRedirect",a.config.apiKey,a.name)}async function rb(e,c,d=!1){let a=pP(e),f=q$(a,c),g=new q6(a,f,d),b=await g.execute();return b&&!d&&(delete b.user._redirectEventId,await a._persistUserIfCurrent(b.user),await a._setRedirectUser(null,c)),b}async function rc(a){let b=qH(`${a.uid}:::`);return a._redirectEventId=b,await a.auth._setRedirectUser(a),await a.auth._persistUserIfCurrent(a),b}class rd{constructor(a){this.auth=a,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(a){this.consumers.add(a),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,a)&&(this.sendToConsumer(this.queuedRedirectEvent,a),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(a){this.consumers.delete(a)}onEvent(a){if(this.hasEventBeenHandled(a))return!1;let b=!1;return this.consumers.forEach(c=>{this.isEventForConsumer(a,c)&&(b=!0,this.sendToConsumer(a,c),this.saveEventToCache(a))}),this.hasHandledPotentialRedirect||!rg(a)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=a,b=!0)),b}sendToConsumer(a,c){var b;if(a.error&&!rf(a)){let d=(null===(b=a.error.code)|| void 0===b?void 0:b.split("auth/")[1])||"internal-error";c.onError(oY(this.auth,d))}else c.onAuthEvent(a)}isEventForConsumer(a,b){let c=null===b.eventId|| !!a.eventId&&a.eventId===b.eventId;return b.filter.includes(a.type)&&c}hasEventBeenHandled(a){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(re(a))}saveEventToCache(a){this.cachedEventUids.add(re(a)),this.lastProcessedEventTime=Date.now()}}function re(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(a=>a).join("-")}function rf({type:b,error:a}){return"unknown"===b&&(null==a?void 0:a.code)==="auth/no-auth-event"}function rg(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rf(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ async function rh(a,b={}){return pd(a,"GET","/v1/projects",b)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let ri=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rj=/^https?/;async function rk(a){if(a.config.emulator)return;let{authorizedDomains:b}=await rh(a);for(let c of b)try{if(rl(c))return}catch(d){}oX(a,"unauthorized-domain")}function rl(a){let d=o5(),{protocol:c,hostname:b}=new URL(d);if(a.startsWith("chrome-extension://")){let e=new URL(a);return""===e.hostname&&""===b?"chrome-extension:"===c&&a.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===c&&e.hostname===b}if(!rj.test(c))return!1;if(ri.test(a))return b===a;let f=a.replace(/\./g,"\\."),g=RegExp("^(.+\\."+f+"|"+f+")$","i");return g.test(b)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let rm=new P(3e4,6e4);function rn(){let a=window.___jsl;if(null==a?void 0:a.H){for(let b of Object.keys(a.H))if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=[...a.H[b].L],a.CP)for(let c=0;c<a.CP.length;c++)a.CP[c]=null}}let ro=null,rp=new P(5e3,15e3),rq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rs(a){var b,d;let e=await (b=a,ro=ro||(d=b,new Promise((f,i)=>{var a,b,c,g;function h(){rn(),gapi.load("gapi.iframes",{callback(){f(gapi.iframes.getContext())},ontimeout(){rn(),i(oY(d,"network-request-failed"))},timeout:rm.get()})}if(null===(b=null===(a=window.gapi)|| void 0===a?void 0:a.iframes)|| void 0===b?void 0:b.Iframe)f(gapi.iframes.getContext());else if(null===(c=window.gapi)|| void 0===c?void 0:c.load)h();else{let e=d4("iframefcb");return window[e]=()=>{gapi.load?h():i(oY(d,"network-request-failed"))},(g=`https://apis.google.com/js/api.js?onload=${e}`,new Promise((d,e)=>{var b,c;let a=document.createElement("script");a.setAttribute("src",g),a.onload=d,a.onerror=b=>{let a=oY("internal-error");a.customData=b,e(a)},a.type="text/javascript",a.charset="UTF-8",(null!==(c=null===(b=document.getElementsByTagName("head"))|| void 0===b?void 0:b[0])&& void 0!==c?c:document).appendChild(a)})).catch(a=>i(a))}}).catch(a=>{throw ro=null,a}))),c=window.gapi;return o0(c,a,"internal-error"),e.open({where:document.body,url:function(a){let b=a.config;o0(b.authDomain,a,"auth-domain-config-required");let f=b.emulator?o8(b,"emulator/auth/iframe"):`https://${a.config.authDomain}/__/auth/iframe`,c={apiKey:b.apiKey,appName:a.name,v:np},d=rr.get(a.config.apiHost);d&&(c.eid=d);let e=a._getFrameworks();return e.length&&(c.fw=e.join(",")),`${f}?${mK(c).slice(1)}`}(a),messageHandlersFilter:c.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rq,dontclear:!0},b=>new Promise(async(d,e)=>{await b.restyle({setHideOnLeave:!1});let f=oY(a,"network-request-failed"),g=window.setTimeout(()=>{e(f)},rp.get());function c(){window.clearTimeout(g),d(b)}b.ping(c).then(c,()=>{e(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let rt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ru{constructor(a){this.window=a,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(a){}}}function rv(a,b,g,h,i,j){o0(a.config.authDomain,a,"auth-domain-config-required"),o0(a.config.apiKey,a,"invalid-api-key");let c={apiKey:a.config.apiKey,appName:a.name,authType:g,redirectUrl:h,v:np,eventId:i};if(b instanceof d1)for(let[k,l]of(b.setDefaultLanguage(a.languageCode),c.providerId=b.providerId||"",!function(a){for(let b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0}(b.getCustomParameters())&&(c.customParameters=JSON.stringify(b.getCustomParameters())),Object.entries(j||{})))c[k]=l;if(b instanceof ad){let e=b.getScopes().filter(a=>""!==a);e.length>0&&(c.scopes=e.join(","))}a.tenantId&&(c.tid=a.tenantId);let d=c;for(let f of Object.keys(d))void 0===d[f]&&delete d[f];return`${rw(a)}?${mK(d).slice(1)}`}function rw({config:a}){return a.emulator?o8(a,"emulator/auth/handler"):`https://${a.authDomain}/__/auth/handler`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The special web storage event
 *
 */ let rx="webStorageSupport",ry=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qG,this._completeRedirectFn=rb,this._overrideRedirectResult=function(a,b){q5.set(a._key(),b)}}async _openPopup(a,c,d,e){var b;o2(null===(b=this.eventManagers[a._key()])|| void 0===b?void 0:b.manager,"_initialize() not called before _openPopup()");let f=rv(a,c,d,o5(),e);return function(i,a,e,f=500,g=600){let j=Math.max((window.screen.availHeight-g)/2,0).toString(),k=Math.max((window.screen.availWidth-f)/2,0).toString(),b="",h=Object.assign(Object.assign({},rt),{width:f.toString(),height:g.toString(),top:j,left:k}),c=mt().toLowerCase();e&&(b=pG(c)?"_blank":e),pE(c)&&(a=a||"http://localhost",h.scrollbars="yes");let l=Object.entries(h).reduce((a,[b,c])=>`${a}${b}=${c},`,"");if(function(b=mt()){var a;return pL(b)&&!!(null===(a=window.navigator)|| void 0===a?void 0:a.standalone)}(c)&&"_self"!==b)return function e(c,d){let a=document.createElement("a");a.href=c,a.target=d;let b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(b)}(a||"",b),new ru(null);let d=window.open(a||"",b,l);o0(d,i,"popup-blocked");try{d.focus()}catch(m){}return new ru(d)}(a,f,qH())}async _openRedirect(a,c,d,e){var b;return await this._originValidation(a),b=rv(a,c,d,o5(),e),window.location.href=b,new Promise(()=>{})}_initialize(c){let a=c._key();if(this.eventManagers[a]){let{manager:d,promise:e}=this.eventManagers[a];return d?Promise.resolve(d):(o2(e,"If manager is not set, promise should be"),e)}let b=this.initAndGetManager(c);return this.eventManagers[a]={promise:b},b.catch(()=>{delete this.eventManagers[a]}),b}async initAndGetManager(a){let b=await rs(a),c=new rd(a);return b.register("authEvent",b=>{o0(null==b?void 0:b.authEvent,a,"invalid-auth-event");let d=c.onEvent(b.authEvent);return{status:d?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[a._key()]={manager:c},this.iframes[a._key()]=b,c}_isIframeWebStorageSupported(a,c){let b=this.iframes[a._key()];b.send(rx,{type:rx},d=>{var b;let e=null===(b=null==d?void 0:d[0])|| void 0===b?void 0:b[rx];void 0!==e&&c(!!e),oX(a,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){let a=b._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=rk(b)),this.originValidationPromises[a]}get _shouldInitProactively(){return pM()||pF()||pL()}};class d6{constructor(a){this.factorId=a}_process(b,a,c){switch(a.type){case"enroll":return this._finalizeEnroll(b,a.credential,c);case"signin":return this._finalizeSignIn(b,a.credential);default:return o1("unexpected MultiFactorSessionType")}}}class rz extends d6{constructor(a){super("phone"),this.credential=a}static _fromCredential(a){return new rz(a)}_finalizeEnroll(b,c,d){var a,e;return a=b,pd(a,"POST","/v2/accounts/mfaEnrollment:finalize",pc(a,e={idToken:c,displayName:d,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(b,c){var a,d;return a=b,pd(a,"POST","/v2/accounts/mfaSignIn:finalize",pc(a,d={mfaPendingCredential:c,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}(class{constructor(){}static assertion(a){return rz._fromCredential(a)}}).FACTOR_ID="phone";var bE="@firebase/auth",bF="0.20.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class rA{constructor(a){this.auth=a,this.internalListeners=new Map}getUid(){var a;return this.assertAuthConfigured(),(null===(a=this.auth.currentUser)|| void 0===a?void 0:a.uid)||null}async getToken(a){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let b=await this.auth.currentUser.getIdToken(a);return{accessToken:b}}addAuthTokenListener(a){if(this.assertAuthConfigured(),this.internalListeners.has(a))return;let b=this.auth.onIdTokenChanged(c=>{var b;a((null===(b=c)|| void 0===b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(a,b),this.updateProactiveRefresh()}removeAuthTokenListener(a){this.assertAuthConfigured();let b=this.internalListeners.get(a);b&&(this.internalListeners.delete(a),b(),this.updateProactiveRefresh())}assertAuthConfigured(){o0(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let rB=d$("authIdTokenMaxAge")||300,rC=null,rD=a=>async d=>{let c=d&&await d.getIdTokenResult(),e=c&&(new Date().getTime()-Date.parse(c.issuedAtTime))/1e3;if(e&&e>rB)return;let b=null==c?void 0:c.token;rC!==b&&(rC=b,await fetch(a,{method:b?"POST":"DELETE",headers:b?{Authorization:`Bearer ${b}`}:{}}))};rG="Browser",A(new z("auth",(a,{options:d})=>{let b=a.getProvider("app").getImmediate(),c=a.getProvider("heartbeat"),{apiKey:e,authDomain:f}=b.options;return((a,c)=>{o0(e&&!e.includes(":"),"invalid-api-key",{appName:a.name}),o0(!(null==f?void 0:f.includes(":")),"argument-error",{appName:a.name});let g={apiKey:e,authDomain:f,clientPlatform:rG,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pN(rG)},b=new pO(a,c,g);return function(c,a){let b=(null==a?void 0:a.persistence)||[],d=(Array.isArray(b)?b:[b]).map(o4);(null==a?void 0:a.errorMap)&&c._updateErrorMap(a.errorMap),c._initializeWithPersistence(d,null==a?void 0:a.popupRedirectResolver)}(b,d),b})(b,c)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((a,c,d)=>{let b=a.getProvider("auth-internal");b.initialize()})),A(new z("auth-internal",b=>{var a;let c=pP(b.getProvider("auth").getImmediate());return a=c,new rA(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),p(bE,bF,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(rG)),p(bE,bF,"esm2017");var rE,rF,rG,rH,rI,rJ,rK,rL,rM,rN,rO,rP,rQ,rR,rS,rT,rU,rV,rW,rX,rY,rZ,r$,r_,r0,r1,a,d7="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},s={},d8=d8||{},aG=d7||self;function d9(){}function r2(b){var a=typeof b;return"array"==(a="object"!=a?a:b?Array.isArray(b)?"array":a:"null")||"object"==a&&"number"==typeof b.length}function r3(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function r4(a,b,c){return a.call.apply(a.bind,arguments)}function r5(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r6(a,b,c){return(r6=Function.prototype.bind&& -1!=Function.prototype.bind.toString().indexOf("native code")?r4:r5).apply(null,arguments)}function r7(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();return b.push.apply(b,arguments),a.apply(this,b)}}function g(a,b){function c(){}c.prototype=b.prototype,a.X=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.Wb=function(d,e,f){for(var c=Array(arguments.length-2),a=2;a<arguments.length;a++)c[a-2]=arguments[a];return b.prototype[e].apply(d,c)}}function J(){this.s=this.s,this.o=this.o}J.prototype.s=!1,J.prototype.na=function(){this.s||(this.s=!0,this.M())},J.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let r8=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,c){if("string"==typeof a)return"string"!=typeof c||1!=c.length?-1:a.indexOf(c,0);for(let b=0;b<a.length;b++)if(b in a&&a[b]===c)return b;return -1};function r9(c){let b=c.length;if(0<b){let d=Array(b);for(let a=0;a<b;a++)d[a]=c[a];return d}return[]}function sa(a,g){for(let d=1;d<arguments.length;d++){let b=arguments[d];if(r2(b)){let e=a.length||0,f=b.length||0;a.length=e+f;for(let c=0;c<f;c++)a[e+c]=b[c]}else a.push(b)}}function F(a,b){this.type=a,this.g=this.target=b,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var sb=function(){if(!aG.addEventListener||!Object.defineProperty)return!1;var b=!1,a=Object.defineProperty({},"passive",{get:function(){b=!0}});try{aG.addEventListener("test",d9,a),aG.removeEventListener("test",d9,a)}catch(c){}return b}();function sc(a){return/^[\s\xa0]*$/.test(a)}var sd=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function se(a,b){return a<b?-1:a>b?1:0}function aH(){var a=aG.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return -1!=aH().indexOf(a)}function ea(a){return ea[" "](a),a}ea[" "]=d9;var eb=q("Opera"),ae=q("Trident")||q("MSIE"),bG=q("Edge"),sf=bG||ae,ec=q("Gecko")&&!(-1!=aH().toLowerCase().indexOf("webkit")&&!q("Edge"))&&!(q("Trident")||q("MSIE"))&&!q("Edge"),ed=-1!=aH().toLowerCase().indexOf("webkit")&&!q("Edge");function bH(){var a=aG.document;return a?a.documentMode:void 0}a:{var K,aI="",aJ=(K=aH(),ec?/rv:([^\);]+)(\)|;)/.exec(K):bG?/Edge\/([\d\.]+)/.exec(K):ae?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(K):ed?/WebKit\/(\S+)/.exec(K):eb?/(?:Version)[ \/]?(\S+)/.exec(K):void 0);if(aJ&&(aI=aJ?aJ[1]:""),ae){var aK=bH();if(null!=aK&&aK>parseFloat(aI)){an=String(aK);break a}}an=aI}var sg={};if(aG.document&&ae){ao=bH()||parseInt(an,10)||void 0}else ao=void 0;var sh=ao;function bI(a,c){if(F.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,b=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(ec){a:{try{ea(c.nodeName);var e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=a.fromElement:"mouseout"==d&&(c=a.toElement);this.relatedTarget=c,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:si[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&bI.X.h.call(this)}}g(bI,F);var si={2:"touch",3:"pen",4:"mouse"};bI.prototype.h=function(){bI.X.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),sj=0;function sk(a,b,c,d,e){this.listener=a,this.proxy=null,this.src=b,this.type=c,this.capture=!!d,this.ha=e,this.key=++sj,this.ba=this.ea=!1}function sl(a){a.ba=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function sm(a,c,d){for(let b in a)c.call(d,a[b],b,a)}function sn(a){let b={};for(let c in a)b[c]=a[c];return b}let so="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sp(e,f){let a,b;for(let c=1;c<arguments.length;c++){for(a in b=arguments[c])e[a]=b[a];for(let d=0;d<so.length;d++)a=so[d],Object.prototype.hasOwnProperty.call(b,a)&&(e[a]=b[a])}}function ef(a){this.src=a,this.g={},this.h=0}function sq(a,c){var b=c.type;if(b in a.g){var d,e=a.g[b],f=r8(e,c);(d=0<=f)&&Array.prototype.splice.call(e,f,1),d&&(sl(c),0==a.g[b].length&&(delete a.g[b],a.h--))}}function sr(c,d,e,f){for(var a=0;a<c.length;++a){var b=c[a];if(!b.ba&&b.listener==d&& !!e==b.capture&&b.ha==f)return a}return -1}ef.prototype.add=function(b,a,d,e,f){var c=b.toString();(b=this.g[c])||(b=this.g[c]=[],this.h++);var g=sr(b,a,e,f);return -1<g?(a=b[g],d||(a.ea=!1)):((a=new sk(a,this.src,c,!!e,f)).ea=d,b.push(a)),a};var ss="closure_lm_"+(1e6*Math.random()|0),st={};function su(b,c,d,a,e){if(a&&a.once)return sx(b,c,d,a,e);if(Array.isArray(c)){for(var f=0;f<c.length;f++)su(b,c[f],d,a,e);return null}return d=sE(d),b&&b[ee]?b.N(c,d,r3(a)?!!a.capture:!!a,e):sv(b,c,d,!1,a,e)}function sv(a,e,d,b,c,h){if(!e)throw Error("Invalid event type");var g=r3(c)?!!c.capture:!!c,f=sC(a);if(f||(a[ss]=f=new ef(a)),(d=f.add(e,d,b,g,h)).proxy)return d;if(b=sw(),d.proxy=b,b.src=a,b.listener=d,a.addEventListener)sb||(c=g),void 0===c&&(c=!1),a.addEventListener(e.toString(),b,c);else if(a.attachEvent)a.attachEvent(sA(e.toString()),b);else if(a.addListener&&a.removeListener)a.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return d}function sw(){function a(c){return b.call(a.src,a.listener,c)}let b=sB;return a}function sx(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)sx(a,b[f],c,d,e);return null}return c=sE(c),a&&a[ee]?a.O(b,c,r3(d)?!!d.capture:!!d,e):sv(a,b,c,!0,d,e)}function sy(a,b,c,d,f){if(Array.isArray(b))for(var e=0;e<b.length;e++)sy(a,b[e],c,d,f);else(d=r3(d)?!!d.capture:!!d,c=sE(c),a&&a[ee])?(a=a.i,(b=String(b).toString())in a.g&& -1<(c=sr(e=a.g[b],c,d,f))&&(sl(e[c]),Array.prototype.splice.call(e,c,1),0==e.length&&(delete a.g[b],a.h--))):a&&(a=sC(a))&&(b=a.g[b.toString()],a=-1,b&&(a=sr(b,c,d,f)),(c=-1<a?b[a]:null)&&sz(c))}function sz(b){if("number"!=typeof b&&b&&!b.ba){var a=b.src;if(a&&a[ee])sq(a.i,b);else{var c=b.type,d=b.proxy;a.removeEventListener?a.removeEventListener(c,d,b.capture):a.detachEvent?a.detachEvent(sA(c),d):a.addListener&&a.removeListener&&a.removeListener(d),(c=sC(a))?(sq(c,b),0==c.h&&(c.src=null,a[ss]=null)):sl(b)}}}function sA(a){return a in st?st[a]:st[a]="on"+a}function sB(a,b){if(a.ba)a=!0;else{b=new bI(b,this);var c=a.listener,d=a.ha||a.src;a.ea&&sz(a),a=c.call(d,b)}return a}function sC(a){return(a=a[ss])instanceof ef?a:null}var sD="__closure_events_fn_"+(1e9*Math.random()>>>0);function sE(a){return"function"==typeof a?a:(a[sD]||(a[sD]=function(b){return a.handleEvent(b)}),a[sD])}function l(){J.call(this),this.i=new ef(this),this.P=this,this.I=null}function sF(e,a){var d,b=e.I;if(b)for(d=[];b;b=b.I)d.push(b);if(e=e.P,b=a.type||a,"string"==typeof a)a=new F(a,e);else if(a instanceof F)a.target=a.target||e;else{var c=a;sp(a=new F(b,e),c)}if(c=!0,d)for(var f=d.length-1;0<=f;f--){var g=a.g=d[f];c=sG(g,b,!0,a)&&c}if(c=sG(g=a.g=e,b,!0,a)&&c,c=sG(g,b,!1,a)&&c,d)for(f=0;f<d.length;f++)c=sG(g=a.g=d[f],b,!1,a)&&c}function sG(e,b,g,f){if(!(b=e.i.g[String(b)]))return!0;b=b.concat();for(var c=!0,d=0;d<b.length;++d){var a=b[d];if(a&&!a.ba&&a.capture==g){var h=a.listener,i=a.ha||a.src;a.ea&&sq(e.i,a),c=!1!==h.call(i,f)&&c}}return c&&!f.defaultPrevented}g(l,J),l.prototype[ee]=!0,l.prototype.removeEventListener=function(a,b,c,d){sy(this,a,b,c,d)},l.prototype.M=function(){if(l.X.M.call(this),this.i){var b,a=this.i;for(b in a.g){for(var d=a.g[b],c=0;c<d.length;c++)sl(d[c]);delete a.g[b],a.h--}}this.I=null},l.prototype.N=function(a,b,c,d){return this.i.add(String(a),b,!1,c,d)},l.prototype.O=function(a,b,c,d){return this.i.add(String(a),b,!0,c,d)};var sH=aG.JSON.stringify;function sI(){var a=sP;let b=null;return a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null),b}var sJ=new class{constructor(a,b){this.i=a,this.j=b,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new sK,a=>a.reset());class sK{constructor(){this.next=this.g=this.h=null}set(a,b){this.h=a,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}function sL(a){aG.setTimeout(()=>{throw a},0)}function sM(a,b){eE||sN(),sO||(eE(),sO=!0),sP.add(a,b)}function sN(){var a=aG.Promise.resolve(void 0);eE=function(){a.then(sQ)}}var sO=!1,sP=new class{constructor(){this.h=this.g=null}add(b,c){let a=sJ.get();a.set(b,c),this.h?this.h.next=a:this.g=a,this.h=a}};function sQ(){for(var a;a=sI();){try{a.h.call(a.g)}catch(c){sL(c)}var b=sJ;b.j(a),100>b.h&&(b.h++,a.next=b.g,b.g=a)}sO=!1}function bJ(a,b){l.call(this),this.h=a||1,this.g=b||aG,this.j=r6(this.lb,this),this.l=Date.now()}function sR(a){a.ca=!1,a.R&&(a.g.clearTimeout(a.R),a.R=null)}function sS(a,b,c){if("function"==typeof a)c&&(a=r6(a,c));else if(a&&"function"==typeof a.handleEvent)a=r6(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:aG.setTimeout(a,b||0)}function sT(a){a.g=sS(()=>{a.g=null,a.i&&(a.i=!1,sT(a))},a.j);let b=a.h;a.h=null,a.m.apply(null,b)}g(bJ,l),(a=bJ.prototype).ca=!1,a.R=null,a.lb=function(){if(this.ca){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-a):(this.R&&(this.g.clearTimeout(this.R),this.R=null),sF(this,"tick"),this.ca&&(sR(this),this.start()))}},a.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},a.M=function(){bJ.X.M.call(this),sR(this),delete this.g};class sU extends J{constructor(a,b){super(),this.m=a,this.j=b,this.h=null,this.i=!1,this.g=null}l(a){this.h=arguments,this.g?this.i=!0:sT(this)}M(){super.M(),this.g&&(aG.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aL(a){J.call(this),this.h=a,this.g={}}g(aL,J);var sV=[];function sW(b,e,a,f){Array.isArray(a)||(a&&(sV[0]=a.toString()),a=sV);for(var c=0;c<a.length;c++){var d=su(e,a[c],f||b.handleEvent,!1,b.h||b);if(!d)break;b.g[d.key]=d}}function sX(a){sm(a.g,function(a,b){this.g.hasOwnProperty(b)&&sz(a)},a),a.g={}}function bK(){this.g=!0}function sY(a,b,c,d){a.info(function(){return"XMLHTTP TEXT ("+b+"): "+sZ(a,c)+(d?" "+d:"")})}function sZ(a,d){if(!a.g)return d;if(!d)return null;try{var b=JSON.parse(d);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var g=b[a];if(!(2>g.length)){var c=g[1];if(Array.isArray(c)&&!(1>c.length)){var e=c[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(var f=1;f<c.length;f++)c[f]=""}}}}return sH(b)}catch(h){return d}}aL.prototype.M=function(){aL.X.M.call(this),sX(this)},aL.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bK.prototype.Aa=function(){this.g=!1},bK.prototype.info=function(){};var af={},s$=null;function s_(){return s$=s$||new l}function eg(a){F.call(this,af.Pa,a)}function s0(b){let a=s_();sF(a,new eg(a))}function eh(a,b){F.call(this,af.STAT_EVENT,a),this.stat=b}function s1(b){let a=s_();sF(a,new eh(a,b))}function ei(a,b){F.call(this,af.Qa,a),this.size=b}function s2(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return aG.setTimeout(function(){a()},b)}af.Pa="serverreachability",g(eg,F),af.STAT_EVENT="statevent",g(eh,F),af.Qa="timingevent",g(ei,F);var ag={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bL={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function aM(){}function s3(a){return a.h||(a.h=a.i())}function bM(){}aM.prototype.h=null;var Q={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function bN(){F.call(this,"d")}function bO(){F.call(this,"c")}function ah(){}function ej(a,b,c,d){this.l=a,this.j=b,this.m=c,this.U=d||1,this.S=new aL(this),this.O=s5,a=sf?125:void 0,this.T=new bJ(a),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new s4}function s4(){this.i=null,this.g="",this.h=!1}g(bN,F),g(bO,F),g(ah,aM),ah.prototype.g=function(){return new XMLHttpRequest},ah.prototype.i=function(){return{}},bW=new ah;var s5=45e3,s6={},s7={};function s8(a,b,c){a.K=1,a.v=tq(tl(b)),a.s=c,a.P=!0,s9(a,null)}function s9(a,b){a.F=Date.now(),td(a),a.A=tl(a.v);var d=a.A,c=a.U;Array.isArray(c)||(c=[String(c)]),tC(d.i,"t",c),a.C=0,d=a.l.H,a.h=new s4,a.g=un(a.l,d?b:null,!a.s),0<a.N&&(a.L=new sU(r6(a.La,a,a.g),a.N)),sW(a.S,a.g,"readystatechange",a.ib),b=a.H?sn(a.H):{},a.s?(a.u||(a.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.da(a.A,a.u,a.s,b)):(a.u="GET",a.g.da(a.A,a.u,null,b)),s0(),function(a,b,c,d,e,f){a.info(function(){if(a.g){if(f)for(var g="",k=f.split("&"),i=0;i<k.length;i++){var h=k[i].split("=");if(1<h.length){var j=h[0];h=h[1];var l=j.split("_");g=2<=l.length&&"type"==l[1]?g+(j+"=")+h+"&":g+(j+"=redacted&")}}else g=null}else g=f;return"XMLHTTP REQ ("+d+") [attempt "+e+"]: "+b+"\n"+c+"\n"+g})}(a.j,a.u,a.A,a.m,a.U,a.s)}function ta(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Da}function tb(a,b,c){let e=!0,d;for(;!a.I&&a.C<c.length;)if((d=tc(a,c))==s7){4==b&&(a.o=4,s1(14),e=!1),sY(a.j,a.m,null,"[Incomplete Response]");break}else if(d==s6){a.o=4,s1(15),sY(a.j,a.m,c,"[Invalid Chunk]"),e=!1;break}else sY(a.j,a.m,d,null),ti(a,d);ta(a)&&d!=s7&&d!=s6&&(a.h.g="",a.C=0),4!=b||0!=c.length||a.h.h||(a.o=1,s1(16),e=!1),a.i=a.i&&e,e?0<c.length&&!a.$&&(a.$=!0,(b=a.l).g==a&&b.$&&!b.K&&(b.j.info("Great, no buffering proxy detected. Bytes received: "+c.length),uf(b),b.K=!0,s1(11))):(sY(a.j,a.m,c,"[Invalid Chunked Response]"),th(a),tg(a))}function tc(d,a){var b=d.C,c=a.indexOf("\n",b);return -1==c?s7:isNaN(b=Number(a.substring(b,c)))?s6:(c+=1)+b>a.length?s7:(a=a.substr(c,b),d.C=c+b,a)}function td(a){a.V=Date.now()+a.O,te(a,a.O)}function te(a,b){if(null!=a.B)throw Error("WatchDog timer not null");a.B=s2(r6(a.gb,a),b)}function tf(a){a.B&&(aG.clearTimeout(a.B),a.B=null)}function tg(a){0==a.l.G||a.I||ui(a.l,a)}function th(a){tf(a);var b=a.L;b&&"function"==typeof b.na&&b.na(),a.L=null,sR(a.T),sX(a.S),a.g&&(b=a.g,a.g=null,b.abort(),b.na())}function ti(d,f){try{var a=d.l;if(0!=a.G&&(a.g==d||tJ(a.h,d))){if(!d.J&&tJ(a.h,d)&&3==a.G){try{var b=a.Fa.g.parse(f)}catch(q){b=null}if(Array.isArray(b)&&3==b.length){var g=b;if(0==g[0]){a:if(!a.u){if(a.g){if(a.g.F+3e3<d.F)uh(a),t7(a);else break a}ue(a),s1(18)}}else a.Ba=g[1],0<a.Ba-a.T&&37500>g[2]&&a.L&&0==a.A&&!a.v&&(a.v=s2(r6(a.cb,a),6e3));if(1>=tI(a.h)&&a.ja){try{a.ja()}catch(r){}a.ja=void 0}}else uk(a,11)}else if((d.J||a.g==d)&&uh(a),!sc(f))for(g=a.Fa.g.parse(f),f=0;f<g.length;f++){let c=g[f];if(a.T=c[0],c=c[1],2==a.G){if("c"==c[0]){a.I=c[1],a.ka=c[2];let n=c[3];null!=n&&(a.ma=n,a.j.info("VER="+a.ma));let o=c[4];null!=o&&(a.Ca=o,a.j.info("SVER="+a.Ca));let i=c[5];null!=i&&"number"==typeof i&&0<i&&(b=1.5*i,a.J=b,a.j.info("backChannelRequestTimeoutMs_="+b)),b=a;let h=d.g;if(h){let j=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var e=b.h;e.g|| -1==j.indexOf("spdy")&& -1==j.indexOf("quic")&& -1==j.indexOf("h2")||(e.j=e.l,e.g=new Set,e.h&&(tK(e,e.h),e.h=null))}if(b.D){let m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(b.za=m,tp(b.F,b.D,m))}}a.G=3,a.l&&a.l.xa(),a.$&&(a.P=Date.now()-d.F,a.j.info("Handshake RTT: "+a.P+"ms")),b=a;var k=d;if(b.sa=um(b,b.H?b.ka:null,b.V),k.J){tL(b.h,k);var l=k,p=b.J;p&&l.setTimeout(p),l.B&&(tf(l),td(l)),b.g=k}else ud(b);0<a.i.length&&t9(a)}else"stop"!=c[0]&&"close"!=c[0]||uk(a,7)}else 3==a.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?uk(a,7):t6(a):"noop"!=c[0]&&a.l&&a.l.wa(c),a.A=0)}}s0(4)}catch(s){}}function tj(a,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(c,void 0);else if(r2(a)||"string"==typeof a)Array.prototype.forEach.call(a,c,void 0);else for(var d=function(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.W||"function"!=typeof a.W){if("undefined"!=typeof Map&&a instanceof Map)return Array.from(a.keys());if(!("undefined"!=typeof Set&&a instanceof Set)){if(r2(a)||"string"==typeof a){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}for(let d in b=[],c=0,a)b[c++]=d;return b}}}(a),e=function(a){if(a.W&&"function"==typeof a.W)return a.W();if("undefined"!=typeof Map&&a instanceof Map||"undefined"!=typeof Set&&a instanceof Set)return Array.from(a.values());if("string"==typeof a)return a.split("");if(r2(a)){for(var b=[],d=a.length,c=0;c<d;c++)b.push(a[c]);return b}for(c in b=[],d=0,a)b[d++]=a[c];return b}(a),f=e.length,b=0;b<f;b++)c.call(void 0,e[b],d&&d[b],a)}(a=ej.prototype).setTimeout=function(a){this.O=a},a.ib=function(a){a=a.target;let b=this.L;b&&3==t1(a)?b.l():this.La(a)},a.La=function(e){try{if(e==this.g)a:{let a=t1(this.g);var b=this.g.Ea();let k=this.g.aa();if(!(3>a)&&(3!=a||sf||this.g&&(this.h.h||this.g.fa()||t2(this.g)))){this.I||4!=a||7==b||(8==b||0>=k?s0(3):s0(2)),tf(this);var c=this.g.aa();this.Y=c;b:if(ta(this)){var f=t2(this.g);e="";var g=f.length,l=4==t1(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){th(this),tg(this);var d="";break b}this.h.i=new aG.TextDecoder}for(b=0;b<g;b++)this.h.h=!0,e+=this.h.i.decode(f[b],{stream:l&&b==g-1});f.splice(0,g),this.h.g+=e,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==c,function(a,b,c,d,e,f,g){a.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+e+"]: "+b+"\n"+c+"\n"+f+" "+g})}(this.j,this.u,this.A,this.m,this.U,a,c),this.i){if(this.Z&&!this.J){b:{if(this.g){var h,i=this.g;if((h=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sc(h)){var j=h;break b}}j=null}if(c=j)sY(this.j,this.m,c,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ti(this,c);else{this.i=!1,this.o=3,s1(12),th(this),tg(this);break a}}this.P?(tb(this,a,d),sf&&this.i&&3==a&&(sW(this.S,this.T,"tick",this.hb),this.T.start())):(sY(this.j,this.m,d,null),ti(this,d)),4==a&&th(this),this.i&&!this.I&&(4==a?ui(this.l,this):(this.i=!1,td(this)))}else 400==c&&0<d.indexOf("Unknown SID")?(this.o=3,s1(12)):(this.o=0,s1(13)),th(this),tg(this)}}}catch(m){}finally{}},a.hb=function(){if(this.g){var a=t1(this.g),b=this.g.fa();this.C<b.length&&(tf(this),tb(this,a,b),this.i&&4!=a&&td(this))}},a.cancel=function(){this.I=!0,th(this)},a.gb=function(){this.B=null;let a=Date.now();0<=a-this.V?(function(a,b){a.info(function(){return"TIMEOUT: "+b})}(this.j,this.A),2!=this.K&&(s0(),s1(17)),th(this),this.o=2,tg(this)):te(this,this.V-a)};var tk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ek(b,c){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,b instanceof ek){this.h=void 0!==c?c:b.h,tm(this,b.j),this.s=b.s,this.g=b.g,tn(this,b.m),this.l=b.l,c=b.i;var a=new el;a.i=c.i,c.g&&(a.g=new Map(c.g),a.h=c.h),to(this,a),this.o=b.o}else b&&(a=String(b).match(tk))?(this.h=!!c,tm(this,a[1]||"",!0),this.s=tr(a[2]||""),this.g=tr(a[3]||"",!0),tn(this,a[4]),this.l=tr(a[5]||"",!0),to(this,a[6]||"",!0),this.o=tr(a[7]||"")):(this.h=!!c,this.i=new el(null,this.h))}function tl(a){return new ek(a)}function tm(a,b,c){a.j=c?tr(b,!0):b,a.j&&(a.j=a.j.replace(/:$/,""))}function tn(b,a){if(a){if(isNaN(a=Number(a))||0>a)throw Error("Bad port number "+a);b.m=a}else b.m=null}function to(a,b,c){b instanceof el?(a.i=b,tE(a.i,a.h)):(c||(b=ts(b,tx)),a.i=new el(b,a.h))}function tp(a,b,c){a.i.set(b,c)}function tq(a){return tp(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function tr(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ts(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,tt),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function tt(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}ek.prototype.toString=function(){var b=[],c=this.j;c&&b.push(ts(c,tu,!0),":");var a=this.g;return(a||"file"==c)&&(b.push("//"),(c=this.s)&&b.push(ts(c,tu,!0),"@"),b.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(a=this.m)&&b.push(":",String(a))),(a=this.l)&&(this.g&&"/"!=a.charAt(0)&&b.push("/"),b.push(ts(a,"/"==a.charAt(0)?tw:tv,!0))),(a=this.i.toString())&&b.push("?",a),(a=this.o)&&b.push("#",ts(a,ty)),b.join("")};var tu=/[#\/\?@]/g,tv=/[#\?:]/g,tw=/[#\?]/g,tx=/[#\?@]/g,ty=/#/g;function el(a,b){this.h=this.g=null,this.i=a||null,this.j=!!b}function tz(a){a.g||(a.g=new Map,a.h=0,a.i&&function(a,f){if(a){a=a.split("&");for(var b=0;b<a.length;b++){var c=a[b].indexOf("="),d=null;if(0<=c){var e=a[b].substring(0,c);d=a[b].substring(c+1)}else e=a[b];f(e,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(a.i,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}function tA(a,b){tz(a),b=tD(a,b),a.g.has(b)&&(a.i=null,a.h-=a.g.get(b).length,a.g.delete(b))}function tB(a,b){return tz(a),b=tD(a,b),a.g.has(b)}function tC(a,c,b){tA(a,c),0<b.length&&(a.i=null,a.g.set(tD(a,c),r9(b)),a.h+=b.length)}function tD(b,a){return a=String(a),b.j&&(a=a.toLowerCase()),a}function tE(a,b){b&&!a.j&&(tz(a),a.i=null,a.g.forEach(function(c,a){var b=a.toLowerCase();a!=b&&(tA(this,a),tC(this,b,c))},a)),a.j=b}(a=el.prototype).add=function(a,c){tz(this),this.i=null,a=tD(this,a);var b=this.g.get(a);return b||this.g.set(a,b=[]),b.push(c),this.h+=1,this},a.forEach=function(a,b){tz(this),this.g.forEach(function(c,d){c.forEach(function(c){a.call(b,c,d,this)},this)},this)},a.oa=function(){tz(this);let e=Array.from(this.g.values()),b=Array.from(this.g.keys()),c=[];for(let a=0;a<b.length;a++){let f=e[a];for(let d=0;d<f.length;d++)c.push(b[a])}return c},a.W=function(a){tz(this);let b=[];if("string"==typeof a)tB(this,a)&&(b=b.concat(this.g.get(tD(this,a))));else{a=Array.from(this.g.values());for(let c=0;c<a.length;c++)b=b.concat(a[c])}return b},a.set=function(a,b){return tz(this),this.i=null,a=tD(this,a),tB(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[b]),this.h+=1,this},a.get=function(a,b){return a&&0<(a=this.W(a)).length?String(a[0]):b},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],e=Array.from(this.g.keys());for(var b=0;b<e.length;b++){var a=e[b];let g=encodeURIComponent(String(a)),c=this.W(a);for(a=0;a<c.length;a++){var f=g;""!==c[a]&&(f+="="+encodeURIComponent(String(c[a]))),d.push(f)}}return this.i=d.join("&")};var tF=class{constructor(a,b){this.h=a,this.g=b}};function em(a){this.l=a||tG,a=aG.PerformanceNavigationTiming?0<(a=aG.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(aG.g&&aG.g.Ga&&aG.g.Ga()&&aG.g.Ga().$b),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tG=10;function tH(a){return!!a.h|| !!a.g&&a.g.size>=a.j}function tI(a){return a.h?1:a.g?a.g.size:0}function tJ(a,b){return a.h?a.h==b:!!a.g&&a.g.has(b)}function tK(a,b){a.g?a.g.add(b):a.h=b}function tL(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b)}function tM(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let b=a.i;for(let c of a.g.values())b=b.concat(c.D);return b}return r9(a.i)}function bP(){}function tN(){this.g=new bP}function tO(a,b,c){let d=c||"";try{tj(a,function(a,e){let c=a;r3(a)&&(c=sH(a)),b.push(d+e+"="+encodeURIComponent(c))})}catch(e){throw b.push(d+"type="+encodeURIComponent("_badmap")),e}}function tP(d,a,e,b,c){try{a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null,c(b)}catch(f){}}function ai(a){this.l=a.ac||null,this.j=a.jb||!1}function aN(a,b){l.call(this),this.D=a,this.u=b,this.m=void 0,this.readyState=tQ,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}em.prototype.cancel=function(){if(this.i=tM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let a of this.g.values())a.cancel();this.g.clear()}},bP.prototype.stringify=function(a){return aG.JSON.stringify(a,void 0)},bP.prototype.parse=function(a){return aG.JSON.parse(a,void 0)},g(ai,aM),ai.prototype.g=function(){return new aN(this.l,this.j)},ai.prototype.i=(bV={},function(){return bV}),g(aN,l);var tQ=0;function tR(a){a.j.read().then(a.Ta.bind(a)).catch(a.ga.bind(a))}function tS(a){a.readyState=4,a.l=null,a.j=null,a.A=null,tT(a)}function tT(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(a=aN.prototype).open=function(a,b){if(this.readyState!=tQ)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=b,this.readyState=1,tT(this)},a.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let b={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(b.body=a),(this.D||aG).fetch(new Request(this.B,b)).then(this.Wa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tS(this)),this.readyState=tQ},a.Wa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,tT(this)),this.g&&(this.readyState=3,tT(this),this.g))){if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==aG.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tR(this)}else a.text().then(this.Va.bind(this),this.ga.bind(this))}},a.Ta=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var b=a.value?a.value:new Uint8Array(0);(b=this.A.decode(b,{stream:!a.done}))&&(this.response=this.responseText+=b)}a.done?tS(this):tT(this),3==this.readyState&&tR(this)}},a.Va=function(a){this.g&&(this.response=this.responseText=a,tS(this))},a.Ua=function(a){this.g&&(this.response=a,tS(this))},a.ga=function(){this.g&&tS(this)},a.setRequestHeader=function(a,b){this.v.append(a,b)},a.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";let b=[],c=this.h.entries();for(var a=c.next();!a.done;)b.push((a=a.value)[0]+": "+a[1]),a=c.next();return b.join("\r\n")},Object.defineProperty(aN.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var tU=aG.JSON.parse;function f(a){l.call(this),this.headers=new Map,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tV,this.K=this.L=!1}g(f,l);var tV="",tW=/^https?$/i,tX=["POST","PUT"];function tY(a,b){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=b,a.m=5,tZ(a),t_(a)}function tZ(a){a.D||(a.D=!0,sF(a,"complete"),sF(a,"error"))}function t$(a){if(a.h&& void 0!==d8&&(!a.C[1]||4!=t1(a)||2!=a.aa())){if(a.v&&4==t1(a))sS(a.Ha,0,a);else if(sF(a,"readystatechange"),4==t1(a)){a.h=!1;try{let e=a.aa();a:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c,d,f=!0;break a;default:f=!1}if(!(c=f)){if(d=0===e){var b=String(a.H).match(tk)[1]||null;if(!b&&aG.self&&aG.self.location){var g=aG.self.location.protocol;b=g.substr(0,g.length-1)}d=!tW.test(b?b.toLowerCase():"")}c=d}if(c)sF(a,"complete"),sF(a,"success");else{a.m=6;try{var h=2<t1(a)?a.g.statusText:""}catch(i){h=""}a.j=h+" ["+a.aa()+"]",tZ(a)}}finally{t_(a)}}}}function t_(a,b){if(a.g){t0(a);let c=a.g,d=a.C[0]?d9:null;a.g=null,a.C=null,b||sF(a,"ready");try{c.onreadystatechange=d}catch(e){}}}function t0(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(aG.clearTimeout(a.A),a.A=null)}function t1(a){return a.g?a.g.readyState:0}function t2(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case tV:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(b){return null}}function t3(a){let b="";return sm(a,function(a,c){b+=c,b+=":",b+=a,b+="\r\n"}),b}function t4(b,d,a){a:{for(c in a){var c=!1;break a}c=!0}c||(a=t3(a),"string"==typeof b?null!=a&&encodeURIComponent(String(a)):tp(b,d,a))}function t5(b,c,a){return a&&a.internalChannelParams&&a.internalChannelParams[b]||c}function en(a){this.Ca=0,this.i=[],this.j=new bK,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=t5("failFast",!1,a),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=t5("baseRetryDelayMs",5e3,a),this.bb=t5("retryDelaySeedMs",1e4,a),this.$a=t5("forwardChannelMaxRetries",2,a),this.ta=t5("forwardChannelRequestTimeoutMs",2e4,a),this.ra=a&&a.xmlHttpFactory||void 0,this.Da=a&&a.Zb||!1,this.J=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.I="",this.h=new em(a&&a.concurrentRequestLimit),this.Fa=new tN,this.O=a&&a.fastHandshake||!1,this.N=a&&a.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=a&&a.Xb||!1,a&&a.Aa&&this.j.Aa(),a&&a.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&a&&a.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function t6(c){if(t8(c),3==c.G){var a=c.U++,b=tl(c.F);tp(b,"SID",c.I),tp(b,"RID",a),tp(b,"TYPE","terminate"),ub(c,b),(a=new ej(c,c.j,a,void 0)).K=2,a.v=tq(tl(b)),b=!1,aG.navigator&&aG.navigator.sendBeacon&&(b=aG.navigator.sendBeacon(a.v.toString(),"")),!b&&aG.Image&&((new Image).src=a.v,b=!0),b||(a.g=un(a.l,null),a.g.da(a.v)),a.F=Date.now(),td(a)}ul(c)}function t7(a){a.g&&(uf(a),a.g.cancel(),a.g=null)}function t8(a){t7(a),a.u&&(aG.clearTimeout(a.u),a.u=null),uh(a),a.h.cancel(),a.m&&("number"==typeof a.m&&aG.clearTimeout(a.m),a.m=null)}function t9(a){tH(a.h)||a.m||(a.m=!0,sM(a.Ja,a),a.C=0)}function ua(a,c){var b;b=c?c.m:a.U++;let d=tl(a.F);tp(d,"SID",a.I),tp(d,"RID",b),tp(d,"AID",a.T),ub(a,d),a.o&&a.s&&t4(d,a.o,a.s),b=new ej(a,a.j,b,a.C+1),null===a.o&&(b.H=a.s),c&&(a.i=c.D.concat(a.i)),c=uc(a,b,1e3),b.setTimeout(Math.round(.5*a.ta)+Math.round(.5*a.ta*Math.random())),tK(a.h,b),s8(b,d,c)}function ub(a,b){a.ia&&sm(a.ia,function(a,c){tp(b,c,a)}),a.l&&tj({},function(a,c){tp(b,c,a)})}function uc(a,k,c){c=Math.min(a.i.length,c);var e=a.l?r6(a.l.Ra,a.l,a):null;a:{var f=a.i;let b=-1;for(;;){let g=["count="+c];-1==b?0<c?(b=f[0].h,g.push("ofs="+b)):b=0:g.push("ofs="+b);let h=!0;for(let d=0;d<c;d++){let i=f[d].h,j=f[d].g;if(0>(i-=b))b=Math.max(0,f[d].h-100),h=!1;else try{tO(j,g,"req"+i+"_")}catch(l){e&&e(j)}}if(h){e=g.join("&");break a}}}return a=a.i.splice(0,c),k.D=a,e}function ud(a){a.g||a.u||(a.Z=1,sM(a.Ia,a),a.A=0)}function ue(a){return!a.g&&!a.u&&!(3<=a.A)&&(a.Z++,a.u=s2(r6(a.Ia,a),uj(a,a.A)),a.A++,!0)}function uf(a){null!=a.B&&(aG.clearTimeout(a.B),a.B=null)}function ug(a){a.g=new ej(a,a.j,"rpc",a.Z),null===a.o&&(a.g.H=a.s),a.g.N=0;var b=tl(a.sa);tp(b,"RID","rpc"),tp(b,"SID",a.I),tp(b,"CI",a.L?"0":"1"),tp(b,"AID",a.T),tp(b,"TYPE","xmlhttp"),ub(a,b),a.o&&a.s&&t4(b,a.o,a.s),a.J&&a.g.setTimeout(a.J);var c=a.g;a=a.ka,c.K=1,c.v=tq(tl(b)),c.s=null,c.P=!0,s9(c,a)}function uh(a){null!=a.v&&(aG.clearTimeout(a.v),a.v=null)}function ui(a,c){var e=null;if(a.g==c){uh(a),uf(a),a.g=null;var d=2}else{if(!tJ(a.h,c))return;e=c.D,tL(a.h,c),d=1}if(0!=a.G){if(a.pa=c.Y,c.i){if(1==d){e=c.s?c.s.length:0,c=Date.now()-c.F;var b,f,g=a.C;d=s_(),sF(d,new ei(d,e)),t9(a)}else ud(a)}else if(3==(g=c.o)||0==g&&0<a.pa||!(1==d&&(b=a,f=c,!(tI(b.h)>=b.h.j-(b.m?1:0))&&(b.m?(b.i=f.D.concat(b.i),!0):1!=b.G&&2!=b.G&&!(b.C>=(b.Za?0:b.$a))&&(b.m=s2(r6(b.Ja,b,f),uj(b,b.C)),b.C++,!0)))||2==d&&ue(a)))switch(e&&0<e.length&&((c=a.h).i=c.i.concat(e)),g){case 1:uk(a,5);break;case 4:uk(a,10);break;case 3:uk(a,6);break;default:uk(a,2)}}}function uj(a,c){let b=a.Xa+Math.floor(Math.random()*a.bb);return a.l||(b*=2),b*c}function uk(a,c){if(a.j.info("Error code "+c),2==c){var b=null;a.l&&(b=null);var d=r6(a.kb,a);b||(b=new ek("//www.google.com/images/cleardot.gif"),aG.location&&"http"==aG.location.protocol||tm(b,"https"),tq(b)),function(d,b){let c=new bK;if(aG.Image){let a=new Image;a.onload=r7(tP,c,a,"TestLoadImage: loaded",!0,b),a.onerror=r7(tP,c,a,"TestLoadImage: error",!1,b),a.onabort=r7(tP,c,a,"TestLoadImage: abort",!1,b),a.ontimeout=r7(tP,c,a,"TestLoadImage: timeout",!1,b),aG.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=d}else b(!1)}(b.toString(),d)}else s1(2);a.G=0,a.l&&a.l.va(c),ul(a),t8(a)}function ul(a){if(a.G=0,a.la=[],a.l){let b=tM(a.h);(0!=b.length||0!=a.i.length)&&(sa(a.la,b),sa(a.la,a.i),a.h.i.length=0,r9(a.i),a.i.length=0),a.l.ua()}}function um(f,b,c){var a=c instanceof ek?tl(c):new ek(c,void 0);if(""!=a.g)b&&(a.g=b+"."+a.g),tn(a,a.m);else{var d=aG.location;a=d.protocol,b=b?b+"."+d.hostname:d.hostname,d=+d.port;var e=new ek(null,void 0);a&&tm(e,a),b&&(e.g=b),d&&tn(e,d),c&&(e.l=c),a=e}return c=f.D,b=f.za,c&&b&&tp(a,c,b),tp(a,"VER",f.ma),ub(f,a),a}function un(a,b,c){if(b&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new f(c&&a.Da&&!a.ra?new ai({jb:!0}):a.ra)).Ka(a.H),b}function bQ(){}function aO(){if(ae&&!(10<=Number(sh)))throw Error("Environmental error: no available transport.")}function o(b,a){l.call(this),this.g=new en(a),this.l=b,this.h=a&&a.messageUrlParams||null,b=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.s=b,b=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(b?b["X-WebChannel-Content-Type"]=a.messageContentType:b={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.ya&&(b?b["X-WebChannel-Client-Profile"]=a.ya:b={"X-WebChannel-Client-Profile":a.ya}),this.g.S=b,(b=a&&a.Yb)&&!sc(b)&&(this.g.o=b),this.A=a&&a.supportsCrossDomainXhr||!1,this.v=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!sc(a)&&(this.g.D=a,null!==(b=this.h)&&a in b&&a in(b=this.h)&&delete b[a]),this.j=new R(this)}function eo(a){bN.call(this);var b=a.__sm__;if(b){a:{for(let c in b){a=c;break a}a=void 0}(this.i=a)&&(a=this.i,b=null!==b&&a in b?b[a]:void 0),this.data=b}else this.data=a}function ep(){bO.call(this),this.status=1}function R(a){this.g=a}(a=f.prototype).Ka=function(a){this.L=a},a.da=function(c,d,b,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+c);d=d?d.toUpperCase():"GET",this.H=c,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bW.g(),this.C=this.u?s3(this.u):s3(bW),this.g.onreadystatechange=r6(this.Ha,this);try{this.F=!0,this.g.open(d,String(c),!0),this.F=!1}catch(h){tY(this,h);return}if(c=b||"",b=new Map(this.headers),a){if(Object.getPrototypeOf(a)===Object.prototype)for(var e in a)b.set(e,a[e]);else if("function"==typeof a.keys&&"function"==typeof a.get)for(let g of a.keys())b.set(g,a.get(g));else throw Error("Unknown input type for opt_headers: "+String(a))}for(let[i,j]of(a=Array.from(b.keys()).find(a=>"content-type"==a.toLowerCase()),e=aG.FormData&&c instanceof aG.FormData,!(0<=r8(tX,d))||a||e||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),b))this.g.setRequestHeader(i,j);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{var f;t0(this),0<this.B&&((this.K=(f=this.g,ae&&function(b){var a=sg;return Object.prototype.hasOwnProperty.call(a,9)?a[9]:a[9]=b(9)}(function(){let c=0,e=sd(String(an)).split("."),f=sd("9").split("."),g=Math.max(e.length,f.length);for(let d=0;0==c&&d<g;d++){var a=e[d]||"",b=f[d]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],0==a[0].length&&0==b[0].length)break;c=se(0==a[1].length?0:parseInt(a[1],10),0==b[1].length?0:parseInt(b[1],10))||se(0==a[2].length,0==b[2].length)||se(a[2],b[2]),a=a[3],b=b[3]}while(0==c)}return 0<=c})&&"number"==typeof f.timeout&& void 0!==f.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=r6(this.qa,this)):this.A=sS(this.qa,this.B,this)),this.v=!0,this.g.send(c),this.v=!1}catch(k){tY(this,k)}},a.qa=function(){void 0!==d8&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sF(this,"timeout"),this.abort(8))},a.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,sF(this,"complete"),sF(this,"abort"),t_(this))},a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),t_(this,!0)),f.X.M.call(this)},a.Ha=function(){this.s||(this.F||this.v||this.l?t$(this):this.fb())},a.fb=function(){t$(this)},a.aa=function(){try{return 2<t1(this)?this.g.status:-1}catch(a){return -1}},a.fa=function(){try{return this.g?this.g.responseText:""}catch(a){return""}},a.Sa=function(b){if(this.g){var a=this.g.responseText;return b&&0==a.indexOf(b)&&(a=a.substring(b.length)),tU(a)}},a.Ea=function(){return this.m},a.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(a=en.prototype).ma=8,a.G=1,a.Ja=function(e){if(this.m){if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let f=new ej(this,this.j,e,void 0),c=this.s;if(this.S&&(c?sp(c=sn(c),this.S):c=this.S),null!==this.o||this.N||(f.H=c,c=null),this.O)a:{for(var b=0,a=0;a<this.i.length;a++){b:{var d=this.i[a];if("__data__"in d.g&&"string"==typeof(d=d.g.__data__)){d=d.length;break b}d=void 0}if(void 0===d)break;if(4096<(b+=d)){b=a;break a}if(4096===b||a===this.i.length-1){b=a+1;break a}}b=1e3}else b=1e3;b=uc(this,f,b),a=tl(this.F),tp(a,"RID",e),tp(a,"CVER",22),this.D&&tp(a,"X-HTTP-Session-Id",this.D),ub(this,a),c&&(this.N?b="headers="+encodeURIComponent(String(t3(c)))+"&"+b:this.o&&t4(a,this.o,c)),tK(this.h,f),this.Ya&&tp(a,"TYPE","init"),this.O?(tp(a,"$req",b),tp(a,"SID","null"),f.Z=!0,s8(f,a,null)):s8(f,a,b),this.G=2}}else 3==this.G&&(e?ua(this,e):0==this.i.length||tH(this.h)||ua(this))}},a.Ia=function(){if(this.u=null,ug(this),this.$&&!(this.K||null==this.g||0>=this.P)){var a=2*this.P;this.j.info("BP detection timer enabled: "+a),this.B=s2(r6(this.eb,this),a)}},a.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,s1(10),t7(this),ug(this))},a.cb=function(){null!=this.v&&(this.v=null,t7(this),ue(this),s1(19))},a.kb=function(a){a?(this.j.info("Successfully pinged google.com"),s1(2)):(this.j.info("Failed to ping google.com"),s1(1))},(a=bQ.prototype).xa=function(){},a.wa=function(){},a.va=function(){},a.ua=function(){},a.Ra=function(){},aO.prototype.g=function(a,b){return new o(a,b)},g(o,l),o.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var a=this.g,b=this.l,c=this.h||void 0;s1(0),a.V=b,a.ia=c||{},a.L=a.Y,a.F=um(a,null,a.V),t9(a)},o.prototype.close=function(){t6(this.g)},o.prototype.u=function(a){var b=this.g;if("string"==typeof a){var c={};c.__data__=a,a=c}else this.v&&((c={}).__data__=sH(a),a=c);b.i.push(new tF(b.ab++,a)),3==b.G&&t9(b)},o.prototype.M=function(){this.g.l=null,delete this.j,t6(this.g),delete this.g,o.X.M.call(this)},g(eo,bN),g(ep,bO),g(R,bQ),R.prototype.xa=function(){sF(this.g,"a")},R.prototype.wa=function(a){sF(this.g,new eo(a))},R.prototype.va=function(a){sF(this.g,new ep)},R.prototype.ua=function(){sF(this.g,"b")},aO.prototype.createWebChannel=aO.prototype.g,o.prototype.send=o.prototype.u,o.prototype.open=o.prototype.m,o.prototype.close=o.prototype.close,ag.NO_ERROR=0,ag.TIMEOUT=8,ag.HTTP_ERROR=6,bL.COMPLETE="complete",bM.EventType=Q,Q.OPEN="a",Q.CLOSE="b",Q.ERROR="c",Q.MESSAGE="d",l.prototype.listen=l.prototype.N,f.prototype.listenOnce=f.prototype.O,f.prototype.getLastError=f.prototype.Oa,f.prototype.getLastErrorCode=f.prototype.Ea,f.prototype.getStatus=f.prototype.aa,f.prototype.getResponseJson=f.prototype.Sa,f.prototype.getResponseText=f.prototype.fa,f.prototype.send=f.prototype.da,f.prototype.setWithCredentials=f.prototype.Ka;var uo=s.createWebChannelTransport=function(){return new aO},up=s.getStatEventTarget=function(){return s_()},uq=s.ErrorCode=ag,ur=s.EventType=bL,us=s.Event=af,ut=s.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},uu=s.FetchXmlHttpFactory=ai,uv=s.WebChannel=bM,uw=s.XhrIo=f,ux=e(3454);let uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Simple wrapper around a nullable UID. Mostly exists to make code more
 * readable.
 */ class B{constructor(a){this.uid=a}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(a){return a.uid===this.uid}}B.UNAUTHENTICATED=new B(null),B.GOOGLE_CREDENTIALS=new B("google-credentials-uid"),B.FIRST_PARTY=new B("first-party-uid"),B.MOCK_USER=new B("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let uz="9.13.0",uA=new ab("@firebase/firestore");function uB(){return uA.logLevel}function uC(a,...b){if(uA.logLevel<=r1.DEBUG){let c=b.map(uF);uA.debug(`Firestore (${uz}): ${a}`,...c)}}function uD(a,...b){if(uA.logLevel<=r1.ERROR){let c=b.map(uF);uA.error(`Firestore (${uz}): ${a}`,...c)}}function uE(a,...b){if(uA.logLevel<=r1.WARN){let c=b.map(uF);uA.warn(`Firestore (${uz}): ${a}`,...c)}}function uF(a){var b;if("string"==typeof a)return a;try{return b=a,JSON.stringify(b)}catch(c){return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Unconditionally fails, throwing an Error with the given message.
 * Messages are stripped in production builds.
 *
 * Returns `never` and can be used in expressions:
 * @example
 * let futureVar = fail('not implemented yet');
 */ function uG(b="Unexpected state"){let a=`FIRESTORE (${uz}) INTERNAL ASSERTION FAILED: `+b;throw uD(a),Error(a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let uH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class uI extends bn{constructor(a,b){super(a,b),this.code=a,this.message=b,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class uJ{constructor(){this.promise=new Promise((a,b)=>{this.resolve=a,this.reject=b})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class uK{constructor(a,b){this.user=b,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${a}`)}}class uL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(a,b){a.enqueueRetryable(()=>b(B.UNAUTHENTICATED))}shutdown(){}}class uM{constructor(a){this.token=a,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(a,b){this.changeListener=b,a.enqueueRetryable(()=>b(this.token.user))}shutdown(){this.changeListener=null}}class uN{constructor(a){this.t=a,this.currentUser=B.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(b,c){let d=this.i,e=a=>this.i!==d?(d=this.i,c(a)):Promise.resolve(),f=new uJ;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new uJ,b.enqueueRetryable(()=>e(this.currentUser))};let a=()=>{let a=f;b.enqueueRetryable(async()=>{await a.promise,await e(this.currentUser)})},g=b=>{uC("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(a=>g(a)),setTimeout(()=>{if(!this.auth){let a=this.t.getImmediate({optional:!0});a?g(a):(uC("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new uJ)}},0),a()}getToken(){let b=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(a=>{var c;return this.i!==b?(uC("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?("string"==typeof a.accessToken||uG(),new uK(a.accessToken,this.currentUser)):null}):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){var b;let a=this.auth&&this.auth.getUid();return null===a||"string"==typeof a||uG(),new B(a)}}class uO{constructor(a,b,c,d){this.h=a,this.l=b,this.m=c,this.g=d,this.type="FirstParty",this.user=B.FIRST_PARTY,this.p=new Map}I(){var a;return this.g?this.g():(("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)&&uG(),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);let a=this.I();return a&&this.p.set("Authorization",a),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class uP{constructor(a,b,c,d){this.h=a,this.l=b,this.m=c,this.g=d}getToken(){return Promise.resolve(new uO(this.h,this.l,this.m,this.g))}start(a,b){a.enqueueRetryable(()=>b(B.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uQ{constructor(a){this.value=a,this.type="AppCheck",this.headers=new Map,a&&a.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(a){this.T=a,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(a,b){let c=a=>{null!=a.error&&uC("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let c=a.token!==this.A;return this.A=a.token,uC("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?b(a.token):Promise.resolve()};this.o=b=>{a.enqueueRetryable(()=>c(b))};let d=a=>{uC("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>d(a)),setTimeout(()=>{if(!this.appCheck){let a=this.T.getImmediate({optional:!0});a?d(a):uC("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let a=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(a).then(a=>{var b;return a?("string"==typeof a.token||uG(),this.A=a.token,new uQ(a.token)):null}):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * Builds a CredentialsProvider depending on the type of
 * the credentials passed in.
 */ /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Generates `nBytes` of random bytes.
 *
 * If `nBytes < 0` , an error will be thrown.
 */ function uS(d){let a="undefined"!=typeof self&&(self.crypto||self.msCrypto),b=new Uint8Array(d);if(a&&"function"==typeof a.getRandomValues)a.getRandomValues(b);else for(let c=0;c<d;c++)b[c]=Math.floor(256*Math.random());return b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class uT{static R(){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/a.length)*a.length,b="";for(;b.length<20;){let d=uS(40);for(let c=0;c<d.length;++c)b.length<20&&d[c]<e&&(b+=a.charAt(d[c]%a.length))}return b}}function eq(a,b){return a<b?-1:a>b?1:0}function uU(a,b,c){return a.length===b.length&&a.every((a,d)=>c(a,b[d]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // The earliest date supported by Firestore timestamps (0001-01-01T00:00:00Z).
/**
 * A `Timestamp` represents a point in time independent of any time zone or
 * calendar, represented as seconds and fractions of seconds at nanosecond
 * resolution in UTC Epoch time.
 *
 * It is encoded using the Proleptic Gregorian Calendar which extends the
 * Gregorian calendar backwards to year one. It is encoded assuming all minutes
 * are 60 seconds long, i.e. leap seconds are "smeared" so that no leap second
 * table is needed for interpretation. Range is from 0001-01-01T00:00:00Z to
 * 9999-12-31T23:59:59.999999999Z.
 *
 * For examples and further specifications, refer to the
 * {@link https://github.com/google/protobuf/blob/master/src/google/protobuf/timestamp.proto | Timestamp definition}.
 */ class uV{constructor(a,b){if(this.seconds=a,this.nanoseconds=b,b<0||b>=1e9)throw new uI(uH.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+b);if(a< -62135596800||a>=253402300800)throw new uI(uH.INVALID_ARGUMENT,"Timestamp seconds out of range: "+a)}static now(){return uV.fromMillis(Date.now())}static fromDate(a){return uV.fromMillis(a.getTime())}static fromMillis(a){let b=Math.floor(a/1e3);return new uV(b,Math.floor(1e6*(a-1e3*b)))}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(a){return this.seconds===a.seconds?eq(this.nanoseconds,a.nanoseconds):eq(this.seconds,a.seconds)}isEqual(a){return a.seconds===this.seconds&&a.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let a=this.seconds- -62135596800;return String(a).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A version of a document in Firestore. This corresponds to the version
 * timestamp, such as update_time or read_time.
 */ class uW{constructor(a){this.timestamp=a}static fromTimestamp(a){return new uW(a)}static min(){return new uW(new uV(0,0))}static max(){return new uW(new uV(253402300799,999999999))}compareTo(a){return this.timestamp._compareTo(a.timestamp)}isEqual(a){return this.timestamp.isEqual(a.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Path represents an ordered sequence of string segments.
 */ class bR{constructor(b,a,c){void 0===a?a=0:a>b.length&&uG(),void 0===c?c=b.length-a:c>b.length-a&&uG(),this.segments=b,this.offset=a,this.len=c}get length(){return this.len}isEqual(a){return 0===bR.comparator(this,a)}child(a){let b=this.segments.slice(this.offset,this.limit());return a instanceof bR?a.forEach(a=>{b.push(a)}):b.push(a),this.construct(b)}limit(){return this.offset+this.length}popFirst(a){return a=void 0===a?1:a,this.construct(this.segments,this.offset+a,this.length-a)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(a){return this.segments[this.offset+a]}isEmpty(){return 0===this.length}isPrefixOf(b){if(b.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==b.get(a))return!1;return!0}isImmediateParentOf(b){if(this.length+1!==b.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==b.get(a))return!1;return!0}forEach(b){for(let a=this.offset,c=this.limit();a<c;a++)b(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(a,b){let f=Math.min(a.length,b.length);for(let c=0;c<f;c++){let d=a.get(c),e=b.get(c);if(d<e)return -1;if(d>e)return 1}return a.length<b.length?-1:a.length>b.length?1:0}}class uX extends bR{construct(a,b,c){return new uX(a,b,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...c){let b=[];for(let a of c){if(a.indexOf("//")>=0)throw new uI(uH.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);b.push(...a.split("/").filter(a=>a.length>0))}return new uX(b)}static emptyPath(){return new uX([])}}let uY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class uZ extends bR{construct(a,b,c){return new uZ(a,b,c)}static isValidIdentifier(a){return uY.test(a)}canonicalString(){return this.toArray().map(a=>(a=a.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),uZ.isValidIdentifier(a)||(a="`"+a+"`"),a)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new uZ(["__name__"])}static fromServerFormat(b){let h=[],f="",a=0,g=()=>{if(0===f.length)throw new uI(uH.INVALID_ARGUMENT,`Invalid field path (${b}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);h.push(f),f=""},c=!1;for(;a<b.length;){let d=b[a];if("\\"===d){if(a+1===b.length)throw new uI(uH.INVALID_ARGUMENT,"Path has trailing escape character: "+b);let e=b[a+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new uI(uH.INVALID_ARGUMENT,"Path has invalid escape sequence: "+b);f+=e,a+=2}else"`"===d?(c=!c,a++):"."!==d||c?(f+=d,a++):(g(),a++)}if(g(),c)throw new uI(uH.INVALID_ARGUMENT,"Unterminated ` in path: "+b);return new uZ(h)}static emptyPath(){return new uZ([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * @internal
 */ class aj{constructor(a){this.path=a}static fromPath(a){return new aj(uX.fromString(a))}static fromName(a){return new aj(uX.fromString(a).popFirst(5))}static empty(){return new aj(uX.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(a){return this.path.length>=2&&this.path.get(this.path.length-2)===a}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(a){return null!==a&&0===uX.comparator(this.path,a.path)}toString(){return this.path.toString()}static comparator(a,b){return uX.comparator(a.path,b.path)}static isDocumentKey(a){return a.length%2==0}static fromSegments(a){return new aj(new uX(a.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The initial mutation batch id for each index. Gets updated during index
 * backfill.
 */ /**
 * An index definition for field indexes in Firestore.
 *
 * Every index is associated with a collection. The definition contains a list
 * of fields and their index kind (which can be `ASCENDING`, `DESCENDING` or
 * `CONTAINS` for ArrayContains/ArrayContainsAny queries).
 *
 * Unlike the backend, the SDK does not differentiate between collection or
 * collection group-scoped indices. Every index can be used for both single
 * collection and collection group queries.
 */ class er{constructor(a,b,c,d){this.indexId=a,this.collectionGroup=b,this.fields=c,this.indexState=d}}function u$(a){return a.fields.find(a=>2===a.kind)}function u_(a){return a.fields.filter(a=>2!==a.kind)}er.UNKNOWN_ID=-1;class u0{constructor(a,b){this.fieldPath=a,this.kind=b}}function u1(a,b){let c=uZ.comparator(a.fieldPath,b.fieldPath);return 0!==c?c:eq(a.kind,b.kind)}class u2{constructor(a,b){this.sequenceNumber=a,this.offset=b}static empty(){return new u2(0,u5.min())}}function u3(a,d){let b=a.toTimestamp().seconds,c=a.toTimestamp().nanoseconds+1,e=uW.fromTimestamp(1e9===c?new uV(b+1,0):new uV(b,c));return new u5(e,aj.empty(),d)}function u4(a){return new u5(a.readTime,a.key,-1)}class u5{constructor(a,b,c){this.readTime=a,this.documentKey=b,this.largestBatchId=c}static min(){return new u5(uW.min(),aj.empty(),-1)}static max(){return new u5(uW.max(),aj.empty(),-1)}}function u6(b,c){let a=b.readTime.compareTo(c.readTime);return 0!==a?a:0!==(a=aj.comparator(b.documentKey,c.documentKey))?a:eq(b.largestBatchId,c.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let u7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class es{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(a){this.onCommittedListeners.push(a)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(a=>a())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Verifies the error thrown by a LocalStore operation. If a LocalStore
 * operation fails because the primary lease has been taken by another client,
 * we ignore the error (the persistence layer will immediately call
 * `applyPrimaryLease` to propagate the primary state change). All other errors
 * are re-thrown.
 *
 * @param err - An error returned by a LocalStore operation.
 * @returns A Promise that resolves after we recovered, or the original error.
 */ async function u8(a){if(a.code!==uH.FAILED_PRECONDITION||a.message!==u7)throw a;uC("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * PersistencePromise is essentially a re-implementation of Promise except
 * it has a .next() method instead of .then() and .next() and .catch() callbacks
 * are executed synchronously when a PersistencePromise resolves rather than
 * asynchronously (Promise implementations use setImmediate() or similar).
 *
 * This is necessary to interoperate with IndexedDB which will automatically
 * commit transactions if control is returned to the event loop without
 * synchronously initiating another operation on the transaction.
 *
 * NOTE: .then() and .catch() only allow a single consumer, unlike normal
 * Promises.
 */ class u9{constructor(a){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,a(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(a){return this.next(void 0,a)}next(a,b){return this.callbackAttached&&uG(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(b,this.error):this.wrapSuccess(a,this.result):new u9((c,d)=>{this.nextCallback=b=>{this.wrapSuccess(a,b).next(c,d)},this.catchCallback=a=>{this.wrapFailure(b,a).next(c,d)}})}toPromise(){return new Promise((a,b)=>{this.next(a,b)})}wrapUserFunction(b){try{let a=b();return a instanceof u9?a:u9.resolve(a)}catch(c){return u9.reject(c)}}wrapSuccess(a,b){return a?this.wrapUserFunction(()=>a(b)):u9.resolve(b)}wrapFailure(a,b){return a?this.wrapUserFunction(()=>a(b)):u9.reject(b)}static resolve(a){return new u9((b,c)=>{b(a)})}static reject(a){return new u9((c,b)=>{b(a)})}static waitFor(a){return new u9((b,f)=>{let c=0,d=0,e=!1;a.forEach(a=>{++c,a.next(()=>{++d,e&&d===c&&b()},a=>f(a))}),e=!0,d===c&&b()})}static or(b){let a=u9.resolve(!1);for(let c of b)a=a.next(a=>a?u9.resolve(a):c());return a}static forEach(a,c){let b=[];return a.forEach((a,d)=>{b.push(c.call(this,a,d))}),this.waitFor(b)}static mapArray(a,b){return new u9((f,g)=>{let d=a.length,h=Array(d),i=0;for(let c=0;c<d;c++){let e=c;b(a[e]).next(a=>{h[e]=a,++i===d&&f(h)},a=>g(a))}})}static doWhile(a,b){return new u9((d,e)=>{let c=()=>{!0===a()?b().next(()=>{c()},e):d()};c()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // References to `window` are guarded by SimpleDb.isAvailable()
/* eslint-disable no-restricted-globals */ /**
 * Wraps an IDBTransaction and exposes a store() method to get a handle to a
 * specific object store.
 */ class va{constructor(a,b){this.action=a,this.transaction=b,this.aborted=!1,this.P=new uJ,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{b.error?this.P.reject(new vd(a,b.error)):this.P.resolve()},this.transaction.onerror=b=>{let c=vi(b.target.error);this.P.reject(new vd(a,c))}}static open(b,a,c,d){try{return new va(a,b.transaction(d,c))}catch(e){throw new vd(a,e)}}get v(){return this.P.promise}abort(a){a&&this.P.reject(a),this.aborted||(uC("SimpleDb","Aborting transaction:",a?a.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){let a=this.transaction;this.aborted||"function"!=typeof a.commit||a.commit()}store(a){let b=this.transaction.objectStore(a);return new vf(b)}}class vb{constructor(a,b,c){this.name=a,this.version=b,this.S=c,12.2===vb.D(getUA())&&uD("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(a){return uC("SimpleDb","Removing database:",a),vg(window.indexedDB.deleteDatabase(a)).toPromise()}static C(){if(!isIndexedDBAvailable())return!1;if(vb.N())return!0;let a=getUA(),b=vb.D(a),d=0<b&&b<10,c=vb.k(a),e=0<c&&c<4.5;return!(a.indexOf("MSIE ")>0||a.indexOf("Trident/")>0||a.indexOf("Edge/")>0||d||e)}static N(){var a;return void 0!==ux&&"YES"===(null===(a=ux.env)|| void 0===a?void 0:a.O)}static M(a,b){return a.store(b)}static D(b){let a=b.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=a?a[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static k(b){let a=b.match(/Android ([\d.]+)/i),c=a?a[1].split(".").slice(0,2).join("."):"-1";return Number(c)}async F(a){return this.db||(uC("SimpleDb","Opening database:",this.name),this.db=await new Promise((c,d)=>{let b=indexedDB.open(this.name,this.version);b.onsuccess=a=>{let b=a.target.result;c(b)},b.onblocked=()=>{d(new vd(a,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},b.onerror=c=>{let b=c.target.error;"VersionError"===b.name?d(new uI(uH.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===b.name?d(new uI(uH.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b)):d(new vd(a,b))},b.onupgradeneeded=a=>{uC("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);let c=a.target.result;this.S.$(c,b.transaction,a.oldVersion,this.version).next(()=>{uC("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=a=>this.B(a)),this.db}L(a){this.B=a,this.db&&(this.db.onversionchange=b=>a(b))}async runTransaction(b,g,h,i){let j="readonly"===g,c=0;for(;;){++c;try{this.db=await this.F(b);let d=va.open(this.db,b,j?"readonly":"readwrite",h),e=i(d).next(a=>(d.V(),a)).catch(a=>(d.abort(a),u9.reject(a))).toPromise();return e.catch(()=>{}),await d.v,e}catch(k){let a=k,f="FirebaseError"!==a.name&&c<3;if(uC("SimpleDb","Transaction failed with error:",a.message,"Retrying:",f),this.close(),!f)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}class vc{constructor(a){this.U=a,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(a){this.U=a}done(){this.q=!0}j(a){this.K=a}delete(){return vg(this.U.delete())}}class vd extends null{constructor(a,b){super(uH.UNAVAILABLE,`IndexedDB transaction '${a}' failed: ${b}`),this.name="IndexedDbTransactionError"}}function ve(a){return"IndexedDbTransactionError"===a.name}class vf{constructor(a){this.store=a}put(a,b){let c;return void 0!==b?(uC("SimpleDb","PUT",this.store.name,a,b),c=this.store.put(b,a)):(uC("SimpleDb","PUT",this.store.name,"<auto-key>",a),c=this.store.put(a)),vg(c)}add(a){return uC("SimpleDb","ADD",this.store.name,a,a),vg(this.store.add(a))}get(a){return vg(this.store.get(a)).next(b=>(void 0===b&&(b=null),uC("SimpleDb","GET",this.store.name,a,b),b))}delete(a){return uC("SimpleDb","DELETE",this.store.name,a),vg(this.store.delete(a))}count(){return uC("SimpleDb","COUNT",this.store.name),vg(this.store.count())}W(b,c){let a=this.options(b,c);if(a.index||"function"!=typeof this.store.getAll){let d=this.cursor(a),e=[];return this.H(d,(b,a)=>{e.push(a)}).next(()=>e)}{let f=this.store.getAll(a.range);return new u9((a,b)=>{f.onerror=a=>{b(a.target.error)},f.onsuccess=b=>{a(b.target.result)}})}}J(b,a){let c=this.store.getAll(b,null===a?void 0:a);return new u9((a,b)=>{c.onerror=a=>{b(a.target.error)},c.onsuccess=b=>{a(b.target.result)}})}Y(b,c){uC("SimpleDb","DELETE ALL",this.store.name);let a=this.options(b,c);a.X=!1;let d=this.cursor(a);return this.H(d,(b,c,a)=>a.delete())}Z(c,a){let b;a?b=c:(b={},a=c);let d=this.cursor(b);return this.H(d,a)}tt(a){let b=this.cursor({});return new u9((c,d)=>{b.onerror=a=>{let b=vi(a.target.error);d(b)},b.onsuccess=d=>{let b=d.target.result;b?a(b.primaryKey,b.value).next(a=>{a?b.continue():c()}):c()}})}H(a,b){let c=[];return new u9((d,e)=>{a.onerror=a=>{e(a.target.error)},a.onsuccess=g=>{let a=g.target.result;if(!a)return void d();let e=new vc(a),f=b(a.primaryKey,a.value,e);if(f instanceof u9){let h=f.catch(a=>(e.done(),u9.reject(a)));c.push(h)}e.isDone?d():null===e.G?a.continue():a.continue(e.G)}}).next(()=>u9.waitFor(c))}options(a,b){let c;return void 0!==a&&("string"==typeof a?c=a:b=a),{index:c,range:b}}cursor(a){let b="next";if(a.reverse&&(b="prev"),a.index){let c=this.store.index(a.index);return a.X?c.openKeyCursor(a.range,b):c.openCursor(a.range,b)}return this.store.openCursor(a.range,b)}}function vg(a){return new u9((b,c)=>{a.onsuccess=a=>{let c=a.target.result;b(c)},a.onerror=a=>{let b=vi(a.target.error);c(b)}})}let vh=null;function vi(a){let b=vb.D(getUA());if(b>=12.2&&b<13){let c="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(c)>=0){let d=new uI("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${c}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vh||(vh=!0,setTimeout(()=>{throw d},0)),d}}return a}class vj{constructor(a,b){this.asyncQueue=a,this.et=b,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(a){uC("IndexBackiller",`Scheduled in ${a}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",a,async()=>{this.task=null;try{uC("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(a){ve(a)?uC("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):await u8(a)}await this.nt(6e4)})}}class vk{constructor(a,b){this.localStore=a,this.persistence=b}async st(a=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",b=>this.it(b,a))}it(b,a){let c=new Set,d=a,e=!0;return u9.doWhile(()=>!0===e&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(b).next(a=>{if(null!==a&&!c.has(a))return uC("IndexBackiller",`Processing collection: ${a}`),this.rt(b,a,d).next(b=>{d-=b,c.add(a)});e=!1})).next(()=>a-d)}rt(a,b,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(a,b).next(d=>this.localStore.localDocuments.getNextDocuments(a,b,d,c).next(c=>{let e=c.changes;return this.localStore.indexManager.updateIndexEntries(a,e).next(()=>this.ot(d,c)).next(c=>(uC("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(a,b,c))).next(()=>e.size)}))}ot(a,b){let c=a;return b.changes.forEach((d,b)=>{let a=u4(b);u6(a,c)>0&&(c=a)}),new u5(c.readTime,c.documentKey,Math.max(b.batchId,a.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * `ListenSequence` is a monotonic sequence. It is initialized with a minimum value to
 * exceed. All subsequent calls to next will return increasing values. If provided with a
 * `SequenceNumberSyncer`, it will additionally bump its next value when told of a new value, as
 * well as write out sequence numbers that it produces via `next()`.
 */ class et{constructor(b,a){this.previousValue=b,a&&(a.sequenceNumberHandler=a=>this.ut(a),this.ct=b=>a.writeSequenceNumber(b))}ut(a){return this.previousValue=Math.max(a,this.previousValue),this.previousValue}next(){let a=++this.previousValue;return this.ct&&this.ct(a),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function vl(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}function vm(a,c){for(let b in a)Object.prototype.hasOwnProperty.call(a,b)&&c(b,a[b])}function vn(a){for(let b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // An immutable sorted map implementation, based on a Left-leaning Red-Black
// tree.
et.at=-1;class aP{constructor(a,b){this.comparator=a,this.root=b||ak.EMPTY}insert(a,b){return new aP(this.comparator,this.root.insert(a,b,this.comparator).copy(null,null,ak.BLACK,null,null))}remove(a){return new aP(this.comparator,this.root.remove(a,this.comparator).copy(null,null,ak.BLACK,null,null))}get(c){let a=this.root;for(;!a.isEmpty();){let b=this.comparator(c,a.key);if(0===b)return a.value;b<0?a=a.left:b>0&&(a=a.right)}return null}indexOf(d){let b=0,a=this.root;for(;!a.isEmpty();){let c=this.comparator(d,a.key);if(0===c)return b+a.left.size;c<0?a=a.left:(b+=a.left.size+1,a=a.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(a){return this.root.inorderTraversal(a)}forEach(a){this.inorderTraversal((b,c)=>(a(b,c),!1))}toString(){let a=[];return this.inorderTraversal((b,c)=>(a.push(`${b}:${c}`),!1)),`{${a.join(", ")}}`}reverseTraversal(a){return this.root.reverseTraversal(a)}getIterator(){return new vo(this.root,null,this.comparator,!1)}getIteratorFrom(a){return new vo(this.root,a,this.comparator,!1)}getReverseIterator(){return new vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(a){return new vo(this.root,a,this.comparator,!0)}}class vo{constructor(a,c,e,d){this.isReverse=d,this.nodeStack=[];let b=1;for(;!a.isEmpty();)if(b=c?e(a.key,c):1,c&&d&&(b*=-1),b<0)a=this.isReverse?a.left:a.right;else{if(0===b){this.nodeStack.push(a);break}this.nodeStack.push(a),a=this.isReverse?a.right:a.left}}getNext(){let a=this.nodeStack.pop(),b={key:a.key,value:a.value};if(this.isReverse)for(a=a.left;!a.isEmpty();)this.nodeStack.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack.push(a),a=a.left;return b}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let a=this.nodeStack[this.nodeStack.length-1];return{key:a.key,value:a.value}}}class ak{constructor(d,e,a,b,c){this.key=d,this.value=e,this.color=null!=a?a:ak.RED,this.left=null!=b?b:ak.EMPTY,this.right=null!=c?c:ak.EMPTY,this.size=this.left.size+1+this.right.size}copy(a,b,c,d,e){return new ak(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(b,c,d){let a=this,e=d(b,a.key);return(a=e<0?a.copy(null,null,null,a.left.insert(b,c,d),null):0===e?a.copy(null,c,null,null,null):a.copy(null,null,null,null,a.right.insert(b,c,d))).fixUp()}removeMin(){if(this.left.isEmpty())return ak.EMPTY;let a=this;return a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),(a=a.copy(null,null,null,a.left.removeMin(),null)).fixUp()}remove(b,c){let d,a=this;if(0>c(b,a.key))a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(b,c),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===c(b,a.key)){if(a.right.isEmpty())return ak.EMPTY;d=a.right.min(),a=a.copy(d.key,d.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(b,c))}return a.fixUp()}isRed(){return this.color}fixUp(){let a=this;return a.right.isRed()&&!a.left.isRed()&&(a=a.rotateLeft()),a.left.isRed()&&a.left.left.isRed()&&(a=a.rotateRight()),a.left.isRed()&&a.right.isRed()&&(a=a.colorFlip()),a}moveRedLeft(){let a=this.colorFlip();return a.right.left.isRed()&&(a=(a=(a=a.copy(null,null,null,null,a.right.rotateRight())).rotateLeft()).colorFlip()),a}moveRedRight(){let a=this.colorFlip();return a.left.left.isRed()&&(a=(a=a.rotateRight()).colorFlip()),a}rotateLeft(){let a=this.copy(null,null,ak.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight(){let a=this.copy(null,null,ak.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip(){let a=this.left.copy(null,null,!this.left.color,null,null),b=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,b)}checkMaxDepth(){let a=this.check();return Math.pow(2,a)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw uG();let a=this.left.check();if(a!==this.right.check())throw uG();return a+(this.isRed()?0:1)}}ak.EMPTY=null,ak.RED=!0,ak.BLACK=!1,ak.EMPTY=new class{constructor(){this.size=0}get key(){throw uG()}get value(){throw uG()}get color(){throw uG()}get left(){throw uG()}get right(){throw uG()}copy(a,b,c,d,e){return this}insert(a,b,c){return new ak(a,b)}remove(a,b){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * SortedSet is an immutable (copy-on-write) collection that holds elements
 * in order specified by the provided comparator.
 *
 * NOTE: if provided comparator returns 0 for two elements, we consider them to
 * be equal!
 */ class bS{constructor(a){this.comparator=a,this.data=new aP(this.comparator)}has(a){return null!==this.data.get(a)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(a){return this.data.indexOf(a)}forEach(a){this.data.inorderTraversal((b,c)=>(a(b),!1))}forEachInRange(a,d){let b=this.data.getIteratorFrom(a[0]);for(;b.hasNext();){let c=b.getNext();if(this.comparator(c.key,a[1])>=0)return;d(c.key)}}forEachWhile(c,b){let a;for(a=void 0!==b?this.data.getIteratorFrom(b):this.data.getIterator();a.hasNext();)if(!c(a.getNext().key))return}firstAfterOrEqual(b){let a=this.data.getIteratorFrom(b);return a.hasNext()?a.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(a){return new vp(this.data.getIteratorFrom(a))}add(a){return this.copy(this.data.remove(a).insert(a,!0))}delete(a){return this.has(a)?this.copy(this.data.remove(a)):this}isEmpty(){return this.data.isEmpty()}unionWith(a){let b=this;return b.size<a.size&&(b=a,a=this),a.forEach(a=>{b=b.add(a)}),b}isEqual(a){if(!(a instanceof bS)||this.size!==a.size)return!1;let b=this.data.getIterator(),c=a.data.getIterator();for(;b.hasNext();){let d=b.getNext().key,e=c.getNext().key;if(0!==this.comparator(d,e))return!1}return!0}toArray(){let a=[];return this.forEach(b=>{a.push(b)}),a}toString(){let a=[];return this.forEach(b=>a.push(b)),"SortedSet("+a.toString()+")"}copy(b){let a=new bS(this.comparator);return a.data=b,a}}class vp{constructor(a){this.iter=a}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vq(a){return a.hasNext()?a.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provides a set of fields that can be used to partially patch a document.
 * FieldMask is used in conjunction with ObjectValue.
 * Examples:
 *   foo - Overwrites foo entirely with the provided value. If foo is not
 *         present in the companion ObjectValue, the field is deleted.
 *   foo.bar - Overwrites only the field bar of the object foo.
 *             If foo is not an object, foo is replaced with an object
 *             containing foo
 */ class vr{constructor(a){this.fields=a,a.sort(uZ.comparator)}static empty(){return new vr([])}unionWith(b){let a=new bS(uZ.comparator);for(let c of this.fields)a=a.add(c);for(let d of b)a=a.add(d);return new vr(a.toArray())}covers(a){for(let b of this.fields)if(b.isPrefixOf(a))return!0;return!1}isEqual(a){return uU(this.fields,a.fields,(a,b)=>a.isEqual(b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Immutable class that represents a "proto" byte string.
 *
 * Proto byte strings can either be Base64-encoded strings or Uint8Arrays when
 * sent on the wire. This class abstracts away this differentiation by holding
 * the proto byte string in a common class that must be converted into a string
 * before being sent as a proto.
 * @internal
 */ class bT{constructor(a){this.binaryString=a}static fromBase64String(a){let b=atob(a);return new bT(b)}static fromUint8Array(a){let b=function(b){let c="";for(let a=0;a<b.length;++a)c+=String.fromCharCode(b[a]);return c}(a);return new bT(b)}[Symbol.iterator](){let a=0;return{next:()=>a<this.binaryString.length?{value:this.binaryString.charCodeAt(a++),done:!1}:{value:void 0,done:!0}}}toBase64(){var a;return btoa(this.binaryString)}toUint8Array(){return function(b){let c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(a){return eq(this.binaryString,a.binaryString)}isEqual(a){return this.binaryString===a.binaryString}}bT.EMPTY_BYTE_STRING=new bT("");let vs=RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vt(a){var f,g;if(!a&&uG(),"string"==typeof a){let c=0,b=vs.exec(a);if(!b&&uG(),b[1]){let d=b[1];c=Number(d=(d+"000000000").substr(0,9))}let e=new Date(a);return{seconds:Math.floor(e.getTime()/1e3),nanos:c}}return{seconds:vu(a.seconds),nanos:vu(a.nanos)}}function vu(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function vv(a){return"string"==typeof a?bT.fromBase64String(a):bT.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents a locally-applied ServerTimestamp.
 *
 * Server Timestamps are backed by MapValues that contain an internal field
 * `__type__` with a value of `server_timestamp`. The previous value and local
 * write time are stored in its `__previous_value__` and `__local_write_time__`
 * fields respectively.
 *
 * Notes:
 * - ServerTimestampValue instances are created as the result of applying a
 *   transform. They can only exist in the local view of a document. Therefore
 *   they do not need to be parsed or serialized.
 * - When evaluated locally (e.g. for snapshot.data()), they by default
 *   evaluate to `null`. This behavior can be configured by passing custom
 *   FieldValueOptions to value().
 * - With respect to other ServerTimestampValues, they sort by their
 *   localWriteTime.
 */ function vw(c){var a,b;return"server_timestamp"===(null===(b=((null===(a=null==c?void 0:c.mapValue)|| void 0===a?void 0:a.fields)||{}).__type__)|| void 0===b?void 0:b.stringValue)}function vx(b){let a=vt(b.mapValue.fields.__local_write_time__.timestampValue);return new uV(a.seconds,a.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class vy{constructor(a,b,c,d,e,f,g,h){this.databaseId=a,this.appId=b,this.persistenceKey=c,this.host=d,this.ssl=e,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.useFetchStreams=h}}class vz{constructor(a,b){this.projectId=a,this.database=b||"(default)"}static empty(){return new vz("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(a){return a instanceof vz&&a.projectId===this.projectId&&a.database===this.database}}function vA(a){return 0===a&&1/a== -1/0}function vB(a){return"number"==typeof a&&Number.isInteger(a)&&!vA(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let vC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vD={nullValue:"NULL_VALUE"};function vE(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?vw(a)?4:vS(a)?9007199254740991:10:uG()}function vF(a,b){var e,f,c,d;if(a===b)return!0;let g=vE(a);if(g!==vE(b))return!1;switch(g){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===b.booleanValue;case 4:return vx(a).isEqual(vx(b));case 3:return function(a,b){if("string"==typeof a.timestampValue&&"string"==typeof b.timestampValue&&a.timestampValue.length===b.timestampValue.length)return a.timestampValue===b.timestampValue;let c=vt(a.timestampValue),d=vt(b.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(a,b);case 5:return a.stringValue===b.stringValue;case 6:return e=a,f=b,vv(e.bytesValue).isEqual(vv(f.bytesValue));case 7:return a.referenceValue===b.referenceValue;case 8:return c=a,d=b,vu(c.geoPointValue.latitude)===vu(d.geoPointValue.latitude)&&vu(c.geoPointValue.longitude)===vu(d.geoPointValue.longitude);case 2:return function(a,b){if("integerValue"in a&&"integerValue"in b)return vu(a.integerValue)===vu(b.integerValue);if("doubleValue"in a&&"doubleValue"in b){let c=vu(a.doubleValue),d=vu(b.doubleValue);return c===d?vA(c)===vA(d):isNaN(c)&&isNaN(d)}return!1}(a,b);case 9:return uU(a.arrayValue.values||[],b.arrayValue.values||[],vF);case 10:return function(d,e){let a=d.mapValue.fields||{},c=e.mapValue.fields||{};if(vl(a)!==vl(c))return!1;for(let b in a)if(a.hasOwnProperty(b)&&(void 0===c[b]||!vF(a[b],c[b])))return!1;return!0}(a,b);default:return uG()}}function vG(a,b){return void 0!==(a.values||[]).find(a=>vF(a,b))}function vH(a,b){if(a===b)return 0;let c=vE(a),d=vE(b);if(c!==d)return eq(c,d);switch(c){case 0:case 9007199254740991:return 0;case 1:return eq(a.booleanValue,b.booleanValue);case 2:return function(c,d){let a=vu(c.integerValue||c.doubleValue),b=vu(d.integerValue||d.doubleValue);return a<b?-1:a>b?1:a===b?0:isNaN(a)?isNaN(b)?0:-1:1}(a,b);case 3:return vI(a.timestampValue,b.timestampValue);case 4:return vI(vx(a),vx(b));case 5:return eq(a.stringValue,b.stringValue);case 6:return function(a,b){let c=vv(a),d=vv(b);return c.compareTo(d)}(a.bytesValue,b.bytesValue);case 7:return function(e,f){let b=e.split("/"),c=f.split("/");for(let a=0;a<b.length&&a<c.length;a++){let d=eq(b[a],c[a]);if(0!==d)return d}return eq(b.length,c.length)}(a.referenceValue,b.referenceValue);case 8:return function(a,b){let c=eq(vu(a.latitude),vu(b.latitude));return 0!==c?c:eq(vu(a.longitude),vu(b.longitude))}(a.geoPointValue,b.geoPointValue);case 9:return function(e,f){let b=e.values||[],c=f.values||[];for(let a=0;a<b.length&&a<c.length;++a){let d=vH(b[a],c[a]);if(d)return d}return eq(b.length,c.length)}(a.arrayValue,b.arrayValue);case 10:return function(d,e){if(d===vC.mapValue&&e===vC.mapValue)return 0;if(d===vC.mapValue)return 1;if(e===vC.mapValue)return -1;let f=d.fields||{},b=Object.keys(f),g=e.fields||{},c=Object.keys(g);b.sort(),c.sort();for(let a=0;a<b.length&&a<c.length;++a){let h=eq(b[a],c[a]);if(0!==h)return h;let i=vH(f[b[a]],g[c[a]]);if(0!==i)return i}return eq(b.length,c.length)}(a.mapValue,b.mapValue);default:throw uG()}}function vI(a,b){if("string"==typeof a&&"string"==typeof b&&a.length===b.length)return eq(a,b);let c=vt(a),d=vt(b),e=eq(c.seconds,d.seconds);return 0!==e?e:eq(c.nanos,d.nanos)}function vJ(a){return vK(a)}function vK(a){var b,c;return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(b){let a=vt(b);return`time(${a.seconds},${a.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?vv(a.bytesValue).toBase64():"referenceValue"in a?(c=a.referenceValue,aj.fromName(c).toString()):"geoPointValue"in a?`geo(${(b=a.geoPointValue).latitude},${b.longitude})`:"arrayValue"in a?function(c){let a="[",b=!0;for(let d of c.values||[])b?b=!1:a+=",",a+=vK(d);return a+"]"}(a.arrayValue):"mapValue"in a?function(b){let e=Object.keys(b.fields||{}).sort(),a="{",c=!0;for(let d of e)c?c=!1:a+=",",a+=`${d}:${vK(b.fields[d])}`;return a+"}"}(a.mapValue):uG()}function vL(a,b){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${b.path.canonicalString()}`}}function vM(a){return!!a&&"integerValue"in a}function vN(a){return!!a&&"arrayValue"in a}function vO(a){return!!a&&"nullValue"in a}function vP(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function vQ(a){return!!a&&"mapValue"in a}function vR(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){let d={mapValue:{fields:{}}};return vm(a.mapValue.fields,(a,b)=>d.mapValue.fields[a]=vR(b)),d}if(a.arrayValue){let c={arrayValue:{values:[]}};for(let b=0;b<(a.arrayValue.values||[]).length;++b)c.arrayValue.values[b]=vR(a.arrayValue.values[b]);return c}return Object.assign({},a)}function vS(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function vT(a){return"nullValue"in a?vD:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?vL(vz.empty(),aj.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:uG()}function vU(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?vL(vz.empty(),aj.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?vC:uG()}function vV(a,b){let c=vH(a.value,b.value);return 0!==c?c:a.inclusive&&!b.inclusive?-1:!a.inclusive&&b.inclusive?1:0}function vW(a,b){let c=vH(a.value,b.value);return 0!==c?c:a.inclusive&&!b.inclusive?1:!a.inclusive&&b.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An ObjectValue represents a MapValue in the Firestore Proto and offers the
 * ability to add and remove fields (via the ObjectValueBuilder).
 */ class vX{constructor(a){this.value=a}static empty(){return new vX({mapValue:{}})}field(a){if(a.isEmpty())return this.value;{let b=this.value;for(let c=0;c<a.length-1;++c)if(!vQ(b=(b.mapValue.fields||{})[a.get(c)]))return null;return(b=(b.mapValue.fields||{})[a.lastSegment()])||null}}set(a,b){this.getFieldsMap(a.popLast())[a.lastSegment()]=vR(b)}setAll(a){let b=uZ.emptyPath(),c={},d=[];a.forEach((e,a)=>{if(!b.isImmediateParentOf(a)){let f=this.getFieldsMap(b);this.applyChanges(f,c,d),c={},d=[],b=a.popLast()}e?c[a.lastSegment()]=vR(e):d.push(a.lastSegment())});let e=this.getFieldsMap(b);this.applyChanges(e,c,d)}delete(b){let a=this.field(b.popLast());vQ(a)&&a.mapValue.fields&&delete a.mapValue.fields[b.lastSegment()]}isEqual(a){return vF(this.value,a.value)}getFieldsMap(d){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let c=0;c<d.length;++c){let b=a.mapValue.fields[d.get(c)];vQ(b)&&b.mapValue.fields||(b={mapValue:{fields:{}}},a.mapValue.fields[d.get(c)]=b),a=b}return a.mapValue.fields}applyChanges(a,b,c){for(let d of(vm(b,(b,c)=>a[b]=c),c))delete a[d]}clone(){return new vX(vR(this.value))}}function vY(a){let b=[];return vm(a.fields,(e,c)=>{let a=new uZ([e]);if(vQ(c)){let d=vY(c.mapValue).fields;if(0===d.length)b.push(a);else for(let f of d)b.push(a.child(f))}else b.push(a)}),new vr(b)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents a document in Firestore with a key, version, data and whether it
 * has local mutations applied to it.
 *
 * Documents can transition between states via `convertToFoundDocument()`,
 * `convertToNoDocument()` and `convertToUnknownDocument()`. If a document does
 * not transition to one of these states even after all mutations have been
 * applied, `isValidDocument()` returns false and the document should be removed
 * from all views.
 */ class vZ{constructor(a,b,c,d,e,f){this.key=a,this.documentType=b,this.version=c,this.readTime=d,this.data=e,this.documentState=f}static newInvalidDocument(a){return new vZ(a,0,uW.min(),uW.min(),vX.empty(),0)}static newFoundDocument(a,b,c){return new vZ(a,1,b,uW.min(),c,0)}static newNoDocument(a,b){return new vZ(a,2,b,uW.min(),vX.empty(),0)}static newUnknownDocument(a,b){return new vZ(a,3,b,uW.min(),vX.empty(),2)}convertToFoundDocument(a,b){return this.version=a,this.documentType=1,this.data=b,this.documentState=0,this}convertToNoDocument(a){return this.version=a,this.documentType=2,this.data=vX.empty(),this.documentState=0,this}convertToUnknownDocument(a){return this.version=a,this.documentType=3,this.data=vX.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=uW.min(),this}setReadTime(a){return this.readTime=a,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(a){return a instanceof vZ&&this.key.isEqual(a.key)&&this.version.isEqual(a.version)&&this.documentType===a.documentType&&this.documentState===a.documentState&&this.data.isEqual(a.data)}mutableCopy(){return new vZ(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * Compares the value for field `field` in the provided documents. Throws if
 * the field does not exist in both documents.
 */ /**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // Visible for testing
class v${constructor(a,b=null,c=[],d=[],e=null,f=null,g=null){this.path=a,this.collectionGroup=b,this.orderBy=c,this.filters=d,this.limit=e,this.startAt=f,this.endAt=g,this.ht=null}}function v_(a,b=null,c=[],d=[],e=null,f=null,g=null){return new v$(a,b,c,d,e,f,g)}function v0(d){var e,c;let a=e=d;if(null===a.ht){let b=a.path.canonicalString();null!==a.collectionGroup&&(b+="|cg:"+a.collectionGroup),b+="|f:",b+=a.filters.map(b=>{var a;return(a=b).field.canonicalString()+a.op.toString()+vJ(a.value)}).join(","),b+="|ob:",b+=a.orderBy.map(b=>{var a;return(a=b).field.canonicalString()+a.dir}).join(","),c=a.limit,null==c||(b+="|l:",b+=a.limit),a.startAt&&(b+="|lb:",b+=a.startAt.inclusive?"b:":"a:",b+=a.startAt.position.map(a=>vJ(a)).join(",")),a.endAt&&(b+="|ub:",b+=a.endAt.inclusive?"a:":"b:",b+=a.endAt.position.map(a=>vJ(a)).join(",")),a.ht=b}return a.ht}function v1(a,b){var c,d;if(a.limit!==b.limit||a.orderBy.length!==b.orderBy.length)return!1;for(let e=0;e<a.orderBy.length;e++)if(!wg(a.orderBy[e],b.orderBy[e]))return!1;if(a.filters.length!==b.filters.length)return!1;for(let f=0;f<a.filters.length;f++)if(c=a.filters[f],d=b.filters[f],c.op!==d.op||!c.field.isEqual(d.field)||!vF(c.value,d.value))return!1;return a.collectionGroup===b.collectionGroup&&!!a.path.isEqual(b.path)&&!!wi(a.startAt,b.startAt)&&wi(a.endAt,b.endAt)}function v2(a){return aj.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function v3(a,b){return a.filters.filter(a=>a instanceof G&&a.field.isEqual(b))}function v4(g,i,d){let b=vD,c=!0;for(let e of v3(g,i)){let a=vD,h=!0;switch(e.op){case"<":case"<=":a=vT(e.value);break;case"==":case"in":case">=":a=e.value;break;case">":a=e.value,h=!1;break;case"!=":case"not-in":a=vD}0>vV({value:b,inclusive:c},{value:a,inclusive:h})&&(b=a,c=h)}if(null!==d){for(let f=0;f<g.orderBy.length;++f)if(g.orderBy[f].field.isEqual(i)){let j=d.position[f];0>vV({value:b,inclusive:c},{value:j,inclusive:d.inclusive})&&(b=j,c=d.inclusive);break}}return{value:b,inclusive:c}}function v5(h,i,d){let b=vC,c=!0;for(let e of v3(h,i)){let a=vC,f=!0;switch(e.op){case">=":case">":a=vU(e.value),f=!1;break;case"==":case"in":case"<=":a=e.value;break;case"<":a=e.value,f=!1;break;case"!=":case"not-in":a=vC}vW({value:b,inclusive:c},{value:a,inclusive:f})>0&&(b=a,c=f)}if(null!==d){for(let g=0;g<h.orderBy.length;++g)if(h.orderBy[g].field.isEqual(i)){let j=d.position[g];vW({value:b,inclusive:c},{value:j,inclusive:d.inclusive})>0&&(b=j,c=d.inclusive);break}}return{value:b,inclusive:c}}class G extends class{}{constructor(a,b,c){super(),this.field=a,this.op=b,this.value=c}static create(b,a,c){return b.isKeyField()?"in"===a||"not-in"===a?this.lt(b,a,c):new v6(b,a,c):"array-contains"===a?new wa(b,c):"in"===a?new wb(b,c):"not-in"===a?new wc(b,c):"array-contains-any"===a?new wd(b,c):new G(b,a,c)}static lt(a,c,b){return"in"===c?new v7(a,b):new v8(a,b)}matches(b){let a=b.data.field(this.field);return"!="===this.op?null!==a&&this.ft(vH(a,this.value)):null!==a&&vE(this.value)===vE(a)&&this.ft(vH(a,this.value))}ft(a){switch(this.op){case"<":return a<0;case"<=":return a<=0;case"==":return 0===a;case"!=":return 0!==a;case">":return a>0;case">=":return a>=0;default:return uG()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class v6 extends G{constructor(b,c,a){super(b,c,a),this.key=aj.fromName(a.referenceValue)}matches(a){let b=aj.comparator(a.key,this.key);return this.ft(b)}}class v7 extends G{constructor(b,a){super(b,"in",a),this.keys=v9("in",a)}matches(a){return this.keys.some(b=>b.isEqual(a.key))}}class v8 extends G{constructor(b,a){super(b,"not-in",a),this.keys=v9("not-in",a)}matches(a){return!this.keys.some(b=>b.isEqual(a.key))}}function v9(c,b){var a;return((null===(a=b.arrayValue)|| void 0===a?void 0:a.values)||[]).map(a=>aj.fromName(a.referenceValue))}class wa extends G{constructor(a,b){super(a,"array-contains",b)}matches(b){let a=b.data.field(this.field);return vN(a)&&vG(a.arrayValue,this.value)}}class wb extends G{constructor(a,b){super(a,"in",b)}matches(b){let a=b.data.field(this.field);return null!==a&&vG(this.value.arrayValue,a)}}class wc extends G{constructor(a,b){super(a,"not-in",b)}matches(b){if(vG(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let a=b.data.field(this.field);return null!==a&&!vG(this.value.arrayValue,a)}}class wd extends G{constructor(a,b){super(a,"array-contains-any",b)}matches(b){let a=b.data.field(this.field);return!(!vN(a)||!a.arrayValue.values)&&a.arrayValue.values.some(a=>vG(this.value.arrayValue,a))}}class we{constructor(a,b){this.position=a,this.inclusive=b}}class wf{constructor(a,b="asc"){this.field=a,this.dir=b}}function wg(a,b){return a.dir===b.dir&&a.field.isEqual(b.field)}function wh(d,g,e){let a=0;for(let b=0;b<d.position.length;b++){let c=g[b],f=d.position[b];if(a=c.field.isKeyField()?aj.comparator(aj.fromName(f.referenceValue),e.key):vH(f,e.data.field(c.field)),"desc"===c.dir&&(a*=-1),0!==a)break}return a}function wi(a,b){if(null===a)return null===b;if(null===b||a.inclusive!==b.inclusive||a.position.length!==b.position.length)return!1;for(let c=0;c<a.position.length;c++)if(!vF(a.position[c],b.position[c]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Query encapsulates all the query attributes we support in the SDK. It can
 * be run against the LocalStore, as well as be converted to a `Target` to
 * query the RemoteStore results.
 *
 * Visible for testing.
 */ class wj{constructor(a,b=null,c=[],d=[],e=null,f="F",g=null,h=null){this.path=a,this.collectionGroup=b,this.explicitOrderBy=c,this.filters=d,this.limit=e,this.limitType=f,this.startAt=g,this.endAt=h,this._t=null,this.wt=null,this.startAt,this.endAt}}function wk(a,b,c,d,e,f,g,h){return new wj(a,b,c,d,e,f,g,h)}function wl(a){return new wj(a)}function wm(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function wn(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function wo(b){for(let a of b.filters)if(a.dt())return a.field;return null}function wp(a){return null!==a.collectionGroup}function wq(e){var f;let a=f=e;if(null===a._t){a._t=[];let b=wo(a),g=wn(a);if(null!==b&&null===g)b.isKeyField()||a._t.push(new wf(b)),a._t.push(new wf(uZ.keyField(),"asc"));else{let c=!1;for(let d of a.explicitOrderBy)a._t.push(d),d.field.isKeyField()&&(c=!0);if(!c){let h=a.explicitOrderBy.length>0?a.explicitOrderBy[a.explicitOrderBy.length-1].dir:"asc";a._t.push(new wf(uZ.keyField(),h))}}}return a._t}function wr(d){var e;let a=e=d;if(!a.wt){if("F"===a.limitType)a.wt=v_(a.path,a.collectionGroup,wq(a),a.filters,a.limit,a.startAt,a.endAt);else{let b=[];for(let c of wq(a)){let f="desc"===c.dir?"asc":"desc";b.push(new wf(c.field,f))}let g=a.endAt?new we(a.endAt.position,a.endAt.inclusive):null,h=a.startAt?new we(a.startAt.position,a.startAt.inclusive):null;a.wt=v_(a.path,a.collectionGroup,b,a.filters,a.limit,g,h)}}return a.wt}function ws(a,b,c){return new wj(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),b,c,a.startAt,a.endAt)}function wt(a,b){return v1(wr(a),wr(b))&&a.limitType===b.limitType}function wu(a){return`${v0(wr(a))}|lt:${a.limitType}`}function wv(c){var a,d;let b;return`Query(target=${b=(a=wr(c)).path.canonicalString(),null!==a.collectionGroup&&(b+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(b+=`, filters: [${a.filters.map(b=>{var a;return`${(a=b).field.canonicalString()} ${a.op} ${vJ(a.value)}`}).join(", ")}]`),d=a.limit,null==d||(b+=", limit: "+a.limit),a.orderBy.length>0&&(b+=`, orderBy: [${a.orderBy.map(b=>{var a;return a=b,`${a.field.canonicalString()} (${a.dir})`}).join(", ")}]`),a.startAt&&(b+=", startAt: ",b+=a.startAt.inclusive?"b:":"a:",b+=a.startAt.position.map(a=>vJ(a)).join(",")),a.endAt&&(b+=", endAt: ",b+=a.endAt.inclusive?"a:":"b:",b+=a.endAt.position.map(a=>vJ(a)).join(",")),`Target(${b})`}; limitType=${c.limitType})`}function ww(c,b){var a,d;return b.isFoundDocument()&&function(a,c){let b=c.key.path;return null!==a.collectionGroup?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(b):aj.isDocumentKey(a.path)?a.path.isEqual(b):a.path.isImmediateParentOf(b)}(c,b)&&function(b,c){for(let a of b.explicitOrderBy)if(!a.field.isKeyField()&&null===c.data.field(a.field))return!1;return!0}(c,b)&&function(a,b){for(let c of a.filters)if(!c.matches(b))return!1;return!0}(c,b)&&(a=c,d=b,(!a.startAt||!!function(a,c,d){let b=wh(a,c,d);return a.inclusive?b<=0:b<0}(a.startAt,wq(a),d))&&(!a.endAt||!!function(a,c,d){let b=wh(a,c,d);return a.inclusive?b>=0:b>0}(a.endAt,wq(a),d)))}function wx(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function wy(a){return(e,f)=>{let b=!1;for(let c of wq(a)){let d=wz(c,e,f);if(0!==d)return d;b=b||c.field.isKeyField()}return 0}}function wz(a,b,c){let d=a.field.isKeyField()?aj.comparator(b.key,c.key):function(a,d,e){let b=d.data.field(a),c=e.data.field(a);return null!==b&&null!==c?vH(b,c):uG()}(a.field,b,c);switch(a.dir){case"asc":return d;case"desc":return -1*d;default:return uG()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Returns an DoubleValue for `value` that is encoded based the serializer's
 * `useProto3Json` setting.
 */ function wA(b,a){if(b.gt){if(isNaN(a))return{doubleValue:"NaN"};if(a===1/0)return{doubleValue:"Infinity"};if(a=== -1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vA(a)?"-0":a}}function wB(a){return{integerValue:""+a}}function wC(b,a){return vB(a)?wB(a):wA(b,a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Used to represent a field transform on a mutation. */ class al{constructor(){this._=void 0}}function wD(a,b,c){return a instanceof wG?function(a,b){let c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return b&&(c.fields.__previous_value__=b),{mapValue:c}}(c,b):a instanceof wH?wI(a,b):a instanceof wJ?wK(a,b):function(a,d){let b=wF(a,d),c=wM(b)+wM(a.yt);return vM(b)&&vM(a.yt)?wB(c):wA(a.It,c)}(a,b)}function wE(a,b,c){return a instanceof wH?wI(a,b):a instanceof wJ?wK(a,b):c}function wF(d,a){var b,c;return d instanceof wL?vM(b=a)||(c=b)&&"doubleValue"in c?a:{integerValue:0}:null}class wG extends al{}class wH extends al{constructor(a){super(),this.elements=a}}function wI(b,c){let a=wN(c);for(let d of b.elements)a.some(a=>vF(a,d))||a.push(d);return{arrayValue:{values:a}}}class wJ extends al{constructor(a){super(),this.elements=a}}function wK(b,c){let a=wN(c);for(let d of b.elements)a=a.filter(a=>!vF(a,d));return{arrayValue:{values:a}}}class wL extends al{constructor(a,b){super(),this.It=a,this.yt=b}}function wM(a){return vu(a.integerValue||a.doubleValue)}function wN(a){return vN(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** A field path and the TransformOperation to perform upon it. */ class wO{constructor(a,b){this.field=a,this.transform=b}}class wP{constructor(a,b){this.version=a,this.transformResults=b}}class wQ{constructor(a,b){this.updateTime=a,this.exists=b}static none(){return new wQ}static exists(a){return new wQ(void 0,a)}static updateTime(a){return new wQ(a)}get isNone(){return void 0===this.updateTime&& void 0===this.exists}isEqual(a){return this.exists===a.exists&&(this.updateTime?!!a.updateTime&&this.updateTime.isEqual(a.updateTime):!a.updateTime)}}function wR(a,b){return void 0!==a.updateTime?b.isFoundDocument()&&b.version.isEqual(a.updateTime):void 0===a.exists||a.exists===b.isFoundDocument()}class am{}function wS(b,c){if(!b.hasLocalMutations||c&&0===c.fields.length)return null;if(null===c)return b.isNoDocument()?new w0(b.key,wQ.none()):new wX(b.key,b.data,wQ.none());{let g=b.data,f=vX.empty(),d=new bS(uZ.comparator);for(let a of c.fields)if(!d.has(a)){let e=g.field(a);null===e&&a.length>1&&(a=a.popLast(),e=g.field(a)),null===e?f.delete(a):f.set(a,e),d=d.add(a)}return new wY(b.key,f,new vr(d.toArray()),wQ.none())}}function wT(a,b,c){a instanceof wX?function(a,b,c){let d=a.value.clone(),e=w$(a.fieldTransforms,b,c.transformResults);d.setAll(e),b.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(a,b,c):a instanceof wY?function(b,a,c){if(!wR(b.precondition,a))return void a.convertToUnknownDocument(c.version);let e=w$(b.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(wZ(b)),d.setAll(e),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(a,b,c):function(c,a,b){a.convertToNoDocument(b.version).setHasCommittedMutations()}(0,b,c)}function wU(a,c,d,e){var f,b,g;return a instanceof wX?function(b,a,d,e){if(!wR(b.precondition,a))return d;let c=b.value.clone(),f=w_(b.fieldTransforms,e,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(a,c,d,e):a instanceof wY?function(a,b,c,e){if(!wR(a.precondition,b))return c;let f=w_(a.fieldTransforms,e,b),d=b.data;return(d.setAll(wZ(a)),d.setAll(f),b.convertToFoundDocument(b.version,d).setHasLocalMutations(),null===c)?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(a=>a.field))}(a,c,d,e):(f=a,b=c,g=d,wR(f.precondition,b)?(b.convertToNoDocument(b.version).setHasLocalMutations(),null):g)}function wV(d,e){let a=null;for(let b of d.fieldTransforms){let f=e.data.field(b.field),c=wF(b.transform,f||null);null!=c&&(null===a&&(a=vX.empty()),a.set(b.field,c))}return a||null}function wW(a,b){var c,d;return a.type===b.type&& !!a.key.isEqual(b.key)&&!!a.precondition.isEqual(b.precondition)&&(c=a.fieldTransforms,d=b.fieldTransforms,!!(void 0===c&& void 0===d|| !(!c||!d)&&uU(c,d,(e,f)=>{var c,d,a,b;return c=e,d=f,c.field.isEqual(d.field)&&(a=c.transform,b=d.transform,a instanceof wH&&b instanceof wH||a instanceof wJ&&b instanceof wJ?uU(a.elements,b.elements,vF):a instanceof wL&&b instanceof wL?vF(a.yt,b.yt):a instanceof wG&&b instanceof wG)})))&&(0===a.type?a.value.isEqual(b.value):1!==a.type||a.data.isEqual(b.data)&&a.fieldMask.isEqual(b.fieldMask))}class wX extends am{constructor(a,b,c,d=[]){super(),this.key=a,this.value=b,this.precondition=c,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class wY extends am{constructor(a,b,c,d,e=[]){super(),this.key=a,this.data=b,this.fieldMask=c,this.precondition=d,this.fieldTransforms=e,this.type=1}getFieldMask(){return this.fieldMask}}function wZ(a){let b=new Map;return a.fieldMask.fields.forEach(c=>{if(!c.isEmpty()){let d=a.data.field(c);b.set(c,d)}}),b}function w$(d,f,b){var g;let e=new Map;(g=d.length===b.length)||uG();for(let a=0;a<b.length;a++){let c=d[a],h=c.transform,i=f.data.field(c.field);e.set(c.field,wE(h,i,b[a]))}return e}function w_(c,d,e){let b=new Map;for(let a of c){let f=a.transform,g=e.data.field(a.field);b.set(a.field,wD(f,g,d))}return b}class w0 extends am{constructor(a,b){super(),this.key=a,this.precondition=b,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w1 extends am{constructor(a,b){super(),this.key=a,this.precondition=b,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class w2{constructor(a){this.count=a}}function w3(a){switch(a){default:return uG();case uH.CANCELLED:case uH.UNKNOWN:case uH.DEADLINE_EXCEEDED:case uH.RESOURCE_EXHAUSTED:case uH.INTERNAL:case uH.UNAVAILABLE:case uH.UNAUTHENTICATED:return!1;case uH.INVALID_ARGUMENT:case uH.NOT_FOUND:case uH.ALREADY_EXISTS:case uH.PERMISSION_DENIED:case uH.FAILED_PRECONDITION:case uH.ABORTED:case uH.OUT_OF_RANGE:case uH.UNIMPLEMENTED:case uH.DATA_LOSS:return!0}}function w4(a){if(void 0===a)return uD("GRPC error has no .code"),uH.UNKNOWN;switch(a){case aR.OK:return uH.OK;case aR.CANCELLED:return uH.CANCELLED;case aR.UNKNOWN:return uH.UNKNOWN;case aR.DEADLINE_EXCEEDED:return uH.DEADLINE_EXCEEDED;case aR.RESOURCE_EXHAUSTED:return uH.RESOURCE_EXHAUSTED;case aR.INTERNAL:return uH.INTERNAL;case aR.UNAVAILABLE:return uH.UNAVAILABLE;case aR.UNAUTHENTICATED:return uH.UNAUTHENTICATED;case aR.INVALID_ARGUMENT:return uH.INVALID_ARGUMENT;case aR.NOT_FOUND:return uH.NOT_FOUND;case aR.ALREADY_EXISTS:return uH.ALREADY_EXISTS;case aR.PERMISSION_DENIED:return uH.PERMISSION_DENIED;case aR.FAILED_PRECONDITION:return uH.FAILED_PRECONDITION;case aR.ABORTED:return uH.ABORTED;case aR.OUT_OF_RANGE:return uH.OUT_OF_RANGE;case aR.UNIMPLEMENTED:return uH.UNIMPLEMENTED;case aR.DATA_LOSS:return uH.DATA_LOSS;default:return uG()}}(c=aR||(aR={}))[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A map implementation that uses objects as keys. Objects must have an
 * associated equals function and must be immutable. Entries in the map are
 * stored together with the key being produced from the mapKeyFn. This map
 * automatically handles collisions of keys.
 */ class w5{constructor(a,b){this.mapKeyFn=a,this.equalsFn=b,this.inner={},this.innerSize=0}get(a){let c=this.mapKeyFn(a),b=this.inner[c];if(void 0!==b){for(let[d,e]of b)if(this.equalsFn(d,a))return e}}has(a){return void 0!==this.get(a)}set(a,d){let e=this.mapKeyFn(a),b=this.inner[e];if(void 0===b)return this.inner[e]=[[a,d]],void this.innerSize++;for(let c=0;c<b.length;c++)if(this.equalsFn(b[c][0],a))return void(b[c]=[a,d]);b.push([a,d]),this.innerSize++}delete(c){let d=this.mapKeyFn(c),a=this.inner[d];if(void 0===a)return!1;for(let b=0;b<a.length;b++)if(this.equalsFn(a[b][0],c))return 1===a.length?delete this.inner[d]:a.splice(b,1),this.innerSize--,!0;return!1}forEach(a){vm(this.inner,(e,b)=>{for(let[c,d]of b)a(c,d)})}isEmpty(){return vn(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let w6=new aP(aj.comparator),w7=new aP(aj.comparator);function w8(...c){let a=w7;for(let b of c)a=a.insert(b.key,b);return a}function w9(a){let b=w7;return a.forEach((a,c)=>b=b.insert(a,c.overlayedDocument)),b}function xa(){return xc()}function xb(){return xc()}function xc(){return new w5(a=>a.toString(),(a,b)=>a.isEqual(b))}let xd=new aP(aj.comparator),xe=new bS(aj.comparator);function xf(...b){let a=xe;for(let c of b)a=a.add(c);return a}let xg=new bS(eq);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An event from the RemoteStore. It is split into targetChanges (changes to the
 * state or the set of documents in our watched targets) and documentUpdates
 * (changes to the actual documents).
 */ class xh{constructor(a,b,c,d,e){this.snapshotVersion=a,this.targetChanges=b,this.targetMismatches=c,this.documentUpdates=d,this.resolvedLimboDocuments=e}static createSynthesizedRemoteEventForCurrentChange(a,c,d){let b=new Map;return b.set(a,xi.createSynthesizedTargetChangeForCurrentChange(a,c,d)),new xh(uW.min(),b,xg,w6,xf())}}class xi{constructor(a,b,c,d,e){this.resumeToken=a,this.current=b,this.addedDocuments=c,this.modifiedDocuments=d,this.removedDocuments=e}static createSynthesizedTargetChangeForCurrentChange(c,a,b){return new xi(b,a,xf(),xf(),xf())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents a changed document and a list of target ids to which this change
 * applies.
 *
 * If document has been deleted NoDocument will be provided.
 */ class xj{constructor(a,b,c,d){this.Tt=a,this.removedTargetIds=b,this.key=c,this.Et=d}}class xk{constructor(a,b){this.targetId=a,this.At=b}}class xl{constructor(a,b,c=bT.EMPTY_BYTE_STRING,d=null){this.state=a,this.targetIds=b,this.resumeToken=c,this.cause=d}}class xm{constructor(){this.Rt=0,this.bt=xp(),this.Pt=bT.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(a){a.approximateByteSize()>0&&(this.Vt=!0,this.Pt=a)}xt(){let a=xf(),b=xf(),c=xf();return this.bt.forEach((d,e)=>{switch(e){case 0:a=a.add(d);break;case 2:b=b.add(d);break;case 1:c=c.add(d);break;default:uG()}}),new xi(this.Pt,this.vt,a,b,c)}Nt(){this.Vt=!1,this.bt=xp()}kt(a,b){this.Vt=!0,this.bt=this.bt.insert(a,b)}Ot(a){this.Vt=!0,this.bt=this.bt.remove(a)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class xn{constructor(a){this.Bt=a,this.Lt=new Map,this.Ut=w6,this.qt=xo(),this.Kt=new bS(eq)}Gt(a){for(let b of a.Tt)a.Et&&a.Et.isFoundDocument()?this.Qt(b,a.Et):this.jt(b,a.key,a.Et);for(let c of a.removedTargetIds)this.jt(c,a.key,a.Et)}Wt(a){this.forEachTarget(a,c=>{let b=this.zt(c);switch(a.state){case 0:this.Ht(c)&&b.Ct(a.resumeToken);break;case 1:b.Ft(),b.St||b.Nt(),b.Ct(a.resumeToken);break;case 2:b.Ft(),b.St||this.removeTarget(c);break;case 3:this.Ht(c)&&(b.$t(),b.Ct(a.resumeToken));break;case 4:this.Ht(c)&&(this.Jt(c),b.Ct(a.resumeToken));break;default:uG()}})}forEachTarget(a,b){a.targetIds.length>0?a.targetIds.forEach(b):this.Lt.forEach((c,a)=>{this.Ht(a)&&b(a)})}Yt(c){let a=c.targetId,b=c.At.count,d=this.Xt(a);if(d){let e=d.target;if(v2(e)){if(0===b){let f=new aj(e.path);this.jt(a,f,vZ.newNoDocument(f,uW.min()))}else{var g;(g=1===b)||uG()}}else this.Zt(a)!==b&&(this.Jt(a),this.Kt=this.Kt.add(a))}}te(a){let b=new Map;this.Lt.forEach((c,d)=>{let f=this.Xt(d);if(f){if(c.current&&v2(f.target)){let e=new aj(f.target.path);null!==this.Ut.get(e)||this.ee(d,e)||this.jt(d,e,vZ.newNoDocument(e,a))}c.Dt&&(b.set(d,c.xt()),c.Nt())}});let c=xf();this.qt.forEach((a,b)=>{let d=!0;b.forEachWhile(b=>{let a=this.Xt(b);return!a||2===a.purpose||(d=!1,!1)}),d&&(c=c.add(a))}),this.Ut.forEach((c,b)=>b.setReadTime(a));let d=new xh(a,b,this.Kt,this.Ut,c);return this.Ut=w6,this.qt=xo(),this.Kt=new bS(eq),d}Qt(b,a){if(!this.Ht(b))return;let c=this.ee(b,a.key)?2:0;this.zt(b).kt(a.key,c),this.Ut=this.Ut.insert(a.key,a),this.qt=this.qt.insert(a.key,this.ne(a.key).add(b))}jt(b,a,c){if(!this.Ht(b))return;let d=this.zt(b);this.ee(b,a)?d.kt(a,1):d.Ot(a),this.qt=this.qt.insert(a,this.ne(a).delete(b)),c&&(this.Ut=this.Ut.insert(a,c))}removeTarget(a){this.Lt.delete(a)}Zt(a){let b=this.zt(a).xt();return this.Bt.getRemoteKeysForTarget(a).size+b.addedDocuments.size-b.removedDocuments.size}Mt(a){this.zt(a).Mt()}zt(b){let a=this.Lt.get(b);return a||(a=new xm,this.Lt.set(b,a)),a}ne(b){let a=this.qt.get(b);return a||(a=new bS(eq),this.qt=this.qt.insert(b,a)),a}Ht(a){let b=null!==this.Xt(a);return b||uC("WatchChangeAggregator","Detected inactive target",a),b}Xt(a){let b=this.Lt.get(a);return b&&b.St?null:this.Bt.se(a)}Jt(a){this.Lt.set(a,new xm),this.Bt.getRemoteKeysForTarget(a).forEach(b=>{this.jt(a,b,null)})}ee(a,b){return this.Bt.getRemoteKeysForTarget(a).has(b)}}function xo(){return new aP(aj.comparator)}function xp(){return new aP(aj.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let xq={asc:"ASCENDING",desc:"DESCENDING"},xr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class xs{constructor(a,b){this.databaseId=a,this.gt=b}}function xt(b,a){return b.gt?`${new Date(1e3*a.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+a.nanoseconds).slice(-9)}Z`:{seconds:""+a.seconds,nanos:a.nanoseconds}}function xu(b,a){return b.gt?a.toBase64():a.toUint8Array()}function xv(a){var b;return!a&&uG(),uW.fromTimestamp(function(b){let a=vt(b);return new uV(a.seconds,a.nanos)}(a))}function xw(b,c){var a;return(a=b,new uX(["projects",a.projectId,"databases",a.database])).child("documents").child(c).canonicalString()}function xx(b){var c;let a=uX.fromString(b);return xT(a)||uG(),a}function xy(a,b){return xw(a.databaseId,b.path)}function xz(b,c){let a=xx(c);if(a.get(1)!==b.databaseId.projectId)throw new uI(uH.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+b.databaseId.projectId);if(a.get(3)!==b.databaseId.database)throw new uI(uH.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+b.databaseId.database);return new aj(xD(a))}function xA(a,b){return xw(a.databaseId,b)}function xB(b){let a=xx(b);return 4===a.length?uX.emptyPath():xD(a)}function xC(a){return new uX(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function xD(a){var b;return a.length>4&&"documents"===a.get(4)||uG(),a.popFirst(5)}function xE(a,b,c){return{name:xy(a,b),fields:c.value.mapValue.fields}}function xF(d,a,c){let e=xz(d,a.name),f=xv(a.updateTime),g=new vX({mapValue:{fields:a.fields}}),b=vZ.newFoundDocument(e,f,g);return c&&b.setHasCommittedMutations(),c?b.setHasCommittedMutations():b}function xG(c,a){var e,d,f,g;let b;if(a instanceof wX)b={update:xE(c,a.key,a.value)};else if(a instanceof w0)b={delete:xy(c,a.key)};else if(a instanceof wY)b={update:xE(c,a.key,a.data),updateMask:xS(a.fieldMask)};else{if(!(a instanceof w1))return uG();b={verify:xy(c,a.key)}}return a.fieldTransforms.length>0&&(b.updateTransforms=a.fieldTransforms.map(a=>(function(c,b){let a=b.transform;if(a instanceof wG)return{fieldPath:b.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wH)return{fieldPath:b.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wJ)return{fieldPath:b.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wL)return{fieldPath:b.field.canonicalString(),increment:a.yt};throw uG()})(0,a))),a.precondition.isNone||(b.currentDocument=(e=c,void 0!==(d=a.precondition).updateTime?{updateTime:(f=e,xt(f,(g=d.updateTime).toTimestamp()))}:void 0!==d.exists?{exists:d.exists}:uG())),b}function xH(d,a){var b;let c=a.currentDocument?void 0!==(b=a.currentDocument).updateTime?wQ.updateTime(xv(b.updateTime)):void 0!==b.exists?wQ.exists(b.exists):wQ.none():wQ.none(),e=a.updateTransforms?a.updateTransforms.map(a=>(function(c,a){let b=null;if("setToServerValue"in a){var g;"REQUEST_TIME"===a.setToServerValue||uG(),b=new wG}else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];b=new wH(d)}else if("removeAllFromArray"in a){let e=a.removeAllFromArray.values||[];b=new wJ(e)}else"increment"in a?b=new wL(c,a.increment):uG();let f=uZ.fromServerFormat(a.fieldPath);return new wO(f,b)})(d,a)):[];if(a.update){a.update.name;let f=xz(d,a.update.name),g=new vX({mapValue:{fields:a.update.fields}});if(a.updateMask){let h=function(a){let b=a.fieldPaths||[];return new vr(b.map(a=>uZ.fromServerFormat(a)))}(a.updateMask);return new wY(f,g,h,c,e)}return new wX(f,g,c,e)}if(a.delete){let i=xz(d,a.delete);return new w0(i,c)}if(a.verify){let j=xz(d,a.verify);return new w1(j,c)}return uG()}function xI(a,b){return{documents:[xA(a,b.path)]}}function xJ(d,a){var f,g,c,l,h;let b={structuredQuery:{}},e=a.path;null!==a.collectionGroup?(b.parent=xA(d,e),b.structuredQuery.from=[{collectionId:a.collectionGroup,allDescendants:!0}]):(b.parent=xA(d,e.popLast()),b.structuredQuery.from=[{collectionId:e.lastSegment()}]);let i=function(b){if(0===b.length)return;let a=b.map(a=>(function(a){if("=="===a.op){if(vP(a.value))return{unaryFilter:{field:xO(a.field),op:"IS_NAN"}};if(vO(a.value))return{unaryFilter:{field:xO(a.field),op:"IS_NULL"}}}else if("!="===a.op){if(vP(a.value))return{unaryFilter:{field:xO(a.field),op:"IS_NOT_NAN"}};if(vO(a.value))return{unaryFilter:{field:xO(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xO(a.field),op:xN(a.op),value:a.value}}})(a));return 1===a.length?a[0]:{compositeFilter:{op:"AND",filters:a}}}(a.filters);i&&(b.structuredQuery.where=i);let j=function(a){if(0!==a.length)return a.map(b=>{var a;return{field:xO((a=b).field),direction:xM(a.dir)}})}(a.orderBy);j&&(b.structuredQuery.orderBy=j);let k=(g=d,c=a.limit,g.gt||null==(l=c)?c:{value:c});return null!==k&&(b.structuredQuery.limit=k),a.startAt&&(b.structuredQuery.startAt={before:(f=a.startAt).inclusive,values:f.position}),a.endAt&&(b.structuredQuery.endAt={before:!(h=a.endAt).inclusive,values:h.position}),b}function xK(e){var n,b,o;let c=xB(e.parent),a=e.structuredQuery,f=a.from?a.from.length:0,g=null;if(f>0){(n=1===f)||uG();let d=a.from[0];d.allDescendants?g=d.collectionId:c=c.child(d.collectionId)}let h=[];a.where&&(h=xL(a.where));let i=[];a.orderBy&&(i=a.orderBy.map(b=>{var a;return a=b,new wf(xP(a.field),function(a){switch(a){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(a.direction))}));let j=null,k;a.limit&&(j=null==(o=k="object"==typeof(b=a.limit)?b.value:b)?null:k);let l=null;a.startAt&&(l=function(a){let b=!!a.before,c=a.values||[];return new we(c,b)}(a.startAt));let m=null;return a.endAt&&(m=function(a){let b=!a.before,c=a.values||[];return new we(c,b)}(a.endAt)),wk(c,g,i,h,j,"F",l,m)}function xL(a){return a?void 0!==a.unaryFilter?[xR(a)]:void 0!==a.fieldFilter?[xQ(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(a=>xL(a)).reduce((a,b)=>a.concat(b)):uG():[]}function xM(a){return xq[a]}function xN(a){return xr[a]}function xO(a){return{fieldPath:a.canonicalString()}}function xP(a){return uZ.fromServerFormat(a.fieldPath)}function xQ(a){return G.create(xP(a.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return uG()}}(a.fieldFilter.op),a.fieldFilter.value)}function xR(a){switch(a.unaryFilter.op){case"IS_NAN":let b=xP(a.unaryFilter.field);return G.create(b,"==",{doubleValue:NaN});case"IS_NULL":let c=xP(a.unaryFilter.field);return G.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let d=xP(a.unaryFilter.field);return G.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let e=xP(a.unaryFilter.field);return G.create(e,"!=",{nullValue:"NULL_VALUE"});default:return uG()}}function xS(a){let b=[];return a.fields.forEach(a=>b.push(a.canonicalString())),{fieldPaths:b}}function xT(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Encodes a resource path into a IndexedDb-compatible string form.
 */ function xU(c){var d,e;let a="";for(let b=0;b<c.length;b++){a.length>0&&(a=(d=a,d+"\x01\x01")),a=xV(c.get(b),a)}return e=a,e+"\x01\x01"}function xV(c,e){let a=e,f=c.length;for(let b=0;b<f;b++){let d=c.charAt(b);switch(d){case"\0":a+="\x01\x10";break;case"\x01":a+="\x01\x11";break;default:a+=d}}return a}function xW(a){var j,k;let e=a.length;if(e>=2||uG(),2===e)return"\x01"===a.charAt(0)&&"\x01"===a.charAt(1)||uG(),uX.emptyPath();let i=e-2,g=[],b="";for(let d=0;d<e;){let c=a.indexOf("\x01",d);switch((c<0||c>i)&&uG(),a.charAt(c+1)){case"\x01":let h=a.substring(d,c),f;0===b.length?f=h:(b+=h,f=b,b=""),g.push(f);break;case"\x10":b+=a.substring(d,c),b+="\0";break;case"\x11":b+=a.substring(d,c+1);break;default:uG()}d=c+2}return new uX(g)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Name of the IndexedDb object store.
 *
 * Note that the name 'owner' is chosen to ensure backwards compatibility with
 * older clients that only supported single locked access to the persistence
 * layer.
 */ /**
 * Creates a [userId, encodedPath] key for use in the DbDocumentMutations
 * index to iterate over all at document mutations for a given path or lower.
 */ function xX(a,b){return[a,xU(b)]}function xY(a,b,c){return[a,xU(b),c]}let xZ={},eu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],x$=[...eu,"documentOverlays"],ev=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ew=ev,x_=[...ew,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class x0 extends null{constructor(a,b){super(),this.ie=a,this.currentSequenceNumber=b}}function x1(a,b){var c;let d=c=a;return vb.M(d.ie,b)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A batch of mutations that will be sent as one unit to the backend.
 */ class x2{constructor(a,b,c,d){this.batchId=a,this.localWriteTime=b,this.baseMutations=c,this.mutations=d}applyToRemoteDocument(b,d){let e=d.mutationResults;for(let a=0;a<this.mutations.length;a++){let c=this.mutations[a];c.key.isEqual(b.key)&&wT(c,b,e[a])}}applyToLocalView(b,a){for(let c of this.baseMutations)c.key.isEqual(b.key)&&(a=wU(c,b,a,this.localWriteTime));for(let d of this.mutations)d.key.isEqual(b.key)&&(a=wU(d,b,a,this.localWriteTime));return a}applyToLocalDocumentSet(b,c){let a=xb();return this.mutations.forEach(e=>{let g=b.get(e.key),d=g.overlayedDocument,f=this.applyToLocalView(d,g.mutatedFields);f=c.has(e.key)?null:f;let h=wS(d,f);null!==h&&a.set(e.key,h),d.isValidDocument()||d.convertToNoDocument(uW.min())}),a}keys(){return this.mutations.reduce((a,b)=>a.add(b.key),xf())}isEqual(a){return this.batchId===a.batchId&&uU(this.mutations,a.mutations,(a,b)=>wW(a,b))&&uU(this.baseMutations,a.baseMutations,(a,b)=>wW(a,b))}}class x3{constructor(a,b,c,d){this.batch=a,this.commitVersion=b,this.mutationResults=c,this.docVersions=d}static from(b,f,c){var g;(g=b.mutations.length===c.length)||uG();let d=xd,e=b.mutations;for(let a=0;a<e.length;a++)d=d.insert(e[a].key,c[a].version);return new x3(b,f,c,d)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Representation of an overlay computed by Firestore.
 *
 * Holds information about a mutation and the largest batch id in Firestore when
 * the mutation was created.
 */ class x4{constructor(a,b){this.largestBatchId=a,this.mutation=b}getKey(){return this.mutation.key}isEqual(a){return null!==a&&this.mutation===a.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An immutable set of metadata that the local store tracks for each target.
 */ class x5{constructor(a,b,c,d,e=uW.min(),f=uW.min(),g=bT.EMPTY_BYTE_STRING){this.target=a,this.targetId=b,this.purpose=c,this.sequenceNumber=d,this.snapshotVersion=e,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g}withSequenceNumber(a){return new x5(this.target,this.targetId,this.purpose,a,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(a,b){return new x5(this.target,this.targetId,this.purpose,this.sequenceNumber,b,this.lastLimboFreeSnapshotVersion,a)}withLastLimboFreeSnapshotVersion(a){return new x5(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,a,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Serializer for values stored in the LocalStore. */ class x6{constructor(a){this.re=a}}function x7(f,a){let b=a.key,c={prefixPath:b.getCollectionPath().popLast().toArray(),collectionGroup:b.collectionGroup,documentId:b.path.lastSegment(),readTime:x8(a.readTime),hasCommittedMutations:a.hasCommittedMutations};if(a.isFoundDocument()){var d,e;c.document=(d=f.re,{name:xy(d,(e=a).key),fields:e.data.value.mapValue.fields,updateTime:xt(d,e.version.toTimestamp())})}else if(a.isNoDocument())c.noDocument={path:b.path.toArray(),readTime:x9(a.version)};else{if(!a.isUnknownDocument())return uG();c.unknownDocument={path:b.path.toArray(),version:x9(a.version)}}return c}function x8(b){let a=b.toTimestamp();return[a.seconds,a.nanoseconds]}function x9(b){let a=b.toTimestamp();return{seconds:a.seconds,nanoseconds:a.nanoseconds}}function ya(a){let b=new uV(a.seconds,a.nanoseconds);return uW.fromTimestamp(b)}function yb(h,a){let c=(a.baseMutations||[]).map(a=>xH(h.re,a));for(let b=0;b<a.mutations.length-1;++b){let d=a.mutations[b];if(b+1<a.mutations.length&& void 0!==a.mutations[b+1].transform){let e=a.mutations[b+1];d.updateTransforms=e.transform.fieldTransforms,a.mutations.splice(b+1,1),++b}}let f=a.mutations.map(a=>xH(h.re,a)),g=uV.fromMillis(a.localWriteTimeMs);return new x2(a.batchId,g,c,f)}function yc(a){var c,g,d;let e=ya(a.readTime),f=void 0!==a.lastLimboFreeSnapshotVersion?ya(a.lastLimboFreeSnapshotVersion):uW.min(),b;return void 0!==a.query.documents?(1===(c=a.query).documents.length||uG(),b=wr(wl(xB(c.documents[0])))):b=wr(xK(d=a.query)),new x5(b,a.targetId,0,a.lastListenSequenceNumber,e,f,bT.fromBase64String(a.resumeToken))}function yd(b,a){let d=x9(a.snapshotVersion),e=x9(a.lastLimboFreeSnapshotVersion),c;c=v2(a.target)?xI(b.re,a.target):xJ(b.re,a.target);let f=a.resumeToken.toBase64();return{targetId:a.targetId,canonicalId:v0(a.target),readTime:d,resumeToken:f,lastListenSequenceNumber:a.sequenceNumber,lastLimboFreeSnapshotVersion:e,query:c}}function ye(a){let b=xK({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?ws(b,b.limit,"L"):b}function yf(b,a){return new x4(a.largestBatchId,xH(b.re,a.overlayMutation))}function yg(b,a){let c=a.path.lastSegment();return[b,xU(a.path.popLast()),c]}function yh(b,c,d,a){return{indexId:b,uid:c.uid||"",sequenceNumber:d,readTime:x9(a.readTime),documentKey:xU(a.documentKey.path),largestBatchId:a.largestBatchId}}function yi(a){return x1(a,"bundles")}function yj(a){return x1(a,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Implementation of DocumentOverlayCache using IndexedDb.
 */ class yk{constructor(a,b){this.It=a,this.userId=b}static oe(a,b){let c=b.uid||"";return new yk(a,c)}getOverlay(a,b){return yl(a).get(yg(this.userId,b)).next(a=>a?yf(this.It,a):null)}getOverlays(b,a){let c=xa();return u9.forEach(a,a=>this.getOverlay(b,a).next(b=>{null!==b&&c.set(a,b)})).next(()=>c)}saveOverlays(c,d,a){let b=[];return a.forEach((f,a)=>{let e=new x4(d,a);b.push(this.ue(c,e))}),u9.waitFor(b)}removeOverlaysForBatchId(d,a,e){let b=new Set;a.forEach(a=>b.add(xU(a.getCollectionPath())));let c=[];return b.forEach(a=>{let b=IDBKeyRange.bound([this.userId,a,e],[this.userId,a,e+1],!1,!0);c.push(yl(d).Y("collectionPathOverlayIndex",b))}),u9.waitFor(c)}getOverlaysForCollection(b,c,d){let f=xa(),a=xU(c),e=IDBKeyRange.bound([this.userId,a,d],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yl(b).W("collectionPathOverlayIndex",e).next(b=>{for(let c of b){let a=yf(this.It,c);f.set(a.getKey(),a)}return f})}getOverlaysForCollectionGroup(b,a,c,e){let f=xa(),g,d=IDBKeyRange.bound([this.userId,a,c],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yl(b).Z({index:"collectionGroupOverlayIndex",range:d},(d,b,c)=>{let a=yf(this.It,b);f.size()<e||a.largestBatchId===g?(f.set(a.getKey(),a),g=a.largestBatchId):c.done()}).next(()=>f)}ue(a,b){return yl(a).put(function(c,b,a){let[f,d,e]=yg(b,a.mutation.key);return{userId:b,collectionPath:d,documentId:e,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:xG(c.re,a.mutation)}}(this.It,this.userId,b))}}function yl(a){return x1(a,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // Note: This code is copied from the backend. Code that is not used by
// Firestore was removed.
/** Firestore index value writer.  */ class bU{constructor(){}ce(b,a){this.ae(b,a),a.he()}ae(b,a){if("nullValue"in b)this.le(a,5);else if("booleanValue"in b)this.le(a,10),a.fe(b.booleanValue?1:0);else if("integerValue"in b)this.le(a,15),a.fe(vu(b.integerValue));else if("doubleValue"in b){let d=vu(b.doubleValue);isNaN(d)?this.le(a,13):(this.le(a,15),vA(d)?a.fe(0):a.fe(d))}else if("timestampValue"in b){let c=b.timestampValue;this.le(a,20),"string"==typeof c?a.de(c):(a.de(`${c.seconds||""}`),a.fe(c.nanos||0))}else if("stringValue"in b)this._e(b.stringValue,a),this.we(a);else if("bytesValue"in b)this.le(a,30),a.me(vv(b.bytesValue)),this.we(a);else if("referenceValue"in b)this.ge(b.referenceValue,a);else if("geoPointValue"in b){let e=b.geoPointValue;this.le(a,45),a.fe(e.latitude||0),a.fe(e.longitude||0)}else"mapValue"in b?vS(b)?this.le(a,Number.MAX_SAFE_INTEGER):(this.ye(b.mapValue,a),this.we(a)):"arrayValue"in b?(this.pe(b.arrayValue,a),this.we(a)):uG()}_e(b,a){this.le(a,25),this.Ie(b,a)}Ie(a,b){b.de(a)}ye(d,a){let b=d.fields||{};for(let c of(this.le(a,55),Object.keys(b)))this._e(c,a),this.ae(b[c],a)}pe(b,a){let c=b.values||[];for(let d of(this.le(a,50),c))this.ae(d,a)}ge(a,b){this.le(b,37),aj.fromName(a).path.forEach(a=>{this.le(b,60),this.Ie(a,b)})}le(a,b){a.fe(b)}we(a){a.fe(2)}}function ym(a){if(0===a)return 8;let b=0;return a>>4==0&&(b+=4,a<<=4),a>>6==0&&(b+=2,a<<=2),a>>7==0&&(b+=1),b}function yn(a){let b=64-function(d){let b=0;for(let a=0;a<8;++a){let c=ym(255&d[a]);if(b+=c,8!==c)break}return b}(a);return Math.ceil(b/8)}bU.Te=new bU;class yo{constructor(){this.Be=new class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(c){let b=c[Symbol.iterator](),a=b.next();for(;!a.done;)this.Ae(a.value),a=b.next();this.Re()}be(c){let b=c[Symbol.iterator](),a=b.next();for(;!a.done;)this.Pe(a.value),a=b.next();this.ve()}Ve(d){for(let b of d){let a=b.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(b<"\ud800"||"\udbff"<b)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{let c=b.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}Se(d){for(let b of d){let a=b.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(b<"\ud800"||"\udbff"<b)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{let c=b.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}this.ve()}De(d){let a=this.Ce(d),b=yn(a);this.xe(1+b),this.buffer[this.position++]=255&b;for(let c=a.length-b;c<a.length;++c)this.buffer[this.position++]=255&a[c]}Ne(d){let a=this.Ce(d),b=yn(a);this.xe(1+b),this.buffer[this.position++]=~(255&b);for(let c=a.length-b;c<a.length;++c)this.buffer[this.position++]=~(255&a[c])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(a){this.xe(a.length),this.buffer.set(a,this.position),this.position+=a.length}$e(){return this.buffer.slice(0,this.position)}Ce(d){let a=function(b){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,b,!1),new Uint8Array(a.buffer)}(d),c=0!=(128&a[0]);a[0]^=c?255:128;for(let b=1;b<a.length;++b)a[b]^=c?255:0;return a}Ae(b){let a=255&b;0===a?(this.Oe(0),this.Oe(255)):255===a?(this.Oe(255),this.Oe(0)):this.Oe(a)}Pe(a){let b=255&a;0===b?(this.Fe(0),this.Fe(255)):255===b?(this.Fe(255),this.Fe(0)):this.Fe(a)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(a){this.xe(1),this.buffer[this.position++]=a}Fe(a){this.xe(1),this.buffer[this.position++]=~a}xe(d){let a=d+this.position;if(a<=this.buffer.length)return;let b=2*this.buffer.length;b<a&&(b=a);let c=new Uint8Array(b);c.set(this.buffer),this.buffer=c}},this.Le=new class{constructor(a){this.Be=a}me(a){this.Be.Ee(a)}de(a){this.Be.Ve(a)}fe(a){this.Be.De(a)}he(){this.Be.ke()}}(this.Be),this.Ue=new class{constructor(a){this.Be=a}me(a){this.Be.be(a)}de(a){this.Be.Se(a)}fe(a){this.Be.Ne(a)}he(){this.Be.Me()}}(this.Be)}seed(a){this.Be.seed(a)}qe(a){return 0===a?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Represents an index entry saved by the SDK in persisted storage. */ class yp{constructor(a,b,c,d){this.indexId=a,this.documentKey=b,this.arrayValue=c,this.directionalValue=d}Ke(){let a=this.directionalValue.length,c=0===a||255===this.directionalValue[a-1]?a+1:a,b=new Uint8Array(c);return b.set(this.directionalValue,0),c!==a?b.set([0],this.directionalValue.length):++b[b.length-1],new yp(this.indexId,this.documentKey,this.arrayValue,b)}}function yq(b,c){let a=b.indexId-c.indexId;return 0!==a?a:0!==(a=yr(b.arrayValue,c.arrayValue))?a:0!==(a=yr(b.directionalValue,c.directionalValue))?a:aj.comparator(b.documentKey,c.documentKey)}function yr(b,c){for(let a=0;a<b.length&&a<c.length;++a){let d=b[a]-c[a];if(0!==d)return d}return b.length-c.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A light query planner for Firestore.
 *
 * This class matches a `FieldIndex` against a Firestore Query `Target`. It
 * determines whether a given index can be used to serve the specified target.
 *
 * The following table showcases some possible index configurations:
 *
 * Query                                               | Index
 * -----------------------------------------------------------------------------
 * where('a', '==', 'a').where('b', '==', 'b')         | a ASC, b DESC
 * where('a', '==', 'a').where('b', '==', 'b')         | a ASC
 * where('a', '==', 'a').where('b', '==', 'b')         | b DESC
 * where('a', '>=', 'a').orderBy('a')                  | a ASC
 * where('a', '>=', 'a').orderBy('a', 'desc')          | a DESC
 * where('a', '>=', 'a').orderBy('a').orderBy('b')     | a ASC, b ASC
 * where('a', '>=', 'a').orderBy('a').orderBy('b')     | a ASC
 * where('a', 'array-contains', 'a').orderBy('b')      | a CONTAINS, b ASCENDING
 * where('a', 'array-contains', 'a').orderBy('b')      | a CONTAINS
 */ class ys{constructor(a){for(let c of(this.collectionId=null!=a.collectionGroup?a.collectionGroup:a.path.lastSegment(),this.Ge=a.orderBy,this.Qe=[],a.filters)){let b=c;b.dt()?this.je=b:this.Qe.push(b)}}We(d){let e=u$(d);if(void 0!==e&&!this.ze(e))return!1;let b=u_(d),a=0,c=0;for(;a<b.length&&this.ze(b[a]);++a);if(a===b.length)return!0;if(void 0!==this.je){let f=b[a];if(!this.He(this.je,f)||!this.Je(this.Ge[c++],f))return!1;++a}for(;a<b.length;++a){let g=b[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],g))return!1}return!0}ze(a){for(let b of this.Qe)if(this.He(b,a))return!0;return!1}He(a,b){if(void 0===a||!a.field.isEqual(b.fieldPath))return!1;let c="array-contains"===a.op||"array-contains-any"===a.op;return 2===b.kind===c}Je(a,b){return!!a.field.isEqual(b.fieldPath)&&(0===b.kind&&"asc"===a.dir||1===b.kind&&"desc"===a.dir)}}class yt{constructor(){this.index={}}add(a){let b=a.lastSegment(),c=a.popLast(),d=this.index[b]||new bS(uX.comparator),e=!d.has(c);return this.index[b]=d.add(c),e}has(a){let c=a.lastSegment(),d=a.popLast(),b=this.index[c];return b&&b.has(d)}getEntries(a){return(this.index[a]||new bS(uX.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let yu=new Uint8Array(0);class yv{constructor(a,b){this.user=a,this.databaseId=b,this.Xe=new yt,this.Ze=new w5(a=>v0(a),(a,b)=>v1(a,b)),this.uid=a.uid||""}addToCollectionParentIndex(b,a){if(!this.Xe.has(a)){let c=a.lastSegment(),d=a.popLast();b.addOnCommittedListener(()=>{this.Xe.add(a)});let e={collectionId:c,parent:xU(d)};return yw(b).put(e)}return u9.resolve()}getCollectionParents(b,a){var c;let e=[],d=IDBKeyRange.bound([a,""],[(c=a)+"\0",""],!1,!0);return yw(b).W(d).next(c=>{for(let b of c){if(b.collectionId!==a)break;e.push(xW(b.parent))}return e})}addFieldIndex(b,c){var a;let f=yy(b),d={indexId:(a=c).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};delete d.indexId;let e=f.add(d);if(c.indexState){let g=yz(b);return e.next(a=>{g.put(yh(a,this.user,c.indexState.sequenceNumber,c.indexState.offset))})}return e.next()}deleteFieldIndex(a,b){let c=yy(a),d=yz(a),e=yx(a);return c.delete(b.indexId).next(()=>d.delete(IDBKeyRange.bound([b.indexId],[b.indexId+1],!1,!0))).next(()=>e.delete(IDBKeyRange.bound([b.indexId],[b.indexId+1],!1,!0)))}getDocumentsMatchingTarget(a,b){let c=yx(a),d=!0,e=new Map;return u9.forEach(this.tn(b),b=>this.en(a,b).next(a=>{d&&(d=!!a),e.set(b,a)})).next(()=>{if(d){let a=xf(),f=[];return u9.forEach(e,(d,e)=>{var g;uC("IndexedDbIndexManager",`Using index ${(g=d,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(a=>`${a.fieldPath}:${a.kind}`).join(",")}`)} to execute ${v0(b)}`);let j=function(c,d){let b=u$(d);if(void 0===b)return null;for(let a of v3(c,b.fieldPath))switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}return null}(e,d),k=function(d,e){let a=new Map;for(let b of u_(e))for(let c of v3(d,b.fieldPath))switch(c.op){case"==":case"in":a.set(b.fieldPath.canonicalString(),c.value);break;case"not-in":case"!=":return a.set(b.fieldPath.canonicalString(),c.value),Array.from(a.values())}return null}(e,d),h=function(a,f){let d=[],b=!0;for(let c of u_(f)){let e=0===c.kind?v4(a,c.fieldPath,a.startAt):v5(a,c.fieldPath,a.startAt);d.push(e.value),b&&(b=e.inclusive)}return new we(d,b)}(e,d),i=function(a,f){let d=[],b=!0;for(let c of u_(f)){let e=0===c.kind?v5(a,c.fieldPath,a.endAt):v4(a,c.fieldPath,a.endAt);d.push(e.value),b&&(b=e.inclusive)}return new we(d,b)}(e,d),l=this.nn(d,e,h),m=this.nn(d,e,i),n=this.sn(d,e,k),o=this.rn(d.indexId,j,l,h.inclusive,m,i.inclusive,n);return u9.forEach(o,d=>c.J(d,b.limit).next(b=>{b.forEach(c=>{let b=aj.fromSegments(c.documentKey);a.has(b)||(a=a.add(b),f.push(b))})}))}).next(()=>f)}return u9.resolve(null)})}tn(b){let a=this.Ze.get(b);return a||(a=[b],this.Ze.set(b,a),a)}rn(d,a,e,j,f,k,l){let g=(null!=a?a.length:1)*Math.max(e.length,f.length),c=g/(null!=a?a.length:1),h=[];for(let b=0;b<g;++b){let i=a?this.on(a[b/c]):yu,m=this.un(d,i,e[b%c],j),n=this.cn(d,i,f[b%c],k),o=l.map(a=>this.un(d,i,a,!0));h.push(...this.createRange(m,n,o))}return h}un(b,c,d,e){let a=new yp(b,aj.empty(),c,d);return e?a:a.Ke()}cn(b,c,d,e){let a=new yp(b,aj.empty(),c,d);return e?a.Ke():a}en(b,a){let d=new ys(a),c=null!=a.collectionGroup?a.collectionGroup:a.path.lastSegment();return this.getFieldIndexes(b,c).next(c=>{let a=null;for(let b of c)d.We(b)&&(!a||b.fields.length>a.fields.length)&&(a=b);return a})}getIndexType(b,a){let c=2;return u9.forEach(this.tn(a),a=>this.en(b,a).next(b=>{b?0!==c&&b.fields.length<function(c){let a=new bS(uZ.comparator),d=!1;for(let f of c.filters){let b=f;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?d=!0:a=a.add(b.field))}for(let e of c.orderBy)e.field.isKeyField()||(a=a.add(e.field));return a.size+(d?1:0)}(a)&&(c=1):c=0})).next(()=>c)}an(d,e){let a=new yo;for(let b of u_(d)){let c=e.data.field(b.fieldPath);if(null==c)return null;let f=a.qe(b.kind);bU.Te.ce(c,f)}return a.$e()}on(b){let a=new yo;return bU.Te.ce(b,a.qe(0)),a.$e()}hn(b,c){let a=new yo;return bU.Te.ce(vL(this.databaseId,c),a.qe(function(b){let a=u_(b);return 0===a.length?0:a[a.length-1].kind}(b))),a.$e()}sn(e,f,d){if(null===d)return[];let a=[];a.push(new yo);let g=0;for(let b of u_(e)){let c=d[g++];for(let h of a)if(this.ln(f,b.fieldPath)&&vN(c))a=this.fn(a,b,c);else{let i=h.qe(b.kind);bU.Te.ce(c,i)}}return this.dn(a)}nn(a,b,c){return this.sn(a,b,c.position)}dn(b){let c=[];for(let a=0;a<b.length;++a)c[a]=b[a].$e();return c}fn(c,d,e){let f=[...c],b=[];for(let g of e.arrayValue.values||[])for(let h of f){let a=new yo;a.seed(h.$e()),bU.Te.ce(g,a.qe(d.kind)),b.push(a)}return b}ln(a,b){return!!a.filters.find(a=>a instanceof G&&a.field.isEqual(b)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(b,a){let c=yy(b),d=yz(b);return(a?c.W("collectionGroupIndex",IDBKeyRange.bound(a,a)):c.W()).next(a=>{let b=[];return u9.forEach(a,a=>d.get([a.indexId,this.uid]).next(c=>{b.push(function(b,a){let c=a?new u2(a.sequenceNumber,new u5(ya(a.readTime),new aj(xW(a.documentKey)),a.largestBatchId)):u2.empty(),d=b.fields.map(([a,b])=>new u0(uZ.fromServerFormat(a),b));return new er(b.indexId,b.collectionGroup,d,c)}(a,c))})).next(()=>b)})}getNextCollectionGroupToUpdate(a){return this.getFieldIndexes(a).next(a=>0===a.length?null:(a.sort((a,b)=>{let c=a.indexState.sequenceNumber-b.indexState.sequenceNumber;return 0!==c?c:eq(a.collectionGroup,b.collectionGroup)}),a[0].collectionGroup))}updateCollectionGroup(a,b,c){let d=yy(a),e=yz(a);return this._n(a).next(a=>d.W("collectionGroupIndex",IDBKeyRange.bound(b,b)).next(b=>u9.forEach(b,b=>e.put(yh(b.indexId,this.user,a,c)))))}updateIndexEntries(b,a){let c=new Map;return u9.forEach(a,(a,e)=>{let d=c.get(a.collectionGroup);return(d?u9.resolve(d):this.getFieldIndexes(b,a.collectionGroup)).next(d=>(c.set(a.collectionGroup,d),u9.forEach(d,c=>this.wn(b,a,c).next(a=>{let d=this.mn(e,c);return a.isEqual(d)?u9.resolve():this.gn(b,e,c,a,d)}))))})}yn(c,b,d,a){return yx(c).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(d,b.key),documentKey:b.key.path.toArray()})}pn(c,b,d,a){return yx(c).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(d,b.key),b.key.path.toArray()])}wn(b,c,a){let d=yx(b),e=new bS(yq);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,c)])},(d,b)=>{e=e.add(new yp(a.indexId,c,b.arrayValue,b.directionalValue))}).next(()=>e)}mn(b,c){let a=new bS(yq),d=this.an(c,b);if(null==d)return a;let e=u$(c);if(null!=e){let f=b.data.field(e.fieldPath);if(vN(f))for(let g of f.arrayValue.values||[])a=a.add(new yp(c.indexId,b.key,this.on(g),d))}else a=a.add(new yp(c.indexId,b.key,yu,d));return a}gn(e,a,f,b,c){uC("IndexedDbIndexManager","Updating index entries for document '%s'",a.key);let d=[];return function(h,i,j,k,l){let c=h.getIterator(),d=i.getIterator(),a=vq(c),b=vq(d);for(;a||b;){let e=!1,f=!1;if(a&&b){let g=j(a,b);g<0?f=!0:g>0&&(e=!0)}else null!=a?f=!0:e=!0;e?(k(b),b=vq(d)):f?(l(a),a=vq(c)):(a=vq(c),b=vq(d))}}(b,c,yq,b=>{d.push(this.yn(e,a,f,b))},b=>{d.push(this.pn(e,a,f,b))}),u9.waitFor(d)}_n(a){let b=1;return yz(a).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,a,c)=>{c.done(),b=a.sequenceNumber+1}).next(()=>b)}createRange(d,f,e){e=e.sort((a,b)=>yq(a,b)).filter((b,a,c)=>!a||0!==yq(b,c[a-1]));let a=[];for(let c of(a.push(d),e)){let g=yq(c,d),h=yq(c,f);if(0===g)a[0]=d.Ke();else if(g>0&&h<0)a.push(c),a.push(c.Ke());else if(h>0)break}a.push(f);let i=[];for(let b=0;b<a.length;b+=2)i.push(IDBKeyRange.bound([a[b].indexId,this.uid,a[b].arrayValue,a[b].directionalValue,yu,[]],[a[b+1].indexId,this.uid,a[b+1].arrayValue,a[b+1].directionalValue,yu,[]]));return i}getMinOffsetFromCollectionGroup(a,b){return this.getFieldIndexes(a,b).next(yA)}getMinOffset(b,a){return u9.mapArray(this.tn(a),a=>this.en(b,a).next(a=>a||uG())).next(yA)}}function yw(a){return x1(a,"collectionParents")}function yx(a){return x1(a,"indexEntries")}function yy(a){return x1(a,"indexConfiguration")}function yz(a){return x1(a,"indexState")}function yA(b){var f;(f=0!==b.length)||uG();let a=b[0].indexState.offset,d=a.largestBatchId;for(let e=1;e<b.length;e++){let c=b[e].indexState.offset;0>u6(c,a)&&(a=c),d<c.largestBatchId&&(d=c.largestBatchId)}return new u5(a.readTime,a.documentKey,d)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let yB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class C{constructor(a,b,c){this.cacheSizeCollectionThreshold=a,this.percentileToCollect=b,this.maximumSequenceNumbersToCollect=c}static withCacheSize(a){return new C(a,C.DEFAULT_COLLECTION_PERCENTILE,C.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Delete a mutation batch and the associated document mutations.
 * @returns A PersistencePromise of the document mutations that were removed.
 */ function yC(c,e,a){let f=c.store("mutations"),g=c.store("documentMutations"),b=[],h=IDBKeyRange.only(a.batchId),l=0,i=f.Z({range:h},(b,c,a)=>(l++,a.delete()));b.push(i.next(()=>{var a;(a=1===l)||uG()}));let j=[];for(let d of a.mutations){let k=xY(e,d.key.path,a.batchId);b.push(g.delete(k)),j.push(d.key)}return u9.waitFor(b).next(()=>j)}function yD(a){if(!a)return 0;let b;if(a.document)b=a.document;else if(a.unknownDocument)b=a.unknownDocument;else{if(!a.noDocument)throw uG();b=a.noDocument}return JSON.stringify(b).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** A mutation queue for a specific user, backed by IndexedDB. */ C.DEFAULT_COLLECTION_PERCENTILE=10,C.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,C.DEFAULT=new C(41943040,C.DEFAULT_COLLECTION_PERCENTILE,C.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),C.DISABLED=new C(-1,0,0);class yE{constructor(a,b,c,d){this.userId=a,this.It=b,this.indexManager=c,this.referenceDelegate=d,this.In={}}static oe(a,b,c,d){var e;(e=""!==a.uid)||uG();let f=a.isAuthenticated()?a.uid:"";return new yE(f,b,c,d)}checkEmpty(a){let c=!0,b=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yG(a).Z({index:"userMutationsIndex",range:b},(b,d,a)=>{c=!1,a.done()}).next(()=>c)}addMutationBatch(a,c,d,e){let f=yH(a),b=yG(a);return b.add({}).next(g=>{var k;(k="number"==typeof g)||uG();let l=new x2(g,c,d,e),m=function(e,b,a){let c=a.baseMutations.map(a=>xG(e.re,a)),d=a.mutations.map(a=>xG(e.re,a));return{userId:b,batchId:a.batchId,localWriteTimeMs:a.localWriteTime.toMillis(),baseMutations:c,mutations:d}}(this.It,this.userId,l),h=[],i=new bS((a,b)=>eq(a.canonicalString(),b.canonicalString()));for(let j of e){let n=xY(this.userId,j.key.path,g);i=i.add(j.key.path.popLast()),h.push(b.put(m)),h.push(f.put(n,xZ))}return i.forEach(b=>{h.push(this.indexManager.addToCollectionParentIndex(a,b))}),a.addOnCommittedListener(()=>{this.In[g]=l.keys()}),u9.waitFor(h).next(()=>l)})}lookupMutationBatch(a,b){return yG(a).get(b).next(a=>{var b;return a?(a.userId===this.userId||uG(),yb(this.It,a)):null})}Tn(b,a){return this.In[a]?u9.resolve(this.In[a]):this.lookupMutationBatch(b,a).next(b=>{if(b){let c=b.keys();return this.In[a]=c,c}return null})}getNextMutationBatchAfterBatchId(a,b){let c=b+1,d=IDBKeyRange.lowerBound([this.userId,c]),e=null;return yG(a).Z({index:"userMutationsIndex",range:d},(d,a,b)=>{var f;a.userId===this.userId&&(a.batchId>=c||uG(),e=yb(this.It,a)),b.done()}).next(()=>e)}getHighestUnacknowledgedBatchId(a){let b=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),c=-1;return yG(a).Z({index:"userMutationsIndex",range:b,reverse:!0},(d,a,b)=>{c=a.batchId,b.done()}).next(()=>c)}getAllMutationBatches(a){let b=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yG(a).W("userMutationsIndex",b).next(a=>a.map(a=>yb(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(a,b){let c=xX(this.userId,b.path),d=IDBKeyRange.lowerBound(c),e=[];return yH(a).Z({range:d},(c,j,d)=>{let[f,g,h]=c,i=xW(g);if(f===this.userId&&b.path.isEqual(i))return yG(a).get(h).next(a=>{var b;if(!a)throw uG();a.userId===this.userId||uG(),e.push(yb(this.It,a))});d.done()}).next(()=>e)}getAllMutationBatchesAffectingDocumentKeys(c,a){let d=new bS(eq),b=[];return a.forEach(a=>{let e=xX(this.userId,a.path),f=IDBKeyRange.lowerBound(e),g=yH(c).Z({range:f},(b,i,c)=>{let[e,f,g]=b,h=xW(f);e===this.userId&&a.path.isEqual(h)?d=d.add(g):c.done()});b.push(g)}),u9.waitFor(b).next(()=>this.En(c,d))}getAllMutationBatchesAffectingQuery(b,c){let a=c.path,f=a.length+1,d=xX(this.userId,a),e=IDBKeyRange.lowerBound(d),g=new bS(eq);return yH(b).Z({range:e},(c,j,d)=>{let[e,h,i]=c,b=xW(h);e===this.userId&&a.isPrefixOf(b)?b.length===f&&(g=g.add(i)):d.done()}).next(()=>this.En(b,g))}En(c,a){let d=[],b=[];return a.forEach(a=>{b.push(yG(c).get(a).next(a=>{var b;if(null===a)throw uG();a.userId===this.userId||uG(),d.push(yb(this.It,a))}))}),u9.waitFor(b).next(()=>d)}removeMutationBatch(a,b){return yC(a.ie,this.userId,b).next(c=>(a.addOnCommittedListener(()=>{this.An(b.batchId)}),u9.forEach(c,b=>this.referenceDelegate.markPotentiallyOrphaned(a,b))))}An(a){delete this.In[a]}performConsistencyCheck(a){return this.checkEmpty(a).next(b=>{if(!b)return u9.resolve();let c=IDBKeyRange.lowerBound([this.userId]),d=[];return yH(a).Z({range:c},(a,e,b)=>{if(a[0]===this.userId){let c=xW(a[1]);d.push(c)}else b.done()}).next(()=>{var a;(a=0===d.length)||uG()})})}containsKey(a,b){return yF(a,this.userId,b)}Rn(a){return yI(a).get(this.userId).next(a=>a||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yF(b,c,d){let a=xX(c,d.path),f=a[1],e=IDBKeyRange.lowerBound(a),g=!1;return yH(b).Z({range:e,X:!0},(a,h,b)=>{let[d,e,i]=a;d===c&&e===f&&(g=!0),b.done()}).next(()=>g)}function yG(a){return x1(a,"mutations")}function yH(a){return x1(a,"documentMutations")}function yI(a){return x1(a,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Offset to ensure non-overlapping target ids. */ /**
 * Generates monotonically increasing target IDs for sending targets to the
 * watch stream.
 *
 * The client constructs two generators, one for the target cache, and one for
 * for the sync engine (to generate limbo documents targets). These
 * generators produce non-overlapping IDs (by using even and odd IDs
 * respectively).
 *
 * By separating the target ID space, the query cache can generate target IDs
 * that persist across client restarts, while sync engine can independently
 * generate in-memory target IDs that are transient and can be reused after a
 * restart.
 */ class yJ{constructor(a){this.bn=a}next(){return this.bn+=2,this.bn}static Pn(){return new yJ(0)}static vn(){return new yJ(-1)}}function yK(a){return x1(a,"targets")}function yL(a){return x1(a,"targetGlobal")}function yM(a){return x1(a,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function yN([b,c],[d,e]){let a=eq(b,d);return 0===a?eq(c,e):a}class yO{constructor(a){this.xn=a,this.buffer=new bS(yN),this.Nn=0}kn(){return++this.Nn}On(c){let a=[c,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(a);else{let b=this.buffer.last();0>yN(a,b)&&(this.buffer=this.buffer.delete(b).add(a))}}get maxValue(){return this.buffer.last()[0]}}class yP{constructor(a,b,c){this.garbageCollector=a,this.asyncQueue=b,this.localStore=c,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(a){uC("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){ve(a)?uC("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):await u8(a)}await this.Fn(3e5)})}}function yQ(a,d){var b,c;return yM(a).put((b=d,c=a.currentSequenceNumber,{targetId:0,path:xU(b.path),sequenceNumber:c}))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An in-memory buffer of entries to be written to a RemoteDocumentCache.
 * It can be used to batch up a set of changes to be written to the cache, but
 * additionally supports reading entries back with the `getEntry()` method,
 * falling back to the underlying RemoteDocumentCache if no entry is
 * buffered.
 *
 * Entries added to the cache *must* be read first. This is to facilitate
 * calculating the size delta of the pending changes.
 *
 * PORTING NOTE: This class was implemented then removed from other platforms.
 * If byte-counting ends up being needed on the other platforms, consider
 * porting this class as part of that implementation work.
 */ class ex{constructor(){this.changes=new w5(a=>a.toString(),(a,b)=>a.isEqual(b)),this.changesApplied=!1}addEntry(a){this.assertNotApplied(),this.changes.set(a.key,a)}removeEntry(a,b){this.assertNotApplied(),this.changes.set(a,vZ.newInvalidDocument(a).setReadTime(b))}getEntry(c,a){this.assertNotApplied();let b=this.changes.get(a);return void 0!==b?u9.resolve(b):this.getFromCache(c,a)}getEntries(a,b){return this.getAllFromCache(a,b)}apply(a){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(a)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The RemoteDocumentCache for IndexedDb. To construct, invoke
 * `newIndexedDbRemoteDocumentCache()`.
 */ class yR{constructor(a){this.It=a}setIndexManager(a){this.indexManager=a}addEntry(a,c,b){return yV(a).put(b)}removeEntry(a,b,c){return yV(a).delete(function(b,c){let a=b.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],x8(c),a[a.length-1]]}(b,c))}updateMetadata(a,b){return this.getMetadata(a).next(c=>(c.byteSize+=b,this.Qn(a,c)))}getEntry(b,a){let c=vZ.newInvalidDocument(a);return yV(b).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yW(a))},(d,b)=>{c=this.jn(a,b)}).next(()=>c)}Wn(b,a){let c={size:0,document:vZ.newInvalidDocument(a)};return yV(b).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yW(a))},(d,b)=>{c={document:this.jn(a,b),size:yD(b)}}).next(()=>c)}getEntries(a,b){let c=w6;return this.zn(a,b,(a,b)=>{let d=this.jn(a,b);c=c.insert(a,d)}).next(()=>c)}Hn(a,b){let c=w6,d=new aP(aj.comparator);return this.zn(a,b,(a,b)=>{let e=this.jn(a,b);c=c.insert(a,e),d=d.insert(a,yD(b))}).next(()=>({documents:c,Jn:d}))}zn(c,b,f){if(b.isEmpty())return u9.resolve();let a=new bS(yY);b.forEach(b=>a=a.add(b));let d=IDBKeyRange.bound(yW(a.first()),yW(a.last())),e=a.getIterator(),g=e.getNext();return yV(c).Z({index:"documentKeyIndex",range:d},(d,a,b)=>{let c=aj.fromSegments([...a.prefixPath,a.collectionGroup,a.documentId]);for(;g&&0>yY(g,c);)f(g,null),g=e.getNext();g&&g.isEqual(c)&&(f(g,a),g=e.hasNext()?e.getNext():null),g?b.j(yW(g)):b.done()}).next(()=>{for(;g;)f(g,null),g=e.hasNext()?e.getNext():null})}getAllFromCollection(c,a,b){let d=[a.popLast().toArray(),a.lastSegment(),x8(b.readTime),b.documentKey.path.isEmpty()?"":b.documentKey.path.lastSegment()],e=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yV(c).W(IDBKeyRange.bound(d,e,!0)).next(d=>{let b=w6;for(let a of d){let c=this.jn(aj.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);b=b.insert(c.key,c)}return b})}getAllFromCollectionGroup(b,a,c,f){let g=w6,d=yX(a,c),e=yX(a,u5.max());return yV(b).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,e,!0)},(d,a,c)=>{let b=this.jn(aj.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);(g=g.insert(b.key,b)).size===f&&c.done()}).next(()=>g)}newChangeBuffer(a){return new yT(this,!!a&&a.trackRemovals)}getSize(a){return this.getMetadata(a).next(a=>a.byteSize)}getMetadata(a){return yU(a).get("remoteDocumentGlobalKey").next(a=>{var b;return!a&&uG(),a})}Qn(a,b){return yU(a).put("remoteDocumentGlobalKey",b)}jn(c,b){if(b){let a=function(c,a){let b;if(a.document)b=xF(c.re,a.document,!!a.hasCommittedMutations);else if(a.noDocument){let d=aj.fromSegments(a.noDocument.path),e=ya(a.noDocument.readTime);b=vZ.newNoDocument(d,e),a.hasCommittedMutations&&b.setHasCommittedMutations()}else{if(!a.unknownDocument)return uG();{let f=aj.fromSegments(a.unknownDocument.path),g=ya(a.unknownDocument.version);b=vZ.newUnknownDocument(f,g)}}return a.readTime&&b.setReadTime(function(a){let b=new uV(a[0],a[1]);return uW.fromTimestamp(b)}(a.readTime)),b}(this.It,b);if(!(a.isNoDocument()&&a.version.isEqual(uW.min())))return a}return vZ.newInvalidDocument(c)}}function yS(a){return new yR(a)}class yT extends null{constructor(a,b){super(),this.Yn=a,this.trackRemovals=b,this.Xn=new w5(a=>a.toString(),(a,b)=>a.isEqual(b))}applyChanges(b){let a=[],c=0,d=new bS((a,b)=>eq(a.canonicalString(),b.canonicalString()));return this.changes.forEach((e,f)=>{let g=this.Xn.get(e);if(a.push(this.Yn.removeEntry(b,e,g.readTime)),f.isValidDocument()){let h=x7(this.Yn.It,f);d=d.add(e.path.popLast());let i=yD(h);c+=i-g.size,a.push(this.Yn.addEntry(b,e,h))}else if(c-=g.size,this.trackRemovals){let j=x7(this.Yn.It,f.convertToNoDocument(uW.min()));a.push(this.Yn.addEntry(b,e,j))}}),d.forEach(c=>{a.push(this.Yn.indexManager.addToCollectionParentIndex(b,c))}),a.push(this.Yn.updateMetadata(b,c)),u9.waitFor(a)}getFromCache(a,b){return this.Yn.Wn(a,b).next(a=>(this.Xn.set(b,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(a,b){return this.Yn.Hn(a,b).next(({documents:a,Jn:b})=>(b.forEach((b,c)=>{this.Xn.set(b,{size:c,readTime:a.get(b).readTime})}),a))}}function yU(a){return x1(a,"remoteDocumentGlobal")}function yV(a){return x1(a,"remoteDocumentsV14")}function yW(b){let a=b.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],a[a.length-1]]}function yX(c,b){let a=b.documentKey.path.toArray();return[c,x8(b.readTime),a.slice(0,a.length-2),a.length>0?a[a.length-1]:""]}function yY(e,f){let a=e.path.toArray(),b=f.path.toArray(),d=0;for(let c=0;c<a.length-2&&c<b.length-2;++c)if(d=eq(a[c],b[c]))return d;return(d=eq(a.length,b.length))||(d=eq(a[a.length-2],b[b.length-2]))||eq(a[a.length-1],b[b.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Schema Version for the Web client:
 * 1.  Initial version including Mutation Queue, Query Cache, and Remote
 *     Document Cache
 * 2.  Used to ensure a targetGlobal object exists and add targetCount to it. No
 *     longer required because migration 3 unconditionally clears it.
 * 3.  Dropped and re-created Query Cache to deal with cache corruption related
 *     to limbo resolution. Addresses
 *     https://github.com/firebase/firebase-ios-sdk/issues/1548
 * 4.  Multi-Tab Support.
 * 5.  Removal of held write acks.
 * 6.  Create document global for tracking document cache size.
 * 7.  Ensure every cached document has a sentinel row with a sequence number.
 * 8.  Add collection-parent index for Collection Group queries.
 * 9.  Change RemoteDocumentChanges store to be keyed by readTime rather than
 *     an auto-incrementing ID. This is required for Index-Free queries.
 * 10. Rewrite the canonical IDs to the explicit Protobuf-based format.
 * 11. Add bundles and named_queries for bundle support.
 * 12. Add document overlays.
 * 13. Rewrite the keys of the remote document cache to allow for efficient
 *     document lookup via `getAll()`.
 * 14. Add overlays.
 * 15. Add indexing support.
 */ /**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents a local view (overlay) of a document, and the fields that are
 * locally mutated.
 */ class yZ{constructor(a,b){this.overlayedDocument=a,this.mutatedFields=b}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A readonly view of the local state of all documents we're tracking (i.e. we
 * have a cached version in remoteDocumentCache or local mutations for the
 * document). The view is computed by applying the mutations in the
 * MutationQueue to the RemoteDocumentCache.
 */ class y${constructor(a,b,c,d){this.remoteDocumentCache=a,this.mutationQueue=b,this.documentOverlayCache=c,this.indexManager=d}getDocument(a,b){let c=null;return this.documentOverlayCache.getOverlay(a,b).next(d=>(c=d,this.getBaseDocument(a,b,c))).next(a=>(null!==c&&wU(c.mutation,a,vr.empty(),uV.now()),a))}getDocuments(a,b){return this.remoteDocumentCache.getEntries(a,b).next(b=>this.getLocalViewOfDocuments(a,b,xf()).next(()=>b))}getLocalViewOfDocuments(a,b,d=xf()){let c=xa();return this.populateOverlays(a,c,b).next(()=>this.computeViews(a,b,c,d).next(a=>{let b=w8();return a.forEach((a,c)=>{b=b.insert(a,c.overlayedDocument)}),b}))}getOverlayedDocuments(a,b){let c=xa();return this.populateOverlays(a,c,b).next(()=>this.computeViews(a,b,c,xf()))}populateOverlays(a,d,b){let c=[];return b.forEach(a=>{d.has(a)||c.push(a)}),this.documentOverlayCache.getOverlays(a,c).next(a=>{a.forEach((a,b)=>{d.set(a,b)})})}computeViews(a,b,d,e){let c=w6,f=xc(),g=xc();return b.forEach((g,a)=>{let b=d.get(a.key);e.has(a.key)&&(void 0===b||b.mutation instanceof wY)?c=c.insert(a.key,a):void 0!==b&&(f.set(a.key,b.mutation.getFieldMask()),wU(b.mutation,a,b.mutation.getFieldMask(),uV.now()))}),this.recalculateAndSaveOverlays(a,c).next(a=>(a.forEach((a,b)=>f.set(a,b)),b.forEach((b,c)=>{var a;return g.set(b,new yZ(c,null!==(a=f.get(b))&& void 0!==a?a:null))}),g))}recalculateAndSaveOverlays(a,b){let c=xc(),d=new aP((a,b)=>a-b),e=xf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(a,b).next(a=>{for(let e of a)e.keys().forEach(a=>{let g=b.get(a);if(null===g)return;let f=c.get(a)||vr.empty();f=e.applyToLocalView(g,f),c.set(a,f);let h=(d.get(e.batchId)||xf()).add(a);d=d.insert(e.batchId,h)})}).next(()=>{let f=[],g=d.getReverseIterator();for(;g.hasNext();){let h=g.getNext(),i=h.key,j=h.value,k=xb();j.forEach(a=>{if(!e.has(a)){let d=wS(b.get(a),c.get(a));null!==d&&k.set(a,d),e=e.add(a)}}),f.push(this.documentOverlayCache.saveOverlays(a,i,k))}return u9.waitFor(f)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(a,b){return this.remoteDocumentCache.getEntries(a,b).next(b=>this.recalculateAndSaveOverlays(a,b))}getDocumentsMatchingQuery(c,a,d){var b;return(b=a,aj.isDocumentKey(b.path)&&null===b.collectionGroup&&0===b.filters.length)?this.getDocumentsMatchingDocumentQuery(c,a.path):wp(a)?this.getDocumentsMatchingCollectionGroupQuery(c,a,d):this.getDocumentsMatchingCollectionQuery(c,a,d)}getNextDocuments(a,b,c,d){return this.remoteDocumentCache.getAllFromCollectionGroup(a,b,c,d).next(e=>{let f=d-e.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(a,b,c.largestBatchId,d-e.size):u9.resolve(xa()),g=-1,h=e;return f.next(b=>u9.forEach(b,(c,b)=>(g<b.largestBatchId&&(g=b.largestBatchId),e.get(c)?u9.resolve():this.getBaseDocument(a,c,b).next(a=>{h=h.insert(c,a)}))).next(()=>this.populateOverlays(a,b,e)).next(()=>this.computeViews(a,h,b,xf())).next(a=>({batchId:g,changes:w9(a)})))})}getDocumentsMatchingDocumentQuery(a,b){return this.getDocument(a,new aj(b)).next(a=>{let b=w8();return a.isFoundDocument()&&(b=b.insert(a.key,a)),b})}getDocumentsMatchingCollectionGroupQuery(a,b,d){let c=b.collectionGroup,e=w8();return this.indexManager.getCollectionParents(a,c).next(f=>u9.forEach(f,h=>{var f,g;let i=(f=b,g=h.child(c),new wj(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));return this.getDocumentsMatchingCollectionQuery(a,i,d).next(a=>{a.forEach((a,b)=>{e=e.insert(a,b)})})}).next(()=>e))}getDocumentsMatchingCollectionQuery(a,b,c){let d;return this.remoteDocumentCache.getAllFromCollection(a,b.path,c).next(e=>(d=e,this.documentOverlayCache.getOverlaysForCollection(a,b.path,c.largestBatchId))).next(a=>{a.forEach((c,b)=>{let a=b.getKey();null===d.get(a)&&(d=d.insert(a,vZ.newInvalidDocument(a)))});let c=w8();return d.forEach((e,d)=>{let f=a.get(e);void 0!==f&&wU(f.mutation,d,vr.empty(),uV.now()),ww(b,d)&&(c=c.insert(e,d))}),c})}getBaseDocument(c,a,b){return null===b||1===b.mutation.type?this.remoteDocumentCache.getEntry(c,a):u9.resolve(vZ.newInvalidDocument(a))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An in-memory implementation of DocumentOverlayCache.
 */ class y_{constructor(){this.overlays=new aP(aj.comparator),this.es=new Map}getOverlay(b,a){return u9.resolve(this.overlays.get(a))}getOverlays(b,a){let c=xa();return u9.forEach(a,a=>this.getOverlay(b,a).next(b=>{null!==b&&c.set(a,b)})).next(()=>c)}saveOverlays(b,c,a){return a.forEach((d,a)=>{this.ue(b,c,a)}),u9.resolve()}removeOverlaysForBatchId(c,d,a){let b=this.es.get(a);return void 0!==b&&(b.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(a)),u9.resolve()}getOverlaysForCollection(i,b,f){let c=xa(),g=b.length+1,h=new aj(b.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){let a=d.getNext().value,e=a.getKey();if(!b.isPrefixOf(e.path))break;e.path.length===g&&a.largestBatchId>f&&c.set(a.getKey(),a)}return u9.resolve(c)}getOverlaysForCollectionGroup(j,g,h,i){let b=new aP((a,b)=>a-b),d=this.overlays.getIterator();for(;d.hasNext();){let a=d.getNext().value;if(a.getKey().getCollectionGroup()===g&&a.largestBatchId>h){let c=b.get(a.largestBatchId);null===c&&(c=xa(),b=b.insert(a.largestBatchId,c)),c.set(a.getKey(),a)}}let e=xa(),f=b.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((a,b)=>e.set(a,b)),!(e.size()>=i)););return u9.resolve(e)}ue(f,b,a){let d=this.overlays.get(a.key);if(null!==d){let e=this.es.get(d.largestBatchId).delete(a.key);this.es.set(d.largestBatchId,e)}this.overlays=this.overlays.insert(a.key,new x4(b,a));let c=this.es.get(b);void 0===c&&(c=xf(),this.es.set(b,c)),this.es.set(b,c.add(a.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A collection of references to a document from some kind of numbered entity
 * (either a target ID or batch ID). As references are added to or removed from
 * the set corresponding events are emitted to a registered garbage collector.
 *
 * Each reference is represented by a DocumentReference object. Each of them
 * contains enough information to uniquely identify the reference. They are all
 * stored primarily in a set sorted by key. A document is considered garbage if
 * there's no references in that set (this can be efficiently checked thanks to
 * sorting by key).
 *
 * ReferenceSet also keeps a secondary set that contains references sorted by
 * IDs. This one is used to efficiently implement removal of all references by
 * some target ID.
 */ class y0{constructor(){this.ns=new bS(y1.ss),this.rs=new bS(y1.os)}isEmpty(){return this.ns.isEmpty()}addReference(b,c){let a=new y1(b,c);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(a,b){a.forEach(a=>this.addReference(a,b))}removeReference(a,b){this.cs(new y1(a,b))}hs(a,b){a.forEach(a=>this.removeReference(a,b))}ls(a){let b=new aj(new uX([])),c=new y1(b,a),d=new y1(b,a+1),e=[];return this.rs.forEachInRange([c,d],a=>{this.cs(a),e.push(a.key)}),e}fs(){this.ns.forEach(a=>this.cs(a))}cs(a){this.ns=this.ns.delete(a),this.rs=this.rs.delete(a)}ds(a){let b=new aj(new uX([])),c=new y1(b,a),d=new y1(b,a+1),e=xf();return this.rs.forEachInRange([c,d],a=>{e=e.add(a.key)}),e}containsKey(a){let c=new y1(a,0),b=this.ns.firstAfterOrEqual(c);return null!==b&&a.isEqual(b.key)}}class y1{constructor(a,b){this.key=a,this._s=b}static ss(a,b){return aj.comparator(a.key,b.key)||eq(a._s,b._s)}static os(a,b){return eq(a._s,b._s)||aj.comparator(a.key,b.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class y2{constructor(a,b){this.indexManager=a,this.referenceDelegate=b,this.mutationQueue=[],this.ws=1,this.gs=new bS(y1.ss)}checkEmpty(a){return u9.resolve(0===this.mutationQueue.length)}addMutationBatch(e,f,g,a){let b=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let c=new x2(b,f,g,a);for(let d of(this.mutationQueue.push(c),a))this.gs=this.gs.add(new y1(d.key,b)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return u9.resolve(c)}lookupMutationBatch(b,a){return u9.resolve(this.ys(a))}getNextMutationBatchAfterBatchId(d,c){let a=this.ps(c+1),b=a<0?0:a;return u9.resolve(this.mutationQueue.length>b?this.mutationQueue[b]:null)}getHighestUnacknowledgedBatchId(){return u9.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(a){return u9.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){let b=new y1(a,0),c=new y1(a,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([b,c],a=>{let b=this.ys(a._s);d.push(b)}),u9.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(c,a){let b=new bS(eq);return a.forEach(a=>{let c=new y1(a,0),d=new y1(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,d],a=>{b=b.add(a._s)})}),u9.resolve(this.Is(b))}getAllMutationBatchesAffectingQuery(f,c){let b=c.path,g=b.length+1,a=b;aj.isDocumentKey(a)||(a=a.child(""));let d=new y1(new aj(a),0),e=new bS(eq);return this.gs.forEachWhile(a=>{let c=a.key.path;return!!b.isPrefixOf(c)&&(c.length===g&&(e=e.add(a._s)),!0)},d),u9.resolve(this.Is(e))}Is(a){let b=[];return a.forEach(c=>{let a=this.ys(c);null!==a&&b.push(a)}),b}removeMutationBatch(b,a){var c;0===this.Ts(a.batchId,"removed")||uG(),this.mutationQueue.shift();let d=this.gs;return u9.forEach(a.mutations,c=>{let e=new y1(c.key,a.batchId);return d=d.delete(e),this.referenceDelegate.markPotentiallyOrphaned(b,c.key)}).next(()=>{this.gs=d})}An(a){}containsKey(d,a){let c=new y1(a,0),b=this.gs.firstAfterOrEqual(c);return u9.resolve(a.isEqual(b&&b.key))}performConsistencyCheck(a){return this.mutationQueue.length,u9.resolve()}Ts(a,b){return this.ps(a)}ps(a){return 0===this.mutationQueue.length?0:a-this.mutationQueue[0].batchId}ys(b){let a=this.ps(b);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The memory-only RemoteDocumentCache for IndexedDb. To construct, invoke
 * `newMemoryRemoteDocumentCache()`.
 */ class y3{constructor(a){this.Es=a,this.docs=new aP(aj.comparator),this.size=0}setIndexManager(a){this.indexManager=a}addEntry(e,a){let b=a.key,c=this.docs.get(b),f=c?c.size:0,d=this.Es(a);return this.docs=this.docs.insert(b,{document:a.mutableCopy(),size:d}),this.size+=d-f,this.indexManager.addToCollectionParentIndex(e,b.path.popLast())}removeEntry(a){let b=this.docs.get(a);b&&(this.docs=this.docs.remove(a),this.size-=b.size)}getEntry(c,a){let b=this.docs.get(a);return u9.resolve(b?b.document.mutableCopy():vZ.newInvalidDocument(a))}getEntries(c,a){let b=w6;return a.forEach(a=>{let c=this.docs.get(a);b=b.insert(a,c?c.document.mutableCopy():vZ.newInvalidDocument(a))}),u9.resolve(b)}getAllFromCollection(h,a,f){let b=w6,g=new aj(a.child("")),d=this.docs.getIteratorFrom(g);for(;d.hasNext();){let{key:e,value:{document:c}}=d.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||0>=u6(u4(c),f)||(b=b.insert(c.key,c.mutableCopy()))}return u9.resolve(b)}getAllFromCollectionGroup(a,b,c,d){uG()}As(a,b){return u9.forEach(this.docs,a=>b(a))}newChangeBuffer(a){return new y4(this)}getSize(a){return u9.resolve(this.size)}}class y4 extends ex{constructor(a){super(),this.Yn=a}applyChanges(b){let a=[];return this.changes.forEach((d,c)=>{c.isValidDocument()?a.push(this.Yn.addEntry(b,c)):this.Yn.removeEntry(d)}),u9.waitFor(a)}getFromCache(a,b){return this.Yn.getEntry(a,b)}getAllFromCache(a,b){return this.Yn.getEntries(a,b)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A memory-backed instance of Persistence. Data is stored only in RAM and
 * not persisted across sessions.
 */ class y5{constructor(a,b){this.Vs={},this.overlays={},this.Ss=new et(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=a(this),this.Cs=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{constructor(a){this.persistence=a,this.Rs=new w5(a=>v0(a),v1),this.lastRemoteSnapshotVersion=uW.min(),this.highestTargetId=0,this.bs=0,this.Ps=new y0,this.targetCount=0,this.vs=yJ.Pn()}forEachTarget(a,b){return this.Rs.forEach((c,a)=>b(a)),u9.resolve()}getLastRemoteSnapshotVersion(a){return u9.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(a){return u9.resolve(this.bs)}allocateTargetId(a){return this.highestTargetId=this.vs.next(),u9.resolve(this.highestTargetId)}setTargetsMetadata(c,a,b){return b&&(this.lastRemoteSnapshotVersion=b),a>this.bs&&(this.bs=a),u9.resolve()}Dn(a){this.Rs.set(a.target,a);let b=a.targetId;b>this.highestTargetId&&(this.vs=new yJ(b),this.highestTargetId=b),a.sequenceNumber>this.bs&&(this.bs=a.sequenceNumber)}addTargetData(b,a){return this.Dn(a),this.targetCount+=1,u9.resolve()}updateTargetData(b,a){return this.Dn(a),u9.resolve()}removeTargetData(b,a){return this.Rs.delete(a.target),this.Ps.ls(a.targetId),this.targetCount-=1,u9.resolve()}removeTargets(b,c,d){let e=0,a=[];return this.Rs.forEach((g,f)=>{f.sequenceNumber<=c&&null===d.get(f.targetId)&&(this.Rs.delete(g),a.push(this.removeMatchingKeysForTargetId(b,f.targetId)),e++)}),u9.waitFor(a).next(()=>e)}getTargetCount(a){return u9.resolve(this.targetCount)}getTargetData(c,a){let b=this.Rs.get(a)||null;return u9.resolve(b)}addMatchingKeys(c,a,b){return this.Ps.us(a,b),u9.resolve()}removeMatchingKeys(e,a,b){this.Ps.hs(a,b);let c=this.persistence.referenceDelegate,d=[];return c&&a.forEach(a=>{d.push(c.markPotentiallyOrphaned(e,a))}),u9.waitFor(d)}removeMatchingKeysForTargetId(b,a){return this.Ps.ls(a),u9.resolve()}getMatchingKeysForTargetId(c,a){let b=this.Ps.ds(a);return u9.resolve(b)}containsKey(b,a){return u9.resolve(this.Ps.containsKey(a))}}(this),this.indexManager=new /**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An in-memory implementation of IndexManager.
 */ class{constructor(){this.Ye=new yt}addToCollectionParentIndex(b,a){return this.Ye.add(a),u9.resolve()}getCollectionParents(b,a){return u9.resolve(this.Ye.getEntries(a))}addFieldIndex(a,b){return u9.resolve()}deleteFieldIndex(a,b){return u9.resolve()}getDocumentsMatchingTarget(a,b){return u9.resolve(null)}getIndexType(a,b){return u9.resolve(0)}getFieldIndexes(a,b){return u9.resolve([])}getNextCollectionGroupToUpdate(a){return u9.resolve(null)}getMinOffset(a,b){return u9.resolve(u5.min())}getMinOffsetFromCollectionGroup(a,b){return u9.resolve(u5.min())}updateCollectionGroup(a,b,c){return u9.resolve()}updateIndexEntries(a,b){return u9.resolve()}},this.remoteDocumentCache=function(a){return new y3(a)}(a=>this.referenceDelegate.xs(a)),this.It=new x6(b),this.Ns=new /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{constructor(a){this.It=a,this.Zn=new Map,this.ts=new Map}getBundleMetadata(b,a){return u9.resolve(this.Zn.get(a))}saveBundleMetadata(c,b){var a;return this.Zn.set(b.id,{id:(a=b).id,version:a.version,createTime:xv(a.createTime)}),u9.resolve()}getNamedQuery(b,a){return u9.resolve(this.ts.get(a))}saveNamedQuery(c,b){var a;return this.ts.set(b.name,{name:(a=b).name,query:ye(a.bundledQuery),readTime:xv(a.readTime)}),u9.resolve()}}(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(a){return this.indexManager}getDocumentOverlayCache(b){let a=this.overlays[b.toKey()];return a||(a=new y_,this.overlays[b.toKey()]=a),a}getMutationQueue(b,c){let a=this.Vs[b.toKey()];return a||(a=new y2(c,this.referenceDelegate),this.Vs[b.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(a,d,b){uC("MemoryPersistence","Starting transaction:",a);let c=new y6(this.Ss.next());return this.referenceDelegate.ks(),b(c).next(a=>this.referenceDelegate.Os(c).next(()=>a)).toPromise().then(a=>(c.raiseOnCommittedEvent(),a))}Ms(a,b){return u9.or(Object.values(this.Vs).map(c=>()=>c.containsKey(a,b)))}}class y6 extends es{constructor(a){super(),this.currentSequenceNumber=a}}class y7{constructor(a){this.persistence=a,this.Fs=new y0,this.$s=null}static Bs(a){return new y7(a)}get Ls(){if(this.$s)return this.$s;throw uG()}addReference(c,b,a){return this.Fs.addReference(a,b),this.Ls.delete(a.toString()),u9.resolve()}removeReference(c,b,a){return this.Fs.removeReference(a,b),this.Ls.add(a.toString()),u9.resolve()}markPotentiallyOrphaned(b,a){return this.Ls.add(a.toString()),u9.resolve()}removeTarget(b,a){this.Fs.ls(a.targetId).forEach(a=>this.Ls.add(a.toString()));let c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(b,a.targetId).next(a=>{a.forEach(a=>this.Ls.add(a.toString()))}).next(()=>c.removeTargetData(b,a))}ks(){this.$s=new Set}Os(a){let b=this.persistence.getRemoteDocumentCache().newChangeBuffer();return u9.forEach(this.Ls,c=>{let d=aj.fromPath(c);return this.Us(a,d).next(a=>{a||b.removeEntry(d,uW.min())})}).next(()=>(this.$s=null,b.apply(a)))}updateLimboDocument(a,b){return this.Us(a,b).next(a=>{a?this.Ls.delete(b.toString()):this.Ls.add(b.toString())})}xs(a){return 0}Us(a,b){return u9.or([()=>u9.resolve(this.Fs.containsKey(b)),()=>this.persistence.getTargetCache().containsKey(a,b),()=>this.persistence.Ms(a,b)])}}function y8(a){a.createObjectStore("targetDocuments",{keyPath:null}).createIndex("documentTargetsIndex",null,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",null,{unique:!0}),a.createObjectStore("targetGlobal")}let y9="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class za{constructor(c,a,d,e,f,g,h,i,j,b,k=15){if(this.allowTabSynchronization=c,this.persistenceKey=a,this.clientId=d,this.Hs=f,this.window=g,this.document=h,this.Js=j,this.Ys=b,this.Xs=k,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=a=>Promise.resolve(),!za.C())throw new uI(uH.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Provides LRU functionality for IndexedDB persistence. */ class{constructor(c,d){var a,b;this.db=c,this.garbageCollector=(a=this,b=d,new class a{constructor(a,b){this.$n=a,this.params=b}calculateTargetCount(a,b){return this.$n.Bn(a).next(a=>Math.floor(b/100*a))}nthSequenceNumber(b,a){if(0===a)return u9.resolve(et.at);let c=new yO(a);return this.$n.forEachTarget(b,a=>c.On(a.sequenceNumber)).next(()=>this.$n.Ln(b,a=>c.On(a))).next(()=>c.maxValue)}removeTargets(a,b,c){return this.$n.removeTargets(a,b,c)}removeOrphanedDocuments(a,b){return this.$n.removeOrphanedDocuments(a,b)}collect(a,b){return -1===this.params.cacheSizeCollectionThreshold?(uC("LruGarbageCollector","Garbage collection skipped; disabled"),u9.resolve(yB)):this.getCacheSize(a).next(c=>c<this.params.cacheSizeCollectionThreshold?(uC("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yB):this.Un(a,b))}getCacheSize(a){return this.$n.getCacheSize(a)}Un(a,b){let c,d,e,f,g,h,i,j=Date.now();return this.calculateTargetCount(a,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(uC("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),d=this.params.maximumSequenceNumbersToCollect):d=b,f=Date.now(),this.nthSequenceNumber(a,d))).next(d=>(c=d,g=Date.now(),this.removeTargets(a,c,b))).next(b=>(e=b,h=Date.now(),this.removeOrphanedDocuments(a,c))).next(a=>(i=Date.now(),uB()<=LogLevel.DEBUG&&uC("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-j}ms
	Determined least recently used ${d} in `+(g-f)+"ms\n"+`	Removed ${e} targets in `+(h-g)+"ms\n"+`	Removed ${a} documents in `+(i-h)+"ms\n"+`Total Duration: ${i-j}ms`),u9.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:e,documentsRemoved:a})))}}(a,b))}Bn(a){let b=this.qn(a);return this.db.getTargetCache().getTargetCount(a).next(a=>b.next(b=>a+b))}qn(a){let b=0;return this.Ln(a,a=>{b++}).next(()=>b)}forEachTarget(a,b){return this.db.getTargetCache().forEachTarget(a,b)}Ln(a,b){return this.Kn(a,(c,a)=>b(a))}addReference(a,c,b){return yQ(a,b)}removeReference(a,c,b){return yQ(a,b)}removeTargets(a,b,c){return this.db.getTargetCache().removeTargets(a,b,c)}markPotentiallyOrphaned(a,b){return yQ(a,b)}Gn(b,c){var a,d;let e;return a=b,d=c,e=!1,yI(a).tt(b=>yF(a,b,d).next(a=>(a&&(e=!0),u9.resolve(!a)))).next(()=>e)}removeOrphanedDocuments(a,b){let c=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[],e=0;return this.Kn(a,(f,g)=>{if(g<=b){let h=this.Gn(a,f).next(b=>{if(!b)return e++,c.getEntry(a,f).next(()=>(c.removeEntry(f,uW.min()),yM(a).delete([0,xU(f.path)])))});d.push(h)}}).next(()=>u9.waitFor(d)).next(()=>c.apply(a)).next(()=>e)}removeTarget(a,b){let c=b.withSequenceNumber(a.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(a,c)}updateLimboDocument(a,b){return yQ(a,b)}Kn(a,c){let b=yM(a),d,e=et.at;return b.Z({index:"documentTargetsIndex"},([a,g],{path:b,sequenceNumber:f})=>{0===a?(e!==et.at&&c(new aj(xW(d)),e),e=f,d=b):e=et.at}).next(()=>{e!==et.at&&c(new aj(xW(d)),e)})}getCacheSize(a){return this.db.getRemoteDocumentCache().getSize(a)}}(this,e),this.ii=a+"main",this.It=new x6(i),this.ri=new vb(this.ii,this.Xs,new /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Performs database creation and schema upgrades. */ class{constructor(a){this.It=a}$(d,g,b,c){var e,f;let h=new va("createOrUpgrade",g);b<1&&c>=1&&(function(a){a.createObjectStore("owner")}(d),(e=d).createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",null,{unique:!0}),e.createObjectStore("documentMutations"),y8(d),function(a){a.createObjectStore("remoteDocuments")}(d));let a=u9.resolve();return b<3&&c>=3&&(0!==b&&((f=d).deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal"),y8(d)),a=a.next(()=>(function(a){let b=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:uW.min().toTimestamp(),targetCount:0};return b.put("targetGlobalKey",c)})(h))),b<4&&c>=4&&(0!==b&&(a=a.next(()=>{var a,b;return a=d,(b=h).store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",null,{unique:!0});let e=b.store("mutations"),d=c.map(a=>e.put(a));return u9.waitFor(d)})})),a=a.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(d)})),b<5&&c>=5&&(a=a.next(()=>this.qs(h))),b<6&&c>=6&&(a=a.next(()=>((function(a){a.createObjectStore("remoteDocumentGlobal")})(d),this.Ks(h)))),b<7&&c>=7&&(a=a.next(()=>this.Gs(h))),b<8&&c>=8&&(a=a.next(()=>this.Qs(d,h))),b<9&&c>=9&&(a=a.next(()=>{var a;(a=d).objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})),b<10&&c>=10&&(a=a.next(()=>this.js(h))),b<11&&c>=11&&(a=a.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(d),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(d)})),b<12&&c>=12&&(a=a.next(()=>{!function(b){let a=b.createObjectStore("documentOverlays",{keyPath:null});a.createIndex("collectionPathOverlayIndex",null,{unique:!1}),a.createIndex("collectionGroupOverlayIndex",null,{unique:!1})}(d)})),b<13&&c>=13&&(a=a.next(()=>(function(b){let a=b.createObjectStore("remoteDocumentsV14",{keyPath:null});a.createIndex("documentKeyIndex",null),a.createIndex("collectionGroupIndex",null)})(d)).next(()=>this.Ws(d,h)).next(()=>d.deleteObjectStore("remoteDocuments"))),b<14&&c>=14&&(a=a.next(()=>this.zs(d,h))),b<15&&c>=15&&(a=a.next(()=>{var a;(a=d).createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:null}).createIndex("sequenceNumberIndex",null,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:null}).createIndex("documentKeyIndex",null,{unique:!1})})),a}Ks(a){let b=0;return a.store("remoteDocuments").Z((c,a)=>{b+=yD(a)}).next(()=>{let c={byteSize:b};return a.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}qs(a){let b=a.store("mutationQueues"),c=a.store("mutations");return b.W().next(b=>u9.forEach(b,b=>{let d=IDBKeyRange.bound([b.userId,-1],[b.userId,b.lastAcknowledgedBatchId]);return c.W("userMutationsIndex",d).next(c=>u9.forEach(c,c=>{var d;(d=c.userId===b.userId)||uG();let e=yb(this.It,c);return yC(a,b.userId,e).next(()=>{})}))}))}Gs(a){let b=a.store("targetDocuments"),c=a.store("remoteDocuments");return a.store("targetGlobal").get("targetGlobalKey").next(a=>{let d=[];return c.Z((c,h)=>{var e;let f=new uX(c),g=[0,xU(e=f)];d.push(b.get(g).next(d=>{var c;return d?u9.resolve():(c=f,b.put({targetId:0,path:xU(c),sequenceNumber:a.highestListenSequenceNumber}))}))}).next(()=>u9.waitFor(d))})}Qs(b,a){b.createObjectStore("collectionParents",{keyPath:null});let c=a.store("collectionParents"),d=new yt,e=a=>{if(d.add(a)){let b=a.lastSegment(),e=a.popLast();return c.put({collectionId:b,parent:xU(e)})}};return a.store("remoteDocuments").Z({X:!0},(a,c)=>{let b=new uX(a);return e(b.popLast())}).next(()=>a.store("documentMutations").Z({X:!0},([c,a,d],f)=>{let b=xW(a);return e(b.popLast())}))}js(a){let b=a.store("targets");return b.Z((e,a)=>{let c=yc(a),d=yd(this.It,c);return b.put(d)})}Ws(c,a){let b=a.store("remoteDocuments"),d=[];return b.Z((h,b)=>{var c;let f=a.store("remoteDocumentsV14"),e=((c=b).document?new aj(uX.fromString(c.document.name).popFirst(5)):c.noDocument?aj.fromSegments(c.noDocument.path):c.unknownDocument?aj.fromSegments(c.unknownDocument.path):uG()).path.toArray(),g={prefixPath:e.slice(0,e.length-2),collectionGroup:e[e.length-2],documentId:e[e.length-1],readTime:b.readTime||[0,0],unknownDocument:b.unknownDocument,noDocument:b.noDocument,document:b.document,hasCommittedMutations:!!b.hasCommittedMutations};d.push(f.put(g))}).next(()=>u9.waitFor(d))}zs(c,a){let b=a.store("mutations"),d=yS(this.It),e=new y5(y7.Bs,this.It.re);return b.W().next(b=>{let c=new Map;return b.forEach(a=>{var b;let d=null!==(b=c.get(a.userId))&& void 0!==b?b:xf();yb(this.It,a).keys().forEach(a=>d=d.add(a)),c.set(a.userId,d)}),u9.forEach(c,(f,g)=>{let b=new B(g),h=yk.oe(this.It,b),c=e.getIndexManager(b),i=yE.oe(b,this.It,c,e.referenceDelegate);return new y$(d,i,h,c).recalculateAndSaveOverlaysForDocumentKeys(new x0(a,et.at),f).next()})})}}(this.It)),this.Cs=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{constructor(a,b){this.referenceDelegate=a,this.It=b}allocateTargetId(a){return this.Vn(a).next(b=>{let c=new yJ(b.highestTargetId);return b.highestTargetId=c.next(),this.Sn(a,b).next(()=>b.highestTargetId)})}getLastRemoteSnapshotVersion(a){return this.Vn(a).next(a=>uW.fromTimestamp(new uV(a.lastRemoteSnapshotVersion.seconds,a.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(a){return this.Vn(a).next(a=>a.highestListenSequenceNumber)}setTargetsMetadata(a,b,c){return this.Vn(a).next(d=>(d.highestListenSequenceNumber=b,c&&(d.lastRemoteSnapshotVersion=c.toTimestamp()),b>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=b),this.Sn(a,d)))}addTargetData(a,b){return this.Dn(a,b).next(()=>this.Vn(a).next(c=>(c.targetCount+=1,this.Cn(b,c),this.Sn(a,c))))}updateTargetData(a,b){return this.Dn(a,b)}removeTargetData(a,b){return this.removeMatchingKeysForTargetId(a,b.targetId).next(()=>yK(a).delete(b.targetId)).next(()=>this.Vn(a)).next(b=>{var c;return b.targetCount>0||uG(),b.targetCount-=1,this.Sn(a,b)})}removeTargets(a,b,c){let d=0,e=[];return yK(a).Z((h,g)=>{let f=yc(g);f.sequenceNumber<=b&&null===c.get(f.targetId)&&(d++,e.push(this.removeTargetData(a,f)))}).next(()=>u9.waitFor(e)).next(()=>d)}forEachTarget(a,b){return yK(a).Z((d,a)=>{let c=yc(a);b(c)})}Vn(a){return yL(a).get("targetGlobalKey").next(a=>{var b;return null!==a||uG(),a})}Sn(a,b){return yL(a).put("targetGlobalKey",b)}Dn(a,b){return yK(a).put(yd(this.It,b))}Cn(a,b){let c=!1;return a.targetId>b.highestTargetId&&(b.highestTargetId=a.targetId,c=!0),a.sequenceNumber>b.highestListenSequenceNumber&&(b.highestListenSequenceNumber=a.sequenceNumber,c=!0),c}getTargetCount(a){return this.Vn(a).next(a=>a.targetCount)}getTargetData(b,c){let a=v0(c),d=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),e=null;return yK(b).Z({range:d,index:"queryTargetsIndex"},(f,b,d)=>{let a=yc(b);v1(c,a.target)&&(e=a,d.done())}).next(()=>e)}addMatchingKeys(a,b,d){let c=[],e=yM(a);return b.forEach(b=>{let f=xU(b.path);c.push(e.put({targetId:d,path:f})),c.push(this.referenceDelegate.addReference(a,d,b))}),u9.waitFor(c)}removeMatchingKeys(a,b,c){let d=yM(a);return u9.forEach(b,b=>{let e=xU(b.path);return u9.waitFor([d.delete([c,e]),this.referenceDelegate.removeReference(a,c,b)])})}removeMatchingKeysForTargetId(b,a){let c=yM(b),d=IDBKeyRange.bound([a],[a+1],!1,!0);return c.delete(d)}getMatchingKeysForTargetId(b,a){let c=IDBKeyRange.bound([a],[a+1],!1,!0),d=yM(b),e=xf();return d.Z({range:c,X:!0},(a,d,f)=>{let b=xW(a[1]),c=new aj(b);e=e.add(c)}).next(()=>e)}containsKey(b,c){var d;let a=xU(c.path),e=IDBKeyRange.bound([a],[(d=a)+"\0"],!1,!0),f=0;return yM(b).Z({index:"documentTargetsIndex",X:!0,range:e},([a,c],d,b)=>{0!==a&&(f++,b.done())}).next(()=>f>0)}se(a,b){return yK(a).get(b).next(a=>a?yc(a):null)}}(this.referenceDelegate,this.It),this.remoteDocumentCache=yS(this.It),this.Ns=new /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class{getBundleMetadata(a,b){return yi(a).get(b).next(b=>{var a;if(b)return{id:(a=b).bundleId,createTime:ya(a.createTime),version:a.version}})}saveBundleMetadata(b,c){var a;return yi(b).put({bundleId:(a=c).id,createTime:x9(xv(a.createTime)),version:a.version})}getNamedQuery(a,b){return yj(a).get(b).next(b=>{var a;if(b)return{name:(a=b).name,query:ye(a.bundledQuery),readTime:ya(a.readTime)}})}saveNamedQuery(b,c){var a;return yj(b).put({name:(a=c).name,readTime:x9(xv(a.readTime)),bundledQuery:a.bundledQuery})}},this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&uD("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new uI(uH.FAILED_PRECONDITION,y9);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",a=>this.Cs.getHighestSequenceNumber(a))}).then(a=>{this.Ss=new et(a,this.Js)}).then(()=>{this.Ds=!0}).catch(a=>(this.ri&&this.ri.close(),Promise.reject(a)))}li(a){return this.si=async b=>{if(this.started)return a(b)},a(this.isPrimary)}setDatabaseDeletedListener(a){this.ri.L(async b=>{null===b.newVersion&&await a()})}setNetworkEnabled(a){this.networkEnabled!==a&&(this.networkEnabled=a,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",a=>zc(a).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(a).next(a=>{a||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(a)).next(b=>this.isPrimary&&!b?this._i(a).next(()=>!1):!!b&&this.wi(a).next(()=>!0))).catch(a=>{if(ve(a))return uC("IndexedDbPersistence","Failed to extend owner lease: ",a),this.isPrimary;if(!this.allowTabSynchronization)throw a;return uC("IndexedDbPersistence","Releasing owner lease after error during lease refresh",a),!1}).then(a=>{this.isPrimary!==a&&this.Hs.enqueueRetryable(()=>this.si(a)),this.isPrimary=a})}fi(a){return zb(a).get("owner").next(a=>u9.resolve(this.mi(a)))}gi(a){return zc(a).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();let a=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{let b=x1(a,"clientMetadata");return b.W().next(a=>{let d=this.Ii(a,18e5),c=a.filter(a=>-1===d.indexOf(a));return u9.forEach(c,a=>b.delete(a.clientId)).next(()=>c)})}).catch(()=>[]);if(this.oi)for(let b of a)this.oi.removeItem(this.Ti(b.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(a){return!!a&&a.ownerId===this.clientId}di(a){return this.Ys?u9.resolve(!0):zb(a).get("owner").next(b=>{if(null!==b&&this.pi(b.leaseTimestampMs,5e3)&&!this.Ei(b.ownerId)){if(this.mi(b)&&this.networkEnabled)return!0;if(!this.mi(b)){if(!b.allowTabSynchronization)throw new uI(uH.FAILED_PRECONDITION,y9);return!1}}return!(!this.networkEnabled||!this.inForeground)||zc(a).W().next(a=>void 0===this.Ii(a,5e3).find(a=>{if(this.clientId!==a.clientId){let b=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(b||c&&d)return!0}return!1}))}).next(a=>(this.isPrimary!==a&&uC("IndexedDbPersistence",`Client ${a?"is":"is not"} eligible for a primary lease.`),a))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],a=>{let b=new x0(a,et.at);return this._i(b).next(()=>this.gi(b))}),this.ri.close(),this.Pi()}Ii(a,b){return a.filter(a=>this.pi(a.updateTimeMs,b)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",a=>zc(a).W().next(a=>this.Ii(a,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(a,b){return yE.oe(a,this.It,b,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(a){return new yv(a,this.It.re.databaseId)}getDocumentOverlayCache(a){return yk.oe(this.It,a)}getBundleCache(){return this.Ns}runTransaction(b,c,e){var a;uC("IndexedDbPersistence","Starting transaction:",b);let d=15===(a=this.Xs)?x_:14===a?ew:13===a?ev:12===a?x$:11===a?eu:void uG(),f;return this.ri.runTransaction(b,"readonly"===c?"readonly":"readwrite",d,a=>(f=new x0(a,this.Ss?this.Ss.next():et.at),"readwrite-primary"===c?this.fi(f).next(a=>!!a||this.di(f)).next(a=>{if(!a)throw uD(`Failed to obtain primary lease for action '${b}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new uI(uH.FAILED_PRECONDITION,u7);return e(f)}).next(a=>this.wi(f).next(()=>a)):this.Vi(f).next(()=>e(f)))).then(a=>(f.raiseOnCommittedEvent(),a))}Vi(a){return zb(a).get("owner").next(a=>{if(null!==a&&this.pi(a.leaseTimestampMs,5e3)&&!this.Ei(a.ownerId)&&!this.mi(a)&&!(this.Ys||this.allowTabSynchronization&&a.allowTabSynchronization))throw new uI(uH.FAILED_PRECONDITION,y9)})}wi(a){let b={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zb(a).put("owner",b)}static C(){return vb.C()}_i(a){let b=zb(a);return b.get("owner").next(a=>this.mi(a)?(uC("IndexedDbPersistence","Releasing primary lease."),b.delete("owner")):u9.resolve())}pi(a,c){let b=Date.now();return!(a<b-c)&&(!(a>b)||(uD(`Detected an update time that is in the future: ${a} > ${b}`),!1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var a;"function"==typeof(null===(a=this.window)|| void 0===a?void 0:a.addEventListener)&&(this.Zs=()=>{this.Ai(),isSafari()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(b){var a;try{let c=null!==(null===(a=this.oi)|| void 0===a?void 0:a.getItem(this.Ti(b)));return uC("IndexedDbPersistence",`Client '${b}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(d){return uD("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(a){uD("Failed to set zombie client id.",a)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(a){}}Ti(a){return`firestore_zombie_${this.persistenceKey}_${a}`}}function zb(a){return x1(a,"owner")}function zc(a){return x1(a,"clientMetadata")}function zd(a,c){let b=a.projectId;return a.isDefaultDatabase||(b+="."+a.database),"firestore/"+c+"/"+b+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A set of changes to what documents are currently in view and out of view for
 * a given query. These changes are sent to the LocalStore by the View (via
 * the SyncEngine) and are used to pin / unpin documents as appropriate.
 */ class ze{constructor(a,b,c,d){this.targetId=a,this.fromCache=b,this.Si=c,this.Di=d}static Ci(e,d){let a=xf(),b=xf();for(let c of d.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:b=b.add(c.doc.key)}return new ze(e,d.fromCache,a,b)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The Firestore query engine.
 *
 * Firestore queries can be executed in three modes. The Query Engine determines
 * what mode to use based on what data is persisted. The mode only determines
 * the runtime complexity of the query - the result set is equivalent across all
 * implementations.
 *
 * The Query engine will use indexed-based execution if a user has configured
 * any index that can be used to execute query (via `setIndexConfiguration()`).
 * Otherwise, the engine will try to optimize the query by re-using a previously
 * persisted query result. If that is not possible, the query will be executed
 * via a full collection scan.
 *
 * Index-based execution is the default when available. The query engine
 * supports partial indexed execution and merges the result from the index
 * lookup with documents that have not yet been indexed. The index evaluation
 * matches the backend's format and as such, the SDK can use indexing for all
 * queries that the backend supports.
 *
 * If no index exists, the query engine tries to take advantage of the target
 * document mapping in the TargetCache. These mappings exists for all queries
 * that have been synced with the backend at least once and allow the query
 * engine to only read documents that previously matched a query plus any
 * documents that were edited after the query was last listened to.
 *
 * There are some cases when this optimization is not guaranteed to produce
 * the same results as full collection scans. In these cases, query
 * processing falls back to full scans. These cases are:
 *
 * - Limit queries where a document that matched the query previously no longer
 *   matches the query.
 *
 * - Limit queries where a document edit may cause the document to sort below
 *   another document that is in the local cache.
 *
 * - Queries that have never been CURRENT or free of limbo documents.
 */ class zf{constructor(){this.xi=!1}initialize(a,b){this.Ni=a,this.indexManager=b,this.xi=!0}getDocumentsMatchingQuery(a,b,c,d){return this.ki(a,b).next(e=>e||this.Oi(a,b,d,c)).next(c=>c||this.Mi(a,b))}ki(b,a){if(wm(a))return u9.resolve(null);let c=wr(a);return this.indexManager.getIndexType(b,c).next(d=>0===d?null:(null!==a.limit&&1===d&&(a=ws(a,null,"F"),c=wr(a)),this.indexManager.getDocumentsMatchingTarget(b,c).next(d=>{let e=xf(...d);return this.Ni.getDocuments(b,e).next(d=>this.indexManager.getMinOffset(b,c).next(c=>{let f=this.Fi(a,d);return this.$i(a,f,e,c.readTime)?this.ki(b,ws(a,null,"F")):this.Bi(b,f,a,c)}))})))}Oi(a,b,c,d){return wm(b)||d.isEqual(uW.min())?this.Mi(a,b):this.Ni.getDocuments(a,c).next(f=>{let e=this.Fi(b,f);return this.$i(b,e,c,d)?this.Mi(a,b):(uB()<=r1.DEBUG&&uC("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),wv(b)),this.Bi(a,e,b,u3(d,-1)))})}Fi(a,b){let c=new bS(wy(a));return b.forEach((d,b)=>{ww(a,b)&&(c=c.add(b))}),c}$i(c,a,d,e){if(null===c.limit)return!1;if(d.size!==a.size)return!0;let b="F"===c.limitType?a.last():a.first();return!!b&&(b.hasPendingWrites||b.version.compareTo(e)>0)}Mi(b,a){return uB()<=r1.DEBUG&&uC("QueryEngine","Using full collection scan to execute query:",wv(a)),this.Ni.getDocumentsMatchingQuery(b,a,u5.min())}Bi(a,d,b,c){return this.Ni.getDocumentsMatchingQuery(a,b,c).next(a=>(d.forEach(b=>{a=a.insert(b.key,b)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Implements `LocalStore` interface.
 *
 * Note: some field defined in this class might have public access level, but
 * the class is not exported so they are only accessible from this module.
 * This is useful to implement optional features (like bundles) in free
 * functions, such that they are tree-shakeable.
 */ class zg{constructor(a,b,c,d){this.persistence=a,this.Li=b,this.It=d,this.Ui=new aP(eq),this.qi=new w5(a=>v0(a),v1),this.Ki=new Map,this.Gi=a.getRemoteDocumentCache(),this.Cs=a.getTargetCache(),this.Ns=a.getBundleCache(),this.Qi(c)}Qi(a){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(a),this.indexManager=this.persistence.getIndexManager(a),this.mutationQueue=this.persistence.getMutationQueue(a,this.indexManager),this.localDocuments=new y$(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(a){return this.persistence.runTransaction("Collect garbage","readwrite-primary",b=>a.collect(b,this.Ui))}}function zh(a,b,c,d){return new zg(a,b,c,d)}async function zi(a,d){var b;let c=b=a;return await c.persistence.runTransaction("Handle user change","readonly",a=>{let b;return c.mutationQueue.getAllMutationBatches(a).next(e=>(b=e,c.Qi(d),c.mutationQueue.getAllMutationBatches(a))).next(g=>{let h=[],i=[],d=xf();for(let e of b)for(let j of(h.push(e.batchId),e.mutations))d=d.add(j.key);for(let f of g)for(let k of(i.push(f.batchId),f.mutations))d=d.add(k.key);return c.localDocuments.getDocuments(a,d).next(a=>({ji:a,removedBatchIds:h,addedBatchIds:i}))})})}function zj(a){var b;let c=b=a;return c.persistence.runTransaction("Get last remote snapshot version","readonly",a=>c.Cs.getLastRemoteSnapshotVersion(a))}function zk(a,b,c){let d=xf(),e=xf();return c.forEach(a=>d=d.add(a)),b.getEntries(a,d).next(d=>{let a=w6;return c.forEach((f,c)=>{let g=d.get(f);c.isFoundDocument()!==g.isFoundDocument()&&(e=e.add(f)),c.isNoDocument()&&c.version.isEqual(uW.min())?(b.removeEntry(f,c.readTime),a=a.insert(f,c)):!g.isValidDocument()||c.version.compareTo(g.version)>0||0===c.version.compareTo(g.version)&&g.hasPendingWrites?(b.addEntry(c),a=a.insert(f,c)):uC("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",c.version)}),{Wi:a,zi:e}})}function zl(a,d){var b;let c=b=a;return c.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===d&&(d=-1),c.mutationQueue.getNextMutationBatchAfterBatchId(a,d)))}function zm(a,d){var b;let c=b=a;return c.persistence.runTransaction("Allocate target","readwrite",a=>{let b;return c.Cs.getTargetData(a,d).next(e=>e?(b=e,u9.resolve(b)):c.Cs.allocateTargetId(a).next(e=>(b=new x5(d,e,0,a.currentSequenceNumber),c.Cs.addTargetData(a,b).next(()=>b))))}).then(a=>{let b=c.Ui.get(a.targetId);return(null===b||a.snapshotVersion.compareTo(b.snapshotVersion)>0)&&(c.Ui=c.Ui.insert(a.targetId,a),c.qi.set(d,a.targetId)),a})}async function zn(e,b,d){var f;let a=f=e,g=a.Ui.get(b);try{d||await a.persistence.runTransaction("Release target",d?"readwrite":"readwrite-primary",b=>a.persistence.referenceDelegate.removeTarget(b,g))}catch(c){if(!ve(c))throw c;uC("LocalStore",`Failed to update sequence numbers for target ${b}: ${c}`)}a.Ui=a.Ui.remove(b),a.qi.delete(g.target)}function zo(a,d,e){var b;let c=b=a,f=uW.min(),g=xf();return c.persistence.runTransaction("Execute query","readonly",a=>(function(d,e,b){var f;let a=f=d,c=a.qi.get(b);return void 0!==c?u9.resolve(a.Ui.get(c)):a.Cs.getTargetData(e,b)})(c,a,wr(d)).next(b=>{if(b)return f=b.lastLimboFreeSnapshotVersion,c.Cs.getMatchingKeysForTargetId(a,b.targetId).next(a=>{g=a})}).next(()=>c.Li.getDocumentsMatchingQuery(a,d,e?f:uW.min(),e?g:xf())).next(a=>(zr(c,wx(d),a),{documents:a,Hi:g})))}function zp(c,d){var e,f;let a=e=c,g=f=a.Cs,b=a.Ui.get(d);return b?Promise.resolve(b.target):a.persistence.runTransaction("Get target data","readonly",a=>g.se(a,d).next(a=>a?a.target:null))}function zq(b,c){var d;let a=d=b,e=a.Ki.get(c)||uW.min();return a.persistence.runTransaction("Get new document changes","readonly",b=>a.Gi.getAllFromCollectionGroup(b,c,u3(e,-1),Number.MAX_SAFE_INTEGER)).then(b=>(zr(a,c,b),b))}function zr(a,b,c){let d=a.Ki.get(b)||uW.min();c.forEach((b,a)=>{a.readTime.compareTo(d)>0&&(d=a.readTime)}),a.Ki.set(b,d)}async function zs(i,b,j,k){var l,d;let c=l=i,e=xf(),f=w6;for(let a of j){let g=b.Ji(a.metadata.name);a.document&&(e=e.add(g));let h=b.Yi(a);h.setReadTime(b.Xi(a.metadata.readTime)),f=f.insert(g,h)}let m=c.Gi.newChangeBuffer({trackRemovals:!0}),n=await zm(c,(d=k,wr(wl(uX.fromString(`__bundle__/docs/${d}`)))));return c.persistence.runTransaction("Apply bundle documents","readwrite",a=>zk(a,m,f).next(b=>(m.apply(a),b)).next(b=>c.Cs.removeMatchingKeysForTargetId(a,n.targetId).next(()=>c.Cs.addMatchingKeys(a,e,n.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(a,b.Wi,b.zi)).next(()=>b.Wi)))}async function zt(a,b,e=xf()){var c;let f=await zm(a,wr(ye(b.bundledQuery))),d=c=a;return d.persistence.runTransaction("Save named query","readwrite",c=>{let g=xv(b.readTime);if(f.snapshotVersion.compareTo(g)>=0)return d.Ns.saveNamedQuery(c,b);let a=f.withResumeToken(bT.EMPTY_BYTE_STRING,g);return d.Ui=d.Ui.insert(a.targetId,a),d.Cs.updateTargetData(c,a).next(()=>d.Cs.removeMatchingKeysForTargetId(c,f.targetId)).next(()=>d.Cs.addMatchingKeys(c,e,f.targetId)).next(()=>d.Ns.saveNamedQuery(c,b))})}function zu(a,b){return`firestore_clients_${a}_${b}`}function zv(c,a,d){let b=`firestore_mutations_${c}_${d}`;return a.isAuthenticated()&&(b+=`_${a.uid}`),b}function zw(a,b){return`firestore_targets_${a}_${b}`}class zx{constructor(a,b,c,d){this.user=a,this.batchId=b,this.state=c,this.error=d}static Zi(f,c,d){let a=JSON.parse(d),e,b="object"==typeof a&& -1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return b&&a.error&&(b="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(e=new uI(a.error.code,a.error.message)),b?new zx(f,c,a.state,e):(uD("SharedClientState",`Failed to parse mutation state for ID '${c}': ${d}`),null)}tr(){let a={state:this.state,updateTimeMs:Date.now()};return this.error&&(a.error={code:this.error.code,message:this.error.message}),JSON.stringify(a)}}class zy{constructor(a,b,c){this.targetId=a,this.state=b,this.error=c}static Zi(c,d){let a=JSON.parse(d),e,b="object"==typeof a&& -1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return b&&a.error&&(b="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(e=new uI(a.error.code,a.error.message)),b?new zy(c,a.state,e):(uD("SharedClientState",`Failed to parse target state for ID '${c}': ${d}`),null)}tr(){let a={state:this.state,updateTimeMs:Date.now()};return this.error&&(a.error={code:this.error.code,message:this.error.message}),JSON.stringify(a)}}class zz{constructor(a,b){this.clientId=a,this.activeTargetIds=b}static Zi(e,f){let a=JSON.parse(f),c="object"==typeof a&&a.activeTargetIds instanceof Array,d=xg;for(let b=0;c&&b<a.activeTargetIds.length;++b)c=vB(a.activeTargetIds[b]),d=d.add(a.activeTargetIds[b]);return c?new zz(e,d):(uD("SharedClientState",`Failed to parse client data for instance '${e}': ${f}`),null)}}class zA{constructor(a,b){this.clientId=a,this.onlineState=b}static Zi(b){let a=JSON.parse(b);return"object"==typeof a&& -1!==["Unknown","Online","Offline"].indexOf(a.onlineState)&&"string"==typeof a.clientId?new zA(a.clientId,a.onlineState):(uD("SharedClientState",`Failed to parse online state: ${b}`),null)}}class zB{constructor(){this.activeTargetIds=xg}er(a){this.activeTargetIds=this.activeTargetIds.add(a)}nr(a){this.activeTargetIds=this.activeTargetIds.delete(a)}tr(){let a={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(a)}}class zC{constructor(c,d,b,e,f){var g,h,i;this.window=c,this.Hs=d,this.persistenceKey=b,this.sr=e,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new aP(eq),this.started=!1,this.cr=[];let a=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.ar=zu(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${g=this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zB),this.lr=RegExp(`^firestore_clients_${a}_([^_]*)$`),this.dr=RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this._r=RegExp(`^firestore_targets_${a}_(\\d+)$`),this.wr=`firestore_online_state_${h=this.persistenceKey}`,this.mr=`firestore_bundle_loaded_v2_${i=this.persistenceKey}`,this.window.addEventListener("storage",this.ir)}static C(a){return!(!a||!a.localStorage)}async start(){let f=await this.syncEngine.vi();for(let a of f){if(a===this.sr)continue;let c=this.getItem(zu(this.persistenceKey,a));if(c){let b=zz.Zi(a,c);b&&(this.ur=this.ur.insert(b.clientId,b))}}this.gr();let d=this.storage.getItem(this.wr);if(d){let e=this.yr(d);e&&this.pr(e)}for(let g of this.cr)this.rr(g);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(a){this.setItem(this.hr,JSON.stringify(a))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(b){let a=!1;return this.ur.forEach((d,c)=>{c.activeTargetIds.has(b)&&(a=!0)}),a}addPendingMutation(a){this.Tr(a,"pending")}updateMutationState(a,b,c){this.Tr(a,b,c),this.Er(a)}addLocalQueryTarget(a){let b="not-current";if(this.isActiveQueryTarget(a)){let c=this.storage.getItem(zw(this.persistenceKey,a));if(c){let d=zy.Zi(a,c);d&&(b=d.state)}}return this.Ar.er(a),this.gr(),b}removeLocalQueryTarget(a){this.Ar.nr(a),this.gr()}isLocalQueryTarget(a){return this.Ar.activeTargetIds.has(a)}clearQueryState(a){this.removeItem(zw(this.persistenceKey,a))}updateQueryState(a,b,c){this.Rr(a,b,c)}handleUserChange(a,b,c){b.forEach(a=>{this.Er(a)}),this.currentUser=a,c.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(a){this.br(a)}notifyBundleLoaded(a){this.Pr(a)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(a){let b=this.storage.getItem(a);return uC("SharedClientState","READ",a,b),b}setItem(a,b){uC("SharedClientState","SET",a,b),this.storage.setItem(a,b)}removeItem(a){uC("SharedClientState","REMOVE",a),this.storage.removeItem(a)}rr(b){let a=b;if(a.storageArea===this.storage){if(uC("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void uD("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(null!==a.key){if(this.lr.test(a.key)){if(null==a.newValue){let g=this.vr(a.key);return this.Vr(g,null)}{let b=this.Sr(a.key,a.newValue);if(b)return this.Vr(b.clientId,b)}}else if(this.dr.test(a.key)){if(null!==a.newValue){let c=this.Dr(a.key,a.newValue);if(c)return this.Cr(c)}}else if(this._r.test(a.key)){if(null!==a.newValue){let d=this.Nr(a.key,a.newValue);if(d)return this.kr(d)}}else if(a.key===this.wr){if(null!==a.newValue){let e=this.yr(a.newValue);if(e)return this.pr(e)}}else if(a.key===this.hr){let f=function(a){let b=et.at;if(null!=a)try{var e;let c=JSON.parse(a);"number"==typeof c||uG(),b=c}catch(d){uD("SharedClientState","Failed to read sequence number from WebStorage",d)}return b}(a.newValue);f!==et.at&&this.sequenceNumberHandler(f)}else if(a.key===this.mr){let h=this.Or(a.newValue);await Promise.all(h.map(a=>this.syncEngine.Mr(a)))}}}else this.cr.push(a)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(a,b,c){let d=new zx(this.currentUser,a,b,c),e=zv(this.persistenceKey,this.currentUser,a);this.setItem(e,d.tr())}Er(a){let b=zv(this.persistenceKey,this.currentUser,a);this.removeItem(b)}br(a){let b={clientId:this.sr,onlineState:a};this.storage.setItem(this.wr,JSON.stringify(b))}Rr(a,b,c){let d=zw(this.persistenceKey,a),e=new zy(a,b,c);this.setItem(d,e.tr())}Pr(a){let b=JSON.stringify(Array.from(a));this.setItem(this.mr,b)}vr(b){let a=this.lr.exec(b);return a?a[1]:null}Sr(a,b){let c=this.vr(a);return zz.Zi(c,b)}Dr(b,c){let a=this.dr.exec(b),d=Number(a[1]),e=void 0!==a[2]?a[2]:null;return zx.Zi(new B(e),d,c)}Nr(a,b){let c=this._r.exec(a),d=Number(c[1]);return zy.Zi(d,b)}yr(a){return zA.Zi(a)}Or(a){return JSON.parse(a)}async Cr(a){if(a.user.uid===this.currentUser.uid)return this.syncEngine.Fr(a.batchId,a.state,a.error);uC("SharedClientState",`Ignoring mutation for non-active user ${a.user.uid}`)}kr(a){return this.syncEngine.$r(a.targetId,a.state,a.error)}Vr(a,b){let c=b?this.ur.insert(a,b):this.ur.remove(a),d=this.Ir(this.ur),e=this.Ir(c),f=[],g=[];return e.forEach(a=>{d.has(a)||f.push(a)}),d.forEach(a=>{e.has(a)||g.push(a)}),this.syncEngine.Br(f,g).then(()=>{this.ur=c})}pr(a){this.ur.get(a.clientId)&&this.onlineStateHandler(a.onlineState)}Ir(a){let b=xg;return a.forEach((c,a)=>{b=b.unionWith(a.activeTargetIds)}),b}}class zD{constructor(){this.Lr=new zB,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(a){}updateMutationState(a,b,c){}addLocalQueryTarget(a){return this.Lr.er(a),this.Ur[a]||"not-current"}updateQueryState(a,b,c){this.Ur[a]=b}removeLocalQueryTarget(a){this.Lr.nr(a)}isLocalQueryTarget(a){return this.Lr.activeTargetIds.has(a)}clearQueryState(a){delete this.Ur[a]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(a){return this.Lr.activeTargetIds.has(a)}start(){return this.Lr=new zB,Promise.resolve()}handleUserChange(a,b,c){}setOnlineState(a){}shutdown(){}writeSequenceNumber(a){}notifyBundleLoaded(a){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class zE{qr(a){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ // References to `window` are guarded by BrowserConnectivityMonitor.isAvailable()
/* eslint-disable no-restricted-globals */ /**
 * Browser implementation of ConnectivityMonitor.
 */ class zF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(a){this.Wr.push(a)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){for(let a of(uC("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.Wr))a(0)}jr(){for(let a of(uC("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.Wr))a(1)}static C(){return"undefined"!=typeof window&& void 0!==window.addEventListener&& void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let zG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * Maps RPC names to the corresponding REST endpoint name.
 *
 * We use array notation to avoid mangling.
 */ /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Provides a simple helper class that implements the Stream interface to
 * bridge to other implementations that are streams but do not implement the
 * interface. The stream callbacks are invoked with the callOn... methods.
 */ class zH{constructor(a){this.Hr=a.Hr,this.Jr=a.Jr}Yr(a){this.Xr=a}Zr(a){this.eo=a}onMessage(a){this.no=a}close(){this.Jr()}send(a){this.Hr(a)}so(){this.Xr()}io(a){this.eo(a)}ro(a){this.no(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class zI extends class{constructor(a){this.databaseInfo=a,this.databaseId=a.databaseId;let b=a.ssl?"https":"http";this.oo=b+"://"+a.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(a,e,b,f,g){let c=this.ho(a,e);uC("RestConnection","Sending: ",c,b);let d={};return this.lo(d,f,g),this.fo(a,c,d,b).then(a=>(uC("RestConnection","Received: ",a),a),d=>{throw uE("RestConnection",`${a} failed with error: `,d,"url: ",c,"request:",b),d})}_o(a,b,c,d,e,f){return this.ao(a,b,c,d,e)}lo(a,b,c){a["X-Goog-Api-Client"]="gl-js/ fire/"+uz,a["Content-Type"]="text/plain",this.databaseInfo.appId&&(a["X-Firebase-GMPID"]=this.databaseInfo.appId),b&&b.headers.forEach((b,c)=>a[c]=b),c&&c.headers.forEach((b,c)=>a[c]=b)}ho(a,b){let c=zG[a];return`${this.oo}/v1/${b}:${c}`}}{constructor(a){super(a),this.forceLongPolling=a.forceLongPolling,this.autoDetectLongPolling=a.autoDetectLongPolling,this.useFetchStreams=a.useFetchStreams}fo(a,b,c,d){return new Promise((g,h)=>{let e=new uw;e.setWithCredentials(!0),e.listenOnce(ur.COMPLETE,()=>{try{switch(e.getLastErrorCode()){case uq.NO_ERROR:let c=e.getResponseJson();uC("Connection","XHR received:",JSON.stringify(c)),g(c);break;case uq.TIMEOUT:uC("Connection",'RPC "'+a+'" timed out'),h(new uI(uH.DEADLINE_EXCEEDED,"Request time out"));break;case uq.HTTP_ERROR:let d=e.getStatus();if(uC("Connection",'RPC "'+a+'" failed with status:',d,"response text:",e.getResponseText()),d>0){let b=e.getResponseJson().error;if(b&&b.status&&b.message){let f=function(b){let a=b.toLowerCase().replace(/_/g,"-");return Object.values(uH).indexOf(a)>=0?a:uH.UNKNOWN}(b.status);h(new uI(f,b.message))}else h(new uI(uH.UNKNOWN,"Server responded with status "+e.getStatus()))}else h(new uI(uH.UNAVAILABLE,"Connection failed."));break;default:uG()}}finally{uC("Connection",'RPC "'+a+'" completed.')}});let f=JSON.stringify(d);e.send(b,"POST",f,c,15)})}wo(e,f,g){let h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=uo(),j=up(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new uu({})),this.lo(a.initMessageHeaders,f,g),a.encodeInitMessageHeaders=!0;let d=h.join("");uC("Connection","Creating WebChannel: "+d,a);let c=i.createWebChannel(d,a),l=!1,m=!1,k=new zH({Hr(a){m?uC("Connection","Not sending because WebChannel is closed:",a):(l||(uC("Connection","Opening WebChannel transport."),c.open(),l=!0),uC("Connection","WebChannel sending:",a),c.send(a))},Jr:()=>c.close()}),b=(a,b,c)=>{a.listen(b,a=>{try{c(a)}catch(b){setTimeout(()=>{throw b},0)}})};return b(c,uv.EventType.OPEN,()=>{m||uC("Connection","WebChannel transport opened.")}),b(c,uv.EventType.CLOSE,()=>{m||(m=!0,uC("Connection","WebChannel transport closed"),k.io())}),b(c,uv.EventType.ERROR,a=>{m||(m=!0,uE("Connection","WebChannel transport errored:",a),k.io(new uI(uH.UNAVAILABLE,"The operation could not be completed")))}),b(c,uv.EventType.MESSAGE,i=>{var d,j;if(!m){let b=i.data[0];(j=!!b)||uG();let f=b,a=f.error||(null===(d=f[0])|| void 0===d?void 0:d.error);if(a){uC("Connection","WebChannel received error:",a);let g=a.status,e=function(b){let a=aR[b];if(void 0!==a)return w4(a)}(g),h=a.message;void 0===e&&(e=uH.INTERNAL,h="Unknown error status: "+g+" with message "+a.message),m=!0,k.io(new uI(e,h)),c.close()}else uC("Connection","WebChannel received:",b),k.ro(b)}}),b(j,us.STAT_EVENT,a=>{a.stat===ut.PROXY?uC("Connection","Detected buffering proxy"):a.stat===ut.NOPROXY&&uC("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** Initializes the WebChannelConnection for the browser. */ /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /** The Platform's 'window' implementation or null if not available. */ function zJ(){return"undefined"!=typeof window?window:null}function zK(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function zL(a){return new xs(a,!0)}class zM{constructor(a,b,c=1e3,d=1.5,e=6e4){this.Hs=a,this.timerId=b,this.mo=c,this.yo=d,this.po=e,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(d){this.cancel();let b=Math.floor(this.Io+this.bo()),c=Math.max(0,Date.now()-this.Eo),a=Math.max(0,b-c);a>0&&uC("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${b} ms, last attempt: ${c} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),d())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A PersistentStream is an abstract base class that represents a streaming RPC
 * to the Firestore backend. It's built on top of the connections own support
 * for streaming RPCs, and adds several critical features for our clients:
 *
 *   - Exponential backoff on failure
 *   - Authentication via CredentialsProvider
 *   - Dispatching all callbacks into the shared worker queue
 *   - Closing idle streams after 60 seconds of inactivity
 *
 * Subclasses of PersistentStream implement serialization of models to and
 * from the JSON representation of the protocol buffers for a specific
 * streaming RPC.
 *
 * ## Starting and Stopping
 *
 * Streaming RPCs are stateful and need to be start()ed before messages can
 * be sent and received. The PersistentStream will call the onOpen() function
 * of the listener once the stream is ready to accept requests.
 *
 * Should a start() fail, PersistentStream will call the registered onClose()
 * listener with a FirestoreError indicating what went wrong.
 *
 * A PersistentStream can be started and stopped repeatedly.
 *
 * Generic types:
 *  SendType: The type of the outgoing message of the underlying
 *    connection stream
 *  ReceiveType: The type of the incoming message of the underlying
 *    connection stream
 *  ListenerType: The type of the listener that will be used for callbacks
 */ class ey{constructor(a,b,c,d,e,f,g,h){this.Hs=a,this.vo=c,this.Vo=d,this.connection=e,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=h,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zM(a,b)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(a){this.Lo(),this.stream.send(a)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(b,a){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==b?this.xo.reset():a&&a.code===uH.RESOURCE_EXHAUSTED?(uD(a.toString()),uD("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):a&&a.code===uH.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=b,await this.listener.Zr(a)}qo(){}auth(){this.state=1;let a=this.Ko(this.So),b=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.So===b&&this.Go(a,c)},b=>{a(()=>{let a=new uI(uH.UNKNOWN,"Fetching auth token failed: "+b.message);return this.Qo(a)})})}Go(a,b){let c=this.Ko(this.So);this.stream=this.jo(a,b),this.stream.Yr(()=>{c(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{c(()=>this.Qo(a))}),this.stream.onMessage(a=>{c(()=>this.onMessage(a))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(a){return uC("PersistentStream",`close with error: ${a}`),this.stream=null,this.close(4,a)}Ko(a){return b=>{this.Hs.enqueueAndForget(()=>this.So===a?b():(uC("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zN extends null{constructor(a,b,c,d,e,f){super(a,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",b,c,d,f),this.It=e}jo(a,b){return this.connection.wo("Listen",a,b)}onMessage(a){this.xo.reset();let b=function(g,a){let d;if("targetChange"in a){var e,j,c,E,F;a.targetChange;let n="NO_CHANGE"===(e=a.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:uG(),o=a.targetChange.targetIds||[],p=(j=g,c=a.targetChange.resumeToken,j.gt?(void 0===c||"string"==typeof c||uG(),bT.fromBase64String(c||"")):(void 0===c||c instanceof Uint8Array||uG(),bT.fromUint8Array(c||new Uint8Array))),k=a.targetChange.cause,q=k&&function(a){let b=void 0===a.code?uH.UNKNOWN:w4(a.code);return new uI(b,a.message||"")}(k);d=new xl(n,o,p,q||null)}else if("documentChange"in a){a.documentChange;let b=a.documentChange;b.document,b.document.name,b.document.updateTime;let r=xz(g,b.document.name),s=xv(b.document.updateTime),t=new vX({mapValue:{fields:b.document.fields}}),l=vZ.newFoundDocument(r,s,t),u=b.targetIds||[],v=b.removedTargetIds||[];d=new xj(u,v,l.key,l)}else if("documentDelete"in a){a.documentDelete;let f=a.documentDelete;f.document;let w=xz(g,f.document),x=f.readTime?xv(f.readTime):uW.min(),m=vZ.newNoDocument(w,x),y=f.removedTargetIds||[];d=new xj([],y,m.key,m)}else if("documentRemove"in a){a.documentRemove;let h=a.documentRemove;h.document;let z=xz(g,h.document),A=h.removedTargetIds||[];d=new xj([],A,z,null)}else{if(!("filter"in a))return uG();{a.filter;let i=a.filter;i.targetId;let B=i.count||0,C=new w2(B),D=i.targetId;d=new xk(D,C)}}return d}(this.It,a),c=function(b){if(!("targetChange"in b))return uW.min();let a=b.targetChange;return a.targetIds&&a.targetIds.length?uW.min():a.readTime?xv(a.readTime):uW.min()}(a);return this.listener.Wo(b,c)}zo(b){let a={};a.database=xC(this.It),a.addTarget=function(b,a){let c,d=a.target;return(c=v2(d)?{documents:xI(b,d)}:{query:xJ(b,d)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=xu(b,a.resumeToken):a.snapshotVersion.compareTo(uW.min())>0&&(c.readTime=xt(b,a.snapshotVersion.toTimestamp())),c}(this.It,b);let c=function(c,b){let a=function(b,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return uG()}}(0,b.purpose);return null==a?null:{"goog-listen-tags":a}}(this.It,b);c&&(a.labels=c),this.Bo(a)}Ho(b){let a={};a.database=xC(this.It),a.removeTarget=b,this.Bo(a)}}class zO extends ey{constructor(a,b,c,d,e,f){super(a,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",b,c,d,f),this.It=e,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(a,b){return this.connection.wo("Write",a,b)}onMessage(a){var f,b,c,g,h;if(!a.streamToken&&uG(),this.lastStreamToken=a.streamToken,this.Jo){this.xo.reset();let d=(b=a.writeResults,c=a.commitTime,b&&b.length>0?(void 0!==c||uG(),b.map(e=>{var a,b;let d;return a=e,b=c,(d=a.updateTime?xv(a.updateTime):xv(b)).isEqual(uW.min())&&(d=xv(b)),new wP(d,a.transformResults||[])})):[]),e=xv(a.commitTime);return this.listener.Zo(e,d)}return a.writeResults&&0!==a.writeResults.length&&uG(),this.Jo=!0,this.listener.tu()}eu(){let a={};a.database=xC(this.It),this.Bo(a)}Xo(a){let b={streamToken:this.lastStreamToken,writes:a.map(a=>xG(this.It,a))};this.Bo(b)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Datastore and its related methods are a wrapper around the external Google
 * Cloud Datastore grpc API, which provides an interface that is more convenient
 * for the rest of the client SDK architecture to consume.
 */ /**
 * An implementation of Datastore that exposes additional state for internal
 * consumption.
 */ class zP extends class{}{constructor(a,b,c,d){super(),this.authCredentials=a,this.appCheckCredentials=b,this.connection=c,this.It=d,this.nu=!1}su(){if(this.nu)throw new uI(uH.FAILED_PRECONDITION,"The client has already been terminated.")}ao(a,b,c){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,e])=>this.connection.ao(a,b,c,d,e)).catch(a=>{throw"FirebaseError"===a.name?(a.code===uH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new uI(uH.UNKNOWN,a.toString())})}_o(a,b,c,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([e,f])=>this.connection._o(a,b,c,e,f,d)).catch(a=>{throw"FirebaseError"===a.name?(a.code===uH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new uI(uH.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}async function zQ(c,d){var e;let a=e=c,b=function(b,c){let a=xJ(b,c);return{structuredAggregationQuery:{aggregations:[{count:{},alias:"count_alias"}],structuredQuery:a.structuredQuery},parent:a.parent}}(a.It,wr(d)),f=b.parent;return a.connection.co||delete b.parent,(await a._o("RunAggregationQuery",f,b,1)).filter(a=>!!a.result).map(a=>a.result.aggregateFields)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class zR{constructor(b,c,a,d,e){this.localStore=b,this.datastore=c,this.asyncQueue=a,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=e,this.mu.qr(b=>{a.enqueueAndForget(async()=>{z$(this)&&(uC("RemoteStore","Restarting streams for network reachability change."),await async function(b){var c;let a=c=b;a._u.add(4),await zT(a),a.gu.set("Unknown"),a._u.delete(4),await zS(a)}(this))})}),this.gu=new class{constructor(a,b){this.asyncQueue=a,this.onlineStateHandler=b,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(a){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${a.toString()}`),this.cu("Offline")))}set(a){this.lu(),this.iu=0,"Online"===a&&(this.ou=!1),this.cu(a)}cu(a){a!==this.state&&(this.state=a,this.onlineStateHandler(a))}au(b){let a=`Could not reach Cloud Firestore backend. ${b}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(uD(a),this.ou=!1):uC("OnlineStateTracker",a)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}(a,d)}}async function zS(a){if(z$(a))for(let b of a.wu)await b(!0)}async function zT(a){for(let b of a.wu)await b(!1)}function zU(c,b){var d;let a=d=c;a.du.has(b.targetId)||(a.du.set(b.targetId,b),zZ(a)?zY(a):Ag(a).ko()&&zW(a,b))}function zV(d,c){var e;let a=e=d,b=Ag(a);a.du.delete(c),b.ko()&&zX(a,c),0===a.du.size&&(b.ko()?b.Fo():z$(a)&&a.gu.set("Unknown"))}function zW(a,b){a.yu.Mt(b.targetId),Ag(a).zo(b)}function zX(a,b){a.yu.Mt(b),Ag(a).Ho(b)}function zY(a){a.yu=new xn({getRemoteKeysForTarget:b=>a.remoteSyncer.getRemoteKeysForTarget(b),se:b=>a.du.get(b)||null}),Ag(a).start(),a.gu.uu()}function zZ(a){return z$(a)&&!Ag(a).No()&&a.du.size>0}function z$(a){var b;return 0===(b=a)._u.size}function z_(a){a.yu=void 0}async function z0(a){a.du.forEach((b,c)=>{zW(a,b)})}async function z1(a,b){z_(a),zZ(a)?(a.gu.hu(b),zY(a)):a.gu.set("Unknown")}async function z2(b,a,c){if(b.gu.set("Online"),a instanceof xl&&2===a.state&&a.cause)try{await async function(a,c){let d=c.cause;for(let b of c.targetIds)a.du.has(b)&&(await a.remoteSyncer.rejectListen(b,d),a.du.delete(b),a.yu.removeTarget(b))}(b,a)}catch(d){uC("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),d),await z3(b,d)}else if(a instanceof xj?b.yu.Gt(a):a instanceof xk?b.yu.Yt(a):b.yu.Wt(a),!c.isEqual(uW.min()))try{let f=await zj(b.localStore);c.compareTo(f)>=0&&await function(b,c){let a=b.yu.te(c);return a.targetChanges.forEach((a,d)=>{if(a.resumeToken.approximateByteSize()>0){let e=b.du.get(d);e&&b.du.set(d,e.withResumeToken(a.resumeToken,c))}}),a.targetMismatches.forEach(c=>{let a=b.du.get(c);if(!a)return;b.du.set(c,a.withResumeToken(bT.EMPTY_BYTE_STRING,a.snapshotVersion)),zX(b,c);let d=new x5(a.target,c,1,a.sequenceNumber);zW(b,d)}),b.remoteSyncer.applyRemoteEvent(a)}(b,c)}catch(e){uC("RemoteStore","Failed to raise snapshot:",e),await z3(b,e)}}async function z3(a,b,c){if(!ve(b))throw b;a._u.add(1),await zT(a),a.gu.set("Offline"),c||(c=()=>zj(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{uC("RemoteStore","Retrying IndexedDB access"),await c(),a._u.delete(1),await zS(a)})}function z4(b,a){return a().catch(c=>z3(b,c,a))}async function z5(d){var e;let a=e=d,f=Ah(a),c=a.fu.length>0?a.fu[a.fu.length-1].batchId:-1;for(;z6(a);)try{let b=await zl(a.localStore,c);if(null===b){0===a.fu.length&&f.Fo();break}c=b.batchId,z7(a,b)}catch(g){await z3(a,g)}z8(a)&&z9(a)}function z6(a){return z$(a)&&a.fu.length<10}function z7(b,c){b.fu.push(c);let a=Ah(b);a.ko()&&a.Yo&&a.Xo(c.mutations)}function z8(a){return z$(a)&&!Ah(a).No()&&a.fu.length>0}function z9(a){Ah(a).start()}async function Aa(a){Ah(a).eu()}async function Ab(a){let b=Ah(a);for(let c of a.fu)b.Xo(c.mutations)}async function Ac(a,b,c){let d=a.fu.shift(),e=x3.from(d,b,c);await z4(a,()=>a.remoteSyncer.applySuccessfulWrite(e)),await z5(a)}async function Ad(a,b){b&&Ah(a).Yo&&await async function(a,c){var b;if(w3(b=c.code)&&b!==uH.ABORTED){let d=a.fu.shift();Ah(a).Mo(),await z4(a,()=>a.remoteSyncer.rejectFailedWrite(d.batchId,c)),await z5(a)}}(a,b),z8(a)&&z9(a)}async function Ae(b,c){var d;let a=d=b;a.asyncQueue.verifyOperationInProgress(),uC("RemoteStore","RemoteStore received new credentials");let e=z$(a);a._u.add(3),await zT(a),e&&a.gu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(c),a._u.delete(3),await zS(a)}async function Af(c,b){var d;let a=d=c;b?(a._u.delete(2),await zS(a)):b||(a._u.add(2),await zT(a),a.gu.set("Unknown"))}function Ag(a){return a.pu||(a.pu=function(b,c,d){var e;let a=e=b;return a.su(),new zN(c,a.connection,a.authCredentials,a.appCheckCredentials,a.It,d)}(a.datastore,a.asyncQueue,{Yr:z0.bind(null,a),Zr:z1.bind(null,a),Wo:z2.bind(null,a)}),a.wu.push(async b=>{b?(a.pu.Mo(),zZ(a)?zY(a):a.gu.set("Unknown")):(await a.pu.stop(),z_(a))})),a.pu}function Ah(a){return a.Iu||(a.Iu=function(b,c,d){var e;let a=e=b;return a.su(),new zO(c,a.connection,a.authCredentials,a.appCheckCredentials,a.It,d)}(a.datastore,a.asyncQueue,{Yr:Aa.bind(null,a),Zr:Ad.bind(null,a),tu:Ab.bind(null,a),Zo:Ac.bind(null,a)}),a.wu.push(async b=>{b?(a.Iu.Mo(),await z5(a)):(await a.Iu.stop(),a.fu.length>0&&(uC("RemoteStore",`Stopping write stream with ${a.fu.length} pending writes`),a.fu=[]))})),a.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Represents an operation scheduled to be run in the future on an AsyncQueue.
 *
 * It is created via DelayedOperation.createAndSchedule().
 *
 * Supports cancellation (via cancel()) and early execution (via skipDelay()).
 *
 * Note: We implement `PromiseLike` instead of `Promise`, as the `Promise` type
 * in newer versions of TypeScript defines `finally`, which is not available in
 * IE.
 */ class Ai{constructor(a,b,c,d,e){this.asyncQueue=a,this.timerId=b,this.targetTimeMs=c,this.op=d,this.removalCallback=e,this.deferred=new uJ,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(c,d,a,e,f){let g=Date.now()+a,b=new Ai(c,d,g,e,f);return b.start(a),b}start(a){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),a)}skipDelay(){return this.handleDelayElapsed()}cancel(a){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uI(uH.CANCELLED,"Operation cancelled"+(a?": "+a:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(a=>this.deferred.resolve(a))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Aj(a,b){if(uD("AsyncQueue",`${b}: ${a}`),ve(a))return new uI(uH.UNAVAILABLE,`${b}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * DocumentSet is an immutable (copy-on-write) collection that holds documents
 * in order specified by the provided comparator. We always add a document key
 * comparator on top of what is provided to guarantee document equality based on
 * the key.
 */ class Ak{constructor(a){this.comparator=a?(b,c)=>a(b,c)||aj.comparator(b.key,c.key):(a,b)=>aj.comparator(a.key,b.key),this.keyedMap=w8(),this.sortedSet=new aP(this.comparator)}static emptySet(a){return new Ak(a.comparator)}has(a){return null!=this.keyedMap.get(a)}get(a){return this.keyedMap.get(a)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(b){let a=this.keyedMap.get(b);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(a){this.sortedSet.inorderTraversal((b,c)=>(a(b),!1))}add(a){let b=this.delete(a.key);return b.copy(b.keyedMap.insert(a.key,a),b.sortedSet.insert(a,null))}delete(a){let b=this.get(a);return b?this.copy(this.keyedMap.remove(a),this.sortedSet.remove(b)):this}isEqual(a){if(!(a instanceof Ak)||this.size!==a.size)return!1;let b=this.sortedSet.getIterator(),c=a.sortedSet.getIterator();for(;b.hasNext();){let d=b.getNext().key,e=c.getNext().key;if(!d.isEqual(e))return!1}return!0}toString(){let a=[];return this.forEach(b=>{a.push(b.toString())}),0===a.length?"DocumentSet ()":"DocumentSet (\n  "+a.join("  \n")+"\n)"}copy(b,c){let a=new Ak;return a.comparator=this.comparator,a.keyedMap=b,a.sortedSet=c,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * DocumentChangeSet keeps track of a set of changes to docs in a query, merging
 * duplicate events for the same doc.
 */ class Al{constructor(){this.Tu=new aP(aj.comparator)}track(a){let c=a.doc.key,b=this.Tu.get(c);b?0!==a.type&&3===b.type?this.Tu=this.Tu.insert(c,a):3===a.type&&1!==b.type?this.Tu=this.Tu.insert(c,{type:b.type,doc:a.doc}):2===a.type&&2===b.type?this.Tu=this.Tu.insert(c,{type:2,doc:a.doc}):2===a.type&&0===b.type?this.Tu=this.Tu.insert(c,{type:0,doc:a.doc}):1===a.type&&0===b.type?this.Tu=this.Tu.remove(c):1===a.type&&2===b.type?this.Tu=this.Tu.insert(c,{type:1,doc:b.doc}):0===a.type&&1===b.type?this.Tu=this.Tu.insert(c,{type:2,doc:a.doc}):uG():this.Tu=this.Tu.insert(c,a)}Eu(){let a=[];return this.Tu.inorderTraversal((c,b)=>{a.push(b)}),a}}class Am{constructor(a,b,c,d,e,f,g,h,i){this.query=a,this.docs=b,this.oldDocs=c,this.docChanges=d,this.mutatedKeys=e,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=h,this.hasCachedResults=i}static fromInitialDocuments(b,a,c,d,e){let f=[];return a.forEach(a=>{f.push({type:0,doc:a})}),new Am(b,a,Ak.emptySet(a),f,c,d,!0,!1,e)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(a){if(!(this.fromCache===a.fromCache&&this.hasCachedResults===a.hasCachedResults&&this.syncStateChanged===a.syncStateChanged&&this.mutatedKeys.isEqual(a.mutatedKeys)&&wt(this.query,a.query)&&this.docs.isEqual(a.docs)&&this.oldDocs.isEqual(a.oldDocs)))return!1;let c=this.docChanges,d=a.docChanges;if(c.length!==d.length)return!1;for(let b=0;b<c.length;b++)if(c[b].type!==d[b].type||!c[b].doc.isEqual(d[b].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Holds the listeners and the last received ViewSnapshot for a query being
 * tracked by EventManager.
 */ class An{constructor(){this.Au=void 0,this.listeners=[]}}class Ao{constructor(){this.queries=new w5(a=>wu(a),wt),this.onlineState="Unknown",this.Ru=new Set}}async function Ap(f,b){var g;let c=g=f,d=b.query,e=!1,a=c.queries.get(d);if(a||(e=!0,a=new An),e)try{a.Au=await c.onListen(d)}catch(h){let i=Aj(h,`Initialization of query '${wv(b.query)}' failed`);return void b.onError(i)}c.queries.set(d,a),a.listeners.push(b),b.bu(c.onlineState),a.Au&&b.Pu(a.Au)&&At(c)}async function Aq(g,d){var h;let b=h=g,c=d.query,e=!1,a=b.queries.get(c);if(a){let f=a.listeners.indexOf(d);f>=0&&(a.listeners.splice(f,1),e=0===a.listeners.length)}if(e)return b.queries.delete(c),b.onUnlisten(c)}function Ar(e,f){var g;let c=g=e,d=!1;for(let a of f){let h=a.query,b=c.queries.get(h);if(b){for(let i of b.listeners)i.Pu(a)&&(d=!0);b.Au=a}}d&&At(c)}function As(d,a,e){var f;let b=f=d,c=b.queries.get(a);if(c)for(let g of c.listeners)g.onError(e);b.queries.delete(a)}function At(a){a.Ru.forEach(a=>{a.next()})}class Au{constructor(a,b,c){this.query=a,this.vu=b,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=c||{}}Pu(a){if(!this.options.includeMetadataChanges){let c=[];for(let d of a.docChanges)3!==d.type&&c.push(d);a=new Am(a.query,a.docs,a.oldDocs,c,a.mutatedKeys,a.fromCache,a.syncStateChanged,!0,a.hasCachedResults)}let b=!1;return this.Vu?this.Du(a)&&(this.vu.next(a),b=!0):this.Cu(a,this.onlineState)&&(this.xu(a),b=!0),this.Su=a,b}onError(a){this.vu.error(a)}bu(a){this.onlineState=a;let b=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,a)&&(this.xu(this.Su),b=!0),b}Cu(a,b){if(!a.fromCache)return!0;let c="Offline"!==b;return(!this.options.Nu||!c)&&(!a.docs.isEmpty()||a.hasCachedResults||"Offline"===b)}Du(a){if(a.docChanges.length>0)return!0;let b=this.Su&&this.Su.hasPendingWrites!==a.hasPendingWrites;return!(!a.syncStateChanged&&!b)&& !0===this.options.includeMetadataChanges}xu(a){a=Am.fromInitialDocuments(a.query,a.docs,a.mutatedKeys,a.fromCache,a.hasCachedResults),this.Vu=!0,this.vu.next(a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A complete element in the bundle stream, together with the byte length it
 * occupies in the stream.
 */ class Av{constructor(a,b){this.ku=a,this.byteLength=b}Ou(){return"metadata"in this.ku}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Helper to convert objects from bundles to model objects in the SDK.
 */ class Aw{constructor(a){this.It=a}Ji(a){return xz(this.It,a)}Yi(a){return a.metadata.exists?xF(this.It,a.document,!1):vZ.newNoDocument(this.Ji(a.metadata.name),this.Xi(a.metadata.readTime))}Xi(a){return xv(a)}}/**
 * Returns a `LoadBundleTaskProgress` representing the progress that the loading
 * has succeeded.
 */ /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ class Ax{constructor(a){this.key=a}}class Ay{constructor(a){this.key=a}}class Az{constructor(a,b){this.query=a,this.Uu=b,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=xf(),this.mutatedKeys=xf(),this.Gu=wy(a),this.Qu=new Ak(this.Gu)}get ju(){return this.Uu}Wu(g,a){let f=a?a.zu:new Al,c=a?a.Qu:this.Qu,d=a?a.mutatedKeys:this.mutatedKeys,b=c,h=!1,i="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,j="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(g.inorderTraversal((g,l)=>{let e=c.get(g),a=ww(this.query,l)?l:null,n=!!e&&this.mutatedKeys.has(e.key),m=!!a&&(a.hasLocalMutations||this.mutatedKeys.has(a.key)&&a.hasCommittedMutations),k=!1;e&&a?e.data.isEqual(a.data)?n!==m&&(f.track({type:3,doc:a}),k=!0):this.Hu(e,a)||(f.track({type:2,doc:a}),k=!0,(i&&this.Gu(a,i)>0||j&&0>this.Gu(a,j))&&(h=!0)):!e&&a?(f.track({type:0,doc:a}),k=!0):e&&!a&&(f.track({type:1,doc:e}),k=!0,(i||j)&&(h=!0)),k&&(a?(b=b.add(a),d=m?d.add(g):d.delete(g)):(b=b.delete(g),d=d.delete(g)))}),null!==this.query.limit)for(;b.size>this.query.limit;){let e="F"===this.query.limitType?b.last():b.first();b=b.delete(e.key),d=d.delete(e.key),f.track({type:1,doc:e})}return{Qu:b,zu:f,$i:h,mutatedKeys:d}}Hu(b,a){return b.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(a,g,b){let h=this.Qu;this.Qu=a.Qu,this.mutatedKeys=a.mutatedKeys;let c=a.zu.Eu();c.sort((a,b)=>(function(b,c){let a=a=>{switch(a){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uG()}};return a(b)-a(c)})(a.type,b.type)||this.Gu(a.doc,b.doc)),this.Ju(b);let e=g?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,f=d!==this.qu;return(this.qu=d,0!==c.length||f)?{snapshot:new Am(this.query,a.Qu,h,c,a.mutatedKeys,0===d,f,!1,!!b&&b.resumeToken.approximateByteSize()>0),Xu:e}:{Xu:e}}bu(a){return this.current&&"Offline"===a?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Al,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(a){return!this.Uu.has(a)&&!!this.Qu.has(a)&&!this.Qu.get(a).hasLocalMutations}Ju(a){a&&(a.addedDocuments.forEach(a=>this.Uu=this.Uu.add(a)),a.modifiedDocuments.forEach(a=>{}),a.removedDocuments.forEach(a=>this.Uu=this.Uu.delete(a)),this.current=a.current)}Yu(){if(!this.current)return[];let a=this.Ku;this.Ku=xf(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});let b=[];return a.forEach(a=>{this.Ku.has(a)||b.push(new Ay(a))}),this.Ku.forEach(c=>{a.has(c)||b.push(new Ax(c))}),b}tc(a){this.Uu=a.Hi,this.Ku=xf();let b=this.Wu(a.documents);return this.applyChanges(b,!0)}ec(){return Am.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class AA{constructor(a,b,c){this.query=a,this.targetId=b,this.view=c}}class AB{constructor(a){this.key=a,this.nc=!1}}class AC{constructor(a,b,c,d,e,f){this.localStore=a,this.remoteStore=b,this.eventManager=c,this.sharedClientState=d,this.currentUser=e,this.maxConcurrentLimboResolutions=f,this.sc={},this.ic=new w5(a=>wu(a),wt),this.rc=new Map,this.oc=new Set,this.uc=new aP(aj.comparator),this.cc=new Map,this.ac=new y0,this.hc={},this.lc=new Map,this.fc=yJ.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function AD(g,d){let a=A3(g),b,e,f=a.ic.get(d);if(f)b=f.targetId,a.sharedClientState.addLocalQueryTarget(b),e=f.view.ec();else{let c=await zm(a.localStore,wr(d));a.isPrimaryClient&&zU(a.remoteStore,c);let h=a.sharedClientState.addLocalQueryTarget(c.targetId);b=c.targetId,e=await AE(a,d,b,"current"===h,c.resumeToken)}return e}async function AE(a,b,c,g,h){a._c=(b,c,d)=>(async function(b,a,f,d){let c=a.view.Wu(f);c.$i&&(c=await zo(b.localStore,a.query,!1).then(({documents:b})=>a.view.Wu(b,c)));let g=d&&d.targetChanges.get(a.targetId),e=a.view.applyChanges(c,b.isPrimaryClient,g);return AQ(b,a.targetId,e.Xu),e.snapshot})(a,b,c,d);let e=await zo(a.localStore,b,!0),d=new Az(b,e.Hi),i=d.Wu(e.documents),j=xi.createSynthesizedTargetChangeForCurrentChange(c,g&&"Offline"!==a.onlineState,h),f=d.applyChanges(i,a.isPrimaryClient,j);AQ(a,c,f.Xu);let k=new AA(b,c,d);return a.ic.set(b,k),a.rc.has(c)?a.rc.get(c).push(b):a.rc.set(c,[b]),f.snapshot}async function AF(e,c){var f;let a=f=e,b=a.ic.get(c),d=a.rc.get(b.targetId);if(d.length>1)return a.rc.set(b.targetId,d.filter(a=>!wt(a,c))),void a.ic.delete(c);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(b.targetId),a.sharedClientState.isActiveQueryTarget(b.targetId)||await zn(a.localStore,b.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(b.targetId),zV(a.remoteStore,b.targetId),AO(a,b.targetId)}).catch(u8)):(AO(a,b.targetId),await zn(a.localStore,b.targetId,!0))}async function AG(h,i,e){let a=A4(h);try{var b,f,g;let d=await function(a,b){var c;let d=c=a,e=uV.now(),f=b.reduce((a,b)=>a.add(b.key),xf()),g,h;return d.persistence.runTransaction("Locally write mutations","readwrite",a=>{let c=w6,i=xf();return d.Gi.getEntries(a,f).next(a=>{(c=a).forEach((a,b)=>{b.isValidDocument()||(i=i.add(a))})}).next(()=>d.localDocuments.getOverlayedDocuments(a,c)).next(i=>{g=i;let h=[];for(let c of b){let f=wV(c,g.get(c.key).overlayedDocument);null!=f&&h.push(new wY(c.key,f,vY(f.value.mapValue),wQ.exists(!0)))}return d.mutationQueue.addMutationBatch(a,e,h,b)}).next(b=>{h=b;let c=b.applyToLocalDocumentSet(g,i);return d.documentOverlayCache.saveOverlays(a,b.batchId,c)})}).then(()=>({batchId:h.batchId,changes:w9(g)}))}(a.localStore,i),c;a.sharedClientState.addPendingMutation(d.batchId),b=a,f=d.batchId,g=e,(c=b.hc[b.currentUser.toKey()])||(c=new aP(eq)),c=c.insert(f,g),b.hc[b.currentUser.toKey()]=c,await AT(a,d.changes),await z5(a.remoteStore)}catch(j){let k=Aj(j,"Failed to persist write");e.reject(k)}}async function AH(c,a){var d;let b=d=c;try{let e=await function(b,c){var d;let a=d=b,e=c.snapshotVersion,f=a.Ui;return a.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{let g=a.Gi.newChangeBuffer({trackRemovals:!0});f=a.Ui;let b=[];c.targetChanges.forEach((h,i)=>{var k,m,j;let l=f.get(i);if(!l)return;b.push(a.Cs.removeMatchingKeys(d,h.removedDocuments,i).next(()=>a.Cs.addMatchingKeys(d,h.addedDocuments,i)));let g=l.withSequenceNumber(d.currentSequenceNumber);c.targetMismatches.has(i)?g=g.withResumeToken(bT.EMPTY_BYTE_STRING,uW.min()).withLastLimboFreeSnapshotVersion(uW.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,e)),f=f.insert(i,g),k=l,m=g,j=h,(0===k.resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&b.push(a.Cs.updateTargetData(d,g))});let i=w6,j=xf();if(c.documentUpdates.forEach(e=>{c.resolvedLimboDocuments.has(e)&&b.push(a.persistence.referenceDelegate.updateLimboDocument(d,e))}),b.push(zk(d,g,c.documentUpdates).next(a=>{i=a.Wi,j=a.zi})),!e.isEqual(uW.min())){let h=a.Cs.getLastRemoteSnapshotVersion(d).next(b=>a.Cs.setTargetsMetadata(d,d.currentSequenceNumber,e));b.push(h)}return u9.waitFor(b).next(()=>g.apply(d)).next(()=>a.localDocuments.getLocalViewOfDocuments(d,i,j)).next(()=>i)}).then(b=>(a.Ui=f,b))}(b.localStore,a);a.targetChanges.forEach((a,d)=>{var f,e,g;let c=b.cc.get(d);c&&(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1||uG(),a.addedDocuments.size>0?c.nc=!0:a.modifiedDocuments.size>0?(e=c.nc)||uG():a.removedDocuments.size>0&&(c.nc||uG(),c.nc=!1))}),await AT(b,e,a)}catch(f){await u8(f)}}function AI(e,b,c){var f;let a=f=e;if(a.isPrimaryClient&&0===c|| !a.isPrimaryClient&&1===c){let d=[];a.ic.forEach((e,c)=>{let a=c.view.bu(b);a.snapshot&&d.push(a.snapshot)}),function(b,c){var d;let a=d=b;a.onlineState=c;let e=!1;a.queries.forEach((d,a)=>{for(let b of a.listeners)b.bu(c)&&(e=!0)}),e&&At(a)}(a.eventManager,b),d.length&&a.sc.Wo(d),a.onlineState=b,a.isPrimaryClient&&a.sharedClientState.setOnlineState(b)}}async function AJ(f,c,g){var h;let a=h=f;a.sharedClientState.updateQueryState(c,"rejected",g);let e=a.cc.get(c),b=e&&e.key;if(b){let d=new aP(aj.comparator);d=d.insert(b,vZ.newNoDocument(b,uW.min()));let i=xf().add(b),j=new xh(uW.min(),new Map,new bS(eq),d,i);await AH(a,j),a.uc=a.uc.remove(b),a.cc.delete(c),AS(a)}else await zn(a.localStore,c,!1).then(()=>AO(a,c,g)).catch(u8)}async function AK(d,c){var e;let a=e=d,b=c.batch.batchId;try{let f=await function(a,d){var b;let c=b=a;return c.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{let e=d.batch.keys(),b=c.Gi.newChangeBuffer({trackRemovals:!0});return(function(e,f,a,g){let b=a.batch,c=b.keys(),d=u9.resolve();return c.forEach(c=>{d=d.next(()=>g.getEntry(f,c)).next(d=>{var f;let e=a.docVersions.get(c);null!==e||uG(),0>d.version.compareTo(e)&&(b.applyToRemoteDocument(d,a),d.isValidDocument()&&(d.setReadTime(a.commitVersion),g.addEntry(d)))})}),d.next(()=>e.mutationQueue.removeMutationBatch(f,b))})(c,a,d,b).next(()=>b.apply(a)).next(()=>c.mutationQueue.performConsistencyCheck(a)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(a,e,d.batch.batchId)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let c=xf();for(let a=0;a<b.mutationResults.length;++a)b.mutationResults[a].transformResults.length>0&&(c=c.add(b.batch.mutations[a].key));return c}(d))).next(()=>c.localDocuments.getDocuments(a,e))})}(a.localStore,c);AN(a,b,null),AM(a,b),a.sharedClientState.updateMutationState(b,"acknowledged"),await AT(a,f)}catch(g){await u8(g)}}async function AL(d,b,c){var e;let a=e=d;try{let f=await function(a,d){var b;let c=b=a;return c.persistence.runTransaction("Reject batch","readwrite-primary",a=>{let b;return c.mutationQueue.lookupMutationBatch(a,d).next(d=>{var e;return null!==d||uG(),b=d.keys(),c.mutationQueue.removeMutationBatch(a,d)}).next(()=>c.mutationQueue.performConsistencyCheck(a)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(a,b,d)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,b)).next(()=>c.localDocuments.getDocuments(a,b))})}(a.localStore,b);AN(a,b,c),AM(a,b),a.sharedClientState.updateMutationState(b,"rejected",c),await AT(a,f)}catch(g){await u8(g)}}function AM(a,b){(a.lc.get(b)||[]).forEach(a=>{a.resolve()}),a.lc.delete(b)}function AN(f,d,e){var g;let b=g=f,a=b.hc[b.currentUser.toKey()];if(a){let c=a.get(d);c&&(e?c.reject(e):c.resolve(),a=a.remove(d)),b.hc[b.currentUser.toKey()]=a}}function AO(a,b,c=null){for(let d of(a.sharedClientState.removeLocalQueryTarget(b),a.rc.get(b)))a.ic.delete(d),c&&a.sc.wc(d,c);a.rc.delete(b),a.isPrimaryClient&&a.ac.ls(b).forEach(b=>{a.ac.containsKey(b)||AP(a,b)})}function AP(a,b){a.oc.delete(b.path.canonicalString());let c=a.uc.get(b);null!==c&&(zV(a.remoteStore,c),a.uc=a.uc.remove(b),a.cc.delete(c),AS(a))}function AQ(b,c,d){for(let a of d)a instanceof Ax?(b.ac.addReference(a.key,c),AR(b,a)):a instanceof Ay?(uC("SyncEngine","Document no longer in limbo: "+a.key),b.ac.removeReference(a.key,c),b.ac.containsKey(a.key)||AP(b,a.key)):uG()}function AR(a,d){let b=d.key,c=b.path.canonicalString();a.uc.get(b)||a.oc.has(c)||(uC("SyncEngine","New document in limbo: "+b),a.oc.add(c),AS(a))}function AS(a){for(;a.oc.size>0&&a.uc.size<a.maxConcurrentLimboResolutions;){let d=a.oc.values().next().value;a.oc.delete(d);let b=new aj(uX.fromString(d)),c=a.fc.next();a.cc.set(c,new AB(b)),a.uc=a.uc.insert(b,c),zU(a.remoteStore,new x5(wr(wl(b.path)),c,2,et.at))}}async function AT(b,g,h){var c;let a=c=b,d=[],e=[],f=[];a.ic.isEmpty()||(a.ic.forEach((c,b)=>{f.push(a._c(b,g,h).then(c=>{if((c||h)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(b.targetId,(null==c?void 0:c.fromCache)?"not-current":"current"),c){d.push(c);let f=ze.Ci(b.targetId,c);e.push(f)}}))}),await Promise.all(f),a.sc.Wo(d),await async function(f,g){var h;let a=h=f;try{await a.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>u9.forEach(g,c=>u9.forEach(c.Si,d=>a.persistence.referenceDelegate.addReference(b,c.targetId,d)).next(()=>u9.forEach(c.Di,d=>a.persistence.referenceDelegate.removeReference(b,c.targetId,d)))))}catch(b){if(!ve(b))throw b;uC("LocalStore","Failed to update sequence numbers: "+b)}for(let c of g){let d=c.targetId;if(!c.fromCache){let e=a.Ui.get(d),i=e.snapshotVersion,j=e.withLastLimboFreeSnapshotVersion(i);a.Ui=a.Ui.insert(d,j)}}}(a.localStore,e))}async function AU(e,b){var f,d,g;let a=f=e;if(!a.currentUser.isEqual(b)){uC("SyncEngine","User change. New user:",b.toKey());let c=await zi(a.localStore,b);a.currentUser=b,g="'waitForPendingWrites' promise is rejected due to a user change.",(d=a).lc.forEach(a=>{a.forEach(a=>{a.reject(new uI(uH.CANCELLED,g))})}),d.lc.clear(),a.sharedClientState.handleUserChange(b,c.removedBatchIds,c.addedBatchIds),await AT(a,c.ji)}}function AV(f,d){var g;let b=g=f,c=b.cc.get(d);if(c&&c.nc)return xf().add(c.key);{let a=xf(),e=b.rc.get(d);if(!e)return a;for(let h of e){let i=b.ic.get(h);a=a.unionWith(i.view.ju)}return a}}async function AW(d,a){var e;let b=e=d,f=await zo(b.localStore,a.query,!0),c=a.view.tc(f);return b.isPrimaryClient&&AQ(b,a.targetId,c.Xu),c}async function AX(a,b){var c;let d=c=a;return zq(d.localStore,b).then(a=>AT(d,a))}async function AY(e,b,c,f){var g;let a=g=e,d=await function(b,e){var c,d;let a=c=b,f=d=a.mutationQueue;return a.persistence.runTransaction("Lookup mutation documents","readonly",b=>f.Tn(b,e).next(c=>c?a.localDocuments.getDocuments(b,c):u9.resolve(null)))}(a.localStore,b);null!==d?("pending"===c?await z5(a.remoteStore):"acknowledged"===c||"rejected"===c?(AN(a,b,f||null),AM(a,b),function(a,b){var c,d;(d=(c=a).mutationQueue).An(b)}(a.localStore,b)):uG(),await AT(a,d)):uC("SyncEngine","Cannot apply mutation batch with id: "+b)}async function AZ(c,b){var d;let a=d=c;if(A3(a),A4(a),!0===b&& !0!==a.dc){let e=a.sharedClientState.getAllActiveQueryTargets(),f=await A$(a,e.toArray());for(let g of(a.dc=!0,await Af(a.remoteStore,!0),f))zU(a.remoteStore,g)}else if(!1===b&& !1!==a.dc){let h=[],i=Promise.resolve();a.rc.forEach((c,b)=>{a.sharedClientState.isLocalQueryTarget(b)?h.push(b):i=i.then(()=>(AO(a,b),zn(a.localStore,b,!0))),zV(a.remoteStore,b)}),await i,await A$(a,h),function(b){var c;let a=c=b;a.cc.forEach((c,b)=>{zV(a.remoteStore,b)}),a.ac.fs(),a.cc=new Map,a.uc=new aP(aj.comparator)}(a),a.dc=!1,await Af(a.remoteStore,!1)}}async function A$(i,j,n){var k;let a=k=i,e=[],f=[];for(let d of j){let b,c=a.rc.get(d);if(c&&0!==c.length)for(let l of(b=await zm(a.localStore,wr(c[0])),c)){let m=a.ic.get(l),g=await AW(a,m);g.snapshot&&f.push(g.snapshot)}else{let h=await zp(a.localStore,d);b=await zm(a.localStore,h),await AE(a,A_(h),d,!1,b.resumeToken)}e.push(b)}return a.sc.Wo(f),e}function A_(a){return wk(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function A0(a){var b,c,d;let e=b=a;return(d=(c=e.localStore).persistence).vi()}async function A1(e,b,d,f){var g;let a=g=e;if(a.dc)return void uC("SyncEngine","Ignoring unexpected query state notification.");let c=a.rc.get(b);if(c&&c.length>0)switch(d){case"current":case"not-current":{let h=await zq(a.localStore,wx(c[0])),i=xh.createSynthesizedRemoteEventForCurrentChange(b,"current"===d,bT.EMPTY_BYTE_STRING);await AT(a,h,i);break}case"rejected":await zn(a.localStore,b,!0),AO(a,b,f);break;default:uG()}}async function A2(f,g,h){let a=A3(f);if(a.dc){for(let b of g){if(a.rc.has(b)){uC("SyncEngine","Adding an already active target "+b);continue}let d=await zp(a.localStore,b),c=await zm(a.localStore,d);await AE(a,A_(d),c.targetId,!1,c.resumeToken),zU(a.remoteStore,c)}for(let e of h)a.rc.has(e)&&await zn(a.localStore,e,!1).then(()=>{zV(a.remoteStore,e),AO(a,e)}).catch(u8)}}function A3(b){var c;let a=c=b;return a.remoteStore.remoteSyncer.applyRemoteEvent=AH.bind(null,a),a.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,a),a.remoteStore.remoteSyncer.rejectListen=AJ.bind(null,a),a.sc.Wo=Ar.bind(null,a.eventManager),a.sc.wc=As.bind(null,a.eventManager),a}function A4(b){var c;let a=c=b;return a.remoteStore.remoteSyncer.applySuccessfulWrite=AK.bind(null,a),a.remoteStore.remoteSyncer.rejectFailedWrite=AL.bind(null,a),a}class A5{constructor(){this.synchronizeTabs=!1}async initialize(a){this.It=zL(a.databaseInfo.databaseId),this.sharedClientState=this.gc(a),this.persistence=this.yc(a),await this.persistence.start(),this.localStore=this.Ic(a),this.gcScheduler=this.Tc(a,this.localStore),this.indexBackfillerScheduler=this.Ec(a,this.localStore)}Tc(a,b){return null}Ec(a,b){return null}Ic(a){return zh(this.persistence,new zf,a.initialUser,this.It)}yc(a){return new y5(y7.Bs,this.It)}gc(a){return new zD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A6{async initialize(b,a){this.localStore||(this.localStore=b.localStore,this.sharedClientState=b.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!b.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>AI(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=AU.bind(null,this.syncEngine),await Af(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(a){return new Ao}createDatastore(a){var b,c,d,e,f;let g=zL(a.databaseInfo.databaseId),h=(b=a.databaseInfo,new zI(b));return c=a.authCredentials,d=a.appCheckCredentials,e=h,f=g,new zP(c,d,e,f)}createRemoteStore(f){var a,b,c,d,e;return a=this.localStore,b=this.datastore,c=f.asyncQueue,d=a=>AI(this.syncEngine,a,0),e=zF.C()?new zF:new zE,new zR(a,b,c,d,e)}createSyncEngine(a,b){return function(b,c,d,e,f,g,h){let a=new AC(b,c,d,e,f,g);return h&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,a.initialUser,a.maxConcurrentLimboResolutions,b)}terminate(){return async function(b){var c;let a=c=b;uC("RemoteStore","RemoteStore shutting down."),a._u.add(5),await zT(a),a.mu.shutdown(),a.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function A7(a,b,c){if(!c)throw new uI(uH.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${b}.`)}function A8(a){if(!aj.isDocumentKey(a))throw new uI(uH.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function A9(a){if(aj.isDocumentKey(a))throw new uI(uH.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Ba(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{var b;let c=(b=a).constructor?b.constructor.name:null;return c?`a custom ${c} object`:"an object"}}return"function"==typeof a?"a function":uG()}function Bb(a,b){if("_delegate"in a&&(a=a._delegate),!(a instanceof b)){if(b.name===a.constructor.name)throw new uI(uH.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let c=Ba(a);throw new uI(uH.INVALID_ARGUMENT,`Expected type '${b.name}', but it was: ${c}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let Bc=new Map;class Bd{constructor(a){var b;if(void 0===a.host){if(void 0!==a.ssl)throw new uI(uH.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=a.host,this.ssl=null===(b=a.ssl)|| void 0===b||b;if(this.credentials=a.credentials,this.ignoreUndefinedProperties=!!a.ignoreUndefinedProperties,void 0===a.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==a.cacheSizeBytes&&a.cacheSizeBytes<1048576)throw new uI(uH.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=a.cacheSizeBytes}this.experimentalForceLongPolling=!!a.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!a.experimentalAutoDetectLongPolling,this.useFetchStreams=!!a.useFetchStreams,function(a,b,c,d){if(!0===b&& !0===d)throw new uI(uH.INVALID_ARGUMENT,`${a} and ${c} cannot be used together.`)}("experimentalForceLongPolling",a.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",a.experimentalAutoDetectLongPolling)}isEqual(a){return this.host===a.host&&this.ssl===a.ssl&&this.credentials===a.credentials&&this.cacheSizeBytes===a.cacheSizeBytes&&this.experimentalForceLongPolling===a.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===a.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===a.ignoreUndefinedProperties&&this.useFetchStreams===a.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * The Cloud Firestore service interface.
 *
 * Do not call this constructor directly. Instead, use {@link (getFirestore:1)}.
 */ class ez{constructor(a,b,c,d){this._authCredentials=a,this._appCheckCredentials=b,this._databaseId=c,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new uI(uH.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(a){if(this._settingsFrozen)throw new uI(uH.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bd(a),void 0!==a.credentials&&(this._authCredentials=function(a){if(!a)return new uL;switch(a.type){case"gapi":let b=a.client;return new uP(b,a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new uI(uH.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(a.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(a){let b=Bc.get(a);b&&(uC("ComponentProvider","Removing Datastore"),Bc.delete(a),b.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A `DocumentReference` refers to a document location in a Firestore database
 * and can be used to write, read, or listen to the location. The document at
 * the referenced location may or may not exist.
 */ class Be{constructor(a,b,c){this.converter=b,this._key=c,this.type="document",this.firestore=a}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bf(this.firestore,this.converter,this._key.path.popLast())}withConverter(a){return new Be(this.firestore,a,this._key)}}class eA{constructor(a,b,c){this.converter=b,this._query=c,this.type="query",this.firestore=a}withConverter(a){return new eA(this.firestore,a,this._query)}}class Bf extends eA{constructor(b,c,a){super(b,c,wl(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let a=this._path.popLast();return a.isEmpty()?null:new Be(this.firestore,null,new aj(a))}withConverter(a){return new Bf(this.firestore,a,this._path)}}function Bg(a,b,...c){if(a=mR(a),A7("collection","path",b),a instanceof ez){let d=uX.fromString(b,...c);return A9(d),new Bf(a,null,d)}{if(!(a instanceof Be||a instanceof Bf))throw new uI(uH.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let e=a._path.child(uX.fromString(b,...c));return A9(e),new Bf(a.firestore,null,e)}}function Bh(a,b,...c){if(a=mR(a),1===arguments.length&&(b=uT.R()),A7("doc","path",b),a instanceof ez){let d=uX.fromString(b,...c);return A8(d),new Be(a,null,new aj(d))}{if(!(a instanceof Be||a instanceof Bf))throw new uI(uH.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let e=a._path.child(uX.fromString(b,...c));return A8(e),new Be(a.firestore,a instanceof Bf?a.converter:null,new aj(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * On web, a `ReadableStream` is wrapped around by a `ByteStreamReader`.
 */ /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /*
 * A wrapper implementation of Observer<T> that will dispatch events
 * asynchronously. To allow immediate silencing, a mute call is added which
 * causes events scheduled to no longer be raised.
 */ class Bi{constructor(a){this.observer=a,this.muted=!1}next(a){this.observer.next&&this.Rc(this.observer.next,a)}error(a){this.observer.error?this.Rc(this.observer.error,a):uD("Uncaught Error in snapshot listener:",a)}bc(){this.muted=!0}Rc(a,b){this.muted||setTimeout(()=>{this.muted||a(b)},0)}}class Bj{constructor(a,b){this._data=b,this.type="AggregateQuerySnapshot",this.query=a}data(){return this._data}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Internal transaction object responsible for accumulating the mutations to
 * perform and the base versions for any documents read.
 */ class Bk{constructor(a){this.datastore=a,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(b){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new uI(uH.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let a=await async function(c,a){var d;let b=d=c,e=xC(b.It)+"/documents",f={documents:a.map(a=>xy(b.It,a))},g=await b._o("BatchGetDocuments",e,f,a.length),i=new Map;g.forEach(e=>{var c,a;let d=(c=b.It,"found"in(a=e)?function(b,a){var f;a.found||uG(),a.found.name,a.found.updateTime;let c=xz(b,a.found.name),d=xv(a.found.updateTime),e=new vX({mapValue:{fields:a.found.fields}});return vZ.newFoundDocument(c,d,e)}(c,a):"missing"in a?function(b,a){var e,f;a.missing||uG(),!a.readTime&&uG();let c=xz(b,a.missing),d=xv(a.readTime);return vZ.newNoDocument(c,d)}(c,a):uG());i.set(d.key.toString(),d)});let h=[];return a.forEach(b=>{var c;let a=i.get(b.toString());a||uG(),h.push(a)}),h}(this.datastore,b);return a.forEach(a=>this.recordVersion(a)),a}set(a,b){this.write(b.toMutation(a,this.precondition(a))),this.writtenDocs.add(a.toString())}update(a,b){try{this.write(b.toMutation(a,this.preconditionForUpdate(a)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(a.toString())}delete(a){this.write(new w0(a,this.precondition(a))),this.writtenDocs.add(a.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let a=this.readVersions;this.mutations.forEach(b=>{a.delete(b.key.toString())}),a.forEach((c,b)=>{let a=aj.fromPath(b);this.mutations.push(new w1(a,this.precondition(a)))}),await async function(b,c){var d;let a=d=b,e=xC(a.It)+"/documents",f={writes:c.map(b=>xG(a.It,b))};await a.ao("Commit",e,f)}(this.datastore,this.mutations),this.committed=!0}recordVersion(a){let b;if(a.isFoundDocument())b=a.version;else{if(!a.isNoDocument())throw uG();b=uW.min()}let c=this.readVersions.get(a.key.toString());if(c){if(!b.isEqual(c))throw new uI(uH.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(a.key.toString(),b)}precondition(b){let a=this.readVersions.get(b.toString());return!this.writtenDocs.has(b.toString())&&a?a.isEqual(uW.min())?wQ.exists(!1):wQ.updateTime(a):wQ.none()}preconditionForUpdate(b){let a=this.readVersions.get(b.toString());if(!this.writtenDocs.has(b.toString())&&a){if(a.isEqual(uW.min()))throw new uI(uH.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wQ.updateTime(a)}return wQ.exists(!0)}write(a){this.ensureCommitNotCalled(),this.mutations.push(a)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * FirestoreClient is a top-level class that constructs and owns all of the
 * pieces of the client SDK architecture. It is responsible for creating the
 * async queue that is shared by all of the other components in the system.
 */ class Bl{constructor(b,c,a,d){this.authCredentials=b,this.appCheckCredentials=c,this.asyncQueue=a,this.databaseInfo=d,this.user=B.UNAUTHENTICATED,this.clientId=uT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,async a=>{uC("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(a,a=>(uC("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(a){this.authCredentialListener=a}setAppCheckTokenChangeListener(a){this.appCheckCredentialListener=a}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new uI(uH.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let a=new uJ;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),a.resolve()}catch(b){let c=Aj(b,"Failed to shutdown persistence");a.reject(c)}}),a.promise}}async function Bm(a,b){a.asyncQueue.verifyOperationInProgress(),uC("FirestoreClient","Initializing OfflineComponentProvider");let c=await a.getConfiguration();await b.initialize(c);let d=c.initialUser;a.setCredentialChangeListener(async a=>{d.isEqual(a)||(await zi(b.localStore,a),d=a)}),b.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=b}async function Bn(a,b){a.asyncQueue.verifyOperationInProgress();let c=await Bo(a);uC("FirestoreClient","Initializing OnlineComponentProvider");let d=await a.getConfiguration();await b.initialize(c,d),a.setCredentialChangeListener(a=>Ae(b.remoteStore,a)),a.setAppCheckTokenChangeListener((c,a)=>Ae(b.remoteStore,a)),a.onlineComponents=b}async function Bo(a){return a.offlineComponents||(uC("FirestoreClient","Using default OfflineComponentProvider"),await Bm(a,new A5)),a.offlineComponents}async function Bp(a){return a.onlineComponents||(uC("FirestoreClient","Using default OnlineComponentProvider"),await Bn(a,new A6)),a.onlineComponents}async function Bq(c){let a=await Bp(c),b=a.eventManager;return b.onListen=AD.bind(null,a.syncEngine),b.onUnlisten=AF.bind(null,a.syncEngine),b}class Br extends ez{constructor(b,c,d,a){super(b,c,d,a),this.type="firestore",this._queue=new class{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new zM(this,"async_queue_retry"),this.Wc=()=>{let a=zK();a&&uC("AsyncQueue","Visibility state changed to "+a.visibilityState),this.xo.Po()};let a=zK();a&&"function"==typeof a.addEventListener&&a.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(a){this.enqueue(a)}enqueueAndForgetEvenWhileRestricted(a){this.zc(),this.Hc(a)}enterRestrictedMode(b){if(!this.Uc){this.Uc=!0,this.Qc=b||!1;let a=zK();a&&"function"==typeof a.removeEventListener&&a.removeEventListener("visibilitychange",this.Wc)}}enqueue(a){if(this.zc(),this.Uc)return new Promise(()=>{});let b=new uJ;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(a().then(b.resolve,b.reject),b.promise)).then(()=>b.promise)}enqueueRetryable(a){this.enqueueAndForget(()=>(this.Lc.push(a),this.Jc()))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(a){if(!ve(a))throw a;uC("AsyncQueue","Operation failed with retryable error: "+a)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(b){let a=this.Bc.then(()=>(this.Gc=!0,b().catch(b=>{var a;this.Kc=b,this.Gc=!1;let c,d=(c=(a=b).message||"",a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c);throw uD("INTERNAL UNHANDLED ERROR: ",d),b}).then(a=>(this.Gc=!1,a))));return this.Bc=a,a}enqueueAfterDelay(a,b,d){this.zc(),this.jc.indexOf(a)> -1&&(b=0);let c=Ai.createAndSchedule(this,a,b,d,a=>this.Yc(a));return this.qc.push(c),c}zc(){this.Kc&&uG()}verifyOperationInProgress(){}async Xc(){let a;do await (a=this.Bc);while(a!==this.Bc)}Zc(a){for(let b of this.qc)if(b.timerId===a)return!0;return!1}ta(a){return this.Xc().then(()=>{for(let b of(this.qc.sort((a,b)=>a.targetTimeMs-b.targetTimeMs),this.qc))if(b.skipDelay(),"all"!==a&&b.timerId===a)break;return this.Xc()})}ea(a){this.jc.push(a)}Yc(a){let b=this.qc.indexOf(a);this.qc.splice(b,1)}},this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bs(this),this._firestoreClient.terminate()}}function Bs(a){var c,d,e,f,b;let g=a._freezeSettings(),h=(d=a._databaseId,e=(null===(c=a._app)|| void 0===c?void 0:c.options.appId)||"",f=a._persistenceKey,b=g,new vy(d,e,f,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));a._firestoreClient=new Bl(a._authCredentials,a._appCheckCredentials,a._queue,h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An immutable object representing an array of bytes.
 */ class Bt{constructor(a){this._byteString=a}static fromBase64String(a){try{return new Bt(bT.fromBase64String(a))}catch(b){throw new uI(uH.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+b)}}static fromUint8Array(a){return new Bt(bT.fromUint8Array(a))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(a){return this._byteString.isEqual(a._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A `FieldPath` refers to a field in a document. The path may consist of a
 * single field name (referring to a top-level field in the document), or a
 * list of field names (referring to a nested field in the document).
 *
 * Create a `FieldPath` by providing field names. If more than one field
 * name is provided, the path will point to a nested field in a document.
 */ class Bu{constructor(...a){for(let b=0;b<a.length;++b)if(0===a[b].length)throw new uI(uH.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new uZ(a)}isEqual(a){return this._internalPath.isEqual(a._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Sentinel values that can be used when writing document fields with `set()`
 * or `update()`.
 */ class Bv{constructor(a){this._methodName=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * An immutable object representing a geographic location in Firestore. The
 * location is represented as latitude/longitude pair.
 *
 * Latitude values are in the range of [-90, 90].
 * Longitude values are in the range of [-180, 180].
 */ class Bw{constructor(a,b){if(!isFinite(a)||a< -90||a>90)throw new uI(uH.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+a);if(!isFinite(b)||b< -180||b>180)throw new uI(uH.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+b);this._lat=a,this._long=b}get latitude(){return this._lat}get longitude(){return this._long}isEqual(a){return this._lat===a._lat&&this._long===a._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(a){return eq(this._lat,a._lat)||eq(this._long,a._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ let Bx=/^__.*__$/;class By{constructor(a,b,c){this.data=a,this.fieldMask=b,this.fieldTransforms=c}toMutation(a,b){return null!==this.fieldMask?new wY(a,this.data,this.fieldMask,b,this.fieldTransforms):new wX(a,this.data,b,this.fieldTransforms)}}class Bz{constructor(a,b,c){this.data=a,this.fieldMask=b,this.fieldTransforms=c}toMutation(a,b){return new wY(a,this.data,this.fieldMask,b,this.fieldTransforms)}}function BA(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uG()}}class BB{constructor(b,c,d,e,a,f){this.settings=b,this.databaseId=c,this.It=d,this.ignoreUndefinedProperties=e,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=f||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(a){return new BB(Object.assign(Object.assign({},this.settings),a),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(b){var a;let d=null===(a=this.path)|| void 0===a?void 0:a.child(b),c=this.ia({path:d,oa:!1});return c.ua(b),c}ca(c){var a;let d=null===(a=this.path)|| void 0===a?void 0:a.child(c),b=this.ia({path:d,oa:!1});return b.na(),b}aa(a){return this.ia({path:void 0,oa:!0})}ha(a){return BQ(a,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(a){return void 0!==this.fieldMask.find(b=>a.isPrefixOf(b))|| void 0!==this.fieldTransforms.find(b=>a.isPrefixOf(b.field))}na(){if(this.path)for(let a=0;a<this.path.length;a++)this.ua(this.path.get(a))}ua(a){if(0===a.length)throw this.ha("Document fields must not be empty");if(BA(this.sa)&&Bx.test(a))throw this.ha('Document fields cannot begin and end with "__"')}}class BC{constructor(a,b,c){this.databaseId=a,this.ignoreUndefinedProperties=b,this.It=c||zL(a)}da(a,b,c,d=!1){return new BB({sa:a,methodName:b,fa:c,path:uZ.emptyPath(),oa:!1,la:d},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function BD(a){let b=a._freezeSettings(),c=zL(a._databaseId);return new BC(a._databaseId,!!b.ignoreUndefinedProperties,c)}function BE(j,g,h,i,k,b={}){let a=j.da(b.merge||b.mergeFields?2:0,g,h,k);BM("Data must be an object, but it was:",a,i);let l=BK(i,a),c,d;if(b.merge)c=new vr(a.fieldMask),d=a.fieldTransforms;else if(b.mergeFields){let f=[];for(let m of b.mergeFields){let e=BN(g,m,h);if(!a.contains(e))throw new uI(uH.INVALID_ARGUMENT,`Field '${e}' is specified in your field mask but missing from your input data.`);BR(f,e)||f.push(e)}c=new vr(f),d=a.fieldTransforms.filter(a=>c.covers(a.field))}else c=null,d=a.fieldTransforms;return new By(new vX(l),c,d)}class BF extends null{_toFieldTransform(a){if(2!==a.sa)throw 1===a.sa?a.ha(`${this._methodName}() can only appear at the top level of your update data`):a.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return a.fieldMask.push(a.path),null}isEqual(a){return a instanceof BF}}function BG(b,a,c){return new BB({sa:3,fa:a.settings.fa,methodName:b._methodName,oa:c},a.databaseId,a.It,a.ignoreUndefinedProperties)}class BH extends null{_toFieldTransform(a){return new wO(a.path,new wG)}isEqual(a){return a instanceof BH}}function BI(a,b,c,d=!1){return BJ(c,a.da(d?4:3,b))}function BJ(b,a){if(BL(b=mR(b)))return BM("Unsupported field value:",a,b),BK(b,a);if(b instanceof Bv)return function(b,a){if(!BA(a.sa))throw a.ha(`${b._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${b._methodName}() is not currently supported inside arrays`);let c=b._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(b,a),null;if(void 0===b&&a.ignoreUndefinedProperties)return null;if(a.path&&a.fieldMask.push(a.path),b instanceof Array){if(a.settings.oa&&4!==a.sa)throw a.ha("Nested arrays are not supported");return function(d,e){let b=[],c=0;for(let f of d){let a=BJ(f,e.aa(c));null==a&&(a={nullValue:"NULL_VALUE"}),b.push(a),c++}return{arrayValue:{values:b}}}(b,a)}return function(a,b){if(null===(a=mR(a)))return{nullValue:"NULL_VALUE"};if("number"==typeof a)return wC(b.It,a);if("boolean"==typeof a)return{booleanValue:a};if("string"==typeof a)return{stringValue:a};if(a instanceof Date){let e=uV.fromDate(a);return{timestampValue:xt(b.It,e)}}if(a instanceof uV){let f=new uV(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:xt(b.It,f)}}if(a instanceof Bw)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Bt)return{bytesValue:xu(b.It,a._byteString)};if(a instanceof Be){let c=b.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw b.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xw(a.firestore._databaseId||b.databaseId,a._key.path)}}throw b.ha(`Unsupported field value: ${Ba(a)}`)}(b,a)}function BK(b,a){let c={};return vn(b)?a.path&&a.path.length>0&&a.fieldMask.push(a.path):vm(b,(b,e)=>{let d=BJ(e,a.ra(b));null!=d&&(c[b]=d)}),{mapValue:{fields:c}}}function BL(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof uV||a instanceof Bw||a instanceof Bt||a instanceof Be||a instanceof Bv)}function BM(c,d,b){var a;if(!BL(b)||"object"!=typeof(a=b)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){let e=Ba(b);throw"an object"===e?d.ha(c+" a custom object"):d.ha(c+" "+e)}}function BN(b,a,c){if((a=mR(a))instanceof Bu)return a._internalPath;if("string"==typeof a)return BP(b,a);throw BQ("Field path arguments must be of type string or ",b,!1,void 0,c)}let BO=RegExp("[~\\*/\\[\\]]");function BP(b,a,c){if(a.search(BO)>=0)throw BQ(`Invalid field path (${a}). Paths must not contain '~', '*', '/', '[', or ']'`,b,!1,void 0,c);try{return new Bu(...a.split("."))._internalPath}catch(d){throw BQ(`Invalid field path (${a}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,b,!1,void 0,c)}}function BQ(g,h,i,b,d){let e=b&&!b.isEmpty(),f=void 0!==d,c=`Function ${h}() called with invalid data`;i&&(c+=" (via `toFirestore()`)"),c+=". ";let a="";return(e||f)&&(a+=" (found",e&&(a+=` in field ${b}`),f&&(a+=` in document ${d}`),a+=")"),new uI(uH.INVALID_ARGUMENT,c+g+a)}function BR(a,b){return a.some(a=>a.isEqual(b))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * A `DocumentSnapshot` contains data read from a document in your Firestore
 * database. The data can be extracted with `.data()` or `.get(<field>)` to
 * get a specific field.
 *
 * For a `DocumentSnapshot` that points to a non-existing document, any data
 * access will return 'undefined'. You can use the `exists()` method to
 * explicitly verify a document's existence.
 */ class BS{constructor(a,b,c,d,e){this._firestore=a,this._userDataWriter=b,this._key=c,this._document=d,this._converter=e}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let a=new BT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(a)}return this._userDataWriter.convertValue(this._document.data.value)}}get(b){if(this._document){let a=this._document.data.field(BU("DocumentSnapshot.get",b));if(null!==a)return this._userDataWriter.convertValue(a)}}}class BT extends null{data(){return super.data()}}function BU(b,a){return"string"==typeof a?BP(b,a):a instanceof Bu?a._internalPath:a._delegate._internalPath}function BV(a,c,b,d){if(b[0]=getModularInstance(b[0]),b[0]instanceof BS)return function(e,f,g,b,h){if(!b)throw new uI(uH.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);let c=[];for(let a of wq(e))if(a.field.isKeyField())c.push(vL(f,b.key));else{let d=b.data.field(a.field);if(vw(d))throw new uI(uH.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){let i=a.field.canonicalString();throw new uI(uH.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${i}' (used as the orderBy) does not exist.`)}c.push(d)}return new we(c,h)}(a._query,a.firestore._databaseId,c,b[0]._document,d);{let e=BD(a.firestore);return function(d,i,j,b,e,k){let h=d.explicitOrderBy;if(e.length>h.length)throw new uI(uH.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let c=0;c<e.length;c++){let a=e[c];if(h[c].field.isKeyField()){if("string"!=typeof a)throw new uI(uH.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof a}`);if(!wp(d)&& -1!==a.indexOf("/"))throw new uI(uH.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${b}() must be a plain document ID, but '${a}' contains a slash.`);let g=d.path.child(uX.fromString(a));if(!aj.isDocumentKey(g))throw new uI(uH.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${b}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let l=new aj(g);f.push(vL(i,l))}else{let m=BI(j,b,a);f.push(m)}}return new we(f,k)}(a._query,a.firestore._databaseId,e,c,b,d)}}function BW(c,d,a){if("string"==typeof(a=getModularInstance(a))){if(""===a)throw new uI(uH.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wp(d)&& -1!==a.indexOf("/"))throw new uI(uH.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);let b=d.path.child(uX.fromString(a));if(!aj.isDocumentKey(b))throw new uI(uH.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${b}' is not because it has an odd number of segments (${b.length}).`);return vL(c,new aj(b))}if(a instanceof Be)return vL(c,a._key);throw new uI(uH.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ba(a)}.`)}function BX(a,b){if(!Array.isArray(a)||0===a.length)throw new uI(uH.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${b.toString()}' filters.`);if(a.length>10)throw new uI(uH.INVALID_ARGUMENT,`Invalid Query. '${b.toString()}' filters support a maximum of 10 elements in the value array.`)}function BY(c,a,b){if(!b.isEqual(a))throw new uI(uH.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${a.toString()}' and so you must also use '${a.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${b.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Converts custom model object of type T into `DocumentData` by applying the
 * converter if it exists.
 *
 * This function is used when converting user objects to `DocumentData`
 * because we want to provide the user with a more specific error message if
 * their `set()` or fails due to invalid data originating from a `toFirestore()`
 * call.
 */ function BZ(b,c,a){return b?a&&(a.merge||a.mergeFields)?b.toFirestore(c,a):b.toFirestore(c):c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Metadata about a snapshot, describing the state of the snapshot.
 */ class B${constructor(a,b){this.hasPendingWrites=a,this.fromCache=b}isEqual(a){return this.hasPendingWrites===a.hasPendingWrites&&this.fromCache===a.fromCache}}class B_ extends null{constructor(a,b,c,d,e,f){super(a,b,c,d,f),this._firestore=a,this._firestoreImpl=a,this.metadata=e}exists(){return super.exists()}data(a={}){if(this._document){if(this._converter){let b=new B0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(b,a)}return this._userDataWriter.convertValue(this._document.data.value,a.serverTimestamps)}}get(b,c={}){if(this._document){let a=this._document.data.field(BU("DocumentSnapshot.get",b));if(null!==a)return this._userDataWriter.convertValue(a,c.serverTimestamps)}}}class B0 extends null{data(a={}){return super.data(a)}}function B1(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uG()}}class B2 extends null{constructor(a){super(),this.firestore=a}convertBytes(a){return new Bt(a)}convertReference(a){let b=this.convertDocumentKey(a,this.firestore._databaseId);return new Be(this.firestore,null,b)}}function B3(a,d,b){a=Bb(a,Be);let c=Bb(a.firestore,Br),e=BZ(a.converter,d,b);return B6(c,[BE(BD(c),"setDoc",a._key,e,null!==a.converter,b).toMutation(a._key,wQ.none())])}function B4(a){return B6(Bb(a.firestore,Br),[new w0(a._key,wQ.none())])}function B5(a,c){let d=Bb(a.firestore,Br),b=Bh(a),e=BZ(a.converter,c);return B6(d,[BE(BD(a.firestore),"addDoc",b._key,e,null!==a.converter,{}).toMutation(b._key,wQ.exists(!1))]).then(()=>b)}function B6(b,c){var a;return function(a,c){let b=new uJ;return a.asyncQueue.enqueueAndForget(async()=>{var d;return AG(await (d=a,Bp(d).then(a=>a.syncEngine)),c,b)}),b.promise}((a=b,a._firestoreClient||Bs(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient),c)}function B7(a,b){if((a=getModularInstance(a)).firestore!==b)throw new uI(uH.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function B8(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function B9(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){B8(g,e,f,d,h,"next",a)}function h(a){B8(g,e,f,d,h,"throw",a)}d(void 0)})}}!function(a,b=!0){var c;uz=np,A(new z("firestore",(a,{instanceIdentifier:f,options:c})=>{let d=a.getProvider("app").getImmediate(),e=new Br(new uN(a.getProvider("auth-internal")),new uR(a.getProvider("app-check-internal")),function(a,b){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new uI(uH.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vz(a.options.projectId,b)}(d,f),d);return c=Object.assign({useFetchStreams:b},c),e._setSettings(c),e},"PUBLIC").setMultipleInstances(!0)),p(uy,"3.7.2",void 0),p(uy,"3.7.2","esm2017")}();var eB=e(4051),Ca=e.n(eB),Cb=function(a){switch(a){case oS.FACEBOOK:return new bu;case oS.GOOGLE:return new bv;case oS.TWITTER:return new bx;default:return null}},Cc=function(a,b,c){return new Promise(function(d,e){q4(a,b).then(function(a){bv.credentialFromResult(a).accessToken,a.user,d(a)}).catch(function(b){Cd(d,e,a,b,c)})})},Cd=function(e,b,c,a,f){if("auth/account-exists-with-different-credential"===a.code||"auth/email-already-in-use"===a.code){var g=a.credential,d=a.email;qv(c,d).then(function(h){if("password"===h[0])f?qt(c,d,f()).then(function(a){return qm(a.user,g)}).then(function(a){e(a)}).catch(function(a){b(a)}):b(a);else{var i=Cb(h[0]);q4(c,i).then(function(a){return qm(a.user,g)}).then(function(a){e(a)}).catch(function(a){b(a)})}}).catch(function(a){b(a)})}else b(a)},Ce=(0,i.createContext)({}),Cf=function(q){var j,k,b=(0,i.useState)(),l=b[0],r=b[1],c=(0,i.useState)(),m=c[0],s=c[1],d=(0,i.useState)(),a=d[0],t=d[1],e=(0,i.useState)(),f=e[0],u=e[1],g=(0,i.useState)(),n=g[0],o=g[1],h=(0,i.useState)(!0),p=h[0],v=h[1];return(0,i.useEffect)(function(){a?(o(a.currentUser),function(a,b,c,d){return mR(a).onAuthStateChanged(b,void 0,void 0)}(a,function(a){a?o(a):o(null),v(!1)})):v(!0)},[a]),(0,i.useEffect)(function(){var a=nq(q);r(a),s(function(a=nr()){a=mR(a);let b=nm(a,d0);return b.isInitialized()?b.getImmediate():function f(c,b={}){let a=nm(c,d0);if(a.isInitialized()){let d=a.getImmediate();if(mI(b,a.getOptions()))return d;throw ox.create("already-initialized")}let e=a.initialize({options:b});return e}(a)}(a)),t(function(b=nr()){let c=nm(b,"auth");if(c.isInitialized())return c.getImmediate();let a=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ /**
 * Initializes an {@link Auth} instance with fine-grained control over
 * {@link Dependencies}.
 *
 * @remarks
 *
 * This function allows more control over the {@link Auth} instance than
 * {@link getAuth}. `getAuth` uses platform-specific defaults to supply
 * the {@link Dependencies}. In general, `getAuth` is the easiest way to
 * initialize Auth and works for most use cases. Use `initializeAuth` if you
 * need control over which persistence layer is used, or to minimize bundle
 * size if you're not using either `signInWithPopup` or `signInWithRedirect`.
 *
 * For example, if your app only uses anonymous accounts and you only want
 * accounts saved for the current session, initialize `Auth` with:
 *
 * ```js
 * const auth = initializeAuth(app, {
 *   persistence: browserSessionPersistence,
 *   popupRedirectResolver: undefined,
 * });
 * ```
 *
 * @public
 */ function(d,b){let a=nm(d,"auth");if(a.isInitialized()){let c=a.getImmediate(),e=a.getOptions();if(mI(e,null!=b?b:{}))return c;oX(c,"already-initialized")}let f=a.initialize({options:b});return f}(b,{popupRedirectResolver:ry,persistence:[qU,qF,qG]}),d=d$("authTokenSyncURL");if(d){let f=rD(d);(function(a,b,c){mR(a).beforeAuthStateChanged(b,c)})(a,f,()=>f(a.currentUser)),function(a,b,c,d){mR(a).onIdTokenChanged(b,void 0,void 0)}(a,a=>f(a))}let e=mB("auth");return e&&function(h,b,d){let a=pP(h);o0(a._canInitEmulator,a,"emulator-config-failed"),o0(/^https?:\/\//.test(b),a,"invalid-emulator-scheme");let e=!!(null==d?void 0:d.disableWarnings),f=pR(b),{host:g,port:c}=function i(b){let f=pR(b),c=/(\/\/)?([^?#/]+)/.exec(b.substr(f.length));if(!c)return{host:"",port:null};let a=c[2].split("@").pop()||"",d=/^(\[[^\]]+\])(:|$)/.exec(a);if(d){let e=d[1];return{host:e,port:pS(a.substr(e.length+1))}}{let[g,h]=a.split(":");return{host:g,port:pS(h)}}}(b),i=null===c?"":`:${c}`;a.config.emulator={url:`${f}//${g}${i}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:g,port:c,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:e})}),e||function b(){function a(){let b=document.createElement("p"),a=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a())}()}(a,`http://${e}`),a}(a)),u(function(a,e){let d="object"==typeof a?a:nr(),b=nm(d,"firestore").getImmediate({identifier:"string"==typeof a?a:"(default)"});if(!b._initialized){let c=mC("firestore");c&&function(b,g,i,a={}){var c;let d=(b=Bb(b,ez))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==g&&uE("Host has been set in both settings() and useEmulator(), emulator host will be used"),b._setSettings(Object.assign(Object.assign({},d),{host:`${g}:${i}`,ssl:!1})),a.mockUserToken){let e,f;if("string"==typeof a.mockUserToken)e=a.mockUserToken,f=B.MOCK_USER;else{e=/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ function(a,e){if(a.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let d=e||"demo-project",b=a.iat||0,c=a.sub||a.user_id;if(!c)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let f=Object.assign({iss:`https://securetoken.google.com/${d}`,aud:d,iat:b,exp:b+3600,auth_time:b,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},a);return[mp(JSON.stringify({alg:"none",type:"JWT"})),mp(JSON.stringify(f)),""].join(".")}(a.mockUserToken,null===(c=b._app)|| void 0===c?void 0:c.options.projectId);let h=a.mockUserToken.sub||a.mockUserToken.user_id;if(!h)throw new uI(uH.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new B(h)}b._authCredentials=new uM(new uK(e,f))}}(b,...c)}return b}(a))},[]),{app:l,analytics:m,auth:a?{service:j=a,emailPassUp:function(a,b){return qs(j,a,b)},emailPassIn:function(a,b){return qt(j,a,b)},phoneIn:function(a,b){return qY(j,a,b)},updateProfile:function(a){return qy(j.currentUser,a)},changeEmail:function(c){var a,b;return a=j.currentUser,b=c,qz(mR(a),b,null)},changePassword:function(c){var a,b;return a=j.currentUser,b=c,qz(mR(a),null,b)},deleteAccount:function(){return qA(j.currentUser)},verifyEmail:function(a){return qw(j.currentUser,a?{url:a}:null)},sendPassResetMail:function(b,a){return qp(j,b,a?{url:a}:null)},verifyPassResetCode:function(a){return qr(j,a)},signOut:function(){return j.signOut()},googleSignIn:function(a){var b=Cb(oS.GOOGLE);return Cc(j,b,a)},facebookSignIn:function(a){var b=Cb(oS.FACEBOOK);return Cc(j,b,a)},twitterSignIn:function(a){var b=Cb(oS.TWITTER);return Cc(j,b,a)}}:null,db:f?{service:k=f,insert:function(d,e,a,f){var b,c;return a?new Promise((b=B9(Ca().mark(function b(c,g){var h;return Ca().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,h=Bh(k,e,a),b.next=4,B3(h,d,{merge:f});case 4:h=b.sent,console.log("Document written with ID: ",h),c(h),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(0),g(b.t0);case 12:case"end":return b.stop()}},b,null,[[0,9]])})),function(a,c){return b.apply(this,arguments)})):new Promise((c=B9(Ca().mark(function a(b,c){var f,g;return Ca().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,f=Bg(k,e),a.next=4,B5(f,d);case 4:g=a.sent,console.log("Document written with ID: ",g),b(g),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),c(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(a,b){return c.apply(this,arguments)}))},selectAll:function(b){var a;return new Promise((a=B9(Ca().mark(function a(c,d){var e,f;return Ca().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,getDocs(Bg(db,b));case 3:e=a.sent,f=[],e.forEach(function(a){f.push(a)}),c(f),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),d(a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(b,c){return a.apply(this,arguments)}))},deleteById:function(b,c){var a;return new Promise((a=B9(Ca().mark(function a(d,e){var f;return Ca().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B4(Bh(k,"".concat(c,"/").concat(b)));case 3:d(f=a.sent),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e(a.t0);case 10:case"end":return a.stop()}},a,null,[[0,7]])})),function(b,c){return a.apply(this,arguments)}))}}:null,user:n,setUser:o,authLoading:p}},Cg=function(a){var b=a.firebaseConfig,c=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["firebaseConfig"]),d=Cf(b);return(0,eG.jsx)(Ce.Provider,(0,eF.Z)({value:d},c))},Ch={apiKey:"AIzaSyAe8ruqfdLSFSbHq61bzB6peZ28ZTUqrRo",authDomain:"nnu-reader.firebaseapp.com",projectId:"nnu-reader",storageBucket:"nnu-reader.appspot.com",messagingSenderId:"382484150686",appId:"1:382484150686:web:a9749a6312940a9737be8f"},Ci=function(a){var b=a.Component,c=a.pageProps;return(0,eG.jsx)(Cg,{firebaseConfig:Ch,children:(0,eG.jsx)(dZ,{theme:mh,children:(0,eG.jsx)(b,(0,eF.Z)({},c))})})}},906:function(){},7663:function(a){!function(){var d={308:function(c){var e,f,g,a=c.exports={};function h(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function j(a){if(e===setTimeout)return setTimeout(a,0);if((e===h||!e)&&setTimeout)return e=setTimeout,setTimeout(a,0);try{return e(a,0)}catch(b){try{return e.call(null,a,0)}catch(c){return e.call(this,a,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:h}catch(a){e=h}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(b){f=i}}();var k=[],l=!1,m=-1;function n(){l&&g&&(l=!1,g.length?k=g.concat(k):m=-1,k.length&&o())}function o(){if(!l){var b=j(n);l=!0;for(var a=k.length;a;){for(g=k,k=[];++m<a;)g&&g[m].run();m=-1,a=k.length}g=null,l=!1,function(a){if(f===clearTimeout)return clearTimeout(a);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(a);try{f(a)}catch(b){try{return f.call(null,a)}catch(c){return f.call(this,a)}}}(b)}}function d(a,b){this.fun=a,this.array=b}function b(){}a.nextTick=function(c){var b=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)b[a-1]=arguments[a];k.push(new d(c,b)),1!==k.length||l||j(o)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=b,a.addListener=b,a.once=b,a.off=b,a.removeListener=b,a.removeAllListeners=b,a.emit=b,a.prependListener=b,a.prependOnceListener=b,a.listeners=function(a){return[]},a.binding=function(a){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(a){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},e={};function b(a){var f=e[a];if(void 0!==f)return f.exports;var c=e[a]={exports:{}},g=!0;try{d[a](c,c.exports,b),g=!1}finally{g&&delete e[a]}return c.exports}b.ab="//";var c=b(308);a.exports=c}()},9590:function(a){var b="undefined"!=typeof Element,c="function"==typeof Map,d="function"==typeof Set,e="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function f(a,g){if(a===g)return!0;if(a&&g&&"object"==typeof a&&"object"==typeof g){var i,h,j,k;if(a.constructor!==g.constructor)return!1;if(Array.isArray(a)){if((i=a.length)!=g.length)return!1;for(h=i;0!=h--;)if(!f(a[h],g[h]))return!1;return!0}if(c&&a instanceof Map&&g instanceof Map){if(a.size!==g.size)return!1;for(k=a.entries();!(h=k.next()).done;)if(!g.has(h.value[0]))return!1;for(k=a.entries();!(h=k.next()).done;)if(!f(h.value[1],g.get(h.value[0])))return!1;return!0}if(d&&a instanceof Set&&g instanceof Set){if(a.size!==g.size)return!1;for(k=a.entries();!(h=k.next()).done;)if(!g.has(h.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(g)){if((i=a.length)!=g.length)return!1;for(h=i;0!=h--;)if(a[h]!==g[h])return!1;return!0}if(a.constructor===RegExp)return a.source===g.source&&a.flags===g.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===g.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===g.toString();if((i=(j=Object.keys(a)).length)!==Object.keys(g).length)return!1;for(h=i;0!=h--;)if(!Object.prototype.hasOwnProperty.call(g,j[h]))return!1;if(b&&a instanceof Element)return!1;for(h=i;0!=h--;)if(("_owner"!==j[h]&&"__v"!==j[h]&&"__o"!==j[h]||!a.$$typeof)&&!f(a[j[h]],g[j[h]]))return!1;return!0}return a!=a&&g!=g}a.exports=function(b,c){try{return f(b,c)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}}},9921:function(r,a){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,i=b?Symbol.for("react.context"):60110,j=b?Symbol.for("react.async_mode"):60111,k=b?Symbol.for("react.concurrent_mode"):60111,l=b?Symbol.for("react.forward_ref"):60112,m=b?Symbol.for("react.suspense"):60113,s=b?Symbol.for("react.suspense_list"):60120,n=b?Symbol.for("react.memo"):60115,o=b?Symbol.for("react.lazy"):60116,t=b?Symbol.for("react.block"):60121,u=b?Symbol.for("react.fundamental"):60117,v=b?Symbol.for("react.responder"):60118,w=b?Symbol.for("react.scope"):60119;function p(a){if("object"==typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type){case j:case k:case e:case g:case f:case m:return a;default:switch(a=a&&a.$$typeof){case i:case l:case o:case n:case h:return a;default:return b}}case d:return b}}}function q(a){return p(a)===k}a.AsyncMode=j,a.ConcurrentMode=k,a.ContextConsumer=i,a.ContextProvider=h,a.Element=c,a.ForwardRef=l,a.Fragment=e,a.Lazy=o,a.Memo=n,a.Portal=d,a.Profiler=g,a.StrictMode=f,a.Suspense=m,a.isAsyncMode=function(a){return q(a)||p(a)===j},a.isConcurrentMode=q,a.isContextConsumer=function(a){return p(a)===i},a.isContextProvider=function(a){return p(a)===h},a.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},a.isForwardRef=function(a){return p(a)===l},a.isFragment=function(a){return p(a)===e},a.isLazy=function(a){return p(a)===o},a.isMemo=function(a){return p(a)===n},a.isPortal=function(a){return p(a)===d},a.isProfiler=function(a){return p(a)===g},a.isStrictMode=function(a){return p(a)===f},a.isSuspense=function(a){return p(a)===m},a.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===k||a===g||a===f||a===m||a===s||"object"==typeof a&&null!==a&&(a.$$typeof===o||a.$$typeof===n||a.$$typeof===h||a.$$typeof===i||a.$$typeof===l||a.$$typeof===u||a.$$typeof===v||a.$$typeof===w||a.$$typeof===t)},a.typeOf=p},9864:function(a,c,b){"use strict";a.exports=b(9921)},1742:function(a){a.exports=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var b=document.activeElement,d=[],c=0;c<a.rangeCount;c++)d.push(a.getRangeAt(c));switch(b.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":b.blur();break;default:b=null}return a.removeAllRanges(),function(){"Caret"===a.type&&a.removeAllRanges(),a.rangeCount||d.forEach(function(b){a.addRange(b)}),b&&b.focus()}}},7462:function(c,a,b){"use strict";function d(){return(d=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}b.d(a,{Z:function(){return d}})},1799:function(c,a,b){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(e){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){d(e,a,c[a])})}return e}b.d(a,{Z:function(){return e}})}},function(a){var b=function(b){return a(a.s=b)};a.O(0,[774,179],function(){return b(1118),b(387)}),_N_E=a.O()}])